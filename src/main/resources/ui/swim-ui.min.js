// swim-ui-3.11.0-dev.20200517; copyright 2015-2020 SWIM.AI inc.
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@swim/codec"),require("@swim/structure"),require("@swim/util"),require("@swim/interpolate"),require("@swim/time"),require("@swim/math")):"function"==typeof define&&define.amd?define(["exports","@swim/codec","@swim/structure","@swim/util","@swim/interpolate","@swim/time","@swim/math"],e):e((t=t||self).swim=t.swim||{},t.swim,t.swim,t.swim,t.swim,t.swim,t.swim)}(this,(function(t,e,i,r,n,o,s){"use strict";var a=function(){function t(){}return t.prototype.isDefined=function(){return 0!==this.value},t.prototype.plus=function(e,i){return void 0===i&&(i=this.units),t.from(this.toValue(i)+t.fromAny(e).toValue(i),i)},t.prototype.opposite=function(e){return void 0===e&&(e=this.units),t.from(-this.toValue(e),e)},t.prototype.minus=function(e,i){return void 0===i&&(i=this.units),t.from(this.toValue(i)-t.fromAny(e).toValue(i),i)},t.prototype.times=function(e,i){return void 0===i&&(i=this.units),t.from(this.toValue(i)*e,i)},t.prototype.divide=function(e,i){return void 0===i&&(i=this.units),t.from(this.toValue(i)/e,i)},t.prototype.norm=function(e,i){return void 0===i&&(i=this.units),t.from(this.toValue(i)/t.fromAny(e).toValue(i),i)},t.prototype.deg=function(){return t.deg(this.degValue())},t.prototype.rad=function(){return t.rad(this.radValue())},t.prototype.grad=function(){return t.grad(this.gradValue())},t.prototype.turn=function(){return t.turn(this.turnValue())},t.prototype.toValue=function(t){switch(t){case"deg":return this.degValue();case"grad":return this.gradValue();case"rad":return this.radValue();case"turn":return this.turnValue();default:throw new Error("unknown angle units: "+t)}},t.prototype.to=function(t){switch(t){case"deg":return this.deg();case"grad":return this.grad();case"rad":return this.rad();case"turn":return this.turn();default:throw new Error("unknown angle units: "+t)}},t.zero=function(e){switch(void 0===e&&(e="rad"),e){case"deg":return t.Deg.zero();case"rad":return t.Rad.zero();case"grad":return t.Grad.zero();case"turn":return t.Turn.zero();default:throw new Error("unknown angle units: "+e)}},t.deg=function(e){return new t.Deg(e)},t.rad=function(e){return new t.Rad(e)},t.grad=function(e){return new t.Grad(e)},t.turn=function(e){return new t.Turn(e)},t.from=function(e,i){switch(void 0===i&&(i="rad"),i){case"deg":return t.deg(e);case"rad":return t.rad(e);case"grad":return t.grad(e);case"turn":return t.turn(e);default:throw new Error("unknown angle units: "+i)}},t.fromAny=function(e,i){if(e instanceof t)return e;if("number"==typeof e)return t.from(e,i);if("string"==typeof e)return t.parse(e,i);throw new TypeError(""+e)},t.fromValue=function(e){if(2===e.length){var r=e.getItem(0).numberValue(),n=e.getItem(1);if(void 0!==r&&isFinite(r)&&n instanceof i.Attr&&n.toValue()===i.Value.extant())switch(n.key.value){case"deg":return t.deg(r);case"rad":return t.rad(r);case"grad":return t.grad(r);case"turn":return t.turn(r)}}},t.parse=function(i,r){for(var n=e.Unicode.stringInput(i);n.isCont()&&e.Unicode.isWhitespace(n.head());)n=n.step();var o=t.Parser.parse(n,r);if(o.isDone())for(;n.isCont()&&e.Unicode.isWhitespace(n.head());)n=n.step();return n.isCont()&&!o.isError()&&(o=e.Parser.error(e.Diagnostic.unexpected(n))),o.bind()},t.isAny=function(e){return e instanceof t||"number"==typeof e||"string"==typeof e},t.form=function(e,i){return void 0!==i&&(i=t.fromAny(i)),void 0!==e||void 0!==i?new t.Form(e,i):(void 0===t._form&&(t._form=new t.Form),t._form)},t.PI=Math.PI,t.TAU=2*t.PI,t}(),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function l(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function h(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s}var c=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return l(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return"deg"},enumerable:!1,configurable:!0}),e.prototype.degValue=function(){return this._value},e.prototype.gradValue=function(){return 10*this._value/9},e.prototype.radValue=function(){return this._value*a.PI/180},e.prototype.turnValue=function(){return this._value/360},e.prototype.deg=function(){return this},e.prototype.equals=function(t){return t instanceof e&&this._value===t._value},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this._value)))},e.prototype.debug=function(t){t=t.write("Angle").write(46).write("deg").write(40).debug(this._value).write(41)},e.prototype.toString=function(){return this._value+"deg"},e.zero=function(t){return void 0===e._zero&&(e._zero=new e(0)),e._zero},e}(a);a.Deg=c;var d=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return l(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return"rad"},enumerable:!1,configurable:!0}),e.prototype.degValue=function(){return 180*this._value/a.PI},e.prototype.gradValue=function(){return 200*this._value/a.PI},e.prototype.radValue=function(){return this._value},e.prototype.turnValue=function(){return this._value/a.TAU},e.prototype.rad=function(){return this},e.prototype.equals=function(t){return t instanceof e&&this._value===t._value},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this._value)))},e.prototype.debug=function(t){t=t.write("Angle").write(46).write("rad").write(40).debug(this._value).write(41)},e.prototype.toString=function(){return this._value+"rad"},e.zero=function(t){return void 0===e._zero&&(e._zero=new e(0)),e._zero},e}(a);a.Rad=d;var p=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return l(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return"grad"},enumerable:!1,configurable:!0}),e.prototype.degValue=function(){return.9*this._value},e.prototype.gradValue=function(){return this._value},e.prototype.radValue=function(){return this._value*a.PI/200},e.prototype.turnValue=function(){return this._value/400},e.prototype.grad=function(){return this},e.prototype.equals=function(t){return t instanceof e&&this._value===t._value},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this._value)))},e.prototype.debug=function(t){t=t.write("Angle").write(46).write("grad").write(40).debug(this._value).write(41)},e.prototype.toString=function(){return this._value+"grad"},e.zero=function(t){return void 0===e._zero&&(e._zero=new e(0)),e._zero},e}(a);a.Grad=p;var f=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return l(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return"turn"},enumerable:!1,configurable:!0}),e.prototype.degValue=function(){return 360*this._value},e.prototype.gradValue=function(){return 400*this._value},e.prototype.radValue=function(){return this._value*a.TAU},e.prototype.turnValue=function(){return this._value},e.prototype.turn=function(){return this},e.prototype.equals=function(t){return t instanceof e&&this._value===t._value},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this._value)))},e.prototype.debug=function(t){t=t.write("Angle").write(46).write("turn").write(40).debug(this._value).write(41)},e.prototype.toString=function(){return this._value+"turn"},e.zero=function(t){return void 0===e._zero&&(e._zero=new e(0)),e._zero},e}(a);a.Turn=f;var v=function(t){function i(e,i,r,n){var o=t.call(this)||this;return o._defaultUnits=e,o._valueParser=i,o._unitsOutput=r,o._step=n,o}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this._defaultUnits,this._valueParser,this._unitsOutput,this._step)},i.parse=function(t,r,n,o,s){void 0===s&&(s=1);var u=0;if(1===s)if((n=void 0===n?e.Base10.parseDecimal(t):n.feed(t)).isDone())s=2;else if(n.isError())return n.asError();if(2===s){for(o=o||e.Unicode.stringOutput();t.isCont()&&(u=t.head(),e.Unicode.isAlpha(u));)t=t.step(),o.push(u);if(!t.isEmpty()){var l=n.bind(),h=o.bind()||r;switch(h){case"deg":return e.Parser.done(a.deg(l));case"":case"rad":return e.Parser.done(a.rad(l));case"grad":return e.Parser.done(a.grad(l));case"turn":return e.Parser.done(a.turn(l));default:return e.Parser.error(e.Diagnostic.message("unknown units: "+h,t))}}}return new i(r,n,o,s)},i}(e.Parser);a.Parser=v;var y=function(t){function e(e,i){var r=t.call(this)||this;return r.units=i.units,r.v0=e.toValue(r.units),r.dv=i.value-r.v0,r}return l(e,t),e.prototype.interpolate=function(t){return a.from(this.v0+this.dv*t,this.units)},e.prototype.deinterpolate=function(t){var e=a.fromAny(t).toValue(this.units);return 0!==this.dv?(e-this.v0)/this.dv:this.dv},e.prototype.range=function(t,i){return void 0===t?[a.from(this.v0,this.units),a.from(this.v0+this.dv,this.units)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.v0===t.v0&&this.dv===t.dv&&this.units===t.units)},e.between=function(t,i){return t instanceof a&&i instanceof a?new e(t,i):a.isAny(t)&&a.isAny(i)?new e(a.fromAny(t),a.fromAny(i)):n.Interpolator.between(t,i)},e.tryBetween=function(t,i){return t instanceof a&&i instanceof a?new e(t,i):null},e}(n.Interpolator);n.Interpolator.registerFactory(y);var m=function(t){function e(e,i){var r=t.call(this)||this;return r._defaultUnits=e,r._unit=i,r}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?void 0!==this._unit?this._unit:a.zero(this._defaultUnits):new e(this._defaultUnits,t)},e.prototype.mold=function(t){return t=a.fromAny(t,this._defaultUnits),i.Text.from(t.toString())},e.prototype.cast=function(t){var e,i=t.toValue();try{if(void 0===(e=a.fromValue(i))){var r=i.stringValue(void 0);void 0!==r&&(e=a.parse(r,this._defaultUnits))}}catch(t){}return e},e}(i.Form);a.Form=m;var w=function(){function t(){}return t.prototype.isDefined=function(){return 0!==this.value},t.prototype.plus=function(e,i){return void 0===i&&(i=this.units),t.from(this.toValue(i)+t.fromAny(e).toValue(i),i)},t.prototype.opposite=function(e){return void 0===e&&(e=this.units),t.from(-this.toValue(e),e)},t.prototype.minus=function(e,i){return void 0===i&&(i=this.units),t.from(this.toValue(i)-t.fromAny(e).toValue(i),i)},t.prototype.times=function(e,i){return void 0===i&&(i=this.units),t.from(this.toValue(i)*e,i)},t.prototype.divide=function(e,i){return void 0===i&&(i=this.units),t.from(this.toValue(i)/e,i)},t.prototype.emValue=function(){return this.pxValue()/t.emUnit(this.node)},t.prototype.remValue=function(){return this.pxValue()/t.remUnit()},t.prototype.pctValue=function(){return this.px().value/this.unitValue()},t.prototype.px=function(e){return t.px(this.pxValue(e),this.node)},t.prototype.em=function(){return t.em(this.emValue(),this.node)},t.prototype.rem=function(){return t.rem(this.remValue(),this.node)},t.prototype.pct=function(){return t.pct(this.pctValue(),this.node)},t.prototype.toValue=function(t){switch(t){case"px":return this.pxValue();case"em":return this.emValue();case"rem":return this.remValue();case"%":return this.pctValue();default:throw new Error("unknown length units: "+t)}},t.prototype.to=function(t){switch(t){case"px":return this.px();case"em":return this.em();case"rem":return this.rem();case"%":return this.pct();default:throw new Error("unknown length units: "+t)}},t.zero=function(e,i){switch("string"!=typeof e&&(i=e,e="px"),e){case"px":return t.Px.zero(i);case"em":return t.Em.zero(i);case"rem":return t.Rem.zero(i);case"%":return t.Pct.zero(i);case"":return t.Unitless.zero(i);default:throw new Error("unknown length units: "+e)}},t.px=function(e,i){return new t.Px(e,i)},t.em=function(e,i){return new t.Em(e,i)},t.rem=function(e,i){return new t.Rem(e,i)},t.pct=function(e,i){return new t.Pct(e,i)},t.unitless=function(e,i){return new t.Unitless(e,i)},t.from=function(e,i,r){switch("string"!=typeof i&&(r=i,i="px"),i){case"px":return t.px(e,r);case"em":return t.em(e,r);case"rem":return t.rem(e,r);case"%":return t.pct(e,r);case"":return t.unitless(e,r);default:throw new Error("unknown length units: "+i)}},t.fromAny=function(e,i,r){if("string"!=typeof i&&(r=i,i=void 0),e instanceof t)return e;if("number"==typeof e)return t.from(e,i,r);if("string"==typeof e&&"string"!=typeof i)return t.parse(e,i,r);throw new TypeError(""+e)},t.fromValue=function(e,r){if(2===e.length){var n=e.getItem(0).numberValue(void 0),o=e.getItem(1);if(void 0!==n&&isFinite(n)&&o instanceof i.Attr&&o.toValue()===i.Value.extant())switch(o.key.value){case"px":return t.px(n,r);case"em":return t.em(n,r);case"rem":return t.rem(n,r);case"pct":return t.pct(n,r)}}},t.parse=function(i,r,n){"string"!=typeof r&&(n=r,r=void 0);for(var o=e.Unicode.stringInput(i);o.isCont()&&e.Unicode.isWhitespace(o.head());)o=o.step();var s=t.Parser.parse(o,r,n);if(s.isDone())for(;o.isCont()&&e.Unicode.isWhitespace(o.head());)o=o.step();return o.isCont()&&!s.isError()&&(s=e.Parser.error(e.Diagnostic.unexpected(o))),s.bind()},t.isAny=function(e){return e instanceof t||"number"==typeof e||"string"==typeof e},t.form=function(e,i,r){return void 0===i&&(i=null),void 0!==r&&(r=t.fromAny(r)),void 0!==e||null!==i||void 0!==r?new t.Form(e,i,r):(void 0===t._form&&(t._form=new t.Form),t._form)},t.widthUnit=function(t){for(;null!==t;){if(t instanceof HTMLElement&&t.offsetParent instanceof HTMLElement)return t.offsetParent.offsetWidth;t=t.parentNode}return 0},t.emUnit=function(t){for(;null!==t;){if(t instanceof Element){var e=getComputedStyle(t).fontSize;if(null!==e)return parseFloat(e)}t=t.parentNode}return 0},t.remUnit=function(){var t=getComputedStyle(document.documentElement).fontSize;return null!==t?parseFloat(t):0},t}(),g=function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this)||this;return r._value=e,null!==i&&(r._node=i),r}return l(e,t),e.prototype.isRelative=function(){return!1},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return"px"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){var t=this._node;return void 0!==t?t:null},enumerable:!1,configurable:!0}),e.prototype.unitValue=function(){return 1},e.prototype.pxValue=function(){return this._value},e.prototype.px=function(){return this},e.prototype.equals=function(t){return t instanceof e&&(this._value===t._value&&this._node===t._node)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this._value)))},e.prototype.debug=function(t){t=t.write("Length").write(46).write("px").write(40).debug(this._value),void 0!==this._node&&(t=t.write(", ").debug(this._node)),t=t.write(41)},e.prototype.toString=function(){return this._value+"px"},e.zero=function(t,i){return"string"!=typeof t&&(i=t,t="px"),null==i?(void 0===e._zero&&(e._zero=new e(0)),e._zero):new e(0,i)},e}(w);w.Px=g;var _=function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this)||this;return r._value=e,null!==i&&(r._node=i),r}return l(e,t),e.prototype.isRelative=function(){return!1},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return"em"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){var t=this._node;return void 0!==t?t:null},enumerable:!1,configurable:!0}),e.prototype.unitValue=function(){return w.emUnit(this.node)},e.prototype.pxValue=function(){return this.unitValue()*this._value},e.prototype.emValue=function(){return this._value},e.prototype.em=function(){return this},e.prototype.equals=function(t){return t instanceof e&&(this._value===t._value&&this._node===t._node)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this._value)))},e.prototype.debug=function(t){t=t.write("Length").write(46).write("em").write(40).debug(this._value),void 0!==this._node&&(t=t.write(", ").debug(this._node)),t=t.write(41)},e.prototype.toString=function(){return this._value+"em"},e.zero=function(t,i){return"string"!=typeof t&&(i=t,t="em"),null==i?(void 0===e._zero&&(e._zero=new e(0)),e._zero):new e(0,i)},e}(w);w.Em=_;var b=function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this)||this;return r._value=e,null!==i&&(r._node=i),r}return l(e,t),e.prototype.isRelative=function(){return!1},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return"rem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){var t=this._node;return void 0!==t?t:null},enumerable:!1,configurable:!0}),e.prototype.unitValue=function(){return w.remUnit()},e.prototype.pxValue=function(){return this.unitValue()*this._value},e.prototype.remValue=function(){return this._value},e.prototype.rem=function(){return this},e.prototype.equals=function(t){return t instanceof e&&(this._value===t._value&&this._node===t._node)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this._value)))},e.prototype.debug=function(t){t=t.write("Length").write(46).write("rem").write(40).debug(this._value),void 0!==this._node&&(t=t.write(", ").debug(this._node)),t=t.write(41)},e.prototype.toString=function(){return this._value+"rem"},e.zero=function(t,i){return"string"!=typeof t&&(i=t,t="rem"),null==i?(void 0===e._zero&&(e._zero=new e(0)),e._zero):new e(0,i)},e}(w);w.Rem=b;var C=function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this)||this;return r._value=e,null!==i&&(r._node=i),r}return l(e,t),e.prototype.isRelative=function(){return!0},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return"%"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){var t=this._node;return void 0!==t?t:null},enumerable:!1,configurable:!0}),e.prototype.unitValue=function(){return w.widthUnit(this.node)},e.prototype.pxValue=function(t){return void 0===t&&(t=this.unitValue()),t*this._value/100},e.prototype.pctValue=function(){return this._value},e.prototype.pct=function(){return this},e.prototype.equals=function(t){return t instanceof e&&(this._value===t._value&&this._node===t._node)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this._value)))},e.prototype.debug=function(t){t=t.write("Length").write(46).write("pct").write(40).debug(this._value),void 0!==this._node&&(t=t.write(", ").debug(this._node)),t=t.write(41)},e.prototype.toString=function(){return this._value+"%"},e.zero=function(t,i){return"string"!=typeof t&&(i=t,t="%"),null==i?(void 0===e._zero&&(e._zero=new e(0)),e._zero):new e(0,i)},e}(w);w.Pct=C;var x=function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this)||this;return r._value=e,null!==i&&(r._node=i),r}return l(e,t),e.prototype.isRelative=function(){return!1},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"node",{get:function(){var t=this._node;return void 0!==t?t:null},enumerable:!1,configurable:!0}),e.prototype.unitValue=function(){return 0},e.prototype.pxValue=function(){return this._value},e.prototype.equals=function(t){return t instanceof e&&(this._value===t._value&&this._node===t._node)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this._value)))},e.prototype.debug=function(t){t=t.write("Length").write(46).write("unitless").write(40).debug(this._value),void 0!==this._node&&(t=t.write(", ").debug(this._node)),t=t.write(41)},e.prototype.toString=function(){return this._value+""},e.zero=function(t,i){return"string"!=typeof t&&(i=t,t=""),null==i?(void 0===e._zero&&(e._zero=new e(0)),e._zero):new e(0,i)},e}(w);w.Unitless=x;var V=function(t){function i(e,i,r,n,o){void 0===i&&(i=null);var s=t.call(this)||this;return s._defaultUnits=e,s._node=i,s._valueParser=r,s._unitsOutput=n,s._step=o,s}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this._defaultUnits,this._node,this._valueParser,this._unitsOutput,this._step)},i.parse=function(t,r,n,o,s,a){void 0===n&&(n=null),void 0===a&&(a=1);var u=0;if(1===a)if((o=void 0===o?e.Base10.parseDecimal(t):o.feed(t)).isDone())a=2;else if(o.isError())return o.asError();if(2===a){for(s=s||e.Unicode.stringOutput();t.isCont()&&(u=t.head(),e.Unicode.isAlpha(u)||37===u);)t=t.step(),s.push(u);if(!t.isEmpty()){var l=o.bind(),h=s.bind()||r;switch(h){case"px":return e.Parser.done(w.px(l,n));case"em":return e.Parser.done(w.em(l,n));case"rem":return e.Parser.done(w.rem(l,n));case"%":return e.Parser.done(w.pct(l,n));case"":case void 0:return e.Parser.done(w.unitless(l,n));default:return e.Parser.error(e.Diagnostic.message("unknown units: "+h,t))}}}return new i(r,n,o,s,a)},i}(e.Parser);w.Parser=V;var S=function(t){function e(e,i){var r=t.call(this)||this;return r.units=i.units,r.v0=e.toValue(r.units),r.dv=i.value-r.v0,r}return l(e,t),e.prototype.interpolate=function(t){return w.from(this.v0+this.dv*t,this.units)},e.prototype.deinterpolate=function(t){var e=w.fromAny(t).toValue(this.units);return 0!==this.dv?(e-this.v0)/this.dv:this.dv},e.prototype.range=function(t,i){return void 0===t?[w.from(this.v0,this.units),w.from(this.v0+this.dv,this.units)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.v0===t.v0&&this.dv===t.dv&&this.units===t.units)},e.between=function(t,i){return t instanceof w&&i instanceof w?new e(t,i):w.isAny(t)&&w.isAny(i)?new e(w.fromAny(t),w.fromAny(i)):n.Interpolator.between(t,i)},e.tryBetween=function(t,i){return t instanceof w&&i instanceof w?new e(t,i):null},e}(n.Interpolator);n.Interpolator.registerFactory(S);var A=function(t){function e(e,i,r){void 0===i&&(i=null);var n=t.call(this)||this;return n._defaultUnits=e,n._node=i,n._unit=r,n}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?void 0!==this._unit?this._unit:w.zero(this._defaultUnits,this._node):new e(this._defaultUnits,this._node,t)},e.prototype.mold=function(t){return t=w.fromAny(t,this._defaultUnits),i.Text.from(t.toString())},e.prototype.cast=function(t){var e,i=t.toValue();try{if(void 0!==(e=w.fromValue(i,this._node))){var r=i.stringValue(void 0);void 0!==r&&(e=w.parse(r,this._defaultUnits,this._node))}}catch(t){}return e},e}(i.Form);w.Form=A;var P=function(){function t(){}return t.prototype.contrast=function(t){return this.lightness()<.67?this.brighter(t):this.darker(t)},t.transparent=function(){return t.Rgb.transparent()},t.black=function(e){return t.Rgb.black(e)},t.white=function(e){return t.Rgb.white(e)},t.rgb=function(e,i,r,n){return 1===arguments.length?t.fromAny(e).rgb():new t.Rgb(e,i,r,n)},t.hsl=function(e,i,r,n){return 1===arguments.length?t.fromAny(e).hsl():(e="number"==typeof e?e:a.fromAny(e).degValue(),new t.Hsl(e,i,r,n))},t.fromName=function(e){switch(e){case"transparent":return t.transparent();case"black":return t.black();case"white":return t.white();default:return}},t.fromInit=function(e){if(t.Rgb.isInit(e))return t.Rgb.fromInit(e);if(t.Hsl.isInit(e))return t.Hsl.fromInit(e);throw new TypeError(""+e)},t.fromAny=function(e){if(e instanceof t)return e;if("string"==typeof e)return t.parse(e);if(t.Rgb.isInit(e))return t.Rgb.fromInit(e);if(t.Hsl.isInit(e))return t.Hsl.fromInit(e);throw new TypeError(""+e)},t.fromValue=function(e){var i;return void 0===(i=t.Rgb.fromValue(e))&&(i=t.Hsl.fromValue(e)),i},t.parse=function(i){for(var r=e.Unicode.stringInput(i);r.isCont()&&e.Unicode.isWhitespace(r.head());)r=r.step();var n=t.Parser.parse(r);if(n.isDone())for(;r.isCont()&&e.Unicode.isWhitespace(r.head());)r=r.step();return r.isCont()&&!n.isError()&&(n=e.Parser.error(e.Diagnostic.unexpected(r))),n.bind()},t.isInit=function(e){return t.Rgb.isInit(e)||t.Hsl.isInit(e)},t.isAny=function(e){return e instanceof t||t.isInit(e)||"string"==typeof e},t.form=function(e){return void 0!==e&&(e=t.fromAny(e)),e!==t.transparent()?new t.Form(e):(void 0===t._form&&(t._form=new t.Form(t.transparent())),t._form)},t}(),M=function(t){function n(e,i,r,n){void 0===n&&(n=1);var o=t.call(this)||this;return o.r=e,o.g=i,o.b=r,o.a=n,o}return l(n,t),n.prototype.isDefined=function(){return 0!==this.r||0!==this.g||0!==this.b||1!==this.a},n.prototype.alpha=function(t){return void 0===t?this.a:this.a!==t?new n(this.r,this.g,this.b,t):this},n.prototype.lightness=function(){var t=this.r/255,e=this.g/255,i=this.b/255,r=Math.min(t,e,i);return(Math.max(t,e,i)+r)/2},n.prototype.brighter=function(t){return 1!==(t=void 0===t?1/.7:Math.pow(1/.7,t))?new n(this.r*t,this.g*t,this.b*t,this.a):this},n.prototype.darker=function(t){return 1!==(t=void 0===t?.7:Math.pow(.7,t))?new n(this.r*t,this.g*t,this.b*t,this.a):this},n.prototype.rgb=function(){return this},n.prototype.hsl=function(){var t=this.r/255,e=this.g/255,i=this.b/255,r=Math.min(t,e,i),n=Math.max(t,e,i),o=NaN,s=n-r,a=(n+r)/2;return 0!==s?(o=t===n?(e-i)/s+6*+(e<i):e===n?(i-t)/s+2:(t-e)/s+4,s/=a<.5?n+r:2-(n+r),o*=60):s=a>0&&a<1?0:o,new P.Hsl(o,s,a,this.a)},n.prototype.equals=function(t){return t instanceof n&&(this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a)},n.prototype.hashCode=function(){return void 0===n._hashSeed&&(n._hashSeed=r.Murmur3.seed(n)),r.Murmur3.mash(r.Murmur3.mix(r.Murmur3.mix(r.Murmur3.mix(r.Murmur3.mix(n._hashSeed,r.Murmur3.hash(this.r)),r.Murmur3.hash(this.g)),r.Murmur3.hash(this.b)),r.Murmur3.hash(this.a)))},n.prototype.debug=function(t){t=t.write("Color").write(46).write("rgb").write(40).debug(this.r).write(", ").debug(this.g).write(", ").debug(this.b),1!==this.a&&(t=t.write(", ").debug(this.a)),t=t.write(41)},n.prototype.toHexString=function(){var t=Math.min(Math.max(0,Math.round(this.r||0)),255),i=Math.min(Math.max(0,Math.round(this.g||0)),255),r=Math.min(Math.max(0,Math.round(this.b||0)),255),n="#",o=e.Base16.lowercase().alphabet();return n+=o.charAt(t>>>4&15),n+=o.charAt(15&t),n+=o.charAt(i>>>4&15),n+=o.charAt(15&i),n+=o.charAt(r>>>4&15),n+=o.charAt(15&r)},n.prototype.toString=function(){var t=this.a;if(1===(t=isNaN(t)?1:Math.max(0,Math.min(this.a,1))))return this.toHexString();var e=1===t?"rgb":"rgba";return e+="(",e+=Math.max(0,Math.min(Math.round(this.r)||0,255)),e+=",",e+=Math.max(0,Math.min(Math.round(this.g)||0,255)),e+=",",e+=Math.max(0,Math.min(Math.round(this.b)||0,255)),1!==t&&(e+=",",e+=t),e+=")"},n.transparent=function(){return new n(0,0,0,0)},n.black=function(t){return void 0===t&&(t=1),new n(0,0,0,t)},n.white=function(t){return void 0===t&&(t=1),new n(255,255,255,t)},n.fromInit=function(t){return new n(t.r,t.g,t.b,t.a)},n.fromAny=function(t){if(t instanceof n)return t;if("string"==typeof t)return n.parse(t);if(n.isInit(t))return n.fromInit(t);throw new TypeError(""+t)},n.fromValue=function(t){var e,r,n,o,s,a=t.tag();if("rgb"===a||"rgba"===a?(t=t.header(a),e=!0):e=!1,t.forEach((function(t,a){var u=t.key.stringValue();void 0!==u?"r"===u?r=t.toValue().numberValue(r):"g"===u?n=t.toValue().numberValue(n):"b"===u?o=t.toValue().numberValue(o):"a"===u&&(s=t.toValue().numberValue(s)):t instanceof i.Value&&e&&(0===a?r=t.numberValue(r):1===a?n=t.numberValue(n):2===a?o=t.numberValue(o):3===a&&(s=t.numberValue(s)))})),void 0!==r&&void 0!==n&&void 0!==o)return P.rgb(r,n,o,s)},n.parse=function(t){return P.parse(t).rgb()},n.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b&&("number"==typeof e.a||void 0===e.a)}return!1},n.isAny=function(t){return t instanceof n||n.isInit(t)||"string"==typeof t},n}(P);P.Rgb=M;var D=function(t){function e(e,i,r,n){void 0===n&&(n=1);var o=t.call(this)||this;return o.h=e,o.s=i,o.l=r,o.a=n,o}return l(e,t),e.prototype.isDefined=function(){return 0!==this.h||0!==this.s||0!==this.l||1!==this.a},e.prototype.alpha=function(t){return void 0===t?this.a:this.a!==t?new e(this.h,this.s,this.l,t):this},e.prototype.lightness=function(){return this.l},e.prototype.brighter=function(t){return 1!==(t=void 0===t?1/.7:Math.pow(1/.7,t))?new e(this.h,this.s,this.l*t,this.a):this},e.prototype.darker=function(t){return 1!==(t=void 0===t?.7:Math.pow(.7,t))?new e(this.h,this.s,this.l*t,this.a):this},e.toRgb=function(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)},e.prototype.rgb=function(){var t=this.h%360+360*+(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*i,o=2*r-n;return new P.Rgb(e.toRgb(t>=240?t-240:t+120,o,n),e.toRgb(t,o,n),e.toRgb(t<120?t+240:t-120,o,n),this.a)},e.prototype.hsl=function(){return this},e.prototype.equals=function(t){return t instanceof e&&(this.h===t.h&&this.s===t.s&&this.l===t.l&&this.a===t.a)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),r.Murmur3.mash(r.Murmur3.mix(r.Murmur3.mix(r.Murmur3.mix(r.Murmur3.mix(e._hashSeed,r.Murmur3.hash(this.h)),r.Murmur3.hash(this.s)),r.Murmur3.hash(this.l)),r.Murmur3.hash(this.a)))},e.prototype.debug=function(t){t=t.write("Color").write(46).write("hsl").write(40).debug(this.h).write(", ").debug(this.s).write(", ").debug(this.l),1!==this.a&&(t=t.write(", ").debug(this.a)),t=t.write(41)},e.prototype.toHexString=function(){return this.rgb().toHexString()},e.prototype.toString=function(){var t=this.a,e=1===(t=isNaN(t)?1:Math.max(0,Math.min(this.a,1)))?"hsl":"hsla";return e+="(",e+=Math.max(0,Math.min(Math.round(this.h)||0,360)),e+=",",e+=Math.max(0,Math.min(100*Math.round(this.s)||0,100))+"%",e+=",",e+=Math.max(0,Math.min(100*Math.round(this.l)||0,100))+"%",1!==t&&(e+=",",e+=t),e+=")"},e.transparent=function(){return new e(0,0,0,0)},e.black=function(t){return void 0===t&&(t=1),new e(0,0,0,t)},e.white=function(t){return void 0===t&&(t=1),new e(0,1,1,t)},e.fromInit=function(t){return new e("number"==typeof t.h?t.h:a.fromAny(t.h).degValue(),t.s,t.l,t.a)},e.fromAny=function(t){if(t instanceof e)return t;if("string"==typeof t)return e.parse(t);if(e.isInit(t))return e.fromInit(t);throw new TypeError(""+t)},e.fromValue=function(t){var e,r,n,o,s,u=t.tag();if("hsl"===u||"hsla"===u?(t=t.header(u),e=!0):e=!1,t.forEach((function(t,u){var l=t.key.stringValue();void 0!==l?"h"===l?r=t.toValue().cast(a.form(),r):"s"===l?n=t.toValue().numberValue(n):"l"===l?o=t.toValue().numberValue(o):"a"===l&&(s=t.toValue().numberValue(s)):t instanceof i.Value&&e&&(0===u?r=t.cast(a.form(),r):1===u?n=t.numberValue(n):2===u?o=t.numberValue(o):3===u&&(s=t.numberValue(s)))})),void 0!==r&&void 0!==n&&void 0!==o)return P.hsl(r,n,o,s)},e.parse=function(t){return P.parse(t).hsl()},e.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return a.isAny(e.h)&&"number"==typeof e.s&&"number"==typeof e.l&&("number"==typeof e.a||void 0===e.a)}return!1},e.isAny=function(t){return t instanceof e||e.isInit(t)||"string"==typeof t},e}(P);P.Hsl=D;var E=function(){function t(t,e){void 0===e&&(e=""),this.value=t,this.units=e}return t.prototype.scale=function(t){return"%"===this.units?this.value*t/100:this.value},t}(),R=function(t){function i(e,i){var r=t.call(this)||this;return r.valueParser=e,r.step=i,r}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.valueParser,this.step)},i.parse=function(t,r,n){if(void 0===n&&(n=1),1===n)if((r=void 0===r?e.Base10.parseNumber(t):r.feed(t)).isDone())n=2;else if(r.isError())return r.asError();if(2===n){if(t.isCont()&&37===t.head())return t=t.step(),e.Parser.done(new E(r.bind(),"%"));if(!t.isEmpty())return e.Parser.done(new E(r.bind()))}return new i(r,n)},i}(e.Parser);E.Parser=R;var T=function(t){function i(e,i){var r=t.call(this)||this;return r._value=e,r._step=i,r}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this._value,this._step)},i.parse=function(t,r,n){void 0===r&&(r=0),void 0===n&&(n=1);var o=0;if(1===n)if(t.isCont()&&35===t.head())t=t.step(),n=2;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("#",t));if(n>=2){for(;n<=9&&t.isCont()&&(o=t.head(),e.Base16.isDigit(o));)t=t.step(),r=r<<4|e.Base16.decodeDigit(o),n+=1;if(!t.isEmpty())return 5===n?e.Parser.done(new M(r>>8&15|r>>4&240,r>>4&15|240&r,r<<4&240|15&r)):6===n?e.Parser.done(new M(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,(r<<4&240|15&r)/255)):8===n?e.Parser.done(new M(r>>16&255,r>>8&255,255&r)):10===n?e.Parser.done(new M(r>>24&255,r>>16&255,r>>8&255,(255&r)/255)):e.Parser.error(e.Diagnostic.unexpected(t))}return new i(r,n)},i}(e.Parser);P.HexParser=T;var O=function(t){function i(e,i,r,n,o){var s=t.call(this)||this;return s.rParser=e,s.gParser=i,s.bParser=r,s.aParser=n,s.step=o,s}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.rParser,this.gParser,this.bParser,this.aParser,this.step)},i.parse=function(t,r,n,o,s,a){var u=0;if(1===a)if(t.isCont()&&114===t.head())t=t.step(),a=2;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("r",t));if(2===a)if(t.isCont()&&103===t.head())t=t.step(),a=3;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("g",t));if(3===a)if(t.isCont()&&98===t.head())t=t.step(),a=4;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("b",t));if(4===a&&(t.isCont()&&97===t.head()?(t=t.step(),a=5):t.isEmpty()||(a=5)),5===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont()&&40===u)t=t.step(),a=6;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("(",t))}if(6===a){if(void 0===r){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(r=R.parse(t))}else r=r.feed(t);if(void 0!==r)if(r.isDone())a=7;else if(r.isError())return r.asError()}if(7===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont())44===u&&(t=t.step()),a=8;else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}if(8===a){if(void 0===n){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(n=R.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone())a=9;else if(n.isError())return n.asError()}if(9===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont())44===u&&(t=t.step()),a=10;else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}if(10===a){if(void 0===o){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(o=R.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())a=11;else if(o.isError())return o.asError()}if(11===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont()){if(41===u)return t=t.step(),e.Parser.done(new M(r.bind().scale(255),n.bind().scale(255),o.bind().scale(255)));44!==u&&47!==u||(t=t.step()),a=12}else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}if(12===a){if(void 0===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(s=R.parse(t))}else s=s.feed(t);if(void 0!==s)if(s.isDone())a=13;else if(s.isError())return s.asError()}if(13===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont()&&41===u)return t=t.step(),e.Parser.done(new M(r.bind().scale(255),n.bind().scale(255),o.bind().scale(255),s.bind().scale(1)));if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected(")",t))}return new i(r,n,o,s,a)},i.parseRest=function(t){return i.parse(t,void 0,void 0,void 0,void 0,5)},i}(e.Parser);P.RgbParser=O;var F=function(t){function i(e,i,r,n,o){var s=t.call(this)||this;return s.hParser=e,s.sParser=i,s.lParser=r,s.aParser=n,s.step=o,s}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.hParser,this.sParser,this.lParser,this.aParser,this.step)},i.parse=function(t,r,n,o,s,a){var u=0;if(1===a)if(t.isCont()&&104===t.head())t=t.step(),a=2;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("h",t));if(2===a)if(t.isCont()&&115===t.head())t=t.step(),a=3;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("s",t));if(3===a)if(t.isCont()&&108===t.head())t=t.step(),a=4;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("l",t));if(4===a&&(t.isCont()&&97===t.head()?(t=t.step(),a=5):t.isEmpty()||(a=5)),5===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont()&&40===u)t=t.step(),a=6;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("(",t))}if(6===a){if(void 0===r){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(r=v.parse(t,"deg"))}else r=r.feed(t);if(void 0!==r)if(r.isDone())a=7;else if(r.isError())return r.asError()}if(7===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont())44===u&&(t=t.step()),a=8;else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}if(8===a){if(void 0===n){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(n=R.parse(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone()){if("%"!==n.bind().units)return e.Parser.error(e.Diagnostic.expected("%",t));a=9}else if(n.isError())return n.asError()}if(9===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont())44===u&&(t=t.step()),a=10;else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}if(10===a){if(void 0===o){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t=t.step();t.isCont()&&(o=R.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone()){if("%"!==o.bind().units)return e.Parser.error(e.Diagnostic.expected("%",t));a=11}else if(o.isError())return o.asError()}if(11===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont()){if(41===u)return t=t.step(),e.Parser.done(new D(r.bind().degValue(),n.bind().scale(1),o.bind().scale(1)));44!==u&&47!==u||(t=t.step()),a=12}else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}if(12===a){if(void 0===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t=t.step();t.isEmpty()||(s=R.parse(t))}else s=s.feed(t);if(void 0!==s)if(s.isDone())a=13;else if(s.isError())return s.asError()}if(13===a){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t=t.step();if(t.isCont()&&41===u)return t=t.step(),e.Parser.done(new D(r.bind().degValue(),n.bind().scale(1),o.bind().scale(1),s.bind().scale(1)));if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected(")",t))}return new i(r,n,o,s,a)},i.parseRest=function(t){return i.parse(t,void 0,void 0,void 0,void 0,5)},i}(e.Parser);P.HslParser=F;var k=function(t){function i(e,i){var r=t.call(this)||this;return r.identOutput=e,r.step=i,r}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.identOutput,this.step)},i.parse=function(t,r,n){void 0===n&&(n=1);var o=0;if(1===n)if(t.isCont()){if(35===t.head())return T.parse(t);n=2}else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t));if(2===n){for(r=r||e.Unicode.stringOutput();t.isCont()&&(o=t.head(),e.Unicode.isAlpha(o));)t=t.step(),r.write(o);if(!t.isEmpty()){var s=r.bind();switch(s){case"rgb":case"rgba":return O.parseRest(t);case"hsl":case"hsla":return F.parseRest(t);default:var a=P.fromName(s);return void 0!==a?e.Parser.done(a):e.Parser.error(e.Diagnostic.message("unknown color: "+s,t))}}}return new i(r,n)},i}(e.Parser);P.Parser=k;var N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.between=function(t,i){return t instanceof M&&i instanceof M?new e.Rgb(t,i):t instanceof D&&i instanceof D?new e.Hsl(t,i):t instanceof P&&i instanceof P?new e.Rgb(t.rgb(),i.rgb()):M.isInit(t)&&M.isInit(i)?new e.Rgb(M.fromInit(t),M.fromInit(i)):D.isInit(t)&&D.isInit(i)?new e.Hsl(D.fromInit(t),D.fromInit(i)):P.isAny(t)&&P.isAny(i)?e.between(P.fromAny(t),P.fromAny(i)):n.Interpolator.between(t,i)},e.tryBetween=function(t,i){return t instanceof M&&i instanceof M?new e.Rgb(t,i):t instanceof D&&i instanceof D?new e.Hsl(t,i):null},e.tryBetweenAny=function(t,i){if((t instanceof P||P.isInit(t))&&(i instanceof P||P.isInit(i))){var r=P.fromAny(t),n=P.fromAny(i);if(r instanceof M&&n instanceof M)return new e.Rgb(r,n);if(r instanceof D&&n instanceof D)return new e.Hsl(r,n);if(r instanceof P&&n instanceof P)return new e.Rgb(r.rgb(),n.rgb())}return null},e}(n.Interpolator);n.Interpolator.registerFactory(N);var U=function(t){function e(e,i){var r=t.call(this)||this;return r.r0=e.r,r.dr=i.r-r.r0,r.g0=e.g,r.dg=i.g-r.g0,r.b0=e.b,r.db=i.b-r.b0,r.a0=e.a,r.da=i.a-r.a0,r}return l(e,t),e.prototype.interpolate=function(t){var e=this.r0+this.dr*t,i=this.g0+this.dg*t,r=this.b0+this.db*t,n=this.a0+this.da*t;return new M(e,i,r,n)},e.prototype.deinterpolate=function(t){var e=(t=P.fromAny(t).rgb()).r-this.r0,i=t.g-this.g0,r=t.b-this.b0,n=t.a-this.a0,o=e*this.dr+i*this.dg+r*this.db+n*this.da,s=Math.sqrt(e*e+i*i+r*r+n*n);return 0!==s?o/s:s},e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.r0===t.r0&&this.dr===t.dr&&this.g0===t.g0&&this.dg===t.dg&&this.b0===t.b0&&this.db===t.db&&this.a0===t.a0&&this.da===t.da)},e.between=function(t,i){return t instanceof M&&i instanceof M?new e(t,i):M.isInit(t)&&M.isInit(i)?new e(M.fromInit(t),M.fromInit(i)):N.between(t,i)},e}(N);N.Rgb=U;var I=function(t){function e(e,i){var r=t.call(this)||this;return r.h0=e.h,r.dh=i.h-r.h0,r.s0=e.s,r.ds=i.s-r.s0,r.l0=e.l,r.dl=i.l-r.l0,r.a0=e.a,r.da=i.a-r.a0,r}return l(e,t),e.prototype.interpolate=function(t){var e=this.h0+this.dh*t,i=this.s0+this.ds*t,r=this.l0+this.dl*t,n=this.a0+this.da*t;return new D(e,i,r,n)},e.prototype.deinterpolate=function(t){var e=(t=P.fromAny(t).hsl()).h-this.h0,i=t.s-this.s0,r=t.l-this.l0,n=t.a-this.a0,o=e*this.dh+i*this.ds+r*this.dl+n*this.da,s=Math.sqrt(e*e+i*i+r*r+n*n);return 0!==s?o/s:s},e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.h0===t.h0&&this.dh===t.dh&&this.s0===t.s0&&this.ds===t.ds&&this.l0===t.l0&&this.dl===t.dl&&this.a0===t.a0&&this.da===t.da)},e.between=function(t,i){return t instanceof D&&i instanceof D?new e(t,i):D.isInit(t)&&D.isInit(i)?new e(D.fromInit(t),D.fromInit(i)):N.between(t,i)},e}(N);N.Hsl=I;var L=function(t){function e(e){var i=t.call(this)||this;return i._unit=e,i}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t){return t=P.fromAny(t),i.Text.from(t.toString())},e.prototype.cast=function(t){var e,i=t.toValue();try{if(void 0===(e=P.fromValue(i))){var r=i.stringValue(void 0);void 0!==r&&(e=P.parse(r))}}catch(t){}return e},e}(i.Form);P.Form=L;var j={fromAny:function(t){return"string"!=typeof t||"large"!==t&&"larger"!==t&&"medium"!==t&&"small"!==t&&"smaller"!==t&&"x-large"!==t&&"x-small"!==t&&"xx-large"!==t&&"xx-small"!==t?w.fromAny(t):t},fromValue:function(t){var e=t.stringValue(void 0);return void 0!==e?j.fromAny(e):w.form().cast(t)}},q={fromAny:function(t){return"string"==typeof t&&"normal"===t?t:w.fromAny(t)},fromValue:function(t){var e=t.stringValue(void 0);return void 0!==e?q.fromAny(e):w.form().cast(t)}},z={fromValue:function(t){var e;return t.forEach((function(t){if(t instanceof i.Value){var r=t.stringValue(void 0);void 0!==r&&(void 0===e?e=r:"string"==typeof e?e=[e,r]:e.push(r))}})),e},format:function(t){var i,r=t.length;if(r>0){i=e.Unicode.isAlpha(t.charCodeAt(0));for(var n=t.offsetByCodePoints(0,1);i&&n<r;n=t.offsetByCodePoints(n,1)){var o=t.charCodeAt(n);i=e.Unicode.isAlpha(o)||45===o}}else i=!1;if(i)return t;var s=e.Unicode.stringOutput();s.write(34);for(n=0;n<r;n=t.offsetByCodePoints(n,1)){if(10===(o=t.charCodeAt(n))||34===o||39===o)s.write(92).write(o);else if(o>=32)s.write(o);else{var a=e.Base16.uppercase();s.write(92).write(a.encodeDigit(o>>>20&15)).write(a.encodeDigit(o>>>16&15)).write(a.encodeDigit(o>>>12&15)).write(a.encodeDigit(o>>>8&15)).write(a.encodeDigit(o>>>4&15)).write(a.encodeDigit(15&o))}}return s.write(34),s.toString()}},B=function(t){function i(e,i,r,n){var o=t.call(this)||this;return o.output=e,o.quote=i,o.code=r,o.step=n,o}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.output,this.quote,this.code,this.step)},i.parse=function(t,r,n,o,s){void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=1);var a=0;if(1===s){for(;t.isCont()&&(a=t.head(),e.Unicode.isSpace(a));)t=t.step();if(t.isCont())if(e.Unicode.isAlpha(a))r=r||e.Unicode.stringOutput(),s=2;else{if(34!==a&&(39!==a||n!==a&&0!==n))return e.Parser.error(e.Diagnostic.expected("font family",t));t=t.step(),r=r||e.Unicode.stringOutput(),n=a,s=3}else if(t.isDone())return e.Parser.error(e.Diagnostic.expected("font family",t))}if(2===s){for(;t.isCont()&&(a=t.head(),e.Unicode.isAlpha(a)||45===a);)t=t.step(),r.write(a);if(!t.isEmpty())return e.Parser.done(r.bind())}t:for(;;){if(3===s){for(;t.isCont()&&(a=t.head())>=32&&a!==n&&92!==a;)t=t.step(),r.write(a);if(t.isCont()){if(a===n)return t=t.step(),e.Parser.done(r.bind());if(92!==a)return e.Parser.error(e.Diagnostic.expected(n,t));t=t.step(),s=4}else if(t.isDone())return e.Parser.error(e.Diagnostic.expected(n,t))}if(4===s)if(t.isCont()){if(a=t.head(),!e.Base16.isDigit(a)){if(10===a){t.step(),s=3;continue}t.step(),r.write(a),s=3;continue}s=5}else if(t.isDone())return e.Parser.error(e.Diagnostic.expected("escape character",t));if(s>=5)for(;;){if(t.isCont()&&(a=t.head(),e.Base16.isDigit(a))){if(t=t.step(),o=16*o+e.Base16.decodeDigit(a),s<=11){s+=1;continue}if(0===o)return e.Parser.error(e.Diagnostic.message("zero escape",t));r.write(o),o=0,s=3;continue t}if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t));break}break}return new i(r,n,o,s)},i}(e.Parser),W=function(){function t(t,e,i,r,n,o,s){this._style=t,this._variant=e,this._weight=i,this._stretch=r,this._size=n,this._height=o,this._family=s}return t.prototype.style=function(e){return void 0===e?this._style:this._style===e?this:new t(e,this._variant,this._weight,this._stretch,this._size,this._height,this._family)},t.prototype.variant=function(e){return void 0===e?this._variant:this._variant===e?this:new t(this._style,e,this._weight,this._stretch,this._size,this._height,this._family)},t.prototype.weight=function(e){return void 0===e?this._weight:this._weight===e?this:new t(this._style,this._variant,e,this._stretch,this._size,this._height,this._family)},t.prototype.stretch=function(e){return void 0===e?this._stretch:this._stretch===e?this:new t(this._style,this._variant,this._weight,e,this._size,this._height,this._family)},t.prototype.size=function(e){return void 0===e?this._size:(e=null!==e?j.fromAny(e):null,r.Objects.equal(this._size,e)?this:new t(this._style,this._variant,this._weight,this._stretch,e,this._height,this._family))},t.prototype.height=function(e){return void 0===e?this._height:(e=null!==e?q.fromAny(e):null,r.Objects.equal(this._height,e)?this:new t(this._style,this._variant,this._weight,this._stretch,this._size,e,this._family))},t.prototype.family=function(e){return void 0===e?Array.isArray(this._family)?this._family.slice(0):this._family:r.Objects.equal(this._family,e)?this:(Array.isArray(e)&&1===e.length&&(e=e[0]),new t(this._style,this._variant,this._weight,this._stretch,this._size,this._height,e))},t.prototype.toAny=function(){return{style:this._style,variant:this._variant,weight:this._weight,stretch:this._stretch,size:this._size,height:this._height,family:Array.isArray(this._family)?this._family.slice(0):this._family}},t.prototype.equals=function(e){return this===e||e instanceof t&&(this._style===e._style&&this._variant===e._variant&&this._weight===e._weight&&this._stretch===e._stretch&&r.Objects.equal(this._size,e._size)&&r.Objects.equal(this._height,e._height)&&r.Objects.equal(this._family,e._family))},t.prototype.debug=function(t){if(t=t.write("Font").write(46).write("family").write(40).write(41),"string"==typeof this._family)t=t.debug(this._family);else if(Array.isArray(this._family)&&0!==this._family.length){t=t.debug(this._family[0]);for(var e=1;e<this._family.length;e+=1)t=t.write(", ").debug(this._family[e])}t=t.write(41),null!==this._style&&(t=t.write(46).write("style").write(40).debug(this._style).write(41)),null!==this._variant&&(t=t.write(46).write("variant").write(40).debug(this._variant).write(41)),null!==this._weight&&(t=t.write(46).write("weight").write(40).debug(this._weight).write(41)),null!==this._stretch&&(t=t.write(46).write("stretch").write(40).debug(this._stretch).write(41)),null!==this._size&&(t=t.write(46).write("size").write(40).debug(this._size).write(41)),null!==this._height&&(t=t.write(46).write("height").write(40).debug(this._height).write(41))},t.prototype.toString=function(){var t="";if(null===this._style&&"normal"!==this._variant&&"normal"!==this._weight&&"normal"!==this._stretch||(t+=this._style||"normal"),null===this._variant&&"normal"!==this._weight&&"normal"!==this._stretch||(0!==t.length&&(t+=" "),t+=this._variant||"normal"),null===this._weight&&"normal"!==this._stretch||(0!==t.length&&(t+=" "),t+=this._weight||"normal"),null!==this._stretch&&(0!==t.length&&(t+=" "),t+=this._stretch),null!==this._size&&(0!==t.length&&(t+=" "),t+=this._size.toString(),null!==this._height&&(t+="/",t+=this._height.toString())),"string"==typeof this._family)0!==t.length&&(t+=" "),t+=z.format(this._family);else if(Array.isArray(this._family)&&0!==this._family.length){0!==t.length&&(t+=" "),t+=z.format(this._family[0]);for(var e=1;e<this._family.length;e+=1)t+=", ",t+=z.format(this._family[e])}return t},t.style=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(e,null,null,null,null,null,i)},t.variant=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(null,e,null,null,null,null,i)},t.weight=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(null,null,e,null,null,null,i)},t.stretch=function(e,i){return Array.isArray(i)&&1===i.length&&(i=i[0]),new t(null,null,null,e,null,null,i)},t.size=function(e,i){return e=null!==e?j.fromAny(e):null,Array.isArray(i)&&1===i.length&&(i=i[0]),new t(null,null,null,null,e,null,i)},t.family=function(e){return Array.isArray(e)&&1===e.length&&(e=e[0]),new t(null,null,null,null,null,null,e)},t.from=function(e,i,r,n,o,s,a){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===s&&(s=null),o=null!==o?j.fromAny(o):null,s=null!==s?q.fromAny(s):null,Array.isArray(a)&&1===a.length&&(a=a[0]),new t(e,i,r,n,o,s,a)},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e)return t.from(e.style,e.variant,e.weight,e.stretch,e.size,e.height,e.family);if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.fromValue=function(e){var i=e.header("font");if(i.isDefined()){var r=i.get("style").stringValue(null),n=i.get("variant").stringValue(null),o=i.get("weight").stringValue(null),s=i.get("stretch").stringValue(null),a=j.fromValue(i.get("size")),u=q.fromValue(i.get("height")),l=z.fromValue(i.get("family"));if(void 0!==l)return t.from(r,n,o,s,a,u,l)}},t.parse=function(i){for(var r=e.Unicode.stringInput(i);r.isCont()&&e.Unicode.isWhitespace(r.head());)r=r.step();var n=t.Parser.parse(r);if(n.isDone())for(;r.isCont()&&e.Unicode.isWhitespace(r.head());)r=r.step();return r.isCont()&&!n.isError()&&(n=e.Parser.error(e.Diagnostic.unexpected(r))),n.bind()},t.isInit=function(t){return"object"==typeof t&&null!==t&&void 0!==t.family},t.form=function(e){return void 0!==e?(e=t.fromAny(e),new t.Form(e)):(void 0===t._form&&(t._form=new t.Form),t._form)},t}(),H=function(t){function i(e,i,r,n,o,s,a,u,l,h,c){var d=t.call(this)||this;return d.style=e,d.variant=i,d.weight=r,d.stretch=n,d.size=o,d.height=s,d.family=a,d.identOutput=u,d.lengthParser=l,d.familyParser=h,d.step=c,d}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.style,this.variant,this.weight,this.stretch,this.size,this.height,this.family,this.identOutput,this.lengthParser,this.familyParser,this.step)},i.parse=function(t,r,n,o,s,a,u,l,h,c,d,p){void 0===p&&(p=1);for(var f=0;;){if(1===p){for(;t.isCont()&&(f=t.head(),e.Unicode.isSpace(f));)t.step();if(t.isCont())p=e.Unicode.isAlpha(f)?2:34===f||39===f?11:4;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t))}if(2===p){for(h=h||e.Unicode.stringOutput();t.isCont()&&(f=t.head(),e.Unicode.isAlpha(f)||45===f);)t=t.step(),h.write(f);if(!t.isEmpty()){var v=h.bind();switch(h=void 0,v){case"italic":case"oblique":if(void 0!==r)return e.Parser.error(e.Diagnostic.message("reapeated font style: "+v,t));r=v,p=3;break;case"small-caps":if(void 0!==n)return e.Parser.error(e.Diagnostic.message("reapeated font variant: "+v,t));n=v,p=3;break;case"bold":case"bolder":case"lighter":if(void 0!==o)return e.Parser.error(e.Diagnostic.message("reapeated font weight: "+v,t));o=v,p=3;break;case"ultra-condensed":case"extra-condensed":case"semi-condensed":case"condensed":case"expanded":case"semi-expanded":case"extra-expanded":case"ultra-expanded":if(void 0!==s)return e.Parser.error(e.Diagnostic.message("reapeated font stretch: "+v,t));s=v,p=3;break;case"normal":if(void 0===r)r=v;else if(void 0===n)n=v;else if(void 0===o)o=v;else{if(void 0!==s)return e.Parser.error(e.Diagnostic.message("reapeated font property: "+v,t));s=v}p=3;break;case"large":case"larger":case"medium":case"small":case"smaller":case"x-large":case"x-small":case"xx-large":case"xx-small":a=v,p=5;break;default:l=v,p=12}}}if(3===p){if(t.isCont()){if(f=t.head(),e.Unicode.isSpace(f)){t.step(),p=1;continue}return e.Parser.error(e.Diagnostic.expected("font property, size, or family",t))}if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t))}if(4===p)if((c=void 0===c?V.parse(t):c.feed(t)).isDone()){var y=c.bind();if(""===y.units){var m=y.value;switch(m){case 100:case 200:case 300:case 400:case 500:case 600:case 700:case 800:case 900:if(void 0!==o)return e.Parser.error(e.Diagnostic.message("reapeated font weight: "+m,t));o=String(m);break;default:return e.Parser.error(e.Diagnostic.message("unknown font property: "+m,t))}p=3;continue}a=y,c=void 0,p=5}else if(c.isError())return c.asError();if(5===p)if(t.isCont())if(f=t.head(),e.Unicode.isSpace(f))t.step(),p=6;else{if(47!==f)return e.Parser.error(e.Diagnostic.expected("font family",t));t.step(),p=7}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t));if(6===p){for(;t.isCont()&&(f=t.head(),e.Unicode.isSpace(f));)t.step();if(t.isCont())47===f?(t.step(),p=7):p=11;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t))}if(7===p){for(;t.isCont()&&(f=t.head(),e.Unicode.isSpace(f));)t.step();if(t.isCont())p=e.Unicode.isAlpha(f)?8:9;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t))}if(8===p){for(h=h||e.Unicode.stringOutput();t.isCont()&&(f=t.head(),e.Unicode.isAlpha(f));)t=t.step(),h.write(f);if(!t.isEmpty()){v=h.bind();switch(h=void 0,v){case"normal":u=v,p=10;break;default:return e.Parser.error(e.Diagnostic.message("unknown line height: "+v,t))}}}if(9===p)if((c=void 0===c?V.parse(t):c.feed(t)).isDone())u=c.bind(),c=void 0,p=10;else if(c.isError())return c.asError();if(10===p)if(t.isCont()){if(f=t.head(),!e.Unicode.isSpace(f))return e.Parser.error(e.Diagnostic.expected("font family",t));t.step(),p=11}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t));if(11===p)if((d=void 0===d?B.parse(t):d.feed(t)).isDone())Array.isArray(l)?l.push(d.bind()):l=void 0!==l?[l,d.bind()]:d.bind(),d=void 0,p=12;else if(d.isError())return d.asError();if(12===p){for(;t.isCont()&&(f=t.head(),e.Unicode.isSpace(f));)t.step();if(t.isCont()&&44===f){t.step(),p=11;continue}if(!t.isEmpty())return e.Parser.done(W.from(r,n,o,s,a,u,l))}break}return new i(r,n,o,s,a,u,l,h,c,d,p)},i.parseRest=function(t,e,r,n,o,s,a,u){var l=void 0!==u?12:void 0!==s?5:3;return i.parse(t,e,r,n,o,s,a,u,void 0,void 0,void 0,l)},i}(e.Parser);W.Parser=H;var X=function(t){function e(e){var i=t.call(this)||this;return i._unit=e,i}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t){t=W.fromAny(t);var e=i.Record.create(7);if(null!==t._style&&e.slot("style",t._style),null!==t._variant&&e.slot("variant",t._variant),null!==t._weight&&e.slot("weight",t._weight),null!==t._stretch&&e.slot("stretch",t._stretch),t._size instanceof w?e.slot("size",w.form().mold(t._size)):null!==t._size&&e.slot("size",t._size),t._height instanceof w?e.slot("height",w.form().mold(t._height)):null!==t._height&&e.slot("height",t._height),Array.isArray(t._family)){for(var r=i.Record.create(t._family.length),n=0;n<t._family.length;n+=1)r.push(t._family[n]);e.slot("family",r)}else e.slot("family",t._family);return i.Record.of(i.Attr.of("font",e))},e.prototype.cast=function(t){var e,i=t.toValue();try{if(void 0===(e=W.fromValue(i))){var r=i.stringValue();void 0!==r&&(e=W.parse(r))}}catch(t){}return e},e}(i.Form);W.Form=X;var Y=function(){function t(t,e,i,r,n,o,s){this.inset=t,this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.spreadRadius=n,this.color=o,this.next=s}return t.prototype.isDefined=function(){return this.inset||this.offsetX.isDefined()||this.offsetY.isDefined()||this.blurRadius.isDefined()||this.spreadRadius.isDefined()||this.color.isDefined()||null!==this.next&&this.next.isDefined()},t.prototype.and=function(e,i,r,n,o,s){var a=null!==this.next?this.next.and.apply(this.next,arguments):t.of.apply(null,arguments);return new t(this.inset,this.offsetX,this.offsetY,this.blurRadius,this.spreadRadius,this.color,a)},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.inset===e.inset&&this.offsetX.equals(e.offsetX)&&this.offsetY.equals(e.offsetY)&&this.blurRadius.equals(e.blurRadius)&&this.spreadRadius.equals(e.spreadRadius)&&this.color.equals(e.color)&&r.Objects.equal(this.next,e.next))},t.prototype.toString=function(){if(this.isDefined()){for(var t="",e=this;;){if(e.inset&&(t+="inset",t+=" "),t+=e.offsetX.toString(),t+=" ",t+=e.offsetY.toString(),t+=" ",t+=e.blurRadius.toString(),t+=" ",t+=e.spreadRadius.toString(),t+=" ",t+=e.color.toString(),null===e.next)break;t+=", ",e=e.next}return t}return"none"},t.none=function(){return void 0===t._none&&(t._none=new t(!1,w.zero(),w.zero(),w.zero(),w.zero(),P.black(),null)),t._none},t.of=function(e,i,r,n,o,s){if(1===arguments.length)return t.fromAny(arguments[0]);if("boolean"!=typeof e){if(3===arguments.length)s=P.fromAny(arguments[2]),o=w.zero(),n=w.zero(),r=w.fromAny(arguments[1]),i=w.fromAny(arguments[0]);else if(4===arguments.length)s=P.fromAny(arguments[3]),o=w.zero(),n=w.fromAny(arguments[2]),r=w.fromAny(arguments[1]),i=w.fromAny(arguments[0]);else{if(5!==arguments.length)throw new TypeError(""+arguments);s=P.fromAny(arguments[4]),o=w.fromAny(arguments[3]),n=w.fromAny(arguments[2]),r=w.fromAny(arguments[1]),i=w.fromAny(arguments[0])}e=!1}else if(4===arguments.length)s=P.fromAny(arguments[3]),o=w.zero(),n=w.zero(),i=w.fromAny(arguments[1]),r=w.fromAny(arguments[2]);else if(5===arguments.length)s=P.fromAny(arguments[4]),o=w.zero(),n=w.fromAny(arguments[3]),i=w.fromAny(arguments[1]),r=w.fromAny(arguments[2]);else{if(6!==arguments.length)throw new TypeError(""+arguments);s=P.fromAny(arguments[5]),o=w.fromAny(arguments[4]),n=w.fromAny(arguments[3]),r=w.fromAny(arguments[2]),i=w.fromAny(arguments[1])}return new t(e,i,r,n,o,s,null)},t.fromAny=function(){for(var e,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if((e=0===arguments.length?t.none():1===arguments.length?arguments[0]:arguments)instanceof t)return e;if("string"==typeof e)return t.parse(e);if("object"==typeof e&&null!==e&&void 0===e.length){var n=(e=e).inset||!1,o=void 0!==e.offsetX?w.fromAny(e.offsetX):w.zero(),s=void 0!==e.offsetY?w.fromAny(e.offsetY):w.zero(),a=void 0!==e.blurRadius?w.fromAny(e.blurRadius):w.zero(),u=void 0!==e.spreadRadius?w.fromAny(e.spreadRadius):w.zero(),l=void 0!==e.color?P.fromAny(e.color):P.black();return new t(n,o,s,a,u,l,null)}if("object"==typeof e&&null!==e&&e.length>0){e=e;for(var h=t.fromAny(e[0]),c=1;c<e.length;c+=1)h=h.and(e[c]);return h}throw new TypeError(""+e)},t.fromValue=function(e){var r;return e.forEach((function(e,n){var o=e.header("boxShadow");if(o.isDefined()){var s,a,u,l,h,c;o.forEach((function(t,e){var r=t.key.stringValue();void 0!==r?"inset"===r?s=t.toValue().booleanValue(s):"offsetX"===r?a=t.toValue().cast(w.form(),a):"offsetY"===r?u=t.toValue().cast(w.form(),u):"blurRadius"===r?l=t.toValue().cast(w.form(),l):"spreadRadius"===r?h=t.toValue().cast(w.form(),h):"color"===r&&(c=t.toValue().cast(P.form(),c)):t instanceof i.Value&&(0===e&&t instanceof i.Text&&"inset"===t.value?s=!0:0===e||1===e&&void 0!==s?a=t.cast(w.form(),a):1===e||2===e&&void 0!==s?u=t.cast(w.form(),u):2===e||3===e&&void 0!==s?void 0===(l=t.cast(w.form(),l))&&(c=t.cast(P.form(),c)):(3===e||4===e&&void 0===s)&&void 0===c?void 0===(h=t.cast(w.form(),h))&&(c=t.cast(P.form(),c)):(4===e||5===e&&void 0===s)&&void 0===c&&(c=t.cast(P.form(),c)))})),s=void 0!==s&&s,a=void 0!==a?a:w.zero(),u=void 0!==u?u:w.zero(),l=void 0!==l?l:w.zero(),h=void 0!==h?h:w.zero(),c=void 0!==c?c:P.black();var d=new t(s||!1,a,u,l,h,c,null);r=void 0!==r?r.and(d):d}})),r},t.parse=function(i){for(var r=e.Unicode.stringInput(i);r.isCont()&&e.Unicode.isWhitespace(r.head());)r=r.step();var n=t.Parser.parse(r);if(n.isDone())for(;r.isCont()&&e.Unicode.isWhitespace(r.head());)r=r.step();return r.isCont()&&!n.isError()&&(n=e.Parser.error(e.Diagnostic.unexpected(r))),n.bind()},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return void 0!==e.offsetX&&void 0!==e.offsetY&&void 0!==e.color}return!1},t.form=function(e){return void 0!==e&&(e=t.fromAny(e)),e!==t.none()?new t.Form(e):(void 0===t._form&&(t._form=new t.Form(t.none())),t._form)},t}(),G=function(t){function i(e,i,r,n,o,s,a,u){var l=t.call(this)||this;return l.boxShadow=e,l.identOutput=i,l.offsetXParser=r,l.offsetYParser=n,l.blurRadiusParser=o,l.spreadRadiusParser=s,l.colorParser=a,l.step=u,l}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.boxShadow,this.identOutput,this.offsetXParser,this.offsetYParser,this.blurRadiusParser,this.spreadRadiusParser,this.colorParser,this.step)},i.parse=function(t,r,n,o,s,a,u,l,h){void 0===h&&(h=1);for(var c=0;;){if(1===h){for(;t.isCont()&&(c=t.head(),e.Unicode.isSpace(c));)t.step();if(t.isCont())h=e.Unicode.isAlpha(c)?2:4;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t))}if(2===h){for(n=n||e.Unicode.stringOutput();t.isCont()&&(c=t.head(),e.Unicode.isAlpha(c));)t=t.step(),n.write(c);if(!t.isEmpty()){var d=n.bind();switch(d){case"inset":h=3;break;case"none":return e.Parser.done(Y.none());default:return e.Parser.error(e.Diagnostic.message("unknown box-shadow: "+d,t))}}}if(3===h)if(t.isCont()){if(!e.Unicode.isSpace(t.head()))return e.Parser.error(e.Diagnostic.expected("space",t));t.step(),h=4}else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t));if(4===h){if(void 0===o){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(o=V.parse(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())h=5;else if(o.isError())return o.asError()}if(5===h)if(t.isCont()){if(!e.Unicode.isSpace(t.head()))return e.Parser.error(e.Diagnostic.expected("space",t));t.step(),h=6}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t));if(6===h){if(void 0===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(s=V.parse(t))}else s=s.feed(t);if(void 0!==s)if(s.isDone())h=7;else if(s.isError())return s.asError()}if(7===h)if(t.isCont()){if(!e.Unicode.isSpace(t.head()))return e.Parser.error(e.Diagnostic.expected("space",t));t.step(),h=8}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t));if(8===h){if(void 0===a){for(;t.isCont()&&(c=t.head(),e.Unicode.isSpace(c));)t.step();t.isCont()&&(45===c||c>=48&&c<=57)?a=V.parse(t):t.isEmpty()||(h=12)}else a=a.feed(t);if(void 0!==a)if(a.isDone())h=9;else if(a.isError())return a.asError()}if(9===h)if(t.isCont()){if(!e.Unicode.isSpace(t.head()))return e.Parser.error(e.Diagnostic.expected("space",t));t.step(),h=10}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t));if(10===h){if(void 0===u){for(;t.isCont()&&(c=t.head(),e.Unicode.isSpace(c));)t.step();t.isCont()&&(45===c||c>=48&&c<=57)?u=V.parse(t):t.isEmpty()||(h=12)}else u=u.feed(t);if(void 0!==u)if(u.isDone())h=11;else if(u.isError())return u.asError()}if(11===h)if(t.isCont()){if(!e.Unicode.isSpace(t.head()))return e.Parser.error(e.Diagnostic.expected("space",t));t.step(),h=12}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t));if(12===h){if(void 0===l){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(l=k.parse(t))}else l=l.feed(t);if(void 0!==l)if(l.isDone()){var p=void 0!==n&&"inset"===n.bind(),f=o.bind(),v=s.bind(),y=void 0!==a?a.bind():w.zero(),m=void 0!==u?u.bind():w.zero(),g=l.bind(),_=new Y(p,f,v,y,m,g,null);r=void 0===r?_:r.and(_),n=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0,h=13}else if(l.isError())return l.asError()}if(13===h){for(;t.isCont()&&(c=t.head(),e.Unicode.isSpace(c));)t.step();if(t.isCont()&&44===c){t.step(),h=1;continue}if(!t.isEmpty())return e.Parser.done(r)}break}return new i(r,n,o,s,a,u,l,h)},i}(e.Parser);Y.Parser=G;var K=function(t){function e(e){var i=t.call(this)||this;return i._unit=e,i}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t){for(var e=Y.fromAny(t),r=i.Record.create();;){var n=i.Record.create(5);if(e.inset&&n.push("inset"),n.push(w.form().mold(e.offsetX)),n.push(w.form().mold(e.offsetY)),n.push(w.form().mold(e.blurRadius)),n.push(w.form().mold(e.spreadRadius)),n.push(P.form().mold(e.color)),r.attr("boxShadow",n),null===e.next)break;e=e.next}return r},e.prototype.cast=function(t){var e,i=t.toValue();try{if(void 0===(e=Y.fromValue(i))){var r=i.stringValue();void 0!==r&&(e=Y.parse(r))}}catch(t){}return e},e}(i.Form);Y.Form=K;var Q=function(){function t(){}return t.prototype.translate=function(e,i){return this.transform(t.translate(e,i))},t.prototype.translateX=function(e){return this.transform(t.translateX(e))},t.prototype.translateY=function(e){return this.transform(t.translateY(e))},t.prototype.scale=function(e,i){return this.transform(t.scale(e,i))},t.prototype.scaleX=function(e){return this.transform(t.scaleX(e))},t.prototype.scaleY=function(e){return this.transform(t.scaleY(e))},t.prototype.rotate=function(e){return this.transform(t.rotate(e))},t.prototype.skew=function(e,i){return this.transform(t.skew(e,i))},t.prototype.skewX=function(e){return this.transform(t.skewX(e))},t.prototype.skewY=function(e){return this.transform(t.skewY(e))},t.prototype.toAttributeString=function(){return this.toString()},t.identity=function(){return void 0===t._identity&&(t._identity=new t.Identity),t._identity},t.translate=function(e,i){return t.Translate.from(e,i)},t.translateX=function(e){return t.Translate.from(e,0)},t.translateY=function(e){return t.Translate.from(0,e)},t.scale=function(e,i){return t.Scale.from(e,i)},t.scaleX=function(e){return t.Scale.from(e,1)},t.scaleY=function(e){return t.Scale.from(1,e)},t.rotate=function(e){return t.Rotate.from(e)},t.skew=function(e,i){return t.Skew.from(e,i)},t.skewX=function(e){return t.Skew.from(e,0)},t.skewY=function(e){return t.Skew.from(0,e)},t.affine=function(e,i,r,n,o,s){return t.Affine.from(e,i,r,n,o,s)},t.list=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.List.from(e)},t.fromAny=function(e){if(e instanceof t)return e;if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.fromValue=function(e){switch(e.tag()){case"identity":return t.Identity.fromValue(e);case"translate":return t.Translate.fromValue(e);case"scale":return t.Scale.fromValue(e);case"rotate":return t.Rotate.fromValue(e);case"skew":return t.Skew.fromValue(e);case"matrix":return t.Affine.fromValue(e);default:return t.List.fromValue(e)}},t.parse=function(i){for(var r=e.Unicode.stringInput(i);r.isCont()&&e.Unicode.isWhitespace(r.head());)r=r.step();var n=t.ListParser.parse(r);if(n.isDone())for(;r.isCont()&&e.Unicode.isWhitespace(r.head());)r=r.step();return r.isCont()&&!n.isError()&&(n=e.Parser.error(e.Diagnostic.unexpected(r))),n.bind()},t.isAny=function(e){return e instanceof t||"string"==typeof e},t.form=function(e){return void 0!==e?new t.Form(t.fromAny(e)):(void 0===t._form&&(t._form=new t.Form),t._form)},t}(),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.transform=function(t,e){return t instanceof Q?t:(Array.isArray(t)&&(e=t[1],t=t[0]),"number"==typeof t&&"number"==typeof e?[t,e]:[t=w.fromAny(t),e=w.fromAny(e)])},e.prototype.transformX=function(t,e){return t},e.prototype.transformY=function(t,e){return e},e.prototype.inverse=function(){return this},e.prototype.toAffine=function(){return new Q.Affine(1,0,0,1,0,0)},e.prototype.toValue=function(){return i.Record.of(i.Attr.of("identity"))},e.prototype.conformsTo=function(t){return t instanceof e},e.prototype.equals=function(t){return t instanceof e},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e)),e._hashSeed},e.prototype.debug=function(t){t=t.write("Transform").write(46).write("identity").write(40).write(41)},e.prototype.toString=function(){return"none"},e.fromValue=function(t){if("identity"===t.tag())return Q.identity()},e}(Q);Q.Identity=Z;var J=function(t){function n(e,i){var r=t.call(this)||this;return r._x=e,r._y=i,r}return l(n,t),Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),n.prototype.transform=function(t,e){return t instanceof Q?t instanceof Q.Identity?this:t instanceof n?new n(this._x.plus(t._x),this._y.plus(t._y)):new Q.List([this,t]):(Array.isArray(t)&&(e=t[1],t=t[0]),"number"==typeof t&&"number"==typeof e?[t+this._x.pxValue(),e+this._y.pxValue()]:(t=w.fromAny(t),e=w.fromAny(e),[t.plus(this._x),e.plus(this._y)]))},n.prototype.transformX=function(t,e){return t+this._x.pxValue()},n.prototype.transformY=function(t,e){return e+this._y.pxValue()},n.prototype.inverse=function(){return new n(this._x.opposite(),this._y.opposite())},n.prototype.toAffine=function(){return new Q.Affine(1,0,0,1,this._x.pxValue(),this._y.pxValue())},n.prototype.toValue=function(){return i.Record.of(i.Attr.of("translate",i.Record.of(i.Slot.of("x",this._x.toString()),i.Slot.of("y",this._y.toString()))))},n.prototype.conformsTo=function(t){return t instanceof n},n.prototype.equals=function(t){return t instanceof n&&(this._x.equals(t._x)&&this._y.equals(t._y))},n.prototype.hashCode=function(){return void 0===n._hashSeed&&(n._hashSeed=r.Murmur3.seed(n)),r.Murmur3.mash(r.Murmur3.mix(r.Murmur3.mix(n._hashSeed,this._x.hashCode()),this._y.hashCode()))},n.prototype.debug=function(t){t=t.write("Transform").write(46).write("translate"),t=this._x.isDefined()&&!this._y.isDefined()?t.write("X").write(40).debug(this._x).write(41):!this._x.isDefined()&&this._y.isDefined()?t.write("Y").write(40).debug(this._y).write(41):t.write(40).debug(this._x).write(", ").debug(this._y).write(41)},n.prototype.toString=function(){return this._x.isDefined()&&!this._y.isDefined()?"translate("+this._x+",0)":!this._x.isDefined()&&this._y.isDefined()?"translate(0,"+this._y+")":"translate("+this._x+","+this._y+")"},n.prototype.toAttributeString=function(){return this._x.isDefined()&&!this._y.isDefined()?"translate("+this._x.pxValue()+",0)":!this._x.isDefined()&&this._y.isDefined()?"translate(0,"+this._y.pxValue()+")":"translate("+this._x.pxValue()+","+this._y.pxValue()+")"},n.from=function(t,e){return new n(t=w.fromAny(t),e=w.fromAny(e))},n.fromAny=function(t){if(t instanceof n)return t;if("string"==typeof t)return n.parse(t);throw new TypeError(""+t)},n.fromValue=function(t){var e=t.header("translate");if(e.isDefined()){var r=w.zero(),o=w.zero();return e.forEach((function(t,e){var n=t.key.stringValue();void 0!==n?"x"===n?r=t.toValue().cast(w.form(),r):"y"===n&&(o=t.toValue().cast(w.form(),o)):t instanceof i.Value&&(0===e?r=t.cast(w.form(),r):1===e&&(o=t.cast(w.form(),o)))}),this),new n(r,o)}},n.parse=function(t){for(var i=e.Unicode.stringInput(t);i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();var r=Q.TranslateParser.parse(i);if(r.isDone())for(;i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();return i.isCont()&&!r.isError()&&(r=e.Parser.error(e.Diagnostic.unexpected(i))),r.bind()},n}(Q);Q.Translate=J;var $=function(t){function n(e,i){var r=t.call(this)||this;return r._x=e,r._y=i,r}return l(n,t),Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),n.prototype.transform=function(t,e){return t instanceof Q?t instanceof Q.Identity?this:new Q.List([this,t]):(Array.isArray(t)&&(e=t[1],t=t[0]),"number"==typeof t&&"number"==typeof e?[t*this._x,e*this._y]:(t=w.fromAny(t),e=w.fromAny(e),[t.times(this._x),e.times(this._y)]))},n.prototype.transformX=function(t,e){return t*this._x},n.prototype.transformY=function(t,e){return e*this._y},n.prototype.inverse=function(){return new n(1/(this._x||1),1/(this._y||1))},n.prototype.toAffine=function(){return new Q.Affine(this._x,0,0,this._y,0,0)},n.prototype.toValue=function(){return i.Record.of(i.Attr.of("scale",i.Record.of(i.Slot.of("x",this._x),i.Slot.of("y",this._y))))},n.prototype.conformsTo=function(t){return t instanceof n},n.prototype.equals=function(t){return t instanceof n&&(this._x===t._x&&this._y===t._y)},n.prototype.hashCode=function(){return void 0===n._hashSeed&&(n._hashSeed=r.Murmur3.seed(n)),r.Murmur3.mash(r.Murmur3.mix(r.Murmur3.mix(n._hashSeed,r.Murmur3.hash(this._x)),r.Murmur3.hash(this._y)))},n.prototype.debug=function(t){t=t.write("Transform").write(46).write("scale"),t=0!==this._x&&0===this._y?t.write("X").write(40).debug(this._x).write(41):0===this._x&&0!==this._y?t.write("Y").write(40).debug(this._y).write(41):t.write(40).debug(this._x).write(", ").debug(this._y).write(41)},n.prototype.toString=function(){return 0!==this._x&&0===this._y?"scaleX("+this._x+")":0===this._x&&0!==this._y?"scaleY("+this._y+")":"scale("+this._x+","+this._y+")"},n.from=function(t,e){return new n(t=+t,e=+e)},n.fromAny=function(t){if(t instanceof n)return t;if("string"==typeof t)return n.parse(t);throw new TypeError(""+t)},n.fromValue=function(t){var e=t.header("scale");if(e.isDefined()){var r=0,o=0;return e.forEach((function(t,e){var n=t.key.stringValue();void 0!==n?"x"===n?r=t.toValue().numberValue(r):"y"===n&&(o=t.toValue().numberValue(o)):t instanceof i.Value&&(0===e?r=t.numberValue(r):1===e&&(o=t.numberValue(o)))}),this),new n(r,o)}},n.parse=function(t){for(var i=e.Unicode.stringInput(t);i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();var r=Q.ScaleParser.parse(i);if(r.isDone())for(;i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();return i.isCont()&&!r.isError()&&(r=e.Parser.error(e.Diagnostic.unexpected(i))),r.bind()},n}(Q);Q.Scale=$;var tt=function(t){function n(e){var i=t.call(this)||this;return i._a=e,i}return l(n,t),Object.defineProperty(n.prototype,"angle",{get:function(){return this._a},enumerable:!1,configurable:!0}),n.prototype.transform=function(t,e){if(t instanceof Q)return t instanceof Q.Identity?this:new Q.List([this,t]);Array.isArray(t)&&(e=t[1],t=t[0]),t=w.fromAny(t),e=w.fromAny(e);var i=this._a.radValue(),r=Math.cos(i),n=Math.sin(i);return"number"==typeof t&&"number"==typeof e?[t*r-e*n,t*n+e*r]:[t.times(r).minus(e.times(n)),t.times(n).plus(e.times(r))]},n.prototype.transformX=function(t,e){var i=this._a.radValue();return t*Math.cos(i)-e*Math.sin(i)},n.prototype.transformY=function(t,e){var i=this._a.radValue();return t*Math.sin(i)+e*Math.cos(i)},n.prototype.inverse=function(){return new n(this._a.opposite())},n.prototype.toAffine=function(){var t=this._a.radValue();return new Q.Affine(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0)},n.prototype.toValue=function(){return i.Record.of(i.Attr.of("rotate",this._a.toString()))},n.prototype.conformsTo=function(t){return t instanceof n},n.prototype.equals=function(t){return t instanceof n&&this._a.equals(t._a)},n.prototype.hashCode=function(){return void 0===n._hashSeed&&(n._hashSeed=r.Murmur3.seed(n)),r.Murmur3.mash(r.Murmur3.mix(n._hashSeed,this._a.hashCode()))},n.prototype.debug=function(t){t=t.write("Transform").write(46).write("rotate").write(40).debug(this._a).write(41)},n.prototype.toString=function(){return"rotate("+this._a+")"},n.prototype.toAttributeString=function(){return"rotate("+this._a.degValue()+")"},n.from=function(t){return new n(t=a.fromAny(t,"deg"))},n.fromAny=function(t){if(t instanceof n)return t;if("string"==typeof t)return n.parse(t);throw new TypeError(""+t)},n.fromValue=function(t){var e=t.header("rotate");if(e.isDefined()){var r=a.zero();return e.forEach((function(t,e){"a"===t.key.stringValue()?r=t.toValue().cast(a.form(),r):t instanceof i.Value&&0===e&&(r=t.cast(a.form(),r))}),this),new n(r)}},n.parse=function(t){for(var i=e.Unicode.stringInput(t);i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();var r=Q.RotateParser.parse(i);if(r.isDone())for(;i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();return i.isCont()&&!r.isError()&&(r=e.Parser.error(e.Diagnostic.unexpected(i))),r.bind()},n}(Q);Q.Rotate=tt;var et=function(t){function n(e,i){var r=t.call(this)||this;return r._x=e,r._y=i,r}return l(n,t),Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),n.prototype.transform=function(t,e){return t instanceof Q?t instanceof Q.Identity?this:new Q.List([this,t]):(Array.isArray(t)&&(e=t[1],t=t[0]),t=w.fromAny(t),e=w.fromAny(e),"number"==typeof t&&"number"==typeof e?[t+e*Math.tan(this._x.radValue()),t*Math.tan(this._y.radValue())+e]:[t.plus(e.times(Math.tan(this._x.radValue()))),t.times(Math.tan(this._y.radValue())).plus(e)])},n.prototype.transformX=function(t,e){return t+e*Math.tan(this._x.radValue())},n.prototype.transformY=function(t,e){return t*Math.tan(this._y.radValue())+e},n.prototype.inverse=function(){return new n(this._x.opposite(),this._y.opposite())},n.prototype.toAffine=function(){var t=this._x.radValue(),e=this._y.radValue();return new Q.Affine(1,Math.tan(e),Math.tan(t),1,0,0)},n.prototype.toValue=function(){return i.Record.of(i.Attr.of("skew",i.Record.of(i.Slot.of("x",this._x.toString()),i.Slot.of("y",this._y.toString()))))},n.prototype.conformsTo=function(t){return t instanceof n},n.prototype.equals=function(t){return t instanceof n&&(this._x.equals(t._x)&&this._y.equals(t._y))},n.prototype.hashCode=function(){return void 0===n._hashSeed&&(n._hashSeed=r.Murmur3.seed(n)),r.Murmur3.mash(r.Murmur3.mix(r.Murmur3.mix(n._hashSeed,this._x.hashCode()),this._y.hashCode()))},n.prototype.debug=function(t){t=t.write("Transform").write(46).write("skew"),t=this._x.isDefined()&&!this._y.isDefined()?t.write("X").write(40).debug(this._x).write(41):!this._x.isDefined()&&this._y.isDefined()?t.write("Y").write(40).debug(this._y).write(41):t.write(40).debug(this._x).write(", ").debug(this._y).write(41)},n.prototype.toString=function(){return this._x.isDefined()&&!this._y.isDefined()?"skewX("+this._x+")":!this._x.isDefined()&&this._y.isDefined()?"skewY("+this._y+")":"skew("+this._x+","+this._y+")"},n.prototype.toAttributeString=function(){return this._x.isDefined()&&!this._y.isDefined()?"skewX("+this._x.degValue()+")":!this._x.isDefined()&&this._y.isDefined()?"skewY("+this._y.degValue()+")":"skew("+this._x.degValue()+","+this._y.degValue()+")"},n.from=function(t,e){return new n(t=a.fromAny(t,"deg"),e=a.fromAny(e,"deg"))},n.fromAny=function(t){if(t instanceof n)return t;if("string"==typeof t)return n.parse(t);throw new TypeError(""+t)},n.fromValue=function(t){var e=t.header("skew");if(e.isDefined()){var r=a.zero(),o=a.zero();return e.forEach((function(t,e){var n=t.key.stringValue();void 0!==n?"x"===n?r=t.toValue().cast(a.form(),r):"y"===n&&(o=t.toValue().cast(a.form(),o)):t instanceof i.Value&&(0===e?r=t.cast(a.form(),r):1===e&&(o=t.cast(a.form(),o)))}),this),new n(r,o)}},n.parse=function(t){for(var i=e.Unicode.stringInput(t);i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();var r=Q.SkewParser.parse(i);if(r.isDone())for(;i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();return i.isCont()&&!r.isError()&&(r=e.Parser.error(e.Diagnostic.unexpected(i))),r.bind()},n}(Q);Q.Skew=et;var it=function(t){function n(e,i,r,n,o,s){var a=t.call(this)||this;return a._x0=e,a._y0=i,a._x1=r,a._y1=n,a._tx=o,a._ty=s,a}return l(n,t),Object.defineProperty(n.prototype,"x0",{get:function(){return this._x0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y0",{get:function(){return this._y0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"x1",{get:function(){return this._x1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y1",{get:function(){return this._y1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tx",{get:function(){return this._tx},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ty",{get:function(){return this._ty},enumerable:!1,configurable:!0}),n.prototype.transform=function(t,e){return t instanceof Q?t instanceof Q.Identity?this:this.multiply(t.toAffine()):(Array.isArray(t)&&(e=t[1],t=t[0]),t=w.fromAny(t),e=w.fromAny(e),"number"==typeof t&&"number"==typeof e?[t*this._x0+e*this._x1+this._tx,t*this._y0+e*this._y1+this._ty]:[t.times(this._x0).plus(e.times(this._x1)).plus(this._tx),t.times(this._y0).plus(e.times(this._y1)).plus(this._ty)])},n.prototype.transformX=function(t,e){return t*this._x0+e*this._x1+this._tx},n.prototype.transformY=function(t,e){return t*this._y0+e*this._y1+this._ty},n.prototype.inverse=function(){var t=this._x0,e=this._y0,i=this._x1,r=this._y1,o=this._tx,s=this._ty,a=t*r-i*e;if(Math.abs(a)>=Number.MIN_VALUE)return new n(r/a,-e/a,-i/a,t/a,(i*s-r*o)/a,(e*o-t*s)/a);throw new Error("non-invertible affine transform with determinant "+a)},n.prototype.multiply=function(t){return new n(this._x0*t._x0+this._x1*t._y0,this._y0*t._x0+this._y1*t._y0,this._x0*t._x1+this._x1*t._y1,this._y0*t._x1+this._y1*t._y1,this._x0*t._tx+this._x1*t._ty,this._y0*t._tx+this._y1*t._ty)},n.prototype.toAffine=function(){return this},n.prototype.toValue=function(){return i.Record.of(i.Attr.of("matrix",i.Record.of(this._x0,this._y0,this._x1,this._y1,this._tx,this._ty)))},n.prototype.conformsTo=function(t){return t instanceof n},n.prototype.equals=function(t){return t instanceof n&&(this._x0===t._x0&&this._y0===t._y0&&this._x1===t._x1&&this._y1===t._y1&&this._tx===t._tx&&this._ty===t._ty)},n.prototype.hashCode=function(){return void 0===n._hashSeed&&(n._hashSeed=r.Murmur3.seed(n)),r.Murmur3.mash(r.Murmur3.mix(r.Murmur3.mix(r.Murmur3.mix(r.Murmur3.mix(r.Murmur3.mix(r.Murmur3.mix(n._hashSeed,r.Murmur3.hash(this._x0)),r.Murmur3.hash(this._y0)),r.Murmur3.hash(this._x1)),r.Murmur3.hash(this._y1)),r.Murmur3.hash(this._tx)),r.Murmur3.hash(this._ty)))},n.prototype.debug=function(t){t=t.write("Transform").write(46).write("affine").write(40).debug(this._x0).write(", ").debug(this._y0).write(", ").debug(this._x1).write(", ").debug(this._y1).write(", ").debug(this._tx).write(", ").debug(this._ty).write(41)},n.prototype.toString=function(){return"matrix("+this._x0+","+this._y0+","+this._x1+","+this._y1+","+this._tx+","+this._ty+")"},n.identity=function(){return void 0===n._identityMatrix&&(n._identityMatrix=n.from()),n._identityMatrix},n.from=function(t,e,i,r,o,s){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===s&&(s=0),new n(t=+t,e=+e,i=+i,r=+r,o=+o,s=+s)},n.fromAny=function(t){if(t instanceof n)return t;if("string"==typeof t)return n.parse(t);throw new TypeError(""+t)},n.fromValue=function(t){var e=t.header("matrix");if(e.isDefined()){var r=0,o=0,s=0,a=0,u=0,l=0;return e.forEach((function(t,e){var n=t.key.stringValue();if(void 0!==n)"x0"===n?r=t.toValue().numberValue(r):"y0"===n?o=t.toValue().numberValue(o):"x1"===n?s=t.toValue().numberValue(s):"y1"===n?a=t.toValue().numberValue(a):"tx"===n?u=t.toValue().numberValue(u):"ty"===n&&(l=t.toValue().numberValue(l));else if(t instanceof i.Value)switch(e){case 0:r=t.numberValue(r);break;case 1:o=t.numberValue(o);break;case 2:s=t.numberValue(s);break;case 3:a=t.numberValue(a);break;case 4:u=t.numberValue(u);break;case 5:l=t.numberValue(l)}}),this),new n(r,o,s,a,u,l)}},n.parse=function(t){for(var i=e.Unicode.stringInput(t);i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();var r=Q.AffineParser.parse(i);if(r.isDone())for(;i.isCont()&&e.Unicode.isWhitespace(i.head());)i=i.step();return i.isCont()&&!r.isError()&&(r=e.Parser.error(e.Diagnostic.unexpected(i))),r.bind()},n}(Q);Q.Affine=it;var rt=function(t){function e(e){var i=t.call(this)||this;return i._transforms=e,i}return l(e,t),Object.defineProperty(e.prototype,"transforms",{get:function(){return this._transforms},enumerable:!1,configurable:!0}),e.prototype.transform=function(t,e){if(t instanceof Q)return t instanceof Q.Identity?this:new Q.List([this,t]);Array.isArray(t)&&(e=t[1],t=t[0]);var i=this._transforms;if("number"==typeof t&&"number"==typeof e){for(var r=[t,e],n=0,o=i.length;n<o;n+=1)r=i[n].transform(r);return r}for(r=[w.fromAny(t),w.fromAny(e)],n=0,o=i.length;n<o;n+=1)r=i[n].transform(r);return r},e.prototype.transformX=function(t,e){for(var i=this._transforms,r=0,n=i.length;r<n;r+=1)t=i[r].transformX(t,e),e=i[r].transformX(t,e);return t},e.prototype.transformY=function(t,e){for(var i=this._transforms,r=0,n=i.length;r<n;r+=1)t=i[r].transformX(t,e),e=i[r].transformX(t,e);return e},e.prototype.inverse=function(){for(var t=this._transforms,i=t.length,r=new Array(i),n=0;n<i;n+=1)r[n]=t[i-n-1].inverse();return new e(r)},e.prototype.toAffine=function(){for(var t=it.identity(),e=this._transforms,i=0,r=e.length;i<r;i+=1)t=t.multiply(e[i].toAffine());return t},e.prototype.toValue=function(){for(var t=this._transforms,e=t.length,r=i.Record.create(e),n=0;n<e;n+=1)r.push(t[n].toValue());return r},e.prototype.conformsTo=function(t){if(t instanceof e){var i=this._transforms.length;if(i===t._transforms.length){for(var r=0;r<i;r+=1)if(!this._transforms[r].conformsTo(t._transforms[r]))return!1;return!0}}return!1},e.prototype.equals=function(t){if(t instanceof e){var i=this._transforms.length;if(i===t._transforms.length){for(var r=0;r<i;r+=1)if(!this._transforms[r].equals(t._transforms[r]))return!1;return!0}}return!1},e.prototype.hashCode=function(){void 0===e._hashSeed&&(e._hashSeed=r.Murmur3.seed(e));for(var t=e._hashSeed,i=this._transforms,n=0,o=i.length;n<o;n+=1)t=r.Murmur3.mix(t,i[n].hashCode());return r.Murmur3.mash(t)},e.prototype.debug=function(t){t=t.write("Transform").write(46).write("list").write(40);var e=this._transforms,i=e.length;if(i>0){t=t.debug(e[0]);for(var r=1;r<i;r+=1)t=t.write(", ").debug(e[r])}t=t.write(41)},e.prototype.toString=function(){var t=this._transforms,e=t.length;if(e>0){for(var i=t[0].toString(),r=1;r<e;r+=1)i=i+" "+t[r].toString();return i}return""},e.prototype.toAttributeString=function(){var t=this._transforms,e=t.length;if(e>0){for(var i=t[0].toAttributeString(),r=1;r<e;r+=1)i=i+" "+t[r].toAttributeString();return i}return""},e.from=function(t){for(var i=[],r=0;r<t.length;r+=1){var n=Q.fromAny(t[r]);n instanceof e?i.push.apply(i,n._transforms):n instanceof Q.Identity||i.push(n)}return new e(i)},e.fromAny=function(t){if(t instanceof e)return t;if("string"==typeof t)return e.parse(t);throw new TypeError(""+t)},e.fromValue=function(t){var i=[];if(t.forEach((function(t){var e=Q.fromValue(t.toValue());void 0!==e&&i.push(e)}),this),0!==i.length)return new e(i)},e.parse=function(t){var i=Q.parse(t);return i instanceof e?i:new e([i])},e}(Q);Q.List=rt;var nt=function(t){function i(e,i,r,n){var o=t.call(this)||this;return o.identOutput=e,o.xParser=i,o.yParser=r,o.step=n,o}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.identOutput,this.xParser,this.yParser,this.step)},i.parse=function(t,r,n,o,s){void 0===s&&(s=1);var a=0;if(1===s){for(r=r||e.Unicode.stringOutput();t.isCont()&&(a=t.head(),e.Unicode.isAlpha(a));)t=t.step(),r.write(a);if(!t.isEmpty())switch(u=r.bind()){case"translateX":case"translateY":case"translate":s=2;break;default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}}if(2===s){for(;t.isCont()&&(a=t.head(),e.Unicode.isSpace(a));)t=t.step();if(t.isCont()&&40===a)t.step(),s=3;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("(",t))}if(3===s){if(void 0===n){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(n=V.parse(t,"px"))}else n=n.feed(t);if(void 0!==n)if(n.isDone())s=4;else if(n.isError())return n.asError()}if(4===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();if(t.isCont())if(41===(a=t.head())){switch(t.step(),u=r.bind()){case"translateX":return e.Parser.done(Q.translateX(n.bind()));case"translateY":return e.Parser.done(Q.translateY(n.bind()));default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}}else{if(44!==a)return e.Parser.error(e.Diagnostic.expected(",",t));t.step(),s=5}else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}if(5===s){if(void 0===o){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(o=V.parse(t,"px"))}else o=o.feed(t);if(void 0!==o)if(o.isDone())s=6;else if(o.isError())return o.asError()}if(6===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();var u;if(t.isCont()&&41===t.head())switch(t.step(),u=r.bind()){case"translate":return e.Parser.done(Q.translate(n.bind(),o.bind()));default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected(")",t))}return new i(r,n,o,s)},i.parseRest=function(t,e){return i.parse(t,e,void 0,void 0,2)},i}(e.Parser);Q.TranslateParser=nt;var ot=function(t){function i(e,i,r,n){var o=t.call(this)||this;return o.identOutput=e,o.xParser=i,o.yParser=r,o.step=n,o}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.identOutput,this.xParser,this.yParser,this.step)},i.parse=function(t,r,n,o,s){void 0===s&&(s=1);var a=0;if(1===s){for(r=r||e.Unicode.stringOutput();t.isCont()&&(a=t.head(),e.Unicode.isAlpha(a));)t=t.step(),r.write(a);if(!t.isEmpty())switch(u=r.bind()){case"scaleX":case"scaleY":case"scale":s=2;break;default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}}if(2===s){for(;t.isCont()&&(a=t.head(),e.Unicode.isSpace(a));)t=t.step();if(t.isCont()&&40===a)t.step(),s=3;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("(",t))}if(3===s){if(void 0===n){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(n=e.Base10.parseNumber(t))}else n=n.feed(t);if(void 0!==n)if(n.isDone())s=4;else if(n.isError())return n.asError()}if(4===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();if(t.isCont())if(41===(a=t.head())){switch(t.step(),u=r.bind()){case"scaleX":return e.Parser.done(Q.scaleX(n.bind()));case"scaleY":return e.Parser.done(Q.scaleY(n.bind()));default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}}else{if(44!==a)return e.Parser.error(e.Diagnostic.expected(",",t));t.step(),s=5}else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}if(5===s){if(void 0===o){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(o=e.Base10.parseNumber(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())s=6;else if(o.isError())return o.asError()}if(6===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();var u;if(t.isCont()&&41===t.head())switch(t.step(),u=r.bind()){case"scale":return e.Parser.done(Q.scale(n.bind(),o.bind()));default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected(")",t))}return new i(r,n,o,s)},i.parseRest=function(t,e){return i.parse(t,e,void 0,void 0,2)},i}(e.Parser);Q.ScaleParser=ot;var st=function(t){function i(e,i,r){var n=t.call(this)||this;return n.identOutput=e,n.aParser=i,n.step=r,n}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.identOutput,this.aParser,this.step)},i.parse=function(t,r,n,o){void 0===o&&(o=1);var s=0;if(1===o){for(r=r||e.Unicode.stringOutput();t.isCont()&&(s=t.head(),e.Unicode.isAlpha(s));)t=t.step(),r.write(s);if(!t.isEmpty())switch(a=r.bind()){case"rotate":o=2;break;default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+a,t))}}if(2===o){for(;t.isCont()&&(s=t.head(),e.Unicode.isSpace(s));)t=t.step();if(t.isCont()&&40===s)t.step(),o=3;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("(",t))}if(3===o){if(void 0===n){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(n=v.parse(t,"deg"))}else n=n.feed(t);if(void 0!==n)if(n.isDone())o=4;else if(n.isError())return n.asError()}if(4===o){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();var a;if(t.isCont()&&41===t.head())switch(t.step(),a=r.bind()){case"rotate":return e.Parser.done(Q.rotate(n.bind()));default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+a,t))}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected(")",t))}return new i(r,n,o)},i.parseRest=function(t,e){return i.parse(t,e,void 0,2)},i}(e.Parser);Q.RotateParser=st;var at=function(t){function i(e,i,r,n){var o=t.call(this)||this;return o.identOutput=e,o.xParser=i,o.yParser=r,o.step=n,o}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.identOutput,this.xParser,this.yParser,this.step)},i.parse=function(t,r,n,o,s){void 0===s&&(s=1);var a=0;if(1===s){for(r=r||e.Unicode.stringOutput();t.isCont()&&(a=t.head(),e.Unicode.isAlpha(a));)t=t.step(),r.write(a);if(!t.isEmpty())switch(u=r.bind()){case"skewX":case"skewY":case"skew":s=2;break;default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}}if(2===s){for(;t.isCont()&&(a=t.head(),e.Unicode.isSpace(a));)t=t.step();if(t.isCont()&&40===a)t.step(),s=3;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("(",t))}if(3===s){if(void 0===n){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(n=v.parse(t,"deg"))}else n=n.feed(t);if(void 0!==n)if(n.isDone())s=4;else if(n.isError())return n.asError()}if(4===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();if(t.isCont())if(41===(a=t.head())){switch(t.step(),u=r.bind()){case"skewX":return e.Parser.done(Q.skewX(n.bind()));case"skewY":return e.Parser.done(Q.skewY(n.bind()));default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}}else{if(44!==a)return e.Parser.error(e.Diagnostic.expected(",",t));t.step(),s=5}else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}if(5===s){if(void 0===o){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(o=v.parse(t,"deg"))}else o=o.feed(t);if(void 0!==o)if(o.isDone())s=6;else if(o.isError())return o.asError()}if(6===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();var u;if(t.isCont()&&41===t.head())switch(t.step(),u=r.bind()){case"skew":return e.Parser.done(Q.skew(n.bind(),o.bind()));default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected(")",t))}return new i(r,n,o,s)},i.parseRest=function(t,e){return i.parse(t,e,void 0,void 0,2)},i}(e.Parser);Q.SkewParser=at;var ut=function(t){function i(e,i,r,n){var o=t.call(this)||this;return o.identOutput=e,o.entries=i,o.entryParser=r,o.step=n,o}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.identOutput,this.entries,this.entryParser,this.step)},i.parse=function(t,r,n,o,s){void 0===n&&(n=[]),void 0===s&&(s=1);var a=0;if(1===s){for(r=r||e.Unicode.stringOutput();t.isCont()&&(a=t.head(),e.Unicode.isAlpha(a));)t=t.step(),r.write(a);if(!t.isEmpty())switch(u=r.bind()){case"matrix":s=2;break;default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}}if(2===s){for(;t.isCont()&&(a=t.head(),e.Unicode.isSpace(a));)t=t.step();if(t.isCont()&&40===a)t.step(),s=3;else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.expected("(",t))}for(;;){if(3===s){if(void 0===o){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();t.isEmpty()||(o=e.Base10.parseNumber(t))}else o=o.feed(t);if(void 0!==o)if(o.isDone())n.push(o.bind()),o=void 0,s=4;else if(o.isError())return o.asError()}if(4===s){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();if(t.isCont()){if(41!==(a=t.head())){if(n.length>=6)return e.Parser.error(e.Diagnostic.expected(")",t));if(44===a){t.step(),s=3;continue}return e.Parser.error(e.Diagnostic.expected(",",t))}var u;switch(t.step(),u=r.bind()){case"matrix":return e.Parser.done(Q.affine.apply(Q,n));default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+u,t))}}else if(t.isDone())return e.Parser.error(e.Diagnostic.unexpected(t))}break}return new i(r,n,o,s)},i.parseRest=function(t,e){return i.parse(t,e,void 0,void 0,2)},i}(e.Parser);Q.AffineParser=ut;var lt=function(t){function i(e,i){var r=t.call(this)||this;return r.transform=e,r.transformParser=i,r}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.transform,this.transformParser)},i.parse=function(t,r,n){for(void 0===r&&(r=Q.identity());;){if(void 0===n){for(;t.isCont()&&e.Unicode.isSpace(t.head());)t.step();if(t.isCont())n=Q.Parser.parse(t);else if(t.isDone())return e.Parser.done(r)}if(void 0!==n){if((n=n.feed(t)).isDone()){r=r.transform(n.bind()),n=void 0;continue}if(n.isError())return n.asError()}break}return new i(r,n)},i}(e.Parser);Q.ListParser=lt;var ht=function(t){function i(e){var i=t.call(this)||this;return i.identOutput=e,i}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.identOutput)},i.parse=function(t,r){var n=0;for(r=r||e.Unicode.stringOutput();t.isCont()&&(n=t.head(),e.Unicode.isAlpha(n));)t=t.step(),r.write(n);if(!t.isEmpty()){var o=r.bind();switch(o){case"translateX":case"translateY":case"translate":return Q.TranslateParser.parseRest(t,r);case"scaleX":case"scaleY":case"scale":return Q.ScaleParser.parseRest(t,r);case"rotate":return Q.RotateParser.parseRest(t,r);case"skewX":case"skewY":case"skew":return Q.SkewParser.parseRest(t,r);case"matrix":return Q.AffineParser.parseRest(t,r);case"none":return e.Parser.done(Q.identity());default:return e.Parser.error(e.Diagnostic.message("unknown transform function: "+o,t))}}return new i(r)},i}(e.Parser);Q.Parser=ht;var ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.between=function(t,i){return t instanceof J&&i instanceof J?new e.Translate(t,i):t instanceof $&&i instanceof $?new e.Scale(t,i):t instanceof tt&&i instanceof tt?new e.Rotate(t,i):t instanceof et&&i instanceof et?new e.Skew(t,i):t instanceof rt&&i instanceof rt&&t.conformsTo(i)?new e.List(t,i):t instanceof Q&&i instanceof Q?new e.Affine(t.toAffine(),i.toAffine()):Q.isAny(t)&&Q.isAny(i)?e.between(Q.fromAny(t),Q.fromAny(i)):n.Interpolator.between(t,i)},e.tryBetween=function(t,i){return t instanceof J&&i instanceof J?new e.Translate(t,i):t instanceof $&&i instanceof $?new e.Scale(t,i):t instanceof tt&&i instanceof tt?new e.Rotate(t,i):t instanceof et&&i instanceof et?new e.Skew(t,i):t instanceof rt&&i instanceof rt&&t.conformsTo(i)?new e.List(t,i):null},e}(n.Interpolator);n.Interpolator.registerFactory(ct);var dt=function(t){function e(e,i){var r=t.call(this)||this;return r.xUnits=i.x.units,r.x0=e.x.toValue(r.xUnits),r.dx=i.x.value-r.x0,r.yUnits=i.y.units,r.y0=e.y.toValue(r.yUnits),r.dy=i.y.value-r.y0,r}return l(e,t),e.prototype.interpolate=function(t){var e=w.from(this.x0+this.dx*t,this.xUnits),i=w.from(this.y0+this.dy*t,this.yUnits);return new J(e,i)},e.prototype.deinterpolate=function(t){if((t=Q.fromAny(t))instanceof J){var e=t.x.units,i=w.fromAny(this.x0,this.xUnits).toValue(e),r=w.fromAny(this.y0,this.yUnits).toValue(e),n=w.fromAny(this.dx,this.xUnits).toValue(e),o=w.fromAny(this.dy,this.yUnits).toValue(e),s=t.x.toValue(e)-i,a=t.y.toValue(e)-r,u=s*n+a*o,l=Math.sqrt(s*s+a*a);return 0!==l?u/l:l}return 0},e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.x0===t.x0&&this.dx===t.dx&&this.xUnits===t.xUnits&&this.y0===t.y0&&this.dy===t.dy&&this.yUnits===t.yUnits)},e.between=function(t,i){return t instanceof J&&i instanceof J?new e(t,i):ct.between(t,i)},e}(ct);ct.Translate=dt;var pt=function(t){function e(e,i){var r=t.call(this)||this;return r.x0=e.x,r.dx=i.x-r.x0,r.y0=e.y,r.dy=i.y-r.y0,r}return l(e,t),e.prototype.interpolate=function(t){var e=this.x0+this.dx*t,i=this.y0+this.dy*t;return new $(e,i)},e.prototype.deinterpolate=function(t){if((t=Q.fromAny(t))instanceof $){var e=t.x-this.x0,i=t.y-this.y0,r=e*this.dx+i*this.dy,n=Math.sqrt(e*e+i*i);return 0!==n?r/n:n}return 0},e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.x0===t.x0&&this.dx===t.dx&&this.y0===t.y0&&this.dy===t.dy)},e.between=function(t,i){return t instanceof $&&i instanceof $?new e(t,i):ct.between(t,i)},e}(ct);ct.Scale=pt;var ft=function(t){function e(e,i){var r=t.call(this)||this;return r.units=i.angle.units,r.v0=e.angle.toValue(r.units),r.dv=i.angle.value-r.v0,r}return l(e,t),e.prototype.interpolate=function(t){var e=a.from(this.v0+this.dv*t,this.units);return new tt(e)},e.prototype.deinterpolate=function(t){if((t=Q.fromAny(t))instanceof tt){var e=t.angle.toValue(this.units);return 0!==this.dv?(e-this.v0)/this.dv:this.dv}return 0},e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.v0===t.v0&&this.dv===t.dv&&this.units===t.units)},e.between=function(t,i){return t instanceof tt&&i instanceof tt?new e(t,i):ct.between(t,i)},e}(ct);ct.Rotate=ft;var vt=function(t){function e(e,i){var r=t.call(this)||this;return r.xUnits=i.x.units,r.x0=e.x.toValue(r.xUnits),r.dx=i.x.value-r.x0,r.yUnits=i.y.units,r.y0=e.y.toValue(r.yUnits),r.dy=i.y.value-r.y0,r}return l(e,t),e.prototype.interpolate=function(t){var e=a.from(this.x0+this.dx*t,this.xUnits),i=a.from(this.y0+this.dy*t,this.yUnits);return new et(e,i)},e.prototype.deinterpolate=function(t){if((t=Q.fromAny(t))instanceof et){var e=t.x.units,i=a.fromAny(this.x0,this.xUnits).toValue(e),r=a.fromAny(this.y0,this.yUnits).toValue(e),n=a.fromAny(this.dx,this.xUnits).toValue(e),o=a.fromAny(this.dy,this.yUnits).toValue(e),s=t.x.toValue(e)-i,u=t.y.toValue(e)-r,l=s*n+u*o,h=Math.sqrt(s*s+u*u);return 0!==h?l/h:h}return 0},e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.x0===t.x0&&this.dx===t.dx&&this.xUnits===t.xUnits&&this.y0===t.y0&&this.dy===t.dy&&this.yUnits===t.yUnits)},e.between=function(t,i){return t instanceof et&&i instanceof et?new e(t,i):ct.between(t,i)},e}(ct);ct.Skew=vt;var yt=function(t){function e(e,i){var r=t.call(this)||this;return r.f0=e,r.f1=i,r}return l(e,t),e.prototype.interpolate=function(t){return this.f1},e.prototype.deinterpolate=function(t){return 0},e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.f0.equals(t.f0)&&this.f1.equals(t.f1))},e.between=function(t,i){return t instanceof it&&i instanceof it?new e(t,i):ct.between(t,i)},e}(ct);ct.Affine=yt;var mt=function(t){function e(e,i){for(var r=t.call(this)||this,n=e.transforms,o=i.transforms,s=Math.min(n.length,o.length),a=new Array(s),u=0;u<s;u+=1)a[u]=ct.between(n[u],o[u]);return r.interpolators=a,r}return l(e,t),e.prototype.interpolate=function(t){for(var e=this.interpolators,i=e.length,r=new Array(i),n=0;n<i;n+=1)r[n]=e[n].interpolate(t);return new rt(r)},e.prototype.deinterpolate=function(t){return 0},e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.prototype.equals=function(t){if(this===t)return!0;if(t instanceof e){var i=this.interpolators.length;if(i===t.interpolators.length){for(var r=0;r<i;r+=1)if(!this.interpolators[r].equals(t.interpolators[r]))return!1;return!0}}return!1},e.between=function(t,i){return t instanceof rt&&i instanceof rt&&t.conformsTo(i)?new e(t,i):ct.between(t,i)},e}(ct);ct.List=mt;var wt=function(t){function e(e){var i=t.call(this)||this;return i._unit=e,i}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t){return(t=Q.fromAny(t)).toValue()},e.prototype.cast=function(t){var e=t.toValue();try{if(e instanceof i.Record)return Q.fromValue(e);var r=e.stringValue(void 0);if(void 0!==r)return Q.parse(r)}catch(t){}},e}(i.Form);Q.Form=wt;var gt=function(){function t(){}return t.linear=function(e,i,r,o){return Array.isArray(e)?Array.isArray(i)?(i=i,new t.Linear(e[0],e[1],n.Interpolator.between(i[0],i[1]))):new t.Linear(e[0],e[1],i):(e=e,i=i,void 0===o?new t.Linear(e,i,r):(r=r,o=o,new t.Linear(e,i,n.Interpolator.between(r,o))))},t.time=function(e,i,r,o){return Array.isArray(e)?Array.isArray(i)?(i=i,new t.Time(e[0],e[1],n.Interpolator.between(i[0],i[1]))):new t.Time(e[0],e[1],i):(e=e,i=i,void 0===o?new t.Time(e,i,r):(r=r,o=o,new t.Time(e,i,n.Interpolator.between(r,o))))},t.from=function(e,i,r,s){if("time"===e){s=r,r=i;var a=o.DateTime.current();i=a,e=a.time(a.time()-864e5)}else"linear"===e&&(s=r,r=i,i=1,e=0);if(e instanceof o.DateTime||e instanceof Date||i instanceof o.DateTime||i instanceof Date)return void 0===s?new t.Time(e,i,r):new t.Time(e,i,n.Interpolator.between(r,s));if("number"==typeof e&&"number"==typeof i)return void 0===s?new t.Linear(e,i,r):new t.Linear(e,i,n.Interpolator.between(r,s));throw new TypeError(""+arguments)},t}(),_t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(gt);gt.Continuous=_t;var bt=function(t){function e(e,i,r){var n=t.call(this)||this;return n.x0=e,n.dx=i-n.x0,n.fx=r,n}return l(e,t),e.prototype.norm=function(t){return 0!==this.dx?(t-this.x0)/this.dx:this.dx},e.prototype.scale=function(t){var e=this.norm(t);return this.fx.interpolate(e)},e.prototype.unscale=function(t){var e=this.fx.deinterpolate(t);return this.x0+this.dx*e},e.prototype.clampScale=function(t){var e=Math.min(Math.max(0,this.norm(t)),1);return this.fx.interpolate(e)},e.prototype.domain=function(t,i){if(void 0===t)return[this.x0,this.x0+this.dx];void 0===i&&(i=t[1],t=t[0]);var r=i-t;return t===this.x0&&r===this.dx?this:new e(t,i,this.fx)},e.prototype.range=function(t,i){return void 0===t?this.fx.range():void 0===i?(t=t,new e(this.x0,this.x0+this.dx,this.fx.range(t))):(t=t,new e(this.x0,this.x0+this.dx,this.fx.range(t,i)))},e.prototype.interpolator=function(t){return void 0===t?this.fx:new e(this.x0,this.x0+this.dx,t)},e.prototype.clampDomain=function(t,i,r,n,o){var s=this.x0,a=this.x0+this.dx;void 0!==t&&(s<a&&s<t?s=t:a<s&&a<t&&(a=t)),void 0!==i&&(s<a&&a>i||a<s&&s>i)&&(a=i);var u=+this.scale(s),l=+this.scale(a)-u,h=Math.abs(l/(a-s));if(void 0!==r&&h<1/r){var c=l*r;s=((d=s+a)-c)/2,a=(d+c)/2}else if(void 0!==n&&h>1/n){var d,p=l*n;s=((d=s+a)-p)/2,a=(d+p)/2}var f=a-s;return void 0===o&&(o=1e-12),Math.abs(s-this.x0)<o&&Math.abs(f-this.dx)<o?this:new e(s,a,this.fx)},e.prototype.solveDomain=function(t,i,r,n,o){var s,a=this.fx.range(),u=+a[0],l=+a[1],h=+i-(s=void 0===r||void 0===n||t===r||i===n?(l-u)/(this.dx||1):(+n-+i)/(r-t))*t,c=(u-h)/s,d=(l-h)/s,p=d-c;return void 0===o&&(o=1e-12),Math.abs(c-this.x0)<o&&Math.abs(p-this.dx)<o?this:new e(c,d,this.fx)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.x0===t.x0&&this.dx===t.dx&&this.fx.equals(t.fx))},e}(_t);gt.Linear=bt;var Ct=function(t){function e(e,i,r,n){var s=t.call(this)||this;return e=o.DateTime.fromAny(e),i=o.DateTime.fromAny(i),s.t0=e.time(),s.dt=i.time()-s.t0,s.zone=n||e.zone(),s.ft=r,s}return l(e,t),e.prototype.norm=function(t){return t=o.DateTime.time(t),0!==this.dt?(t-this.t0)/this.dt:this.dt},e.prototype.scale=function(t){var e=this.norm(t);return this.ft.interpolate(e)},e.prototype.unscale=function(t){var e=this.ft.deinterpolate(t);return new o.DateTime(this.t0+this.dt*e)},e.prototype.clampScale=function(t){var e=Math.min(Math.max(0,this.norm(t)),1);return this.ft.interpolate(e)},e.prototype.domain=function(t,i){if(void 0===t)return[new o.DateTime(this.t0,this.zone),new o.DateTime(this.t0+this.dt,this.zone)];void 0===i&&(i=t[1],t=t[0]),t=o.DateTime.time(t);var r=(i=o.DateTime.time(i))-t;return t===this.t0&&r===this.dt?this:new e(t,i,this.ft,this.zone)},e.prototype.range=function(t,i){return void 0===t?this.ft.range():void 0===i?(t=t,new e(this.t0,this.t0+this.dt,this.ft.range(t),this.zone)):(t=t,new e(this.t0,this.t0+this.dt,this.ft.range(t,i),this.zone))},e.prototype.interpolator=function(t){return void 0===t?this.ft:new e(this.t0,this.t0+this.dt,t,this.zone)},e.prototype.clampDomain=function(t,i,r,n,s){var a=this.t0,u=this.t0+this.dt;void 0!==t&&(t=o.DateTime.time(t),a<u&&a<t?a=t:u<a&&u<t&&(u=t)),void 0!==i&&(i=o.DateTime.time(i),(a<u&&u>i||u<a&&a>i)&&(u=i));var l=+this.scale(a),h=+this.scale(u)-l,c=Math.abs(h/(u-a));if(void 0!==r&&c<1/r){var d=h*r;a=((p=a+u)-d)/2,u=(p+d)/2}else if(void 0!==n&&c>1/n){var p,f=h*n;a=((p=a+u)-f)/2,u=(p+f)/2}var v=u-a;return void 0===s&&(s=1e-12),Math.abs(a-this.t0)<s&&Math.abs(v-this.dt)<s?this:new e(a,u,this.ft,this.zone)},e.prototype.solveDomain=function(t,i,r,n,s){t=o.DateTime.time(t),r=void 0!==r?o.DateTime.time(r):r;var a,u=this.ft.range(),l=+u[0],h=+u[1],c=+i-(a=void 0===r||void 0===n||t===r||i===n?(h-l)/(this.dt||1):(+n-+i)/(r-t))*t,d=(l-c)/a,p=(h-c)/a,f=p-d;return void 0===s&&(s=1e-12),Math.abs(d-this.t0)<s&&Math.abs(f-this.dt)<s?this:new e(d,p,this.ft,this.zone)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.t0===t.t0&&this.dt===t.dt&&this.ft.equals(t.ft))},e}(_t);gt.Time=Ct;var xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.range=function(t,i){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===i?(t=t,e.between(t[0],t[1])):e.between(t,i)},e.between=function(t,i){return t instanceof bt&&i instanceof bt?new e.Linear(t,i):t instanceof Ct&&i instanceof Ct?new e.Time(t,i):n.Interpolator.between(t,i)},e.tryBetween=function(t,i){return t instanceof bt&&i instanceof bt?new e.Linear(t,i):t instanceof Ct&&i instanceof Ct?new e.Time(t,i):null},e}(n.Interpolator);n.Interpolator.registerFactory(xt);var Vt=function(t){function e(e,i){var r=t.call(this)||this;return r.x0=new n.NumberInterpolator(e.x0,i.x0),r.dx=new n.NumberInterpolator(e.dx,i.dx),r.fx=new n.InterpolatorInterpolator(e.fx,i.fx),r}return l(e,t),e.prototype.interpolate=function(t){var e=this.x0.interpolate(t),i=this.dx.interpolate(t),r=this.fx.interpolate(t);return new bt(e,e+i,r)},e.prototype.deinterpolate=function(t){return 0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.x0.equals(t.x0)&&this.dx.equals(t.dx)&&this.fx.equals(t.fx))},e}(xt);xt.Linear=Vt;var St=function(t){function e(e,i){var r=t.call(this)||this;return r.t0=new n.NumberInterpolator(e.t0,i.t0),r.dt=new n.NumberInterpolator(e.dt,i.dt),r.ft=new n.InterpolatorInterpolator(e.ft,i.ft),r}return l(e,t),e.prototype.interpolate=function(t){var e=this.t0.interpolate(t),i=this.dt.interpolate(t),r=this.ft.interpolate(t);return new Ct(e,e+i,r)},e.prototype.deinterpolate=function(t){return 0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.t0.equals(t.t0)&&this.dt.equals(t.dt)&&this.ft.equals(t.ft))},e}(xt);function At(t){return t}function Pt(t){return t*t}function Mt(t){return t*(2-t)}function Dt(t){return(t*=2)<=1?t*=t:(t-=1,t*=2-t,t+=1),t/=2}function Et(t){return t*t*t}function Rt(t){return t-=1,t*=t*t,t+=1}function Tt(t){return(t*=2)<=1?t*=t*t:(t-=2,t*=t*t,t+=2),t/=2}function Ot(t){return t*t*t*t}function Ft(t){return 1-(t-=1)*t*t*t}function kt(t){var e=t-1;return t<.5?8*t*t*t*t:1-8*e*e*e*e}function Nt(t){return 0===t?0:Math.pow(2,10*(t-1))}function Ut(t){return 1===t?1:1-Math.pow(2,-10*t)}function It(t){return 1===t||0===t?t:(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}function Lt(t){return-1*(Math.sqrt(1-t/1*t)-1)}function jt(t){return t-=1,Math.sqrt(1-t*t)}function qt(t){if((t*=2)<1)return-.5*(Math.sqrt(1-t*t)-1);var e=t-2;return.5*(Math.sqrt(1-e*e)+1)}function zt(t){var e=1.70158;return t*t*((e+1)*t-e)}function Bt(t){var e=t/1-1;return e*e*6.2985344964+1}function Wt(t){var e=2.5949095;if((t*=2)<1)return.5*t*t*((e+1)*t-e);var i=t-2;return.5*(i*i*((e+1)*i+e)+2)}function Ht(t){if(0===t||1===t)return t;var e=t/1-1,i=(1-.7)/2*Math.PI*Math.asin(1);return-Math.pow(2,10*e)*Math.sin(2*(e-i)*Math.PI/(1-.7))}function Xt(t){if(0===t||1===t)return t;var e=(1-.7)/(2*Math.PI)*Math.asin(1);return t*=2,Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/(1-.7))+1}function Yt(t){if(0===t||1===t)return t;var e=.35/(2*Math.PI)*Math.asin(1),i=2*t,r=i-1;return i<1?Math.pow(2,10*r)*Math.sin(2*(r-e)*Math.PI/.35)*-.5:Math.pow(2,-10*r)*Math.sin(2*(r-e)*Math.PI/.35)*.5+1}function Gt(t){var e=7.5625;return(t=1-t)<1/2.75?1-e*t*t:t<2/2.75?1-(e*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(e*(t-=2.25/2.75)*t+.9375):1-(e*(t-=2.625/2.75)*t+.984375)}function Kt(t){var e=7.5625;return t<1/2.75?e*t*t:t<2/2.75?e*(t-=1.5/2.75)*t+.75:t<2.5/2.75?e*(t-=2.25/2.75)*t+.9375:e*(t-=2.625/2.75)*t+.984375}function Qt(t){var e=t<.5,i=7.5625;return(t=e?1-2*t:2*t-1)<1/2.75?t*=i*t:t=t<2/2.75?i*(t-=1.5/2.75)*t+.75:t<2.5/2.75?i*(t-=2.25/2.75)*t+.9375:i*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}xt.Time=St,At.type="linear",Pt.type="quad-in",Mt.type="quad-out",Dt.type="quad-in-out",Et.type="cubic-in",Rt.type="cubic-out",Tt.type="cubic-in-out",Ot.type="quart-in",Ft.type="quart-out",kt.type="quart-in-out",Nt.type="expo-in",Ut.type="expo-out",It.type="expo-in-out",Lt.type="circ-in",jt.type="circ-out",qt.type="circ-in-out",zt.type="back-in",Bt.type="back-out",Wt.type="back-in-out",Ht.type="elastic-in",Xt.type="elastic-out",Yt.type="elastic-in-out",Gt.type="bounce-in",Kt.type="bounce-out",Qt.type="bounce-in-out";var Zt={linear:At,quadIn:Pt,quadOut:Mt,quadInOut:Dt,cubicIn:Et,cubicOut:Rt,cubicInOut:Tt,quartIn:Ot,quartOut:Ft,quartInOut:kt,expoIn:Nt,expoOut:Ut,expoInOut:It,circIn:Lt,circOut:jt,circInOut:qt,backIn:zt,backOut:Bt,backInOut:Wt,elasticIn:Ht,elasticOut:Xt,elasticInOut:Yt,bounceIn:Gt,bounceOut:Kt,bounceInOut:Qt,fromAny:function(t){if("function"==typeof t)return t;if("string"==typeof t)switch(t){case"linear":return Zt.linear;case"quad-in":return Zt.quadIn;case"quad-out":return Zt.quadOut;case"quad-in-out":return Zt.quadInOut;case"cubic-in":return Zt.cubicIn;case"cubic-out":return Zt.cubicOut;case"cubic-in-out":return Zt.cubicInOut;case"quart-in":return Zt.quartIn;case"quart-out":return Zt.quartOut;case"quart-in-out":return Zt.quartInOut;case"expo-in":return Zt.expoIn;case"expo-out":return Zt.expoOut;case"expo-in-out":return Zt.expoInOut;case"circ-in":return Zt.circIn;case"circ-out":return Zt.circOut;case"circ-in-out":return Zt.circInOut;case"back-in":return Zt.backIn;case"back-out":return Zt.backOut;case"back-in-out":return Zt.backInOut;case"elastic-in":return Zt.elasticIn;case"elastic-out":return Zt.elasticOut;case"elastic-in-out":return Zt.elasticInOut;case"bounce-in":return Zt.bounceIn;case"bounce-out":return Zt.bounceOut;case"bounce-in-out":return Zt.bounceInOut}throw new TypeError(""+t)},_form:void 0,form:function(t){return void 0!==t&&(t=Zt.fromAny(t)),t!==Zt.linear?new Zt.Form(t):(void 0===Zt._form&&(Zt._form=new Zt.Form(Zt.linear)),Zt._form)},Form:void 0},Jt=function(t){function e(e){var i=t.call(this)||this;return i._unit=e,i}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t){return"string"==typeof(t=Zt.fromAny(t)).type?i.Text.from(t.type):i.Item.extant()},e.prototype.cast=function(t){var e=t.toValue().stringValue(void 0);if(void 0!==e)try{return Zt.fromAny(e)}catch(t){}},e}(i.Form);Zt.Form=Jt;var $t,te={is:function(t){if("object"==typeof t&&null!==t){var e=t;return"function"==typeof e.onBegin||"function"==typeof e.onEnd||"function"==typeof e.onInterrupt}return!1}},ee=function(){function t(t,e,i,r){null!==t&&(this._duration=t),null!==e&&(this._ease=e),null!==i&&(this._interpolator=i),null!==r&&(this._observers=r)}return t.prototype.duration=function(e){return void 0===e?void 0!==this._duration?this._duration:null:t.from(e,this._ease,this._interpolator,this._observers)},t.prototype.ease=function(e){return void 0===e?void 0!==this._ease?this._ease:null:t.from(this._duration,e,this._interpolator,this._observers)},t.prototype.interpolator=function(e){return void 0===e?void 0!==this._interpolator?this._interpolator:null:t.from(this._duration,this._ease,e,this._observers)},t.prototype.range=function(e,i){if(void 0===e)return void 0!==this._interpolator?this._interpolator.range():null;var r=void 0;return r=void 0!==this._interpolator?this._interpolator.range(e,i):n.Interpolator.between(e,i),t.from(this._duration,this._ease,r,this._observers)},t.prototype.observers=function(e){return void 0===e?void 0!==this._observers?this._observers:null:t.from(this._duration,this._ease,this._interpolator,e)},t.prototype.onBegin=function(e){var i={onBegin:e},r=void 0!==this._observers?this._observers.slice(0):[];return r.push(i),t.from(this._duration,this._ease,this._interpolator,r)},t.prototype.onEnd=function(e){var i={onEnd:e},r=void 0!==this._observers?this._observers.slice(0):[];return r.push(i),t.from(this._duration,this._ease,this._interpolator,r)},t.prototype.onInterrupt=function(e){var i={onInterrupt:e},r=void 0!==this._observers?this._observers.slice(0):[];return r.push(i),t.from(this._duration,this._ease,this._interpolator,r)},t.prototype.toAny=function(){var t={};return void 0!==this._duration&&(t.duration=this._duration),void 0!==this._ease&&(t.ease=this._ease),void 0!==this._interpolator&&(t.interpolator=this._interpolator),t},t.prototype.equals=function(e){return this===e||e instanceof t&&(this._duration===e._duration&&this._ease===e._ease&&r.Objects.equal(this._interpolator,e._interpolator))},t.duration=function(e,i,r){return void 0===r&&(r=null),new t(e,i=null!=i?Zt.fromAny(i):null,r,null)},t.ease=function(e,i){return void 0===i&&(i=null),new t(null,e=Zt.fromAny(e),i,null)},t.interpolator=function(e){return new t(null,null,e,null)},t.range=function(e,i){var r;return void 0===i?(e=e,r=n.Interpolator.between(e[0],e[1])):r=n.Interpolator.between(e,i),new t(null,null,r,null)},t.from=function(e,i,r,n){return void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null),new t(e,i=null!=i?Zt.fromAny(i):null,r,n)},t.fromInit=function(e){var i;if(te.is(e)){var r={};void 0!==e.onBegin&&(r.onBegin=e.onBegin),void 0!==e.onEnd&&(r.onEnd=e.onEnd),void 0!==e.onInterrupt&&(r.onInterrupt=e.onInterrupt),i=[r]}return t.from(e.duration,e.ease,e.interpolator,i)},t.fromAny=function(e){if(e instanceof t)return e;if(t.isInit(e))return t.fromInit(e);throw new TypeError(""+e)},t.forTween=function(e,i,r,o){return void 0===r&&(r=null),void 0===o&&(o=null),e instanceof t?e:t.isInit(e)?t.fromInit(e):!0===e&&void 0!==i?t.from(r,o,n.Interpolator.between(i,i)):null},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return void 0!==e.duration||void 0!==e.ease||void 0!==e.interpolator}return!1},t.isAny=function(e){return e instanceof t||t.isInit(e)},t.isTween=function(e){return t.isAny(e)||"boolean"==typeof e||null===e},t}(),ie=function(){},re=function(t){function e(){var e=t.call(this)||this;return e._animationFrame=0,e._enabled=!0,e}return l(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),e.prototype.setEnabled=function(t){t&&!this._enabled?(this._enabled=!0,this.didSetEnabled(!0)):!t&&this._enabled&&(this._enabled=!1,this.didSetEnabled(!1))},e.prototype.didSetEnabled=function(t){t?this.animate():this.cancel()},e.prototype.animate=function(t){0===this._animationFrame&&this._enabled&&(this.hasOwnProperty("onAnimationFrame")||(this.onAnimationFrame=this.onAnimationFrame.bind(this)),this._animationFrame=requestAnimationFrame(this.onAnimationFrame))},e.prototype.cancel=function(){0!==this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=0)},e.prototype.onAnimationFrame=function(t){this._animationFrame=0,this.onFrame(t)},e}(ie),ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.animate=function(t){void 0===t&&(t=this);var e=this.parent;null!==e&&e.animate(t)},e}(ie);($t=t.TweenState||(t.TweenState={}))[$t.Quiesced=0]="Quiesced",$t[$t.Diverged=1]="Diverged",$t[$t.Tracking=2]="Tracking",$t[$t.Converged=3]="Converged",$t[$t.Interrupt=4]="Interrupt";var oe=function(t){function e(e,i){var r=t.call(this)||this;return null!==i?(r._duration=void 0!==i._duration?i._duration:0,r._ease=void 0!==i._ease?i._ease:Zt.linear,r._interpolator=void 0!==i._interpolator?i._interpolator:null,r._observers=void 0!==i._observers?i._observers.slice(0):null):(r._duration=0,r._ease=Zt.linear,r._interpolator=null,r._observers=null),r._interrupts=null,r._value=e,r._state=e,r._beginTime=0,r._tweenState=0,r._enabled=!0,r}return l(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),e.prototype.setEnabled=function(t){t&&!this._enabled?(this._enabled=!0,this.didSetEnabled(!0)):!t&&this._enabled&&(this._enabled=!1,this.didSetEnabled(!1))},e.prototype.didSetEnabled=function(t){t?this.animate():this.cancel()},e.prototype.duration=function(t){return void 0===t?this._duration:(this._duration=Math.max(0,t),this)},e.prototype.ease=function(t){return void 0===t?this._ease:(this._ease=Zt.fromAny(t),this)},e.prototype.interpolator=function(t){return void 0===t?this._interpolator:(this._interpolator=t,this)},e.prototype.transition=function(t){if(void 0===t)return new ee(this._duration,this._ease,this._interpolator,null);if(void 0!==(t=ee.fromAny(t))._duration&&(this._duration=t._duration),void 0!==t._ease&&(this._ease=t._ease),void 0!==t._interpolator&&(this._interpolator=t._interpolator),void 0!==t._observers){var e=this._observers;null===e&&(e=[],this._observers=e),Array.prototype.push.apply(e,t._observers)}return this},e.prototype.range=function(t,e){var i=this._interpolator;return 0===arguments.length?null!==i?i.range():null:(1===arguments.length&&(e=(t=t)[1],t=t[0]),void 0===e?e=t:void 0===t&&(t=e),void 0!==t&&void 0!==e&&(this._interpolator=null!==i?i.range(t,e):n.Interpolator.between(t,e)),this)},e.prototype.observers=function(t){return void 0===t?this._observers:(this._observers=null!==t?t.slice(0):null,this)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){void 0===e&&(e=null);var i=this._observers;if(this._observers=null,ee.isAny(e)?(e=ee.fromAny(e),this.transition(e)):!1!==e&&null!==e||(this._duration=0),this._interrupts=i,void 0!==t&&e){if(0!==this._tweenState||!r.Objects.equal(this._state,t)){var n=this.value;this.range(n,t),this._state=t,this._beginTime=0,2===this._tweenState?this._tweenState=4:this._tweenState=1,this.animate()}}else{this._state=t,this._beginTime=0,2===this._tweenState&&this.doInterrupt(this._value),this._tweenState=0;var o=this._value;this._value=t,this._interpolator=null,this.cancel(),void 0!==t?this.update(t,o):this.delete()}},e.prototype.onFrame=function(t){if(0!==this._tweenState&&this._enabled){if(4===this._tweenState&&(this.doInterrupt(this._value),this._tweenState=1),1===this._tweenState&&(r.Objects.equal(this._value,this._state)?this.tween(1):(this._beginTime=t,this.doBegin(this._value),this._tweenState=2)),2===this._tweenState){var e=0!==this._duration?Math.min(Math.max(0,(t-this._beginTime)/this._duration),1):1;this.tween(e)}3===this._tweenState?(this._interrupts=null,this._beginTime=0,this._tweenState=0,this.doEnd(this._value)):this.animate()}},e.prototype.interpolate=function(t){var e=this._interpolator;return null!==e?e.interpolate(t):this._state},e.prototype.tween=function(t){t=this._ease(t);var e=this._value,i=this.interpolate(t);this._value=i,this.update(i,e),1===t&&(this._tweenState=3)},e.prototype.doBegin=function(t){this.onBegin(t);var e=this._observers;if(null!==e)for(var i=0,r=e.length;i<r;i+=1){var n=e[i];void 0!==n.onBegin&&n.onBegin(t)}},e.prototype.onBegin=function(t){},e.prototype.doEnd=function(t){this.onEnd(t);var e=this._observers;if(null!==e){this._observers=null;for(var i=0,r=e.length;i<r;i+=1){var n=e[i];void 0!==n.onEnd&&n.onEnd(t)}}},e.prototype.onEnd=function(t){},e.prototype.doInterrupt=function(t){this.onInterrupt(t);var e=this._interrupts;if(null!==e){this._interrupts=null;for(var i=0,r=e.length;i<r;i+=1){var n=e[i];void 0!==n.onInterrupt&&n.onInterrupt(t)}}},e.prototype.onInterrupt=function(t){},e}(ie),se=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r._animationFrame=0,r}return l(e,t),e.prototype.animate=function(){0===this._animationFrame&&this._enabled&&(this.hasOwnProperty("onAnimationFrame")||(this.onAnimationFrame=this.onAnimationFrame.bind(this)),this._animationFrame=requestAnimationFrame(this.onAnimationFrame))},e.prototype.cancel=function(){0!==this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=0)},e.prototype.onAnimationFrame=function(t){this._animationFrame=0,this.onFrame(t)},e}(oe),ae=function(t){function e(e,i,r){var n=t.call(this,i,r)||this;return n.parent=e,n}return l(e,t),e.prototype.animate=function(t){void 0===t&&(t=this);var e=this.parent;null!==e&&this._enabled&&e.animate(t)},e.prototype.update=function(t,e){},e.prototype.cancel=function(){},e.prototype.delete=function(){},e}(oe),ue=function(t){function e(e,i,r,n){void 0===n&&(n=null);var o=t.call(this,r,n)||this;return o.target=e,o.key=i,o}return l(e,t),e.prototype.update=function(t,e){r.Objects.equal(e,t)||(this.willUpdate(t,e),this.onUpdate(t,e),this.didUpdate(t,e))},e.prototype.willUpdate=function(t,e){},e.prototype.onUpdate=function(t,e){this.target[this.key]=t},e.prototype.didUpdate=function(t,e){},e.prototype.delete=function(){delete this.target[this.key]},e}(se),le={fromAny:function(t){if(t instanceof o.DateTime||t instanceof a||t instanceof w||t instanceof P||t instanceof W||t instanceof Y||t instanceof Q||t instanceof n.Interpolator||t instanceof gt||t instanceof ee||"number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Date||o.DateTime.isInit(t))return o.DateTime.fromAny(t);if(P.isInit(t))return P.fromAny(t);if(W.isInit(t))return W.fromAny(t);if(Y.isInit(t))return Y.fromAny(t);if(ee.isInit(t))return ee.fromAny(t);if("string"==typeof t)return le.parse(t);throw new TypeError(""+t)},parse:function(t){for("string"==typeof t&&(t=e.Unicode.stringInput(t));t.isCont()&&e.Unicode.isWhitespace(t.head());)t=t.step();var i=le.Parser.parse(t);if(i.isDone())for(;t.isCont()&&e.Unicode.isWhitespace(t.head());)t=t.step();return t.isCont()&&!i.isError()&&(i=e.Parser.error(e.Diagnostic.unexpected(t))),i.bind()},_form:void 0,form:function(t){return void 0!==t?(t=le.fromAny(t),new le.Form(t)):(void 0===le._form&&(le._form=new le.Form),le._form)},_interpolatorForm:void 0,interpolatorForm:function(t){return void 0!==t?new le.InterpolatorForm(t):(void 0===le._interpolatorForm&&(le._interpolatorForm=new le.InterpolatorForm),le._interpolatorForm)},_scaleForm:void 0,scaleForm:function(t){return void 0!==t?new le.ScaleForm(t):(void 0===le._scaleForm&&(le._scaleForm=new le.ScaleForm),le._scaleForm)},_transitionForm:void 0,transitionForm:function(t){return void 0===t&&(t=null),null!==t?(t=ee.fromAny(t),new le.TransitionForm(t||void 0)):(void 0===le._transitionForm&&(le._transitionForm=new le.TransitionForm),le._transitionForm)},Parser:void 0,Form:void 0,InterpolatorForm:void 0,ScaleForm:void 0,TransitionForm:void 0},he=o.DateTimeFormat.pattern("%m-%dT%H:%M:%S.%LZ"),ce=function(t){function i(e,i,r,n){var o=t.call(this)||this;return o.identOutput=e,o.valueParser=i,o.unitsOutput=r,o.step=n,o}return l(i,t),i.prototype.feed=function(t){return i.parse(t,this.identOutput,this.valueParser,this.unitsOutput,this.step)},i.parse=function(t,r,n,o,s){void 0===s&&(s=1);var u=0;if(1===s){for(;t.isCont()&&(u=t.head(),e.Unicode.isSpace(u));)t.step();if(t.isCont()){if(35===u)return T.parse(t);s=e.Unicode.isAlpha(u)?2:3}else if(!t.isEmpty())return e.Parser.error(e.Diagnostic.unexpected(t))}if(2===s){for(r=r||e.Unicode.stringOutput();t.isCont()&&(u=t.head(),e.Unicode.isAlpha(u)||45===u);)t=t.step(),r.write(u);if(!t.isEmpty()){var l=r.bind();switch(l){case"rgb":case"rgba":return O.parseRest(t);case"hsl":case"hsla":return F.parseRest(t);case"normal":case"italic":case"oblique":return H.parseRest(t,l);case"small-caps":return H.parseRest(t,void 0,l);case"bold":case"bolder":case"lighter":return H.parseRest(t,void 0,void 0,l);case"ultra-condensed":case"extra-condensed":case"semi-condensed":case"condensed":case"expanded":case"semi-expanded":case"extra-expanded":case"ultra-expanded":return H.parseRest(t,void 0,void 0,void 0,l);case"large":case"larger":case"medium":case"small":case"smaller":case"x-large":case"x-small":case"xx-large":case"xx-small":return H.parseRest(t,void 0,void 0,void 0,void 0,l);case"translateX":case"translateY":case"translate":return nt.parseRest(t,r);case"scaleX":case"scaleY":case"scale":return ot.parseRest(t,r);case"rotate":return st.parseRest(t,r);case"skewX":case"skewY":case"skew":return at.parseRest(t,r);case"matrix":return ut.parseRest(t,r);case"none":return e.Parser.done(Q.identity());case"true":return e.Parser.done(!0);case"false":return e.Parser.done(!1);default:var h=P.fromName(l);return void 0!==h?e.Parser.done(h):e.Parser.error(e.Diagnostic.message("unknown style value: "+l,t))}}}if(3===s)if((n=void 0===n?e.Base10.parseDecimal(t):n.feed(t)).isDone())s=4;else if(n.isError())return n.asError();if(4===s){if(t.isCont()&&45===(u=t.head())){t.step();var c={};return c.year=n.bind(),he.parseDate(t,c)}t.isEmpty()||(s=5)}if(5===s){for(o=o||e.Unicode.stringOutput();t.isCont()&&(u=t.head(),e.Unicode.isAlpha(u)||37===u);)t.step(),o.push(u);t.isEmpty()||(s=6)}if(6===s&&!t.isEmpty()){var d=n.bind(),p=o.bind(),f=void 0;switch(p){case"deg":f=a.deg(d);break;case"rad":f=a.rad(d);break;case"grad":f=a.grad(d);break;case"turn":f=a.turn(d);break;case"px":f=w.px(d);break;case"em":f=w.em(d);break;case"rem":f=w.rem(d);break;case"%":f=w.pct(d);break;case"":f=d;break;default:return e.Parser.error(e.Diagnostic.message("unknown style units: "+p,t))}if(t.isCont()&&(u=t.head(),e.Unicode.isSpace(u)||47===u)){if(f instanceof w)return H.parseRest(t,void 0,void 0,void 0,void 0,f);if("number"==typeof f)switch(d){case 100:case 200:case 300:case 400:case 500:case 600:case 700:case 800:case 900:return H.parseRest(t,void 0,void 0,String(d))}}return e.Parser.done(f)}return new i(r,n,o,s)},i}(e.Parser);le.Parser=ce;var de=function(t){function e(e){var i=t.call(this)||this;return i._unit=e,i}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t=void 0!==t?le.fromAny(t):void 0)},e.prototype.mold=function(t){if(void 0!==t){if((t=le.fromAny(t))instanceof o.DateTime)return o.DateTime.form().mold(t);if(t instanceof a)return a.form().mold(t);if(t instanceof w)return w.form().mold(t);if(t instanceof P)return P.form().mold(t);if(t instanceof W)return W.form().mold(t);if(t instanceof Y)return Y.form().mold(t);if(t instanceof Q)return Q.form().mold(t);if(t instanceof n.Interpolator)return le.interpolatorForm().mold(t);if(t instanceof gt)return le.scaleForm().mold(t);if(t instanceof ee)return le.transitionForm().mold(t);if("number"==typeof t)return i.Num.from(t);throw new TypeError(""+t)}return i.Item.extant()},e.prototype.cast=function(t){var e=t.toValue();if(e instanceof i.Num)return e.numberValue();if(e instanceof i.Bool)return e.booleanValue();var r=e.stringValue(void 0);if(void 0!==r)try{return le.parse(r)}catch(t){}if(e instanceof i.Record){var n=o.DateTime.fromValue(e);if(void 0!==n)return n;var s=a.fromValue(e);if(void 0!==s)return s;var u=w.fromValue(e);if(void 0!==u)return u;var l=P.fromValue(e);if(void 0!==l)return l;var h=W.fromValue(e);if(void 0!==h)return h;var c=Y.fromValue(e);if(void 0!==c)return c;var d=Q.fromValue(e);if(void 0!==d)return d;var p=le.interpolatorForm().cast(e);if(void 0!==p)return p;var f=le.scaleForm().cast(e);if(void 0!==f)return f;var v=le.transitionForm().cast(e);if(void 0!==v)return v}},e}(i.Form);le.Form=de;var pe=function(t){function e(e){var i=t.call(this)||this;return i._unit=e,i}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t){if(void 0!==t){var e=le.form(),r=e.mold(t.interpolate(0)),n=e.mold(t.interpolate(1));if(r.isDefined()&&n.isDefined())return i.Record.of(i.Attr.of("interpolate",i.Record.of(r,n)))}return i.Item.extant()},e.prototype.cast=function(t){var e=t.toValue().header("interpolate");if(e.length>=2){var i=le.form(),r=i.cast(e.getItem(0).toValue()),o=i.cast(e.getItem(1).toValue());if(void 0!==r&&void 0!==o)return n.Interpolator.between(r,o)}},e}(i.Form);le.InterpolatorForm=pe;var fe=function(t){function e(e){var i=t.call(this)||this;return i._unit=e,i}return l(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t){if(t instanceof _t){var e=le.form(),r=t.domain(),n=e.mold(r[0]),o=e.mold(r[1]),s=i.Record.of(n,o),a=i.Record.of(i.Attr.of("scale",s)),u=le.interpolatorForm().mold(t.interpolator());return u.isDefined()&&(a=a.concat(u)),a}return i.Item.extant()},e.prototype.cast=function(t){var e=t.toValue(),r=e.header("scale");if(r.length>=2){var n,o,s=le.form();r.forEach((function(t,e){t instanceof i.Value&&(0===e?n=t.cast(s,n):1===e&&(o=t.cast(s,o)))}),this);var a=le.interpolatorForm().cast(e.body());if(void 0!==n&&void 0!==o&&void 0!==a)return gt.from(n,o,a)}},e}(i.Form);le.ScaleForm=fe;var ve=function(t){function e(e){var i=t.call(this)||this;return i._unit=e,i}return l(e,t),e.prototype.unit=function(t){return void 0===t?this._unit:new e(t=ee.fromAny(t))},e.prototype.mold=function(t){if(void 0!==t){t=ee.fromAny(t);var e=i.Record.create();void 0!==t._duration&&e.slot("duration",t._duration),void 0!==t._ease&&e.slot("ease",Zt.form().mold(t._ease));var r=i.Record.of(i.Attr.of("transition",e));if(void 0!==t._interpolator){var n=le.interpolatorForm().mold(t._interpolator);n.isDefined()&&(r=r.concat(n))}return r}return i.Item.extant()},e.prototype.cast=function(t){var e=t.toValue(),r=e.header("transition");if(r.length>=2){var n=null,o=null;r.forEach((function(t,e){var r=t.key.stringValue(void 0);void 0!==r?"duration"===r?n=t.toValue().numberValue(n):"ease"===r&&(o=t.toValue().cast(Zt.form(),o)):t instanceof i.Value&&(0===e?n=t.numberValue(n):1===e&&(o=t.cast(Zt.form(),o)))}),this);var s=le.interpolatorForm().cast(e.body());return ee.from(n,o,s)}},e}(i.Form);function ye(t){return"object"==typeof t&&null!==t&&"function"==typeof t.toAttributeString?t.toAttributeString():""+t}function me(t){return"object"==typeof t&&null!==t&&"function"==typeof t.toStyleString?t.toStyleString():""+t}le.TransitionForm=ve;var we=function(){},ge=Math.PI,_e=2*ge,be=function(){function t(){this.x0=null,this.y0=null,this.x1=null,this.y1=null,this.d=""}return t.prototype.moveTo=function(t,e){this.d+="M"+(this.x0=this.x1=t)+","+(this.y0=this.y1=e)},t.prototype.closePath=function(){void 0!==this.x1&&(this.x1=this.x0,this.y1=this.y0,this.d+="Z")},t.prototype.lineTo=function(t,e){this.d+="L"+(this.x1=t)+","+(this.y1=e)},t.prototype.quadraticCurveTo=function(t,e,i,r){this.d+="Q"+t+","+e+","+(this.x1=i)+","+(this.y1=r)},t.prototype.bezierCurveTo=function(t,e,i,r,n,o){this.d+="C"+t+","+e+","+i+","+r+","+(this.x1=n)+","+(this.y1=o)},t.prototype.arcTo=function(t,e,i,r,n){var o=+this.x1,s=+this.y1,a=i-t,u=r-e,l=o-t,h=s-e,c=l*l+h*h;if(n<0)throw new Error("negative radius: "+n);if(null===this.x1)this.d+="M"+(this.x1=t)+","+(this.y1=e);else if(c>1e-6)if(Math.abs(h*a-u*l)>1e-6&&0!==n){var d=i-o,p=r-s,f=a*a+u*u,v=d*d+p*p,y=Math.sqrt(f),m=Math.sqrt(c),w=n*Math.tan((ge-Math.acos((f+c-v)/(2*y*m)))/2),g=w/m,_=w/y;Math.abs(g-1)>1e-6&&(this.d+="L"+(t+g*l)+","+(e+g*h)),this.d+="A"+n+","+n+",0,0,"+ +(h*d>l*p)+","+(this.x1=t+_*a)+","+(this.y1=e+_*u)}else this.d+="L"+(this.x1=t)+","+(this.y1=e);else;},t.prototype.arc=function(t,e,i,r,n,o){void 0===o&&(o=!1);var s=i*Math.cos(r),a=i*Math.sin(r),u=t+s,l=e+a,h=1^+o,c=o?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);null===this.x1?this.d+="M"+u+","+l:(Math.abs(+this.x1-u)>1e-6||Math.abs(+this.y1-l)>1e-6)&&(this.d+="L"+u+","+l),0!==i&&(c<0&&(c=c%_e+_e),c>_e-1e-6?this.d+="A"+i+","+i+",0,1,"+h+","+(t-s)+","+(e-a)+"A"+i+","+i+",0,1,"+h+","+(this.x1=u)+","+(this.y1=l):c>1e-6&&(this.d+="A"+i+","+i+",0,"+ +(c>=ge)+","+h+","+(this.x1=t+i*Math.cos(n))+","+(this.y1=e+i*Math.sin(n))))},t.prototype.rect=function(t,e,i,r){this.d+="M"+(this.x0=this.x1=t)+","+(this.y0=this.y1=e)+"h"+i+"v"+r+"h"+-i+"Z"},t.prototype.toString=function(){return this.d},t}(),Ce=function(t){function e(e){void 0===e&&(e=new be);var i=t.call(this)||this;return i._context=e,i}return l(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),e}(we),xe=function(t){function e(e,i){void 0===i&&(i=window.devicePixelRatio||1);var r=t.call(this)||this;return r._context=e,r._pixelRatio=i,r}return l(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),e}(we),Ve=function(t){function e(e,i){void 0===i&&(i=window.devicePixelRatio||1);var r=t.call(this)||this;return r._context=e,r._pixelRatio=i,r}return l(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),e}(we),Se=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=[]),this._index=t,this._array=e}return Object.defineProperty(t.prototype,"size",{get:function(){return this._array.length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this._array.length},t.prototype.has=function(t){return void 0!==this._index[t.id]},t.prototype.get=function(t){var e=this._index[t.id];return void 0!==e?this._array[e][1]:void 0},t.prototype.getField=function(t){var e=this._index[t.id];return void 0!==e?this._array[e]:void 0},t.prototype.getEntry=function(t){return this._array[t]},t.prototype.set=function(t,e){var i=this._index[t.id];return void 0!==i?this._array[i][1]=e:(this._index[t.id]=this._array.length,this._array.push([t,e])),this},t.prototype.delete=function(t){var e=this._index[t.id];if(void 0!==e){delete this._index[t.id];var i=this._array[e],r=this._array.pop();return i!==r&&(this._array[e]=r,this._index[r[0].id]=e),!0}return!1},t.prototype.remove=function(t){var e=this._index[t.id];if(void 0!==e){delete this._index[t.id];var i=this._array[e],r=this._array.pop();return i!==r&&(this._array[e]=r,this._index[r[0].id]=e),i[1]}},t.prototype.clear=function(){this._index={},this._array.length=0},t.prototype.forEach=function(t,e){for(var i=this._array,r=0,n=i.length;r<n;r+=1){var o=i[r],s=t.call(e,o[0],o[1]);if(void 0!==s)return s}},t.prototype.keys=function(){},t.prototype.values=function(){},t.prototype.entries=function(){},t.prototype.clone=function(){for(var e=this._array,i=e.length,r={},n=new Array(i),o=0;o<i;o+=1){var s=e[o],a=s[0],u=s[1];n[o]=[a,u],r[a.id]=o}return new t(r,n)},t.nextId=function(){var e=t._nextId;return t._nextId=e+1,e},t._nextId=1,t}(),Ae={Invalid:void 0},Pe=function(){function t(){this._id=Se.nextId()}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.isExternal=function(){return!1},t.prototype.isDummy=function(){return!1},t.prototype.isInvalid=function(){return!1},t}(),Me=function(){function t(){this._id=Se.nextId()}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.isExternal=function(){return!1},t.prototype.isDummy=function(){return!0},t.prototype.isInvalid=function(){return!1},t}(),De=function(){function t(){this._id=Se.nextId()}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.isExternal=function(){return!1},t.prototype.isDummy=function(){return!1},t.prototype.isInvalid=function(){return!1},t}(),Ee=function(){function t(){}return Object.defineProperty(t.prototype,"id",{get:function(){return-1},enumerable:!1,configurable:!0}),t.prototype.isExternal=function(){return!1},t.prototype.isDummy=function(){return!1},t.prototype.isInvalid=function(){return!0},t}();Ae.Invalid=new Ee;var Re=function(){function t(){this._id=Se.nextId()}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.sum=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var r=new Se,n=0,o=0,s=e.length;o<s;o+=1){var a=e[o];if("number"==typeof a)n+=a;else if(a instanceof t.Term){if(null!==(p=a.variable))void 0!==(c=r.getField(p))?c[1]+=a.coefficient:r.set(p,a.coefficient);else n+=a.constant}else{for(var u=a.terms,l=0,h=u.size;l<h;l+=1){var c,d=u.getEntry(l),p=d[0],f=d[1];void 0!==(c=r.getField(p))?c[1]+=f:r.set(p,f)}n+=a.constant}}return new t.Sum(r,n)},t.product=function(e,i){return new t.Product(e,i)},t.constant=function(e){return new t.Constant(e)},t.zero=function(){return new t.Constant(0)},t}(),Te=function(t){function i(e,i){var r=t.call(this)||this;return r._terms=e,r._constant=i,r}return l(i,t),i.prototype.isConstant=function(){return this._terms.isEmpty()},Object.defineProperty(i.prototype,"terms",{get:function(){return this._terms},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"constant",{get:function(){return this._constant},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return Re.sum(this,t)},i.prototype.opposite=function(){for(var t=this._terms,e=new Se,r=0,n=t.size;r<n;r+=1){var o=t.getEntry(r),s=o[0],a=o[1];e.set(s,-a)}return new i(e,-this._constant)},i.prototype.minus=function(t){return t="number"==typeof t?Re.constant(t):t.opposite(),Re.sum(this,t)},i.prototype.times=function(t){for(var e=this._terms,r=new Se,n=0,o=e.size;n<o;n+=1){var s=e.getEntry(n),a=s[0],u=s[1];r.set(a,u*t)}return new i(r,this._constant*t)},i.prototype.divide=function(t){for(var e=this._terms,r=new Se,n=0,o=e.size;n<o;n+=1){var s=e.getEntry(n),a=s[0],u=s[1];r.set(a,u/t)}return new i(r,this._constant/t)},i.prototype.debug=function(t){t=t.write("Constrain").write(46).write("sum").write(40);for(var e=this._terms.size,i=0;i<e;i+=1){var r=this._terms.getEntry(i),n=r[0],o=r[1];i>0&&(t=t.write(", ")),t=1===o?t.debug(n):t.debug(Re.product(o,n))}0!==this._constant&&(e>0&&(t=t.write(", ")),t=t.debug(this._constant)),t=t.write(41)},i.prototype.toString=function(){return e.Format.debug(this)},i}(Re);Re.Sum=Te;var Oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(Re);Re.Term=Oe;var Fe=function(t){function i(e,i){var r=t.call(this)||this;return r._coefficient=e,r._variable=i,r}return l(i,t),i.prototype.isConstant=function(){return!1},Object.defineProperty(i.prototype,"coefficient",{get:function(){return this._coefficient},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"variable",{get:function(){return this._variable},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"terms",{get:function(){var t=new Se;return t.set(this._variable,this._coefficient),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"constant",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return"number"==typeof t&&(t=Re.constant(t)),t instanceof i&&this._variable===t._variable?Re.product(this._coefficient+t._coefficient,this._variable):t instanceof Re.Variable&&this._variable===t?Re.product(this._coefficient+1,this._variable):Re.sum(this,t)},i.prototype.opposite=function(){return Re.product(-this._coefficient,this._variable)},i.prototype.minus=function(t){return"number"==typeof t&&(t=Re.constant(t)),t instanceof i&&this._variable===t._variable?Re.product(this._coefficient-t._coefficient,this._variable):t instanceof Re.Variable&&this._variable===t?Re.product(this._coefficient-1,this._variable):Re.sum(this,t.opposite())},i.prototype.times=function(t){return Re.product(this._coefficient*t,this._variable)},i.prototype.divide=function(t){return Re.product(this._coefficient/t,this._variable)},i.prototype.debug=function(t){t=t.write("Constrain").write(46).write("product").write(40).debug(this._coefficient).write(", ").debug(this._variable).write(41)},i.prototype.toString=function(){return e.Format.debug(this)},i}(Oe);Re.Product=Fe;var ke=function(t){function i(e){var i=t.call(this)||this;return i._value=e,i}return l(i,t),i.prototype.isConstant=function(){return!0},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"coefficient",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"variable",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"terms",{get:function(){return new Se},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"constant",{get:function(){return this._value},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return"number"==typeof t&&(t=Re.constant(t)),t instanceof i?Re.constant(this._value+t._value):Re.sum(this,t)},i.prototype.opposite=function(){return Re.constant(-this._value)},i.prototype.minus=function(t){return"number"==typeof t&&(t=Re.constant(t)),t instanceof i?Re.constant(this._value-t._value):Re.sum(this,t.opposite())},i.prototype.times=function(t){return Re.constant(this._value*t)},i.prototype.divide=function(t){return Re.constant(this._value/t)},i.prototype.debug=function(t){t=t.write("Constrain").write(46).write("constant").write(40).debug(this._value).write(41)},i.prototype.toString=function(){return e.Format.debug(this)},i}(Oe);Re.Constant=ke;var Ne=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return l(i,t),i.prototype.isExternal=function(){return!0},i.prototype.isDummy=function(){return!1},i.prototype.isInvalid=function(){return!1},i.prototype.isConstant=function(){return!1},Object.defineProperty(i.prototype,"coefficient",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"variable",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"terms",{get:function(){var t=new Se;return t.set(this,1),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"constant",{get:function(){return 0},enumerable:!1,configurable:!0}),i.prototype.plus=function(t){return"number"==typeof t&&(t=Re.constant(t)),this===t?Re.product(2,this):Re.sum(this,t)},i.prototype.opposite=function(){return Re.product(-1,this)},i.prototype.minus=function(t){return"number"==typeof t&&(t=Re.constant(t)),this===t?Re.zero():Re.sum(this,t.opposite())},i.prototype.times=function(t){return Re.product(t,this)},i.prototype.divide=function(t){return Re.product(1/t,this)},i.prototype.debug=function(t){t=t.debug(this.scope).write(46).write("variable").write(40).debug(this.name).write(", ").debug(this.value).write(41)},i.prototype.toString=function(){return e.Format.debug(this)},i}(Oe);Re.Variable=Ne;var Ue={Required:1001001e3,Strong:1e6,Medium:1e3,Weak:1,Unbound:-1,clip:function(t){return Math.min(Math.max(0,t),Ue.Required)},fromAny:function(t){if("number"==typeof t)return Ue.clip(t);if("required"===t)return Ue.Required;if("strong"===t)return Ue.Strong;if("medium"===t)return Ue.Medium;if("weak"===t)return Ue.Weak;throw new TypeError(""+t)}},Ie=function(t){function e(e,i,r,n){var o=t.call(this)||this;return o._scope=e,Object.defineProperty(o,"name",{value:i,enumerable:!0,configurable:!0}),o._value=r,o._state=NaN,o._strength=n,o}return l(e,t),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),e.prototype.updateValue=function(t){this._value=t},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.setState=function(t){var e=this._state;isFinite(e)&&!isFinite(t)&&this._scope.removeConstraintVariable(this),this._state=t,isFinite(t)&&(isFinite(e)?this._scope.setConstraintVariable(this,t):this._scope.addConstraintVariable(this))},Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},enumerable:!1,configurable:!0}),e.prototype.setStrength=function(t){var e=this._state,i=this._strength;t=Ue.fromAny(t),isFinite(e)&&i!==t&&this._scope.removeConstraintVariable(this),this._strength=t,isFinite(e)&&i!==t&&this._scope.addConstraintVariable(this)},e}(Ne);Re.Binding=Ie;var Le=function(){function t(t,e,i,r){this._id=Se.nextId(),this._scope=t,this._constrain=e,this._relation=i,this._strength=r}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scope",{get:function(){return this._scope},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"constrain",{get:function(){return this._constrain},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"relation",{get:function(){return this._relation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this._strength},enumerable:!1,configurable:!0}),t.prototype.enabled=function(t){return void 0===t?this._scope.hasConstraint(this):(t?this._scope.addConstraint(this):this._scope.removeConstraint(this),this)},t.prototype.debug=function(t){t=t.debug(this._scope).write(46).write("constraint").write(40).debug(this._constrain).write(", ").debug(this._relation).write(", ").debug(void 0).write(", "),t=(t=this._strength===Ue.Required?t.debug("required"):this._strength===Ue.Strong?t.debug("strong"):this._strength===Ue.Medium?t.debug("medium"):this._strength===Ue.Weak?t.debug("weak"):t.debug(this._strength)).write(41)},t.prototype.toString=function(){return e.Format.debug(this)},t}(),je=function(){function t(t,e){void 0===t&&(t=new Se),void 0===e&&(e=0),this._cells=t,this._constant=e}return t.prototype.isConstant=function(){return this._cells.isEmpty()},t.prototype.isDummy=function(){for(var t=0,e=this._cells.size;t<e;t+=1){if(!(this._cells.getEntry(t)[0]instanceof Me))return!1}return!0},t.prototype.clone=function(){return new t(this._cells.clone(),this._constant)},t.prototype.add=function(t){return this._constant+=t,this._constant},t.prototype.insertSymbol=function(t,e){void 0===e&&(e=1),e+=this._cells.get(t)||0,Math.abs(e)<1e-8?this._cells.remove(t):this._cells.set(t,e)},t.prototype.insertRow=function(t,e){this._constant+=t._constant*e;for(var i=0,r=t._cells.size;i<r;i+=1){var n=t._cells.getEntry(i),o=n[0],s=n[1];this.insertSymbol(o,s*e)}},t.prototype.removeSymbol=function(t){this._cells.remove(t)},t.prototype.negate=function(){this._constant=-this._constant;for(var t=0,e=this._cells.size;t<e;t+=1){var i=this._cells.getEntry(t);i[1]=-i[1]}},t.prototype.solveFor=function(t){var e=this._cells.remove(t);if(void 0!==e){var i=-1/e;this._constant*=i;for(var r=0,n=this._cells.size;r<n;r+=1){this._cells.getEntry(r)[1]*=i}}},t.prototype.solveForEx=function(t,e){this.insertSymbol(t,-1),this.solveFor(e)},t.prototype.coefficientFor=function(t){var e=this._cells.get(t);return void 0!==e?e:0},t.prototype.substitute=function(t,e){var i=this._cells.remove(t);void 0!==i&&this.insertRow(e,i)},t}(),qe=function(){function t(){this._constraints=new Se,this._constraintVariables=new Se,this._rows=new Se,this._infeasible=[],this._objective=new je,this._artificial=null}return t.prototype.constraint=function(t,e,i,r){"number"==typeof t&&(t=Re.constant(t)),"number"==typeof i&&(i=Re.constant(i));var n=i?t.minus(i):t;return r=void 0===r?Ue.Required:Ue.fromAny(r),new Le(this,n,e,r)},t.prototype.hasConstraint=function(t){return this._constraints.has(t)},t.prototype.addConstraint=function(t){if(!this._constraints.has(t)){this.willAddConstraint(t);var e=this.createRow(t),i=e.row,r=e.tag,n=this.chooseSubject(i,r);if(n.isInvalid()&&i.isDummy()){if(!(Math.abs(i._constant)<1e-8))throw new Error("unsatisfiable constraint");n=r.marker}if(n.isInvalid()){if(!this.addWithArtificialVariable(i))throw new Error("unsatisfiable constraint")}else i.solveFor(n),this.substitute(n,i),this._rows.set(n,i);this._constraints.set(t,r),this.optimize(this._objective),this.didAddConstraint(t)}},t.prototype.willAddConstraint=function(t){},t.prototype.didAddConstraint=function(t){},t.prototype.removeConstraint=function(t){var e=this._constraints.remove(t);if(void 0!==e){this.willRemoveConstraint(t),this.removeConstraintEffects(t,e);var i=e.marker;if(void 0===this._rows.remove(i)){var r=this.getMarkerLeavingSymbol(i);if(r.isInvalid())throw new Error("failed to find leaving row");var n=this._rows.remove(r);n.solveForEx(r,i),this.substitute(i,n)}this.optimize(this._objective),this.didRemoveConstraint(t)}},t.prototype.willRemoveConstraint=function(t){},t.prototype.didRemoveConstraint=function(t){},t.prototype.constraintVariable=function(t,e,i){return void 0===e&&(e=0),i=void 0===i?Ue.Strong:Ue.fromAny(i),new Ie(this,t,e,i)},t.prototype.hasConstraintVariable=function(t){return this._constraintVariables.has(t)},t.prototype.addConstraintVariable=function(t){if(!this._constraintVariables.has(t)){var e=Ue.clip(t.strength);if(e===Ue.Required)throw new Error("invalid variable strength");this.willAddConstraintVariable(t);var i=new Le(this,t,"eq",e);this.addConstraint(i);var r={constraint:i,tag:this._constraints.get(i),state:0};this._constraintVariables.set(t,r),this.didAddConstraintVariable(t);var n=t.state;isFinite(n)&&this.setConstraintVariable(t,n)}},t.prototype.willAddConstraintVariable=function(t){},t.prototype.didAddConstraintVariable=function(t){},t.prototype.removeConstraintVariable=function(t){var e=this._constraintVariables.remove(t);void 0!==e&&(this.willRemoveConstraintVariable(t),this.removeConstraint(e.constraint),this.didRemoveConstraintVariable(t))},t.prototype.willRemoveConstraintVariable=function(t){},t.prototype.didRemoveConstraintVariable=function(t){},t.prototype.setConstraintVariable=function(t,e){var i=this._constraintVariables.get(t);if(void 0===i)throw new Error("unknown variable");var r=i.state;i.state=e;var n=e-r;this.willSetConstraintVariable(t,e,r);var o=i.tag.marker,s=this._rows.get(o);if(void 0!==s)return s.add(-n)<0&&this._infeasible.push(o),void this.dualOptimize();var a=i.tag.other;if(void 0!==(s=this._rows.get(a)))return s.add(n)<0&&this._infeasible.push(a),void this.dualOptimize();for(var u=0,l=this._rows.size;u<l;u+=1){var h=this._rows.getEntry(u),c=h[0],d=h[1],p=d.coefficientFor(o);0!==p&&d.add(n*p)<0&&!c.isExternal()&&this._infeasible.push(c)}this.dualOptimize(),this.didSetConstraintVariable(t,e,r)},t.prototype.willSetConstraintVariable=function(t,e,i){},t.prototype.didSetConstraintVariable=function(t,e,i){},t.prototype.updateConstraintVariables=function(){for(var t=0,e=this._rows.size;t<e;t+=1){var i=this._rows.getEntry(t),r=i[0],n=i[1];r instanceof Ne&&this.updateConstraintVariable(r,n._constant)}},t.prototype.updateConstraintVariable=function(t,e){var i=t.value;this.willUpdateConstraintVariable(t,e,i),t.updateValue(e),this.didUpdateConstraintVariable(t,e,i)},t.prototype.willUpdateConstraintVariable=function(t,e,i){},t.prototype.didUpdateConstraintVariable=function(t,e,i){},t.prototype.createRow=function(t){for(var e=t.constrain,i=new je(void 0,e.constant),r=e.terms,n=0,o=r.size;n<o;n+=1){var s=r.getEntry(n),a=s[0],u=s[1];if(null!==a&&Math.abs(u)>=1e-8){var l=this._rows.get(a);void 0!==l?i.insertRow(l,u):i.insertSymbol(a,u)}}var h=this._objective,c=t.relation,d=t.strength,p={marker:Ae.Invalid,other:Ae.Invalid};if("le"===c||"ge"===c){u="le"===c?1:-1;var f=new Pe;if(p.marker=f,i.insertSymbol(f,u),d<Ue.Required){var v=new De;p.other=v,i.insertSymbol(v,-u),h.insertSymbol(v,d)}}else if(d<Ue.Required){var y=new De,m=new De;p.marker=y,p.other=m,i.insertSymbol(y,-1),i.insertSymbol(m,1),h.insertSymbol(y,d),h.insertSymbol(m,d)}else{var w=new Me;p.marker=w,i.insertSymbol(w)}return i._constant<0&&i.negate(),{row:i,tag:p}},t.prototype.chooseSubject=function(t,e){for(var i=0,r=t._cells.size;i<r;i+=1){var n=t._cells.getEntry(i)[0];if(n.isExternal())return n}return(e.marker instanceof Pe||e.marker instanceof De)&&t.coefficientFor(e.marker)<0?e.marker:(e.other instanceof Pe||e.other instanceof De)&&t.coefficientFor(e.other)<0?e.other:Ae.Invalid},t.prototype.addWithArtificialVariable=function(t){var e=new Pe;this._rows.set(e,t.clone()),this._artificial=t.clone(),this.optimize(this._artificial);var i=Math.abs(this._artificial._constant)<1e-8;this._artificial=null;var r=this._rows.remove(e);if(void 0!==r){if(r.isConstant())return i;var n=this.anyPivotableSymbol(r);if(n.isInvalid())return!1;r.solveForEx(e,n),this.substitute(n,r),this._rows.set(n,r)}for(var o=0,s=this._rows.size;o<s;o+=1)this._rows.getEntry(o)[1].removeSymbol(e);return this._objective.removeSymbol(e),i},t.prototype.substitute=function(t,e){for(var i=0,r=this._rows.size;i<r;i+=1){var n=this._rows.getEntry(i),o=n[0],s=n[1];s.substitute(t,e),s._constant<0&&!o.isExternal()&&this._infeasible.push(o)}this._objective.substitute(t,e),null!==this._artificial&&this._artificial.substitute(t,e)},t.prototype.optimize=function(t){for(;;){var e=this.getEnteringSymbol(t);if(e.isInvalid())return;var i=this.getLeavingSymbol(e);if(i.isInvalid())throw new Error("objective is unbounded");var r=this._rows.remove(i);r.solveForEx(i,e),this.substitute(e,r),this._rows.set(e,r)}},t.prototype.dualOptimize=function(){for(var t;t=this._infeasible.pop();){var e=this._rows.get(t);if(void 0!==e&&e._constant<0){var i=this.getDualEnteringSymbol(e);if(i.isInvalid())throw new Error("dual optimize failed");this._rows.remove(t),e.solveForEx(t,i),this.substitute(i,e),this._rows.set(i,e)}}},t.prototype.getEnteringSymbol=function(t){for(var e=0,i=t._cells.size;e<i;e+=1){var r=t._cells.getEntry(e),n=r[0];if(r[1]<0&&!n.isDummy())return n}return Ae.Invalid},t.prototype.getDualEnteringSymbol=function(t){for(var e=Number.MAX_VALUE,i=Ae.Invalid,r=0,n=t._cells.size;r<n;r+=1){var o=t._cells.getEntry(r),s=o[0],a=o[1];if(a>0&&!s.isDummy()){var u=this._objective.coefficientFor(s)/a;u<e&&(e=u,i=s)}}return i},t.prototype.getLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,i=Ae.Invalid,r=0,n=this._rows.size;r<n;r+=1){var o=this._rows.getEntry(r),s=o[0],a=o[1];if(!s.isExternal()){var u=a.coefficientFor(t);if(u<0){var l=-a._constant/u;l<e&&(e=l,i=s)}}}return i},t.prototype.getMarkerLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Ae.Invalid,n=Ae.Invalid,o=Ae.Invalid,s=0,a=this._rows.size;s<a;s+=1){var u=this._rows.getEntry(s),l=u[0],h=u[1],c=h.coefficientFor(t);if(0!==c)if(l.isExternal())o=l;else if(c<0){(d=-h._constant/c)<e&&(e=d,r=l)}else{var d;(d=h._constant/c)<i&&(i=d,n=l)}}return r.isInvalid()?n.isInvalid()?o:n:r},t.prototype.removeConstraintEffects=function(t,e){e.marker instanceof De&&this.removeMarkerEffects(e.marker,t.strength),e.other instanceof De&&this.removeMarkerEffects(e.other,t.strength)},t.prototype.removeMarkerEffects=function(t,e){var i=this._rows.get(t);void 0!==i?this._objective.insertRow(i,-e):this._objective.insertSymbol(t,-e)},t.prototype.anyPivotableSymbol=function(t){for(var e=0,i=t._cells.size;e<i;e+=1){var r=t._cells.getEntry(e)[0];if(r instanceof Pe||r instanceof De)return r}return Ae.Invalid},t}(),ze=function(){function t(){}return t.prototype.willSetViewController=function(t){},t.prototype.onSetViewController=function(t){},t.prototype.didSetViewController=function(t){},t.prototype.willAddViewObserver=function(t){},t.prototype.onAddViewObserver=function(t){},t.prototype.didAddViewObserver=function(t){},t.prototype.willRemoveViewObserver=function(t){},t.prototype.onRemoveViewObserver=function(t){},t.prototype.didRemoveViewObserver=function(t){},t.prototype.willObserve=function(t){var e=this.viewController;null!==e&&t.call(this,e);for(var i=this.viewObservers,r=0,n=i.length;r<n;r+=1)t.call(this,i[r])},t.prototype.didObserve=function(t){for(var e=this.viewObservers,i=0,r=e.length;i<r;i+=1)t.call(this,e[i]);var n=this.viewController;null!==n&&t.call(this,n)},t.prototype.willSetParentView=function(t,e){this.willObserve((function(i){void 0!==i.viewWillSetParentView&&i.viewWillSetParentView(t,e,this)}))},t.prototype.onSetParentView=function(t,e){if(null!==t)t.isMounted()&&(this.cascadeMount(),t.isPowered()&&this.cascadePower());else if(this.isMounted())try{this.isPowered()&&this.cascadeUnpower()}finally{this.cascadeUnmount()}},t.prototype.didSetParentView=function(t,e){this.didObserve((function(i){void 0!==i.viewDidSetParentView&&i.viewDidSetParentView(t,e,this)}))},t.prototype.willInsertChildView=function(t,e){this.willObserve((function(i){void 0!==i.viewWillInsertChildView&&i.viewWillInsertChildView(t,e,this)}))},t.prototype.onInsertChildView=function(e,i){this.requireUpdate(t.NeedsLayout)},t.prototype.didInsertChildView=function(t,e){this.didObserve((function(i){void 0!==i.viewDidInsertChildView&&i.viewDidInsertChildView(t,e,this)}))},t.prototype.willRemoveChildView=function(t){this.willObserve((function(e){void 0!==e.viewWillRemoveChildView&&e.viewWillRemoveChildView(t,this)}))},t.prototype.onRemoveChildView=function(e){this.requireUpdate(t.NeedsLayout)},t.prototype.didRemoveChildView=function(t){this.didObserve((function(e){void 0!==e.viewDidRemoveChildView&&e.viewDidRemoveChildView(t,this)}))},t.prototype.isMounted=function(){return 0!=(this.viewFlags&t.MountedFlag)},t.prototype.willMount=function(){this.willObserve((function(t){void 0!==t.viewWillMount&&t.viewWillMount(this)}))},t.prototype.onMount=function(){},t.prototype.didMount=function(){this.didObserve((function(t){void 0!==t.viewDidMount&&t.viewDidMount(this)}))},t.prototype.willUnmount=function(){this.willObserve((function(t){void 0!==t.viewWillUnmount&&t.viewWillUnmount(this)}))},t.prototype.onUnmount=function(){},t.prototype.didUnmount=function(){this.didObserve((function(t){void 0!==t.viewDidUnmount&&t.viewDidUnmount(this)}))},t.prototype.isPowered=function(){return 0!=(this.viewFlags&t.PoweredFlag)},t.prototype.willPower=function(){this.willObserve((function(t){void 0!==t.viewWillPower&&t.viewWillPower(this)}))},t.prototype.onPower=function(){},t.prototype.didPower=function(){this.didObserve((function(t){void 0!==t.viewDidPower&&t.viewDidPower(this)}))},t.prototype.willUnpower=function(){this.willObserve((function(t){void 0!==t.viewWillUnpower&&t.viewWillUnpower(this)}))},t.prototype.onUnpower=function(){},t.prototype.didUnpower=function(){this.didObserve((function(t){void 0!==t.viewDidUnpower&&t.viewDidUnpower(this)}))},Object.defineProperty(t.prototype,"updateTime",{get:function(){var t=this.parentView;return null!==t?t.updateTime:performance.now()},enumerable:!1,configurable:!0}),t.prototype.requireUpdate=function(e,i){void 0===i&&(i=!1),e&=~t.LifecycleMask,this.willRequireUpdate(e,i);var r=this.viewFlags,n=r|e,o=n&~r;0!==o&&(this.setViewFlags(n),this.requestUpdate(o,i)),this.didRequireUpdate(e,i)},t.prototype.willRequireUpdate=function(t,e){},t.prototype.didRequireUpdate=function(t,e){},t.prototype.requestUpdate=function(t,e){t=this.willRequestUpdate(t,e);var i=this.parentView;null!==i&&i.requestUpdate(t,e),this.didRequestUpdate(t,e)},t.prototype.willRequestUpdate=function(e,i){var r=this.modifyUpdate(e);return 0!==(r&=~t.LifecycleMask)&&(e|=r,this.setViewFlags(this.viewFlags|r)),e},t.prototype.didRequestUpdate=function(t,e){},t.prototype.modifyUpdate=function(e){var i=0;return 0!=(e&t.ProcessMask)&&(i|=t.NeedsProcess),0!=(e&t.DisplayMask)&&(i|=t.NeedsDisplay),i},t.prototype.isUpdating=function(){return 0!=(this.viewFlags&t.UpdatingMask)},t.prototype.isProcessing=function(){return 0!=(this.viewFlags&t.ProcessingFlag)},t.prototype.needsProcess=function(t,e){return t},t.prototype.willProcess=function(t){this.willObserve((function(e){void 0!==e.viewWillProcess&&e.viewWillProcess(t,this)}))},t.prototype.onProcess=function(t){},t.prototype.didProcess=function(t){this.didObserve((function(e){void 0!==e.viewDidProcess&&e.viewDidProcess(t,this)}))},t.prototype.willScroll=function(t){this.willObserve((function(e){void 0!==e.viewWillScroll&&e.viewWillScroll(t,this)}))},t.prototype.onScroll=function(t){},t.prototype.didScroll=function(t){this.didObserve((function(e){void 0!==e.viewDidScroll&&e.viewDidScroll(t,this)}))},t.prototype.willDerive=function(t){this.willObserve((function(e){void 0!==e.viewWillDerive&&e.viewWillDerive(t,this)}))},t.prototype.onDerive=function(t){},t.prototype.didDerive=function(t){this.didObserve((function(e){void 0!==e.viewDidDerive&&e.viewDidDerive(t,this)}))},t.prototype.doProcessChildViews=function(e,i){var r=this.childViews;if(0!=(e&t.ProcessMask)&&0!==r.length){this.willProcessChildViews(i);for(var n=0;n<r.length;n+=1){var o=r[n],s=this.childViewContext(o,i);this.doProcessChildView(o,e,s)}this.didProcessChildViews(i)}},t.prototype.doProcessChildView=function(t,e,i){t.cascadeProcess(e,i)},t.prototype.willProcessChildViews=function(t){this.willObserve((function(e){void 0!==e.viewWillProcessChildViews&&e.viewWillProcessChildViews(t,this)}))},t.prototype.didProcessChildViews=function(t){this.didObserve((function(e){void 0!==e.viewDidProcessChildViews&&e.viewDidProcessChildViews(t,this)}))},t.prototype.isDisplaying=function(){return 0!=(this.viewFlags&t.DisplayingFlag)},t.prototype.needsDisplay=function(t,e){return t},t.prototype.willDisplay=function(t){this.willObserve((function(e){void 0!==e.viewWillDisplay&&e.viewWillDisplay(t,this)}))},t.prototype.onDisplay=function(t){},t.prototype.didDisplay=function(t){this.didObserve((function(e){void 0!==e.viewDidDisplay&&e.viewDidDisplay(t,this)}))},t.prototype.willLayout=function(t){this.willObserve((function(e){void 0!==e.viewWillLayout&&e.viewWillLayout(t,this)}))},t.prototype.onLayout=function(t){},t.prototype.didLayout=function(t){this.didObserve((function(e){void 0!==e.viewDidLayout&&e.viewDidLayout(t,this)}))},t.prototype.doDisplayChildViews=function(e,i){var r=this.childViews;if(0!=(e&t.DisplayMask)&&0!==r.length){this.willDisplayChildViews(i);for(var n=0;n<r.length;n+=1){var o=r[n],s=this.childViewContext(o,i);this.doDisplayChildView(o,e,s)}this.didDisplayChildViews(i)}},t.prototype.doDisplayChildView=function(t,e,i){t.cascadeDisplay(e,i)},t.prototype.willDisplayChildViews=function(t){this.willObserve((function(e){void 0!==e.viewWillDisplayChildViews&&e.viewWillDisplayChildViews(t,this)}))},t.prototype.didDisplayChildViews=function(t){this.didObserve((function(e){void 0!==e.viewDidDisplayChildViews&&e.viewDidDisplayChildViews(t,this)}))},t.prototype.childViewContext=function(t,e){return e},t.prototype.getLazyViewScope=function(e){var i=this.getViewScope(e);if(null===i){var r=this.__proto__,n=t.getViewScopeDescriptor(e,r);null!==n&&void 0!==n.scopeType&&(i=t.initViewScope(n.scopeType,this,e,n),this.setViewScope(e,i))}return i},t.prototype.viewScopeDidSetState=function(e,i,r){this.requireUpdate(t.NeedsDerive)},Object.defineProperty(t.prototype,"viewport",{get:function(){var t=this.parentView;return null!==t?t.viewport:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewIdiom",{get:function(){var t=this.parentView;return null!==t?t.viewIdiom:"unspecified"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootView",{get:function(){var t=this.parentView;return null!==t?t.rootView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageTransform",{get:function(){var t=this.parentView;return null!==t?t.pageTransform.transform(this.parentTransform):Q.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageBounds",{get:function(){var t=this.clientBounds,e=this.clientTransform;return t.transform(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popoverFrame",{get:function(){return this.pageBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientTransform",{get:function(){var t,e=window.pageXOffset,i=window.pageYOffset;t=0!==e||0!==i?Q.translate(e,i):Q.identity();var r=this.pageTransform;return t.transform(r)},enumerable:!1,configurable:!0}),t.prototype.intersectsViewport=function(){var t=this.clientBounds,e=document.documentElement.clientWidth,i=document.documentElement.clientHeight;return(t.top<=0&&0<t.bottom||0<=t.top&&t.top<i)&&(t.left<=0&&0<t.right||0<=t.left&&t.left<e)},t.getViewScopeDescriptor=function(t,e){void 0===e&&(e=null),null===e&&(e=this.prototype);do{if(e.hasOwnProperty("_viewScopeDescriptors")){var i=e._viewScopeDescriptors[t];if(void 0!==i)return i}e=e.__proto__}while(null!==e);return null},t.initViewScope=function(t,e,i,r){var n,o;return n=void 0!==r.init?r.init.call(e):r.value,"string"==typeof r.inherit?o=r.inherit:!0===r.inherit&&(o=i),new t(e,i,n,o)},t.decorateViewScope=function(e,i,r,n){r.hasOwnProperty("_viewScopeDescriptors")||(r._viewScopeDescriptors={}),r._viewScopeDescriptors[n]=i,Object.defineProperty(r,n,{get:function(){var r=this.getViewScope(n);return null===r&&(r=t.initViewScope(e,this,n,i),this.setViewScope(n,r)),r},configurable:!0,enumerable:!0})},t.initLayoutAnchor=function(t,e,i,r){var n,o;n=void 0!==r&&void 0!==r.value?r.value:NaN,o=void 0!==r&&void 0!==r.strength&&null!==r.strength?Ue.fromAny(r.strength):Ue.Strong;var s=void 0!==r&&!!r.enabled,a=void 0!==r?r.get:void 0,u=void 0!==r?r.set:void 0,l=new t(e,i,n,o,s);return l.getState=a,l.setValue=u,l},t.decorateLayoutAnchor=function(e,i,r,n){Object.defineProperty(r,n,{get:function(){var r=this.getLayoutAnchor(n);return null===r&&(r=t.initLayoutAnchor(e,this,n,i),this.setLayoutAnchor(n,r)),r},configurable:!0,enumerable:!0})},t.fromTag=function(e){return"svg"===e?new t.Svg(document.createElementNS(t.Svg.namespace,e)):"canvas"===e?new t.Canvas(document.createElement(e)):new t.Html(document.createElement(e))},t.fromNode=function(e){if(e.view instanceof t)return e.view;var i=void 0,r=(i=e instanceof Element?e instanceof HTMLElement?e instanceof HTMLCanvasElement?new t.Canvas(e):new t.Html(e):e instanceof SVGElement?new t.Svg(e):new t.Element(e):e instanceof Text?new t.Text(e):new t.Node(e)).parentView;return null!==r&&i.setParentView(r,null),i},t.fromConstructor=function(e){if(t.Element.isConstructor(e))return void 0===e.namespace?new e(document.createElement(e.tag)):new e(document.createElementNS(e.namespace,e.tag));if("function"==typeof e)return new e;throw new TypeError(""+e)},t.create=function(e){if("string"==typeof e)return t.fromTag(e);if(e instanceof Node)return t.fromNode(e);if("function"==typeof e)return t.fromConstructor(e);throw new TypeError(""+e)},t.MountedFlag=1,t.PoweredFlag=2,t.HiddenFlag=4,t.CulledFlag=8,t.HoveringFlag=16,t.ProcessingFlag=32,t.DisplayingFlag=64,t.ImmediateFlag=128,t.RemovingFlag=256,t.UpdatingMask=t.ProcessingFlag|t.DisplayingFlag,t.LifecycleMask=t.MountedFlag|t.PoweredFlag|t.HiddenFlag|t.CulledFlag|t.HoveringFlag|t.ProcessingFlag|t.DisplayingFlag|t.RemovingFlag,t.NeedsProcess=512,t.NeedsResize=1024,t.NeedsScroll=2048,t.NeedsDerive=4096,t.NeedsAnimate=8192,t.NeedsProject=16384,t.ProcessMask=t.NeedsProcess|t.NeedsResize|t.NeedsScroll|t.NeedsDerive|t.NeedsAnimate|t.NeedsProject,t.NeedsDisplay=32768,t.NeedsLayout=65536,t.NeedsRender=1<<17,t.NeedsComposite=1<<18,t.DisplayMask=t.NeedsDisplay|t.NeedsLayout|t.NeedsRender|t.NeedsComposite,t.UpdateMask=t.ProcessMask|t.DisplayMask,t.ViewFlagShift=19,t.ViewFlagMask=(1<<t.ViewFlagShift)-1,t}(),Be=function(){function t(){this._view=null}return Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),t.prototype.setView=function(t){this.willSetView(t),this._view=t,this.onSetView(t),this.didSetView(t)},t.prototype.willSetView=function(t){},t.prototype.onSetView=function(t){},t.prototype.didSetView=function(t){},Object.defineProperty(t.prototype,"key",{get:function(){var t=this._view;return null!==t?t.key:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentView",{get:function(){var t=this._view;return null!==t?t.parentView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentViewController",{get:function(){var t=this.parentView;return null!==t?t.viewController:null},enumerable:!1,configurable:!0}),t.prototype.viewWillSetParentView=function(t,e,i){},t.prototype.viewDidSetParentView=function(t,e,i){},Object.defineProperty(t.prototype,"childViews",{get:function(){var t=this._view;return null!==t?t.childViews:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childViewControllers",{get:function(){return this.childViews.map((function(t){return t.viewController}))},enumerable:!1,configurable:!0}),t.prototype.getChildView=function(t){var e=this._view;return null!==e?e.getChildView(t):null},t.prototype.getChildViewController=function(t){var e=this.getChildView(t);return null!==e?e.viewController:null},t.prototype.setChildView=function(t,e){var i=this._view;if(null!==i)return i.setChildView(t,e);throw new Error("no view")},t.prototype.setChildViewController=function(t,e){var i=null!==e?e.view:null;if(null!==i){var r=this.setChildView(t,i);return null!==r?r.viewController:null}throw new Error("no view")},t.prototype.appendChildView=function(t,e){var i=this._view;if(null===i)throw new Error("no view");i.appendChildView(t,e)},t.prototype.appendChildViewController=function(t,e){var i=this._view,r=t.view;if(null===i||null===r)throw new Error("no view");i.appendChildView(r,e)},t.prototype.prependChildView=function(t,e){var i=this._view;if(null===i)throw new Error("no view");i.prependChildView(t,e)},t.prototype.prependChildViewController=function(t,e){var i=this._view,r=t.view;if(null===i||null===r)throw new Error("no view");i.prependChildView(r,e)},t.prototype.insertChildView=function(t,e,i){var r=this._view;if(null===r)throw new Error("no view");r.insertChildView(t,e,i)},t.prototype.insertChildViewController=function(t,e,i){var r=this._view,n=t.view;if(null===r||null===n)throw new Error("no view");var o=void 0;o=null===e||e instanceof ze?e:e.view,r.insertChildView(n,o,i)},t.prototype.viewWillInsertChildView=function(t,e,i){},t.prototype.viewDidInsertChildView=function(t,e,i){},t.prototype.removeChildView=function(t){var e=this._view;if(null===e)throw new Error("no view");if("string"==typeof t)return e.removeChildView(t);e.removeChildView(t)},t.prototype.removeChildViewController=function(t){var e,i=this._view;if(null===i)throw new Error("no view");if("string"==typeof t)return null!==(e=i.removeChildView(t))?e.viewController:null;if(null===(e=t.view))throw new Error("no view");i.removeChildView(e)},t.prototype.removeAll=function(){var t=this._view;if(null===t)throw new Error("no view");t.removeAll()},t.prototype.remove=function(){var t=this._view;if(null===t)throw new Error("no view");t.remove()},t.prototype.viewWillRemoveChildView=function(t,e){},t.prototype.viewDidRemoveChildView=function(t,e){},t.prototype.isMounted=function(){var t=this._view;return null!==t&&t.isMounted()},t.prototype.viewWillMount=function(t){},t.prototype.viewDidMount=function(t){},t.prototype.viewWillUnmount=function(t){},t.prototype.viewDidUnmount=function(t){},t.prototype.isPowered=function(){var t=this._view;return null!==t&&t.isPowered()},t.prototype.viewWillPower=function(t){},t.prototype.viewDidPower=function(t){},t.prototype.viewWillUnpower=function(t){},t.prototype.viewDidUnpower=function(t){},t.prototype.isUpdating=function(){var t=this._view;return null!==t&&t.isUpdating()},t.prototype.isProcessing=function(){var t=this._view;return null!==t&&t.isProcessing()},t.prototype.viewWillProcess=function(t,e){},t.prototype.viewDidProcess=function(t,e){},t.prototype.viewWillScroll=function(t,e){},t.prototype.viewDidScroll=function(t,e){},t.prototype.viewWillDerive=function(t,e){},t.prototype.viewDidDerive=function(t,e){},t.prototype.viewWillProcessChildViews=function(t,e){},t.prototype.viewDidProcessChildViews=function(t,e){},t.prototype.isDisplaying=function(){var t=this._view;return null!==t&&t.isDisplaying()},t.prototype.viewWillDisplay=function(t,e){},t.prototype.viewDidDisplay=function(t,e){},t.prototype.viewWillLayout=function(t,e){},t.prototype.viewDidLayout=function(t,e){},t.prototype.viewWillDisplayChildViews=function(t,e){},t.prototype.viewDidDisplayChildViews=function(t,e){},Object.defineProperty(t.prototype,"viewport",{get:function(){var t=this._view;return null!==t?t.viewport:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewIdiom",{get:function(){var t=this._view;return null!==t?t.viewIdiom:"unspecified"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootView",{get:function(){var t=this._view;return null!==t?t.rootView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootViewController",{get:function(){var t=this.rootView;return null!==t?t.viewController:null},enumerable:!1,configurable:!0}),t.prototype.intersectsViewport=function(){var t=this._view;return null!==t&&t.intersectsViewport()},t}(),We={is:function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.updateConstraintVariables}},He={is:function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.setConstraintVariable}},Xe=function(t){function e(e){var i=t.call(this)||this;return i._layoutManager=e,i}return l(e,t),Object.defineProperty(e.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!1,configurable:!0}),e.prototype.didAddConstraint=function(t){this._layoutManager.didAddConstraint(t)},e.prototype.didRemoveConstraint=function(t){this._layoutManager.didRemoveConstraint(t)},e.prototype.didAddConstraintVariable=function(t){this._layoutManager.didAddConstraintVariable(t)},e.prototype.didRemoveConstraintVariable=function(t){this._layoutManager.didRemoveConstraintVariable(t)},e.prototype.didUpdateConstraintVariable=function(t,e,i){this._layoutManager.didUpdateConstraintVariable(t,e,i)},e}(qe),Ye=function(t){function e(e,i,r,n,o){void 0===o&&(o=!1);var s=t.call(this,e,i,r,n)||this;return s._enabled=o,s}var i=function(t,r,n,o,s){if(this instanceof i){var a=function(t){return void 0===t?a.state:(a.enabled(!0).setState(t),a._scope)};return a.__proto__=this,a=e.call(this,t,r,n,o,s)}return function(t){return ze.decorateLayoutAnchor.bind(void 0,i,t)}(t)};return l(i,t),i.prototype.enabled=function(t){return void 0===t?this._enabled:(this._enabled=t,this)},i.prototype.updateValue=function(t){if(this._value!==t&&(this._value=t,this._enabled)){var e=this.setValue;void 0!==e&&e.call(this._scope,t)}},i.prototype.updateState=function(){if(!this._enabled){var t=this.getState;if(void 0!==t){var e=this._state,i=t.call(this._scope,e);this.setState(i)}}},i}(Ie),Ge={is:function(t){if("object"==typeof t&&null!==t){var e=t;return e instanceof ze&&"function"==typeof e.addConstraint&&"function"==typeof e.removeConstraint&&"function"==typeof e.updateConstraintVariables}return!1}};ze.Layout=Ge;var Ke={is:function(t){if("object"==typeof t&&null!==t){var e=t;return e instanceof ze&&"function"==typeof e.toggleModal&&"function"==typeof e.presentModal&&"function"==typeof e.dismissModal&&"function"==typeof e.dismissModals}return!1}};ze.Root=Ke;var Qe=function(t){function e(t,e){var i=n.Atomic,r={scopeType:i};ze.decorateViewScope(i,r,t,e)}function i(t){void 0===t&&(t={});var e=t.scopeType;return void 0===e&&(e=n.Atomic,t.scopeType=e),ze.decorateViewScope.bind(void 0,e,t)}function r(t,e,i,r){return void 0===r&&(r=null),Object.defineProperty(this,"name",{value:e,enumerable:!0,configurable:!0}),this._view=t,this._inherit=r,this}var n=function(t,o,s,a){if(this instanceof n)return r.call(this,t,o,s,a);if(1===arguments.length){var u=t;return i(u)}var l=t;e(l,o)};return l(n,Object),Object.defineProperty(n.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inherit",{get:function(){return this._inherit},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"superScope",{get:function(){var t=this._inherit;if(null!==t)for(var e=this._view.parentView;null!==e;){var i=e.getLazyViewScope(t);if(null!==i)return i;e=e.parentView}return null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"superState",{get:function(){var t=this.superScope;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){throw new Error},enumerable:!0,configurable:!0}),n.prototype.setState=function(t){throw new Error},n}(),Ze=function(t){var e=function(e,i,r,n){var o=function(t){return 0===arguments.length?o.state:(o.setState(t),o._view)};return o.__proto__=this,o=t.call(o,e,i,r,n)||o,this._state=r,o};return l(e,t),Object.defineProperty(e.prototype,"state",{get:function(){var t=this._state;return void 0!==t?t:this.superState},enumerable:!0,configurable:!0}),e.prototype.setState=function(t){var e=this._state;r.Objects.equal(e,t)||(this._state=t,this._view.viewScopeDidSetState(this,t,e))},e}(Qe);Qe.Atomic=Ze;var Je={is:function(t){if("object"==typeof t&&null!==t){var e=t;return e instanceof ze.Node||e instanceof ze.Graphics||e instanceof ze&&"function"==typeof e.animate}return!1},getMemberAnimatorDescriptor:function(t,e){for(;null!==e;){if(e.hasOwnProperty("_memberAnimatorDescriptors")){var i=e._memberAnimatorDescriptors[t];if(void 0!==i)return i}e=e.__proto__}return null},initMemberAnimator:function(t,e,i,r){var n,o,s;return void 0!==r&&(n=void 0!==r.init?r.init.call(e):r.value,void 0!==r.transition&&null!==r.transition&&(o=ee.fromAny(r.transition)),"string"==typeof r.inherit?s=r.inherit:!0===r.inherit&&(s=i)),new t(e,i,n,o,s)},decorateMemberAnimator:function(t,e,i,r){i.hasOwnProperty("_memberAnimatorDescriptors")||(i._memberAnimatorDescriptors={}),i._memberAnimatorDescriptors[r]=e,Object.defineProperty(i,r,{get:function(){var i=this.getMemberAnimator(r);return null===i&&(i=Je.initMemberAnimator(t,this,r,e),this.setMemberAnimator(r,i)),i},configurable:!0,enumerable:!0})}};ze.Animated=Je;var $e=function(t){function e(e,i,r,n,o){return void 0===n&&(n=null),void 0===o&&(o=null),void 0!==i&&Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this._view=e,this._inherit=o,this._auto=!0,void 0!==r&&(r=this.fromAny(r)),t.call(this,r,n)||this}var i=function(t,n,o,s,u){return this instanceof i?e.call(this,t,n,o,s,u):function(t,e){void 0===e&&(e={});var n=e.animatorType;if(void 0===n){if(t===Object)n=i.Object;else if(t===String)n=i.String;else if(t===Boolean)n=i.Boolean;else if(t===Number)n=i.Number;else if(t===a)n=i.Angle;else if(t===w)n=i.Length;else if(t===P)n=i.Color;else if(t===W)n=i.Font;else if(t===Q)n=i.Transform;else{if(!r.FromAny.is(t))throw new TypeError(""+t);n=i.Any.bind(void 0,t)}e.animatorType=n}return Je.decorateMemberAnimator.bind(void 0,n,e)}(t,n)};return l(i,t),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inherit",{get:function(){return this._inherit},enumerable:!0,configurable:!0}),i.prototype.setInherit=function(t){this._inherit=t},Object.defineProperty(i.prototype,"superAnimator",{get:function(){var t=this._inherit;if(null!==t)for(var e=this._view.parentView;null!==e;){if(Je.is(e)){var r=e.getLazyMemberAnimator(t);if(r instanceof i)return r}e=e.parentView}return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"superValue",{get:function(){var t=this.superAnimator;return null!==t?t.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"superState",{get:function(){var t=this.superAnimator;return null!==t?t.state:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this._value;return void 0!==t?t:this.superValue},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){var t=this._state;return void 0!==t?t:this.superState},enumerable:!0,configurable:!0}),i.prototype.isAuto=function(){return this._auto},i.prototype.setAuto=function(t){this._auto!==t&&(this._auto=t,this._view.animatorDidSetAuto(this,t))},i.prototype.setState=function(e,i){void 0!==e&&(e=this.fromAny(e)),this._auto=!1,t.prototype.setState.call(this,e,i)},i.prototype.setAutoState=function(e,i){!0===this._auto&&(void 0!==e&&(e=this.fromAny(e)),t.prototype.setState.call(this,e,i))},i.prototype.animate=function(t){void 0===t&&(t=this),(this._enabled||t!==this)&&this._view.animate(t)},i.prototype.update=function(t,e){r.Objects.equal(e,t)||(this.willUpdate(t,e),this.onUpdate(t,e),this.didUpdate(t,e))},i.prototype.willUpdate=function(t,e){},i.prototype.onUpdate=function(t,e){},i.prototype.didUpdate=function(t,e){},i.prototype.cancel=function(){},i.prototype.delete=function(){},i.prototype.fromAny=function(t){throw new Error},i}(oe),ti=function(t){var e=function(e,i,r,n,o,s){var a=function(t,e){return 0===arguments.length?a.value:(a.setState(t,e),a._view)};return a.__proto__=this,a._type=e,a=t.call(a,i,r,n,o,s)||a};return l(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),e.prototype.fromAny=function(t){return this._type.fromAny(t)},e}($e);$e.Any=ti;var ei=function(t){var e=function(e,i,r,n,o){var s=function(t,e){return 0===arguments.length?s.value:(s.setState(t,e),s._view)};return s.__proto__=this,s=t.call(s,e,i,r,n,o)||s};return l(e,t),e.prototype.fromAny=function(t){return t},e}($e);$e.Object=ei;var ii=function(t){var e=function(e,i,r,n,o){var s=function(t,e){return 0===arguments.length?s.value:(s.setState(t,e),s._view)};return s.__proto__=this,s=t.call(s,e,i,r,n,o)||s};return l(e,t),e.prototype.fromAny=function(t){return t},e}($e);$e.String=ii;var ri=function(t){var e=function(e,i,r,n,o){var s=function(t,e){return 0===arguments.length?s.value:(s.setState(t,e),s._view)};return s.__proto__=this,s=t.call(s,e,i,r,n,o)||s};return l(e,t),e.prototype.fromAny=function(t){return"string"==typeof t?!!t:t},e}($e);$e.Boolean=ri;var ni=function(t){var e=function(e,i,r,n,o){var s=function(t,e){return 0===arguments.length?s.value:(s.setState(t,e),s._view)};return s.__proto__=this,s=t.call(s,e,i,r,n,o)||s};return l(e,t),e.prototype.fromAny=function(t){if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}($e);$e.Number=ni;var oi=function(t){var e=function(e,i,r,n,o){var s=function(t,e){return 0===arguments.length?s.value:(s.setState(t,e),s._view)};return s.__proto__=this,s=t.call(s,e,i,r,n,o)||s};return l(e,t),e.prototype.fromAny=function(t){return null!==t?a.fromAny(t):null},e}($e);$e.Angle=oi;var si=function(t){var e=function(e,i,r,n,o){var s=function(t,e){return 0===arguments.length?s.value:(s.setState(t,e),s._view)};return s.__proto__=this,s=t.call(s,e,i,r,n,o)||s};return l(e,t),e.prototype.fromAny=function(t){return null!==t?w.fromAny(t):null},e}($e);$e.Length=si;var ai=function(t){var e=function(e,i,r,n,o){var s=function(t,e){return 0===arguments.length?s.value:(s.setState(t,e),s._view)};return s.__proto__=this,s=t.call(s,e,i,r,n,o)||s};return l(e,t),e.prototype.fromAny=function(t){return null!==t?P.fromAny(t):null},e}($e);$e.Color=ai;var ui=function(t){var e=function(e,i,r,n,o){var s=function(t,e){return 0===arguments.length?s.value:(s.setState(t,e),s._view)};return s.__proto__=this,s=t.call(s,e,i,r,n,o)||s};return l(e,t),e.prototype.fromAny=function(t){return null!==t?W.fromAny(t):null},e}($e);$e.Font=ui;var li=function(t){var e=function(e,i,r,n,o){var s=function(t,e){return 0===arguments.length?s.value:(s.setState(t,e),s._view)};return s.__proto__=this,s=t.call(s,e,i,r,n,o)||s};return l(e,t),e.prototype.fromAny=function(t){return null!==t?Q.fromAny(t):null},e}($e);$e.Transform=li;var hi=function(t){function e(e){var i=t.call(this)||this;return i._node=e,i._node.view=i,i._viewController=null,i._viewFlags=0,i.initNode(i._node),i}return l(e,t),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),e.prototype.initNode=function(t){},Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),e.prototype.setViewController=function(t){var e=this._viewController;e!==t&&(this.willSetViewController(t),null!==e&&e.setView(null),this._viewController=t,null!==t&&t.setView(this),this.onSetViewController(t),this.didSetViewController(t))},Object.defineProperty(e.prototype,"viewObservers",{get:function(){var t=this._viewObservers;return void 0===t&&(t=[],this._viewObservers=t),t},enumerable:!1,configurable:!0}),e.prototype.addViewObserver=function(t){var e,i=this._viewObservers;void 0===i?(i=[],this._viewObservers=i,e=-1):e=i.indexOf(t),e<0&&(this.willAddViewObserver(t),i.push(t),this.onAddViewObserver(t),this.didAddViewObserver(t))},e.prototype.removeViewObserver=function(t){var e=this._viewObservers;if(void 0!==e){var i=e.indexOf(t);i>=0&&(this.willRemoveViewObserver(t),e.splice(i,1),this.onRemoveViewObserver(t),this.didRemoveViewObserver(t))}},e.prototype.text=function(t){return void 0===t?this._node.textContent:(this._node.textContent=t,this)},Object.defineProperty(e.prototype,"key",{get:function(){var t=this._key;return void 0!==t?t:null},enumerable:!1,configurable:!0}),e.prototype.setKey=function(t){null!==t?this._key=t:void 0!==this._key&&(this._key=void 0)},Object.defineProperty(e.prototype,"parentView",{get:function(){var t=this._node.parentNode;if(null!==t){var e=t.view;if(e instanceof ze)return e}return null},enumerable:!1,configurable:!0}),e.prototype.setParentView=function(t,e){this.willSetParentView(t,e),this.onSetParentView(t,e),this.didSetParentView(t,e)},Object.defineProperty(e.prototype,"childViews",{get:function(){for(var t=this._node.childNodes,e=[],i=0,r=t.length;i<r;i+=1){var n=t[i].view;void 0!==n&&e.push(n)}return e},enumerable:!1,configurable:!0}),e.prototype.getChildView=function(t){var e=this._childViewMap;if(void 0!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,i){if(null!==i){if(!(i instanceof e))throw new TypeError(""+i);i.remove()}var r=null,n=null,o=this._childViewMap;if(void 0!==o){var s=o[t];if(void 0!==s){if(r=s,!(s instanceof e))throw new TypeError(""+s);var a=s._node;n=a.nextSibling,this.willRemoveChildView(s),this.willRemoveChildNode(a),s.setParentView(null,this),this.removeChildViewMap(s),this._node.removeChild(a),this.onRemoveChildNode(a),this.onRemoveChildView(s),this.didRemoveChildNode(a),this.didRemoveChildView(s),s.setKey(null)}}if(null!==i){var u=i._node,l=null!==n?n.view:null;i.setKey(t),this.willInsertChildView(i,l),this.willInsertChildNode(u,n),this._node.insertBefore(u,n),this.insertChildViewMap(i),i.setParentView(this,null),this.onInsertChildNode(u,n),this.onInsertChildView(i,l),this.didInsertChildNode(u,n),this.didInsertChildView(i,l)}return r},e.prototype.insertChildViewMap=function(t){var e=t.key;if(null!==e){var i=this._childViewMap;void 0===i&&(i={},this._childViewMap=i),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=this._childViewMap;if(void 0!==e){var i=t.key;null!==i&&delete e[i]}},e.prototype.appendChild=function(t,e){if(t instanceof ze)this.appendChildView(t,e);else{if(!(t instanceof Node))throw new TypeError(""+t);this.appendChildNode(t,e)}},e.prototype.appendChildView=function(t,i){if(!(t instanceof e))throw new TypeError(""+t);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i));var r=t._node;this.willInsertChildView(t,null),this.willInsertChildNode(r,null),this._node.appendChild(r),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(r,null),this.onInsertChildView(t,null),this.didInsertChildNode(r,null),this.didInsertChildView(t,null)},e.prototype.appendChildNode=function(t,e){var i=t.view;void 0!==i&&(i.remove(),void 0!==e&&(this.removeChildView(e),i.setKey(e)),this.willInsertChildView(i,null)),this.willInsertChildNode(t,null),this._node.appendChild(t),void 0!==i&&(this.insertChildViewMap(i),i.setParentView(this,null)),this.onInsertChildNode(t,null),void 0!==i&&this.onInsertChildView(i,null),this.didInsertChildNode(t,null),void 0!==i&&this.didInsertChildView(i,null)},e.prototype.prependChild=function(t,e){if(t instanceof ze)this.prependChildView(t,e);else{if(!(t instanceof Node))throw new TypeError(""+t);this.prependChildNode(t,e)}},e.prototype.prependChildView=function(t,i){if(!(t instanceof e))throw new TypeError(""+t);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i));var r=t._node,n=this._node.firstChild,o=null!==n?n.view:null;this.willInsertChildView(t,o),this.willInsertChildNode(r,n),this._node.insertBefore(r,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(r,n),this.onInsertChildView(t,o),this.didInsertChildNode(r,n),this.didInsertChildView(t,o)},e.prototype.prependChildNode=function(t,e){var i=t.view,r=this._node.firstChild,n=null!==r?r.view:null;void 0!==i&&(i.remove(),void 0!==e&&(this.removeChildView(e),i.setKey(e)),this.willInsertChildView(i,n)),this.willInsertChildNode(t,r),this._node.insertBefore(t,r),void 0!==i&&(this.insertChildViewMap(i),i.setParentView(this,null)),this.onInsertChildNode(t,r),void 0!==i&&this.onInsertChildView(i,n),this.didInsertChildNode(t,r),void 0!==i&&this.didInsertChildView(i,n)},e.prototype.insertChild=function(t,i,r){if(t instanceof e)if(i instanceof ze)this.insertChildView(t,i,r);else{if(!(i instanceof Node||null===i))throw new TypeError(""+i);this.insertChildNode(t._node,i,r)}else{if(!(t instanceof Node))throw new TypeError(""+t);if(i instanceof e)this.insertChildNode(t,i._node,r);else{if(!(i instanceof Node||null===i))throw new TypeError(""+i);this.insertChildNode(t,i,r)}}},e.prototype.insertChildView=function(t,i,r){if(!(t instanceof e))throw new TypeError(""+t);if(null!==i&&!(i instanceof e))throw new TypeError(""+i);t.remove(),void 0!==r&&(this.removeChildView(r),t.setKey(r));var n=t._node,o=null!==i?i._node:null;this.willInsertChildView(t,i),this.willInsertChildNode(n,o),this._node.insertBefore(n,o),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(n,o),this.onInsertChildView(t,i),this.didInsertChildNode(n,o),this.didInsertChildView(t,i)},e.prototype.insertChildNode=function(t,e,i){var r=t.view,n=null!==e?e.view:null;void 0!==r&&(r.remove(),void 0!==i&&(this.removeChildView(i),r.setKey(i)),this.willInsertChildView(r,n)),this.willInsertChildNode(t,e),this._node.insertBefore(t,e),void 0!==r&&(this.insertChildViewMap(r),r.setParentView(this,null)),this.onInsertChildNode(t,e),void 0!==r&&this.onInsertChildView(r,n),this.didInsertChildNode(t,e),void 0!==r&&this.didInsertChildView(r,n)},e.prototype.injectChildView=function(t,e,i){void 0!==i&&(this.removeChildView(i),t.setKey(i));var r=t._node,n=null!==e?e._node:null;this.willInsertChildView(t,e),this.willInsertChildNode(r,n),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildNode(r,n),this.onInsertChildView(t,e),this.didInsertChildNode(r,n),this.didInsertChildView(t,e)},e.prototype.willInsertChildNode=function(t,e){this.willObserve((function(i){void 0!==i.viewWillInsertChildNode&&i.viewWillInsertChildNode(t,e,this)}))},e.prototype.onInsertChildNode=function(t,e){this.requireUpdate(ze.NeedsLayout)},e.prototype.didInsertChildNode=function(t,e){this.didObserve((function(i){void 0!==i.viewDidInsertChildNode&&i.viewDidInsertChildNode(t,e,this)}))},e.prototype.removeChild=function(t){if(t instanceof ze)this.removeChildView(t);else{if(!(t instanceof Node))throw new TypeError(""+t);this.removeChildNode(t)}},e.prototype.removeChildView=function(t){var i;if("string"==typeof t){if(null===(i=this.getChildView(t)))return null}else i=t;if(!(i instanceof e))throw new TypeError(""+i);var r=i._node;if(r.parentNode!==this._node)throw new Error("not a child view");if(this.willRemoveChildView(i),this.willRemoveChildNode(r),i.setParentView(null,this),this.removeChildViewMap(i),this._node.removeChild(r),this.onRemoveChildNode(r),this.onRemoveChildView(i),this.didRemoveChildNode(r),this.didRemoveChildView(i),i.setKey(null),"string"==typeof t)return i},e.prototype.removeChildNode=function(t){if(t.parentNode!==this._node)throw new Error("not a child node");var e=t.view;void 0!==e&&this.willRemoveChildView(e),this.willRemoveChildNode(t),this._node.removeChild(t),void 0!==e&&(e.setParentView(null,this),this.removeChildViewMap(e)),this.onRemoveChildNode(t),void 0!==e&&this.onRemoveChildView(e),this.didRemoveChildNode(t),void 0!==e&&(this.didRemoveChildView(e),e.setKey(null))},e.prototype.removeAll=function(){for(;;){var t=this._node.lastChild;if(null===t)break;var e=t.view;void 0!==e&&this.willRemoveChildView(e),this.willRemoveChildNode(t),this._node.removeChild(t),void 0!==e&&(e.setParentView(null,this),this.removeChildViewMap(e)),this.onRemoveChildNode(t),void 0!==e&&this.onRemoveChildView(e),this.didRemoveChildNode(t),void 0!==e&&(this.didRemoveChildView(e),e.setKey(null))}},e.prototype.remove=function(){var t=this._node,e=t.parentNode;if(null!==e){var i=e.view;void 0!==i?0==(this._viewFlags&ze.UpdatingMask)?i.removeChildView(this):this._viewFlags|=ze.RemovingFlag:(e.removeChild(t),this.setParentView(null,this),this.setKey(null))}},e.prototype.willRemoveChildNode=function(t){this.willObserve((function(e){void 0!==e.viewWillRemoveChildNode&&e.viewWillRemoveChildNode(t,this)}))},e.prototype.onRemoveChildNode=function(t){this.requireUpdate(ze.NeedsLayout)},e.prototype.didRemoveChildNode=function(t){this.didObserve((function(e){void 0!==e.viewDidRemoveChildNode&&e.viewDidRemoveChildNode(t,this)}))},Object.defineProperty(e.prototype,"viewFlags",{get:function(){return this._viewFlags},enumerable:!1,configurable:!0}),e.prototype.setViewFlags=function(t){this._viewFlags=t},e.prototype.isNodeMounted=function(){for(var t=this._node;;){var e=t.parentNode;if(null===e)break;if(e.nodeType===Node.DOCUMENT_NODE)return!0;t=e}return!1},e.prototype.cascadeMount=function(){if(0!=(this._viewFlags&ze.MountedFlag))throw new Error("already mounted");this._viewFlags|=ze.MountedFlag,this.willMount(),this.onMount(),this.doMountChildViews(),this.didMount()},e.prototype.doMountChildViews=function(){for(var t=this._node.childNodes,e=0;e<t.length;e+=1){var i=t[e].view;void 0!==i&&i.cascadeMount()}},e.prototype.cascadeUnmount=function(){if(0==(this._viewFlags&ze.MountedFlag))throw new Error("already unmounted");this._viewFlags&=~ze.MountedFlag,this.willUnmount(),this.doUnmountChildViews(),this.onUnmount(),this.didUnmount()},e.prototype.doUnmountChildViews=function(){for(var t=this._node.childNodes,e=0;e<t.length;e+=1){var i=t[e].view;void 0!==i&&i.cascadeUnmount()}},e.prototype.onUnmount=function(){this.cancelAnimators(),this._viewFlags=0},e.prototype.cascadePower=function(){if(0!=(this._viewFlags&ze.PoweredFlag))throw new Error("already powered");this._viewFlags|=ze.PoweredFlag,this.willPower(),this.onPower(),this.doPowerChildViews(),this.didPower()},e.prototype.doPowerChildViews=function(){for(var t=this._node.childNodes,e=0;e<t.length;e+=1){var i=t[e].view;void 0!==i&&i.cascadePower()}},e.prototype.cascadeUnpower=function(){if(0==(this._viewFlags&ze.PoweredFlag))throw new Error("already unpowered");this._viewFlags&=~ze.PoweredFlag,this.willUnpower(),this.doUnpowerChildViews(),this.onUnpower(),this.didUnpower()},e.prototype.doUnpowerChildViews=function(){for(var t=this._node.childNodes,e=0;e<t.length;e+=1){var i=t[e].view;void 0!==i&&i.cascadeUnpower()}},e.prototype.cascadeProcess=function(t,e){t=this._viewFlags|t,t=this.needsProcess(t,e),this.doProcess(t,e)},e.prototype.doProcess=function(t,e){var i=t;this._viewFlags&=~(ze.NeedsProcess|ze.NeedsResize|ze.NeedsProject),this.willProcess(e),this._viewFlags|=ze.ProcessingFlag;try{0!=((this._viewFlags|t)&ze.NeedsScroll)&&(i|=ze.NeedsScroll,this._viewFlags&=~ze.NeedsScroll,this.willScroll(e)),0!=((this._viewFlags|t)&ze.NeedsDerive)&&(i|=ze.NeedsDerive,this._viewFlags&=~ze.NeedsDerive,this.willDerive(e)),0!=((this._viewFlags|t)&ze.NeedsAnimate)&&(i|=ze.NeedsAnimate,this._viewFlags&=~ze.NeedsAnimate,this.willAnimate(e)),this.onProcess(e),0!=(i&ze.NeedsScroll)&&this.onScroll(e),0!=(i&ze.NeedsDerive)&&this.onDerive(e),0!=(i&ze.NeedsAnimate)&&this.onAnimate(e),this.doProcessChildViews(i,e),0!=(i&ze.NeedsAnimate)&&this.didAnimate(e),0!=(i&ze.NeedsDerive)&&this.didDerive(e),0!=(i&ze.NeedsScroll)&&this.didScroll(e)}finally{this._viewFlags&=~ze.ProcessingFlag,this.didProcess(e)}},e.prototype.willAnimate=function(t){this.willObserve((function(e){void 0!==e.viewWillAnimate&&e.viewWillAnimate(t,this)}))},e.prototype.onAnimate=function(t){this.animateMembers(t.updateTime)},e.prototype.didAnimate=function(t){this.didObserve((function(e){void 0!==e.viewDidAnimate&&e.viewDidAnimate(t,this)}))},e.prototype.doProcessChildViews=function(t,e){var i=this._node.childNodes;if(0!=(t&ze.ProcessMask)&&0!==i.length){this.willProcessChildViews(e);for(var r=0;r<i.length;){var n=i[r].view;void 0===n||(this.doProcessChildView(n,t,e),0==(n._viewFlags&ze.RemovingFlag))?r+=1:(n._viewFlags&=~ze.RemovingFlag,this.removeChildView(n))}this.didProcessChildViews(e)}},e.prototype.cascadeDisplay=function(t,e){t=this._viewFlags|t,t=this.needsDisplay(t,e),this.doDisplay(t,e)},e.prototype.doDisplay=function(t,e){var i=t;this._viewFlags&=~(ze.NeedsDisplay|ze.NeedsRender|ze.NeedsComposite),this.willDisplay(e),this._viewFlags|=ze.DisplayingFlag;try{0!=((this._viewFlags|t)&ze.NeedsLayout)&&(i|=ze.NeedsLayout,this._viewFlags&=~ze.NeedsLayout,this.willLayout(e)),this.onDisplay(e),0!=(i&ze.NeedsLayout)&&this.onLayout(e),this.doDisplayChildViews(i,e),0!=(i&ze.NeedsLayout)&&this.didLayout(e)}finally{this._viewFlags&=~ze.DisplayingFlag,this.didDisplay(e)}},e.prototype.doDisplayChildViews=function(t,e){var i=this._node.childNodes;if(0!=(t&ze.DisplayMask)&&0!==i.length){this.willDisplayChildViews(e);for(var r=0;r<i.length;){var n=i[r].view;void 0===n||(this.doDisplayChildView(n,t,e),0==(n._viewFlags&ze.RemovingFlag))?r+=1:(n._viewFlags&=~ze.RemovingFlag,this.removeChildView(n))}this.didDisplayChildViews(e)}},e.prototype.hasViewScope=function(t){var e=this._viewScopes;return void 0!==e&&void 0!==e[t]},e.prototype.getViewScope=function(t){var e=this._viewScopes;return void 0!==e&&e[t]||null},e.prototype.setViewScope=function(t,e){var i=this._viewScopes;void 0===i&&(i={},this._viewScopes=i),null!==e?i[t]=e:delete i[t]},e.prototype.hasLayoutAnchor=function(t){var e=this._layoutAnchors;return void 0!==e&&void 0!==e[t]},e.prototype.getLayoutAnchor=function(t){var e=this._layoutAnchors;return void 0!==e&&e[t]||null},e.prototype.setLayoutAnchor=function(t,e){var i=this._layoutAnchors;void 0===i&&(i={},this._layoutAnchors=i),null!==e?i[t]=e:delete i[t]},e.prototype.hasMemberAnimator=function(t){var e=this._memberAnimators;return void 0!==e&&void 0!==e[t]},e.prototype.getMemberAnimator=function(t){var e=this._memberAnimators;return void 0!==e&&e[t]||null},e.prototype.setMemberAnimator=function(t,e){var i=this._memberAnimators;void 0===i&&(i={},this._memberAnimators=i),null!==e?i[t]=e:delete i[t]},e.prototype.getLazyMemberAnimator=function(t){var e=this.getMemberAnimator(t);if(null===e){var i=this.__proto__,r=Je.getMemberAnimatorDescriptor(t,i);null!==r&&void 0!==r.animatorType&&(e=Je.initMemberAnimator(r.animatorType,this,t,r),this.setMemberAnimator(t,e))}return e},e.prototype.animatorDidSetAuto=function(t,e){t instanceof $e&&this.requireUpdate(ze.NeedsDerive)},e.prototype.animateMembers=function(t){var e=this._memberAnimators;if(void 0!==e)for(var i in e){e[i].onFrame(t)}},e.prototype.animate=function(t){this.requireUpdate(ze.NeedsAnimate)},e.prototype.cancelAnimators=function(){this.cancelMemberAnimators()},e.prototype.cancelMemberAnimators=function(){var t=this._memberAnimators;if(void 0!==t)for(var e in t){t[e].cancel()}},Object.defineProperty(e.prototype,"parentTransform",{get:function(){return Q.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientBounds",{get:function(){var t=document.createRange();t.selectNode(this._node);var e=t.getBoundingClientRect();return t.detach(),new s.BoxR2(e.left,e.top,e.right,e.bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageBounds",{get:function(){var t=document.createRange();t.selectNode(this._node);var e=t.getBoundingClientRect();t.detach();var i=window.pageXOffset,r=window.pageYOffset;return new s.BoxR2(e.left+i,e.top+r,e.right+i,e.bottom+r)},enumerable:!1,configurable:!0}),e.prototype.dispatchEvent=function(t){return this._node.dispatchEvent(t)},e.prototype.on=function(t,e,i){return this._node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this._node.removeEventListener(t,e,i),this},e}(ze);ze.Node=hi;var ci=function(t){function e(e){return t.call(this,e)||this}return l(e,t),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),e.prototype.getAttribute=function(t){return this._node.getAttribute(t)},e.prototype.setAttribute=function(t,e){return this.willSetAttribute(t,e),void 0!==e?this._node.setAttribute(t,ye(e)):this._node.removeAttribute(t),this.onSetAttribute(t,e),this.didSetAttribute(t,e),this},e.prototype.willSetAttribute=function(t,e){this.willObserve((function(i){void 0!==i.viewWillSetAttribute&&i.viewWillSetAttribute(t,e,this)}))},e.prototype.onSetAttribute=function(t,e){},e.prototype.didSetAttribute=function(t,e){this.didObserve((function(i){void 0!==i.viewDidSetAttribute&&i.viewDidSetAttribute(t,e,this)}))},e.prototype.hasAttributeAnimator=function(t){var e=this._attributeAnimators;return void 0!==e&&void 0!==e[t]},e.prototype.getAttributeAnimator=function(t){var e=this._attributeAnimators;return void 0!==e&&e[t]||null},e.prototype.setAttributeAnimator=function(t,e){var i=this._attributeAnimators;void 0===i&&(i={},this._attributeAnimators=i),null!==e?i[t]=e:delete i[t]},e.prototype.getStyle=function(t){var e=this._node.style;if("string"==typeof t)return e.getPropertyValue(t);for(var i=0,r=t.length;i<r;i+=1){var n=e.getPropertyValue(t[i]);if(""!==n)return n}return""},e.prototype.setStyle=function(t,e,i){return this.willSetStyle(t,e,i),void 0!==e?this._node.style.setProperty(t,me(e),i):this._node.style.removeProperty(t),this.onSetStyle(t,e,i),this.didSetStyle(t,e,i),this},e.prototype.willSetStyle=function(t,e,i){this.willObserve((function(r){void 0!==r.viewWillSetStyle&&r.viewWillSetStyle(t,e,i,this)}))},e.prototype.onSetStyle=function(t,e,i){},e.prototype.didSetStyle=function(t,e,i){this.didObserve((function(r){void 0!==r.viewDidSetStyle&&r.viewDidSetStyle(t,e,i,this)}))},e.prototype.hasStyleAnimator=function(t){var e=this._styleAnimators;return void 0!==e&&void 0!==e[t]},e.prototype.getStyleAnimator=function(t){var e=this._styleAnimators;return void 0!==e&&e[t]||null},e.prototype.setStyleAnimator=function(t,e){var i=this._styleAnimators;void 0===i&&(i={},this._styleAnimators=i),null!==e?i[t]=e:delete i[t]},e.prototype.cancelAnimators=function(){t.prototype.cancelAnimators.call(this),this.cancelAttributeAnimators(),this.cancelStyleAnimators()},e.prototype.cancelAttributeAnimators=function(){var t=this._attributeAnimators;if(void 0!==t)for(var e in t){t[e].cancel()}},e.prototype.cancelStyleAnimators=function(){var t=this._styleAnimators;if(void 0!==t)for(var e in t){t[e].cancel()}},e.prototype.id=function(t){return void 0===t?this.getAttribute("id"):(this.setAttribute("id",t),this)},e.prototype.className=function(t){return void 0===t?this.getAttribute("class"):(this.setAttribute("class",t),this)},Object.defineProperty(e.prototype,"classList",{get:function(){return this._node.classList},enumerable:!1,configurable:!0}),e.prototype.hasClass=function(t){return this._node.classList.contains(t)},e.prototype.addClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this._node.classList,r=0,n=t.length;r<n;r+=1)i.add(t[r]);return this},e.prototype.removeClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this._node.classList,r=0,n=t.length;r<n;r+=1)i.remove(t[r]);return this},e.prototype.toggleClass=function(t,e){var i=this._node.classList;return void 0===e?i.toggle(t):!0===e?i.add(t):!1===e&&i.remove(t),this},Object.defineProperty(e.prototype,"clientBounds",{get:function(){var t=this._node.getBoundingClientRect();return new s.BoxR2(t.left,t.top,t.right,t.bottom)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageBounds",{get:function(){var t=this._node.getBoundingClientRect(),e=window.pageXOffset,i=window.pageYOffset;return new s.BoxR2(t.left+e,t.top+i,t.right+e,t.bottom+i)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){return this._node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this._node.removeEventListener(t,e,i),this},e.isConstructor=function(t){return"function"==typeof t&&"string"==typeof t.tag},e.initAttributeAnimator=function(t,e,i,r){return new t(e,i,r)},e.decorateAttributeAnimator=function(t,i,r,n){Object.defineProperty(r,n,{get:function(){var r=this.getAttributeAnimator(n);return null===r&&(r=e.initAttributeAnimator(t,this,n,i),this.setAttributeAnimator(n,r)),r},configurable:!0,enumerable:!0})},e.initStyleAnimator=function(t,e,i,r){return new t(e,i,r)},e.decorateStyleAnimator=function(t,i,r,n){Object.defineProperty(r,n,{get:function(){var r=this.getStyleAnimator(n);return null===r&&(r=e.initStyleAnimator(t,this,n,i),this.setStyleAnimator(n,r)),r},configurable:!0,enumerable:!0})},e}(hi);ze.Element=ci;var di={fromConstructor:function(t){if(!ci.isConstructor(t))return new t;throw new TypeError(""+t)},create:function(t){if("function"==typeof t)return di.fromConstructor(t);throw new TypeError(""+t)},is:function(t){if("object"==typeof t&&null!==t){var e=t;return e instanceof ze.Graphics||Je.is(e)&&"function"==typeof e.hitTest}return!1}};ze.Rendered=di;var pi={is:function(t){if("object"==typeof t&&null!==t){var e=t;return di.is(e)&&"fill"in e}return!1}},fi={is:function(t){if("object"==typeof t&&null!==t){var e=t;return di.is(e)&&"stroke"in e&&"strokeWidth"in e}return!1}},vi={is:function(t){if("object"==typeof t&&null!==t){var e=t;return di.is(e)&&"font"in e&&"textAlign"in e&&"textBaseline"in e&&"textOrigin"in e&&"textColor"in e}return!1}},yi=function(t){function e(){var e=t.call(this)||this;return e._parentView=null,e._childViews=[],e._viewController=null,e._viewFlags=0,e}return l(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),e.prototype.setViewController=function(t){var e=this._viewController;e!==t&&(this.willSetViewController(t),null!==e&&e.setView(null),this._viewController=t,null!==t&&t.setView(this),this.onSetViewController(t),this.didSetViewController(t))},Object.defineProperty(e.prototype,"viewObservers",{get:function(){var t=this._viewObservers;return void 0===t&&(t=[],this._viewObservers=t),t},enumerable:!1,configurable:!0}),e.prototype.addViewObserver=function(t){var e,i=this._viewObservers;void 0===i?(i=[],this._viewObservers=i,e=-1):e=i.indexOf(t),e<0&&(this.willAddViewObserver(t),i.push(t),this.onAddViewObserver(t),this.didAddViewObserver(t))},e.prototype.removeViewObserver=function(t){var e=this._viewObservers;if(void 0!==e){var i=e.indexOf(t);i>=0&&(this.willRemoveViewObserver(t),e.splice(i,1),this.onRemoveViewObserver(t),this.didRemoveViewObserver(t))}},Object.defineProperty(e.prototype,"canvasView",{get:function(){var t=this._parentView;return di.is(t)?t.canvasView:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){var t=this._key;return void 0!==t?t:null},enumerable:!1,configurable:!0}),e.prototype.setKey=function(t){null!==t?this._key=t:void 0!==this._key&&(this._key=void 0)},Object.defineProperty(e.prototype,"parentView",{get:function(){return this._parentView},enumerable:!1,configurable:!0}),e.prototype.setParentView=function(t,e){this.willSetParentView(t,e),this._parentView=t,this.onSetParentView(t,e),this.didSetParentView(t,e)},Object.defineProperty(e.prototype,"childViews",{get:function(){return this._childViews},enumerable:!1,configurable:!0}),e.prototype.getChildView=function(t){var e=this._childViewMap;if(void 0!==e){var i=e[t];if(void 0!==i)return i}return null},e.prototype.setChildView=function(t,e){if(null!==e){if(!di.is(e))throw new TypeError(""+e);e.remove()}var i=-1,r=null,n=null,o=this._childViews,s=this._childViewMap;if(void 0!==s){var a=s[t];void 0!==a&&(i=o.indexOf(a),r=a,n=o[i+1]||null,this.willRemoveChildView(a),a.setParentView(null,this),this.removeChildViewMap(a),o.splice(i,1),this.onRemoveChildView(a),this.didRemoveChildView(a),a.setKey(null))}return null!==e&&(e.setKey(t),this.willInsertChildView(e,n),i>=0?o.splice(i,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,n),this.didInsertChildView(e,n)),r},e.prototype.insertChildViewMap=function(t){var e=t.key;if(null!==e){var i=this._childViewMap;void 0===i&&(i={},this._childViewMap=i),i[e]=t}},e.prototype.removeChildViewMap=function(t){var e=this._childViewMap;if(void 0!==e){var i=t.key;null!==i&&delete e[i]}},e.prototype.append=function(t,e){return"function"==typeof t&&(t=di.create(t)),this.appendChildView(t,e),t},e.prototype.appendChildView=function(t,e){if(!di.is(t))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this._childViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null)},e.prototype.prepend=function(t,e){return"function"==typeof t&&(t=di.create(t)),this.prependChildView(t,e),t},e.prototype.prependChildView=function(t,e){if(!di.is(t))throw new TypeError(""+t);t.remove(),void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this._childViews.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null)},e.prototype.insert=function(t,e,i){return"function"==typeof t&&(t=di.create(t)),this.insertChildView(t,e,i),t},e.prototype.insertChildView=function(t,e,i){if(!di.is(t))throw new TypeError(""+t);if(null!==e&&!di.is(t))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);t.remove(),void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var r=this._childViews,n=null!==e?r.indexOf(e):-1;n>=0?r.splice(n,0,t):r.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e)},e.prototype.removeChildView=function(t){var e;if("string"==typeof t){if(null===(e=this.getChildView(t)))return null}else e=t;if(!di.is(e))throw new TypeError(""+e);if(e.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(e),e.setParentView(null,this),this.removeChildViewMap(e);var i=this._childViews,r=i.indexOf(e);if(r>=0&&i.splice(r,1),this.onRemoveChildView(e),this.didRemoveChildView(e),e.setKey(null),"string"==typeof t)return e},e.prototype.removeAll=function(){for(var t=this._childViews;;){var e=t.length;if(!(e>0))break;var i=t[e-1];this.willRemoveChildView(i),i.setParentView(null,this),this.removeChildViewMap(i),t.pop(),this.onRemoveChildView(i),this.didRemoveChildView(i),i.setKey(null)}},e.prototype.remove=function(){var t=this._parentView;null!==t&&(0==(this._viewFlags&ze.UpdatingMask)?t.removeChildView(this):this._viewFlags|=ze.RemovingFlag)},Object.defineProperty(e.prototype,"viewFlags",{get:function(){return this._viewFlags},enumerable:!1,configurable:!0}),e.prototype.setViewFlags=function(t){this._viewFlags=t},e.prototype.cascadeMount=function(){if(0!=(this._viewFlags&ze.MountedFlag))throw new Error("already mounted");this._viewFlags|=ze.MountedFlag,this.willMount(),this.onMount(),this.doMountChildViews(),this.didMount()},e.prototype.doMountChildViews=function(){for(var t=this._childViews,e=0;e<t.length;e+=1){t[e].cascadeMount()}},e.prototype.cascadeUnmount=function(){if(0==(this._viewFlags&ze.MountedFlag))throw new Error("already unmounted");this._viewFlags&=~ze.MountedFlag,this.willUnmount(),this.doUnmountChildViews(),this.onUnmount(),this.didUnmount()},e.prototype.doUnmountChildViews=function(){for(var t=this._childViews,e=0;e<t.length;e+=1){t[e].cascadeUnmount()}},e.prototype.onUnmount=function(){this.cancelAnimators(),this._viewFlags=0},e.prototype.cascadePower=function(){if(0!=(this._viewFlags&ze.PoweredFlag))throw new Error("already powered");this._viewFlags|=ze.PoweredFlag,this.willPower(),this.onPower(),this.doPowerChildViews(),this.didPower()},e.prototype.doPowerChildViews=function(){for(var t=this._childViews,e=0;e<t.length;e+=1){t[e].cascadePower()}},e.prototype.cascadeUnpower=function(){if(0==(this._viewFlags&ze.PoweredFlag))throw new Error("already unpowered");this._viewFlags&=~ze.PoweredFlag,this.willUnpower(),this.doUnpowerChildViews(),this.onUnpower(),this.didUnpower()},e.prototype.doUnpowerChildViews=function(){for(var t=this._childViews,e=0;e<t.length;e+=1){t[e].cascadeUnpower()}},Object.defineProperty(e.prototype,"renderer",{get:function(){var t=this._parentView;return di.is(t)?t.renderer:null},enumerable:!1,configurable:!0}),e.prototype.needsProcess=function(t,e){return 0==(this._viewFlags&ze.NeedsAnimate)&&(t&=~ze.NeedsAnimate),t},e.prototype.cascadeProcess=function(t,e){t=this._viewFlags|t,t=this.needsProcess(t,e),this.doProcess(t,e)},e.prototype.doProcess=function(t,e){var i=t;this._viewFlags&=~(ze.NeedsProcess|ze.NeedsResize|ze.NeedsProject),this.willProcess(e),this._viewFlags|=ze.ProcessingFlag;try{0!=((this._viewFlags|t)&ze.NeedsScroll)&&(i|=ze.NeedsScroll,this._viewFlags&=~ze.NeedsScroll,this.willScroll(e)),0!=((this._viewFlags|t)&ze.NeedsDerive)&&(i|=ze.NeedsDerive,this._viewFlags&=~ze.NeedsDerive,this.willDerive(e)),0!=((this._viewFlags|t)&ze.NeedsAnimate)&&(i|=ze.NeedsAnimate,this._viewFlags&=~ze.NeedsAnimate,this.willAnimate(e)),this.onProcess(e),0!=(i&ze.NeedsScroll)&&this.onScroll(e),0!=(i&ze.NeedsDerive)&&this.onDerive(e),0!=(i&ze.NeedsAnimate)&&this.onAnimate(e),this.doProcessChildViews(i,e),0!=(i&ze.NeedsAnimate)&&this.didAnimate(e),0!=(i&ze.NeedsDerive)&&this.didDerive(e),0!=(i&ze.NeedsScroll)&&this.didScroll(e)}finally{this._viewFlags&=~ze.ProcessingFlag,this.didProcess(e)}},e.prototype.willAnimate=function(t){this.willObserve((function(e){void 0!==e.viewWillAnimate&&e.viewWillAnimate(t,this)}))},e.prototype.onAnimate=function(t){this.animateMembers(t.updateTime)},e.prototype.didAnimate=function(t){this.didObserve((function(e){void 0!==e.viewDidAnimate&&e.viewDidAnimate(t,this)}))},e.prototype.doProcessChildViews=function(t,e){var i=this._childViews;if(0!=(t&ze.ProcessMask)&&0!==i.length){this.willProcessChildViews(e);for(var r=0;r<i.length;){var n=i[r],o=this.childViewContext(n,e);this.doProcessChildView(n,t,o),0==(n.viewFlags&ze.RemovingFlag)?r+=1:(n.setViewFlags(n.viewFlags&~ze.RemovingFlag),this.removeChildView(n))}this.didProcessChildViews(e)}},e.prototype.cascadeDisplay=function(t,e){t=this._viewFlags|t,t=this.needsDisplay(t,e),this.doDisplay(t,e)},e.prototype.doDisplay=function(t,e){var i=t;this._viewFlags&=~(ze.NeedsDisplay|ze.NeedsComposite),this.willDisplay(e),this._viewFlags|=ze.DisplayingFlag;try{0!=((this._viewFlags|t)&ze.NeedsLayout)&&(i|=ze.NeedsLayout,this._viewFlags&=~ze.NeedsLayout,this.willLayout(e)),0!=((this._viewFlags|t)&ze.NeedsRender)&&(i|=ze.NeedsRender,this._viewFlags&=~ze.NeedsRender,this.willRender(e)),this.onDisplay(e),0!=(i&ze.NeedsLayout)&&this.onLayout(e),0!=(i&ze.NeedsRender)&&this.onRender(e),this.doDisplayChildViews(i,e),0!=(i&ze.NeedsRender)&&this.didRender(e),0!=(i&ze.NeedsLayout)&&this.didLayout(e)}finally{this._viewFlags&=~ze.DisplayingFlag,this.didDisplay(e)}},e.prototype.willRender=function(t){this.willObserve((function(e){void 0!==e.viewWillRender&&e.viewWillRender(t,this)}))},e.prototype.onRender=function(t){},e.prototype.didRender=function(t){this.didObserve((function(e){void 0!==e.viewDidRender&&e.viewDidRender(t,this)}))},e.prototype.doDisplayChildViews=function(t,e){var i=this._childViews;if(0!=(t&ze.DisplayMask)&&0!==i.length&&!this.isHidden()&&!this.isCulled()){this.willDisplayChildViews(e);for(var r=0;r<i.length;){var n=i[r],o=this.childViewContext(n,e);this.doDisplayChildView(n,t,o),0==(n.viewFlags&ze.RemovingFlag)?r+=1:(n.setViewFlags(n.viewFlags&~ze.RemovingFlag),this.removeChildView(n))}this.didDisplayChildViews(e)}},e.prototype.childViewContext=function(t,e){return e},e.prototype.hasViewScope=function(t){var e=this._viewScopes;return void 0!==e&&void 0!==e[t]},e.prototype.getViewScope=function(t){var e=this._viewScopes;return void 0!==e&&e[t]||null},e.prototype.setViewScope=function(t,e){var i=this._viewScopes;void 0===i&&(i={},this._viewScopes=i),null!==e?i[t]=e:delete i[t]},e.prototype.hasLayoutAnchor=function(t){var e=this._layoutAnchors;return void 0!==e&&void 0!==e[t]},e.prototype.getLayoutAnchor=function(t){var e=this._layoutAnchors;return void 0!==e&&e[t]||null},e.prototype.setLayoutAnchor=function(t,e){var i=this._layoutAnchors;void 0===i&&(i={},this._layoutAnchors=i),null!==e?i[t]=e:delete i[t]},e.prototype.hasMemberAnimator=function(t){var e=this._memberAnimators;return void 0!==e&&void 0!==e[t]},e.prototype.getMemberAnimator=function(t){var e=this._memberAnimators;return void 0!==e&&e[t]||null},e.prototype.setMemberAnimator=function(t,e){var i=this._memberAnimators;void 0===i&&(i={},this._memberAnimators=i),null!==e?i[t]=e:delete i[t]},e.prototype.getLazyMemberAnimator=function(t){var e=this.getMemberAnimator(t);if(null===e){var i=this.__proto__,r=Je.getMemberAnimatorDescriptor(t,i);null!==r&&void 0!==r.animatorType&&(e=Je.initMemberAnimator(r.animatorType,this,t,r),this.setMemberAnimator(t,e))}return e},e.prototype.animatorDidSetAuto=function(t,e){t instanceof $e&&this.requireUpdate(ze.NeedsDerive)},e.prototype.animateMembers=function(t){var e=this._memberAnimators;if(void 0!==e)for(var i in e){e[i].onFrame(t)}},e.prototype.animate=function(t){this.requireUpdate(ze.NeedsAnimate)},e.prototype.cancelAnimators=function(){this.cancelMemberAnimators()},e.prototype.cancelMemberAnimators=function(){var t=this._memberAnimators;if(void 0!==t)for(var e in t){t[e].cancel()}},e.prototype.isHidden=function(){if(0!=(this._viewFlags&ze.HiddenFlag))return!0;var t=this._parentView;return!!di.is(t)&&t.isHidden()},e.prototype.setHidden=function(t){0!=(this._viewFlags&ze.HiddenFlag)!==t&&(this.willSetHidden(t),t?this._viewFlags|=ze.HiddenFlag:this._viewFlags&=~ze.HiddenFlag,this.onSetHidden(t),this.didSetHidden(t))},e.prototype.willSetHidden=function(t){this.willObserve((function(e){void 0!==e.viewWillSetHidden&&e.viewWillSetHidden(t,this)}))},e.prototype.onSetHidden=function(t){this.requireUpdate(ze.NeedsLayout)},e.prototype.didSetHidden=function(t){this.didObserve((function(e){void 0!==e.viewDidSetHidden&&e.viewDidSetHidden(t,this)}))},e.prototype.isCulled=function(){if(0!=(this._viewFlags&ze.CulledFlag))return!0;var t=this._parentView;return!!di.is(t)&&t.isCulled()},e.prototype.setCulled=function(t){0!=(this._viewFlags&ze.CulledFlag)!==t&&(this.willSetCulled(t),t?this._viewFlags|=ze.CulledFlag:this._viewFlags&=~ze.CulledFlag,this.onSetCulled(t),this.didSetCulled(t))},e.prototype.willSetCulled=function(t){this.willObserve((function(e){void 0!==e.viewWillSetCulled&&e.viewWillSetCulled(t,this)}))},e.prototype.onSetCulled=function(t){t||this.requireUpdate(ze.NeedsLayout)},e.prototype.didSetCulled=function(t){this.didObserve((function(e){void 0!==e.viewDidSetCulled&&e.viewDidSetCulled(t,this)}))},e.prototype.cullViewFrame=function(t){void 0===t&&(t=this.viewFrame),this.setCulled(!t.intersects(this.viewBounds))},Object.defineProperty(e.prototype,"viewFrame",{get:function(){var t=this._viewFrame;if(void 0===t){var e=this._parentView;t=di.is(e)?e.viewFrame:s.BoxR2.empty()}return t},enumerable:!1,configurable:!0}),e.prototype.setViewFrame=function(t){null!==t?this._viewFrame=t:void 0!==this._viewFrame&&(this._viewFrame=void 0)},Object.defineProperty(e.prototype,"viewBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),e.prototype.deriveViewBounds=function(){for(var t,e=this._childViews,i=0,r=e.length;i<r;i+=1){var n=e[i];if(di.is(n)&&!n.isHidden()){var o=n.viewBounds;t=void 0===t?o:t.union(o)}}return void 0===t&&(t=this.viewFrame),t},Object.defineProperty(e.prototype,"hitBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),e.prototype.deriveHitBounds=function(){for(var t,e=this._childViews,i=0,r=e.length;i<r;i+=1){var n=e[i];if(di.is(n)&&!n.isHidden()){var o=n.hitBounds;t=void 0===t?o:t.union(o)}}return void 0===t&&(t=this.viewBounds),t},e.prototype.hitTest=function(t,e,i){for(var r=null,n=this._childViews,o=n.length-1;o>=0;o-=1){var s=n[o];if(di.is(s)&&!s.isHidden()&&!s.isCulled())if(s.hitBounds.contains(t,e)&&null!==(r=s.hitTest(t,e,i)))break}return r},Object.defineProperty(e.prototype,"parentTransform",{get:function(){return Q.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientBounds",{get:function(){var t=this.clientTransform.inverse();return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.pageTransform.inverse();return this.viewBounds.transform(t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){var r=this._eventHandlers;void 0===r&&(r={},this._eventHandlers=r);var n,o=r[t],s="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,a=i&&"object"==typeof i&&i.passive||!1,u=i&&"object"==typeof i&&i.once||!1;if(void 0===o)o=[n={listener:e,capture:s,passive:a,once:u}],r[t]=o;else{for(var l=o.length,h=0;h<l&&((n=o[h]).listener!==e||n.capture!==s);)h+=1;h<l?(n.passive=a,n.once=u):(n={listener:e,capture:s,passive:a,once:u},o.push(n))}return this},e.prototype.off=function(t,e,i){var r=this._eventHandlers;if(void 0!==r){var n=r[t];if(void 0!==n)for(var o="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,s=n.length,a=0;a<s;){var u=n[a];if(u.listener===e&&u.capture===o){n.splice(a,1),0===n.length&&delete r[t];break}a+=1}}return this},e.prototype.handleEvent=function(t){var e=t.type,i=this._eventHandlers;if(void 0!==i){var r=i[e];if(void 0!==r){for(var n=0;n<r.length;){var o=r[n];if(!o.capture){var s=o.listener;if("function"==typeof s?s(t):"object"==typeof s&&null!==s&&s.handleEvent(t),o.once){r.splice(n,1);continue}}n+=1}0===r.length&&delete i[e]}}"mouseover"===e?this.onMouseOver(t):"mouseout"===e&&this.onMouseOut(t)},e.prototype.bubbleEvent=function(t){if(this.handleEvent(t),t.bubbles&&!t.cancelBubble){var e=this._parentView;return di.is(e)?e.bubbleEvent(t):e}return null},e.prototype.dispatchEvent=function(t){t.targetView=this;var e=this.bubbleEvent(t);return null!==e?e.dispatchEvent(t):!t.cancelBubble},e.prototype.isHovering=function(){return 0!=(this._viewFlags&ze.HoveringFlag)},e.prototype.onMouseOver=function(t){if(0==(this._viewFlags&ze.HoveringFlag)){this._viewFlags|=ze.HoveringFlag;var e=this._eventHandlers;if(void 0!==e&&void 0!==e.mouseenter){var i=new MouseEvent("mouseenter",{clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,bubbles:!1});i.targetView=this,i.relatedTargetView=t.relatedTargetView,this.handleEvent(i)}}},e.prototype.onMouseOut=function(t){if(0!=(this._viewFlags&ze.HoveringFlag)){this._viewFlags&=~ze.HoveringFlag;var e=this._eventHandlers;if(void 0!==e&&void 0!==e.mouseleave){var i=new MouseEvent("mouseleave",{clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,bubbles:!1});i.targetView=this,i.relatedTargetView=t.relatedTargetView,this.handleEvent(i)}}},e}(ze);ze.Graphics=yi;var mi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),Object.defineProperty(e.prototype,"canvasView",{get:function(){var t=this._view;return null!==t?t.canvasView:null},enumerable:!1,configurable:!0}),e.prototype.viewWillAnimate=function(t,e){},e.prototype.viewDidAnimate=function(t,e){},e.prototype.viewWillRender=function(t,e){},e.prototype.viewDidRender=function(t,e){},e.prototype.isHidden=function(){var t=this._view;return null!==t&&t.isHidden()},e.prototype.viewWillSetHidden=function(t,e){},e.prototype.viewDidSetHidden=function(t,e){},e.prototype.isCulled=function(){var t=this._view;return null!==t&&t.isCulled()},e.prototype.viewWillSetCulled=function(t,e){},e.prototype.viewDidSetCulled=function(t,e){},Object.defineProperty(e.prototype,"viewFrame",{get:function(){var t=this._view;return null!==t?t.viewFrame:s.BoxR2.empty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this._view;return null!==t?t.viewBounds:s.BoxR2.empty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this._view;return null!==t?t.hitBounds:s.BoxR2.empty()},enumerable:!1,configurable:!0}),e}(Be),wi={is:function(t){if("object"==typeof t&&null!==t){var e=t;return e instanceof ze.Raster||di.is(e)&&"compositor"in e}return!1}};ze.Composited=wi;var gi=function(t){function e(){var e=t.call(this)||this;return e._canvas=e.createCanvas(),e._renderer=void 0,e._rasterFrame=s.BoxR2.empty(),e}return l(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compositor",{get:function(){var t=this.parentView;return di.is(t)?t.renderer:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){var t=this._renderer;return void 0===t&&(t=this.createRenderer(),this._renderer=t),t},enumerable:!1,configurable:!0}),e.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),this._renderer=t,this.resetRenderer()},e.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this._canvas.getContext("2d")))return new xe(e,this.pixelRatio);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this._canvas.getContext("webgl")))return new Ve(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},e.prototype.modifyUpdate=function(t){var e=0;return 0!=(t&ze.UpdateMask)&&(0!=(t&ze.ProcessMask)&&(e|=ze.NeedsProcess),0!=(t&ze.DisplayMask)&&(e|=ze.NeedsDisplay),e|=ze.NeedsRender|ze.NeedsComposite),e},e.prototype.cascadeProcess=function(e,i){i=this.rasterViewContext(i),t.prototype.cascadeProcess.call(this,e,i)},e.prototype.cascadeDisplay=function(e,i){i=this.rasterViewContext(i),t.prototype.cascadeDisplay.call(this,e,i)},e.prototype.doDisplay=function(t,e){var i=t;this.willDisplay(e),this._viewFlags|=ze.DisplayingFlag;try{0!=((this._viewFlags|t)&ze.NeedsLayout)&&(i|=ze.NeedsLayout,this._viewFlags&=~ze.NeedsLayout,this.willLayout(e)),0!=((this._viewFlags|t)&ze.NeedsRender)&&(i|=ze.NeedsRender,this._viewFlags&=~ze.NeedsRender,this.willRender(e)),0!=((this._viewFlags|t)&ze.NeedsComposite)&&(i|=ze.NeedsComposite,this._viewFlags&=~ze.NeedsComposite,this.willComposite(e)),this.onDisplay(e),0!=(i&ze.NeedsLayout)&&this.onLayout(e),0!=(i&ze.NeedsRender)&&this.onRender(e),0!=(i&ze.NeedsComposite)&&this.onComposite(e),this.doDisplayChildViews(i,e),0!=(i&ze.NeedsComposite)&&this.didComposite(e),0!=(i&ze.NeedsRender)&&this.didRender(e),0!=(i&ze.NeedsLayout)&&this.didLayout(e)}finally{this._viewFlags&=~ze.DisplayingFlag,this.didDisplay(e)}},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.resizeCanvas(this._canvas),this.resetRenderer()},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e),this.clearCanvas()},e.prototype.willComposite=function(t){this.willObserve((function(e){void 0!==e.viewWillRender&&e.viewWillRender(t,this)}))},e.prototype.onComposite=function(t){this.compositeImage(t)},e.prototype.didComposite=function(t){this.didObserve((function(e){void 0!==e.viewDidRender&&e.viewDidRender(t,this)}))},e.prototype.childViewContext=function(t,e){return e},e.prototype.rasterViewContext=function(t){var e=Object.create(t);return e.compositor=t.renderer,e.renderer=this.renderer,e},Object.defineProperty(e.prototype,"compositeFrame",{get:function(){var t=this._viewFrame;if(void 0===t){var e=this._parentView;t=di.is(e)?e.viewFrame:s.BoxR2.empty()}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewFrame",{get:function(){return this._rasterFrame},enumerable:!1,configurable:!0}),e.prototype.setViewFrame=function(t){null!==t?this._viewFrame=t:void 0!==this._viewFrame&&(this._viewFrame=void 0)},e.prototype.hitTest=function(t,e,i){var r=this.rasterViewContext(i),n=this.compositeFrame;t-=Math.floor(n.xMin),e-=Math.floor(n.yMin);for(var o=null,s=this._childViews,a=s.length-1;a>=0;a-=1){var u=s[a];if(di.is(u)&&!u.isHidden()&&!u.isCulled())if(u.hitBounds.contains(t,e)&&null!==(o=u.hitTest(t,e,r)))break}return o},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.compositeFrame,e=Math.floor(t.xMin),i=Math.floor(t.yMin);return 0!==e||0!==i?Q.translate(-e,-i):Q.identity()},enumerable:!1,configurable:!0}),e.prototype.createCanvas=function(){return document.createElement("canvas")},e.prototype.resizeCanvas=function(t){var e=this.compositeFrame,i=e.xMin-Math.floor(e.xMin),r=e.yMin-Math.floor(e.yMin),n=Math.ceil(i+e.width),o=Math.ceil(r+e.height),a=new s.BoxR2(i,r,n,o);if(!this._rasterFrame.equals(a)){var u=this.pixelRatio;t.width=n*u,t.height=o*u,t.style.width=n+"px",t.style.height=o+"px",this._rasterFrame=a}},e.prototype.clearCanvas=function(){var t=this.renderer;if(t instanceof xe){var e=this._rasterFrame;t.context.clearRect(0,0,e.xMax,e.yMax)}else if(t instanceof Ve){var i=t.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},e.prototype.resetRenderer=function(){var t=this.renderer;if(t instanceof xe){var e=this.pixelRatio;t.context.setTransform(e,0,0,e,0,0)}else if(t instanceof Ve){var i=this._rasterFrame;t.context.viewport(0,0,i.xMax,i.yMax)}},e.prototype.compositeImage=function(t){var e=t.compositor,i=t.renderer;if(e instanceof xe&&i instanceof xe){var r=i.context.getImageData(0,0,this._canvas.width,this._canvas.height),n=this.compositeFrame,o=e.pixelRatio,s=e.context;s.save(),s.globalAlpha=this.opacity.value,s.globalCompositeOperation=this.compositeOperation.value;var a=Math.floor(n.xMin)*o,u=Math.floor(n.yMin)*o;s.putImageData(r,a,u),s.restore()}},h([$e(Number,{value:1})],e.prototype,"opacity",void 0),h([$e(String,{value:"source-over"})],e.prototype,"compositeOperation",void 0),e}(yi);ze.Raster=gi;var _i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.viewWillComposite=function(t,e){},e.prototype.viewDidComposite=function(t,e){},e}(mi),bi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),Object.defineProperty(e.prototype,"node",{get:function(){var t=this._view;return null!==t?t.node:null},enumerable:!1,configurable:!0}),e.prototype.appendChildNode=function(t,e){var i=this._view;if(null===i)throw new Error("no view");i.appendChildNode(t,e)},e.prototype.prependChildNode=function(t,e){var i=this._view;if(null===i)throw new Error("no view");i.prependChildNode(t,e)},e.prototype.insertChildNode=function(t,e,i){var r=this._view;if(null===r)throw new Error("no view");r.insertChildNode(t,e,i)},e.prototype.viewWillInsertChildNode=function(t,e,i){},e.prototype.viewDidInsertChildNode=function(t,e,i){},e.prototype.removeChildNode=function(t){var e=this._view;if(null===e)throw new Error("no view");e.removeChildNode(t)},e.prototype.viewWillRemoveChildNode=function(t,e){},e.prototype.viewDidRemoveChildNode=function(t,e){},e.prototype.viewWillAnimate=function(t,e){},e.prototype.viewDidAnimate=function(t,e){},e}(Be),Ci=function(t){function e(e,i,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var o=t.call(this,i,r)||this;return o.target=e,o.formatter=n,o}return l(e,t),Object.defineProperty(e.prototype,"textValue",{get:function(){var t=this.target;return t instanceof Text?t.nodeValue:t instanceof HTMLElement?t.innerText:t.textContent},enumerable:!1,configurable:!0}),e.prototype.format=function(t){var e=this.formatter;return"object"==typeof e&&null!==e&&(e=e.format),"function"==typeof e?e(t):""+t},e.prototype.update=function(t){var e=this.target,i=this.format(t);e instanceof Text?e.nodeValue=i:e instanceof HTMLElement?e.innerText=i:e.textContent=i},e.prototype.delete=function(){var t=this.target;t instanceof Text?t.nodeValue=null:t instanceof HTMLElement?t.innerText="":t.textContent=null},e}(se),xi=function(t){function e(e){return t.call(this,e)||this}return l(e,t),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),e}(hi);ze.Text=xi;var Vi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(bi),Si=function(t){function e(e,i,r){return Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this._view=e,this._attributeName=r,this._auto=!0,t.call(this,void 0,null)||this}var i=function(t,r,n){return this instanceof i?e.call(this,t,r,n):function(t,e){if(e===String)return ci.decorateAttributeAnimator.bind(void 0,i.String,t);if(e===Boolean)return ci.decorateAttributeAnimator.bind(void 0,i.Boolean,t);if(e===Number)return ci.decorateAttributeAnimator.bind(void 0,i.Number,t);if(e===w)return ci.decorateAttributeAnimator.bind(void 0,i.Length,t);if(e===P)return ci.decorateAttributeAnimator.bind(void 0,i.Color,t);if(e===Q)return ci.decorateAttributeAnimator.bind(void 0,i.Transform,t);if(Array.isArray(e)&&2===e.length){var r=e[0],n=e[1];if(r===Number&&n===String)return ci.decorateAttributeAnimator.bind(void 0,i.NumberOrString,t);if(r===w&&n===String)return ci.decorateAttributeAnimator.bind(void 0,i.LengthOrString,t);if(r===P&&n===String)return ci.decorateAttributeAnimator.bind(void 0,i.ColorOrString,t)}throw new TypeError(""+e)}(n=t,r)};return l(i,t),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"node",{get:function(){return this._view._node},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"attributeName",{get:function(){return this._attributeName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"attributeValue",{get:function(){var t=this._view.getAttribute(this._attributeName);if(null!==t)try{return this.parse(t)}catch(t){}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this._value;return void 0===t&&void 0!==(t=this.attributeValue)&&this.setAuto(!1),t},enumerable:!0,configurable:!0}),i.prototype.isAuto=function(){return this._auto},i.prototype.setAuto=function(t){this._auto!==t&&(this._auto=t,this._view.animatorDidSetAuto(this,t))},i.prototype.setState=function(e,i){void 0!==e&&(e=this.fromAny(e)),this._auto=!1,t.prototype.setState.call(this,e,i)},i.prototype.setAutoState=function(e,i){!0===this._auto&&(void 0!==e&&(e=this.fromAny(e)),t.prototype.setState.call(this,e,i))},i.prototype.update=function(t,e){r.Objects.equal(e,t)||(this.willUpdate(t,e),this.onUpdate(t,e),this.didUpdate(t,e))},i.prototype.willUpdate=function(t,e){},i.prototype.onUpdate=function(t,e){this._view.setAttribute(this._attributeName,t)},i.prototype.didUpdate=function(t,e){},i.prototype.delete=function(){this._view.setAttribute(this._attributeName,void 0)},i.prototype.parse=function(t){throw new Error},i.prototype.fromAny=function(t){throw new Error},i}(se),Ai=function(t){var e=function(e,i,r){var n=function(t,e){return 0===arguments.length?n.value:(n.setState(t,e),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return t},e.prototype.fromAny=function(t){return t},e}(Si);Si.String=Ai;var Pi=function(t){var e=function(e,i,r){var n=function(t,e){return 0===arguments.length?n.value:(n.setState(t,e),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return!!t},e.prototype.fromAny=function(t){return"string"==typeof t?!!t:t},e}(Si);Si.Boolean=Pi;var Mi=function(t){var e=function(e,i,r){var n=function(t,e){return 0===arguments.length?n.value:(n.setState(t,e),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){var e=+t;if(isFinite(e))return e;throw new Error(t)},e.prototype.fromAny=function(t){if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(Si);Si.Number=Mi;var Di=function(t){var e=function(e,i,r){var n=function(t,e){return 0===arguments.length?n.value:(n.setState(t,e),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return w.parse(t,this._view._node)},e.prototype.fromAny=function(t){return w.fromAny(t,this._view._node)},e}(Si);Si.Length=Di;var Ei=function(t){var e=function(e,i,r){var n=function(t,e){return 0===arguments.length?n.value:(n.setState(t,e),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return P.parse(t)},e.prototype.fromAny=function(t){return P.fromAny(t)},e}(Si);Si.Color=Ei;var Ri=function(t){var e=function(e,i,r){var n=function(t,e){return 0===arguments.length?n.value:(n.setState(t,e),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return Q.parse(t)},e.prototype.fromAny=function(t){return Q.fromAny(t)},e}(Si);Si.Transform=Ri;var Ti=function(t){var e=function(e,i,r){var n=function(t,e){return 0===arguments.length?n.value:(n.setState(t,e),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:t},e.prototype.fromAny=function(t){if("string"==typeof t){var e=+t;return isFinite(e)?e:t}return t},e}(Si);Si.NumberOrString=Ti;var Oi=function(t){var e=function(e,i,r){var n=function(t,e){return 0===arguments.length?n.value:(n.setState(t,e),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){try{return w.parse(t,this._view._node)}catch(e){return t}},e.prototype.fromAny=function(t){if("string"!=typeof t)return w.fromAny(t,this._view._node);try{return w.parse(t,this._view._node)}catch(e){return t}},e}(Si);Si.LengthOrString=Oi;var Fi=function(t){var e=function(e,i,r){var n=function(t,e){return 0===arguments.length?n.value:(n.setState(t,e),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){try{return P.parse(t)}catch(e){return t}},e.prototype.fromAny=function(t){if("string"!=typeof t)return P.fromAny(t);try{return P.parse(t)}catch(e){return t}},e}(Si);Si.ColorOrString=Fi;var ki=function(t){function e(e,i,r){return Object.defineProperty(this,"name",{value:i,enumerable:!0,configurable:!0}),this._view=e,this._propertyNames=r,this._auto=!0,t.call(this,void 0,null)||this}var i=function(t,r,n){return this instanceof i?e.call(this,t,r,n):function(t,e){if(e===String)return ci.decorateStyleAnimator.bind(void 0,i.String,t);if(e===Number)return ci.decorateStyleAnimator.bind(void 0,i.Number,t);if(e===w)return ci.decorateStyleAnimator.bind(void 0,i.Length,t);if(e===P)return ci.decorateStyleAnimator.bind(void 0,i.Color,t);if(e===q)return ci.decorateStyleAnimator.bind(void 0,i.LineHeight,t);if(e===z)return ci.decorateStyleAnimator.bind(void 0,i.FontFamily,t);if(e===Y)return ci.decorateStyleAnimator.bind(void 0,i.BoxShadow,t);if(e===Q)return ci.decorateStyleAnimator.bind(void 0,i.Transform,t);if(Array.isArray(e)&&2===e.length){var r=e[0],n=e[1];if(r===Number&&n===String)return ci.decorateStyleAnimator.bind(void 0,i.NumberOrString,t);if(r===w&&n===String)return ci.decorateStyleAnimator.bind(void 0,i.LengthOrString,t);if(r===P&&n===String)return ci.decorateStyleAnimator.bind(void 0,i.ColorOrString,t)}throw new TypeError(""+e)}(n=t,r)};return l(i,t),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"node",{get:function(){return this._view._node},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"propertyNames",{get:function(){return this._propertyNames},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"propertyValue",{get:function(){var t=this._view.getStyle(this._propertyNames);if(""!==t)try{return this.parse(t)}catch(t){}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"priority",{get:function(){return this._priority},set:function(t){this._priority=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this._value;return void 0===t&&void 0!==(t=this.propertyValue)&&this.setAuto(!1),t},enumerable:!0,configurable:!0}),i.prototype.isAuto=function(){return this._auto},i.prototype.setAuto=function(t){this._auto!==t&&(this._auto=t,this._view.animatorDidSetAuto(this,t))},i.prototype.setState=function(e,i,r){void 0!==e&&(e=this.fromAny(e)),void 0!==r&&(""!==r?this._priority=r:void 0!==this._priority&&(this._priority=void 0)),this._auto=!1,t.prototype.setState.call(this,e,i)},i.prototype.setAutoState=function(e,i,r){!0===this._auto&&(void 0!==e&&(e=this.fromAny(e)),void 0!==r&&(""!==r?this._priority=r:void 0!==this._priority&&(this._priority=void 0)),t.prototype.setState.call(this,e,i))},i.prototype.update=function(t,e){r.Objects.equal(e,t)||(this.willUpdate(t,e),this.onUpdate(t,e),this.didUpdate(t,e))},i.prototype.willUpdate=function(t,e){},i.prototype.onUpdate=function(t,e){var i=this._propertyNames;if("string"==typeof i)this._view.setStyle(i,t,this._priority);else for(var r=0,n=i.length;r<n;r+=1)this._view.setStyle(i[r],t,this._priority)},i.prototype.didUpdate=function(t,e){},i.prototype.delete=function(){var t=this._propertyNames;if("string"==typeof t)this._view.setStyle(t,void 0);else for(var e=0,i=t.length;e<i;e+=1)this._view.setStyle(t[e],void 0)},i.prototype.parse=function(t){throw new Error},i.prototype.fromAny=function(t){throw new Error},i}(se),Ni=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return t},e.prototype.fromAny=function(t){return t},e}(ki);ki.String=Ni;var Ui=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){var e=+t;if(isFinite(e))return e;throw new Error(t)},e.prototype.fromAny=function(t){if("string"==typeof t){var e=+t;if(isFinite(e))return e;throw new Error(t)}return t},e}(ki);ki.Number=Ui;var Ii=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return w.parse(t,this._view._node)},e.prototype.fromAny=function(t){return w.fromAny(t,this._view._node)},e}(ki);ki.Length=Ii;var Li=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return P.parse(t)},e.prototype.fromAny=function(t){return P.fromAny(t)},e}(ki);ki.Color=Li;var ji=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return q.fromAny(t)},e.prototype.fromAny=function(t){return q.fromAny(t)},e}(ki);ki.LineHeight=ji;var qi=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return W.parse(t).family()},e.prototype.fromAny=function(t){return W.family(t).family()},e}(ki);ki.FontFamily=qi;var zi=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return Y.parse(t)},e.prototype.fromAny=function(t){return Y.fromAny(t)},e}(ki);ki.BoxShadow=zi;var Bi=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){return Q.parse(t)},e.prototype.fromAny=function(t){return Q.fromAny(t)},e}(ki);ki.Transform=Bi;var Wi=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){var e=+t;return isFinite(e)?e:t},e.prototype.fromAny=function(t){if("string"==typeof t){var e=+t;return isFinite(e)?e:t}return t},e}(ki);ki.NumberOrString=Wi;var Hi=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){try{return w.parse(t,this._view._node)}catch(e){return t}},e.prototype.fromAny=function(t){if("string"!=typeof t)return w.fromAny(t,this._view._node);try{return w.parse(t,this._view._node)}catch(e){return t}},e}(ki);ki.LengthOrString=Hi;var Xi=function(t){var e=function(e,i,r){var n=function(t,e,i){return 0===arguments.length?n.value:(n.setState(t,e,i),n._view)};return n.__proto__=this,n=t.call(n,e,i,r)||n};return l(e,t),e.prototype.parse=function(t){try{return P.parse(t)}catch(e){return t}},e.prototype.fromAny=function(t){if("string"!=typeof t)return P.fromAny(t);try{return P.parse(t)}catch(e){return t}},e}(ki);ki.ColorOrString=Xi;var Yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.viewWillSetAttribute=function(t,e,i){},e.prototype.viewDidSetAttribute=function(t,e,i){},e.prototype.viewWillSetStyle=function(t,e,i,r){},e.prototype.viewDidSetStyle=function(t,e,i,r){},e}(bi),Gi=function(t){function e(e){return t.call(this,e)||this}return l(e,t),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),e.prototype.append=function(t,i){return"string"==typeof t?t=e.fromTag(t):t instanceof Node?t=e.fromNode(t):"function"==typeof t&&(t=e.fromConstructor(t)),this.appendChildView(t,i),t},e.prototype.prepend=function(t,i){return"string"==typeof t?t=e.fromTag(t):t instanceof Node?t=e.fromNode(t):"function"==typeof t&&(t=e.fromConstructor(t)),this.prependChildView(t,i),t},e.prototype.insert=function(t,i,r){return"string"==typeof t?t=e.fromTag(t):t instanceof Node?t=e.fromNode(t):"function"==typeof t&&(t=e.fromConstructor(t)),this.insertChild(t,i,r),t},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.transform.value;return void 0!==t?t:Q.identity()},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){return this._node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this._node.removeEventListener(t,e,i),this},e.prototype.font=function(t,e,i){if(void 0===t){var r=this.fontStyle(),n=this.fontVariant(),o=this.fontWeight(),s=this.fontStretch(),a=this.fontSize(),u=this.lineHeight(),l=this.fontFamily();return void 0!==l?W.from(r,n,o,s,a,u,l):void 0}return void 0!==t&&(t=W.fromAny(t)),void 0!==t&&null===t.style()||this.fontStyle(void 0!==t&&t.style()||void 0,e,i),void 0!==t&&null===t.variant()||this.fontVariant(void 0!==t&&t.variant()||void 0,e,i),void 0!==t&&null===t.weight()||this.fontWeight(void 0!==t&&t.weight()||void 0,e,i),void 0!==t&&null===t.stretch()||this.fontStretch(void 0!==t&&t.stretch()||void 0,e,i),void 0!==t&&null===t.size()||this.fontSize(void 0!==t&&t.size()||void 0,e,i),void 0!==t&&null===t.height()||this.lineHeight(void 0!==t&&t.height()||void 0,e,i),this.fontFamily(void 0!==t?t.family():void 0,e,i),this},e.fromTag=function(t){return new e(document.createElementNS(e.namespace,t))},e.fromNode=function(t){if(t.view instanceof ze)return t.view;if(t instanceof SVGElement)return new e(t);throw new TypeError(""+t)},e.fromConstructor=function(t){if(ci.isConstructor(t))return new t(document.createElementNS(e.namespace,t.tag));throw new TypeError(""+t)},e.create=function(t){if("string"==typeof t)return e.fromTag(t);if(t instanceof SVGElement)return e.fromNode(t);if("function"==typeof t)return e.fromConstructor(t);throw new TypeError(""+t)},e.tag="svg",e.namespace="http://www.w3.org/2000/svg",h([Si("alignment-baseline",String)],e.prototype,"alignmentBaseline",void 0),h([Si("clip-path",String)],e.prototype,"clipPath",void 0),h([Si("cursor",String)],e.prototype,"cursor",void 0),h([Si("cx",Number)],e.prototype,"cx",void 0),h([Si("cy",Number)],e.prototype,"cy",void 0),h([Si("d",String)],e.prototype,"d",void 0),h([Si("dx",[Number,String])],e.prototype,"dx",void 0),h([Si("dy",[Number,String])],e.prototype,"dy",void 0),h([Si("edgeMode",String)],e.prototype,"edgeMode",void 0),h([Si("fill",[P,String])],e.prototype,"fill",void 0),h([Si("fill-rule",String)],e.prototype,"fillRuke",void 0),h([Si("height",w)],e.prototype,"height",void 0),h([Si("in",String)],e.prototype,"in",void 0),h([Si("in2",String)],e.prototype,"in2",void 0),h([Si("mode",String)],e.prototype,"mode",void 0),h([Si("opacity",Number)],e.prototype,"opacity",void 0),h([Si("points",String)],e.prototype,"points",void 0),h([Si("preserveAspectRatio",Boolean)],e.prototype,"preserveAspectRatio",void 0),h([Si("r",Number)],e.prototype,"r",void 0),h([Si("result",String)],e.prototype,"result",void 0),h([Si("stdDeviation",String)],e.prototype,"stdDeviation",void 0),h([Si("stroke",[P,String])],e.prototype,"stroke",void 0),h([Si("stroke-dasharray",String)],e.prototype,"strokeDasharray",void 0),h([Si("stroke-linecap",String)],e.prototype,"strokeLinecap",void 0),h([Si("stroke-width",Number)],e.prototype,"strokeWidth",void 0),h([Si("text-anchor",String)],e.prototype,"textAnchor",void 0),h([ki("touch-action",String)],e.prototype,"touchAction",void 0),h([Si("transform",Q)],e.prototype,"transform",void 0),h([Si("type",String)],e.prototype,"type",void 0),h([Si("values",String)],e.prototype,"values",void 0),h([Si("viewBox",String)],e.prototype,"viewBox",void 0),h([Si("width",w)],e.prototype,"width",void 0),h([Si("x",Number)],e.prototype,"x",void 0),h([Si("x1",Number)],e.prototype,"x1",void 0),h([Si("x2",Number)],e.prototype,"x2",void 0),h([Si("y",Number)],e.prototype,"y",void 0),h([Si("y1",Number)],e.prototype,"y1",void 0),h([Si("y2",Number)],e.prototype,"y2",void 0),h([ki("font-family",z)],e.prototype,"fontFamily",void 0),h([ki("font-size",[w,String])],e.prototype,"fontSize",void 0),h([ki("font-stretch",String)],e.prototype,"fontStretch",void 0),h([ki("font-style",String)],e.prototype,"fontStyle",void 0),h([ki("font-variant",String)],e.prototype,"fontVariant",void 0),h([ki("font-weight",String)],e.prototype,"fontWeight",void 0),h([ki("line-height",q)],e.prototype,"lineHeight",void 0),e}(ci);ze.Svg=Gi;var Ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(Yi),Qi=function(t){function e(e){return t.call(this,e)||this}return l(e,t),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),e.prototype.append=function(t,e){return"string"==typeof t?t=ze.fromTag(t):t instanceof Node?t=ze.fromNode(t):"function"==typeof t&&(t=ze.fromConstructor(t)),this.appendChildView(t,e),t},e.prototype.prepend=function(t,e){return"string"==typeof t?t=ze.fromTag(t):t instanceof Node?t=ze.fromNode(t):"function"==typeof t&&(t=ze.fromConstructor(t)),this.prependChildView(t,e),t},e.prototype.insert=function(t,e,i){return"string"==typeof t?t=ze.fromTag(t):t instanceof Node?t=ze.fromNode(t):"function"==typeof t&&(t=ze.fromConstructor(t)),this.insertChild(t,e,i),t},e.prototype.didMount=function(){t.prototype.didMount.call(this),this.activateLayout()},e.prototype.willUnmount=function(){this.deactivateLayout(),t.prototype.willUnmount.call(this)},e.prototype.willLayout=function(e){t.prototype.willLayout.call(this,e),this.updateLayoutStates()},e.prototype.didLayout=function(e){this.updateConstraintVariables(),t.prototype.didLayout.call(this,e)},e.prototype.constraint=function(t,e,i,r){"number"==typeof t&&(t=Re.constant(t)),"number"==typeof i&&(i=Re.constant(i));var n=void 0!==i?t.minus(i):t;return r=void 0===r?Ue.Required:Ue.fromAny(r),new Le(this,n,e,r)},Object.defineProperty(e.prototype,"constraints",{get:function(){var t=this._constraints;return void 0===t&&(t=[],this._constraints=t),t},enumerable:!1,configurable:!0}),e.prototype.hasConstraint=function(t){var e=this._constraints;return void 0!==e&&e.indexOf(t)>=0},e.prototype.addConstraint=function(t){var e=this._constraints;void 0===e&&(e=[],this._constraints=e),e.indexOf(t)<0&&(e.push(t),this.activateConstraint(t))},e.prototype.activateConstraint=function(t){var e=this.rootView;He.is(e)&&(e.activateConstraint(t),this.requireUpdate(ze.NeedsLayout))},e.prototype.removeConstraint=function(t){var e=this._constraints;if(void 0!==e){var i=e.indexOf(t);i>=0&&(e.splice(i,1),this.deactivateConstraint(t))}},e.prototype.deactivateConstraint=function(t){var e=this.rootView;He.is(e)&&(e.deactivateConstraint(t),this.requireUpdate(ze.NeedsLayout))},e.prototype.constraintVariable=function(t,e,i){return void 0===e&&(e=0),i=void 0===i?Ue.Strong:Ue.fromAny(i),new Ie(this,t,e,i)},Object.defineProperty(e.prototype,"constraintVariables",{get:function(){var t=this._constraintVariables;return void 0===t&&(t=[],this._constraintVariables=t),t},enumerable:!1,configurable:!0}),e.prototype.hasConstraintVariable=function(t){var e=this._constraintVariables;return void 0!==e&&e.indexOf(t)>=0},e.prototype.addConstraintVariable=function(t){var e=this._constraintVariables;void 0===e&&(e=[],this._constraintVariables=e),e.indexOf(t)<0&&(e.push(t),this.activateConstraintVariable(t))},e.prototype.activateConstraintVariable=function(t){var e=this.rootView;He.is(e)&&(e.activateConstraintVariable(t),this.requireUpdate(ze.NeedsLayout))},e.prototype.removeConstraintVariable=function(t){var e=this._constraintVariables;if(void 0!==e){var i=e.indexOf(t);i>=0&&(this.deactivateConstraintVariable(t),e.splice(i,1))}},e.prototype.deactivateConstraintVariable=function(t){var e=this.rootView;He.is(e)&&(e.deactivateConstraintVariable(t),this.requireUpdate(ze.NeedsLayout))},e.prototype.setConstraintVariable=function(t,e){var i=this.rootView;He.is(i)&&i.setConstraintVariable(t,e)},e.prototype.updateConstraintVariables=function(){var t=this.rootView;We.is(t)&&t.updateConstraintVariables()},e.prototype.activateLayout=function(){var t,e=this._constraints,i=this._constraintVariables;if((void 0!==e||void 0!==i)&&(t=this.rootView,He.is(t))){if(void 0!==i)for(var r=0,n=i.length;r<n;r+=1){var o=i[r];o instanceof Ye&&(t.activateConstraintVariable(o),this.requireUpdate(ze.NeedsLayout))}if(void 0!==e)for(r=0,n=e.length;r<n;r+=1)t.activateConstraint(e[r]),this.requireUpdate(ze.NeedsLayout)}},e.prototype.deactivateLayout=function(){var t,e=this._constraints,i=this._constraintVariables;if((void 0!==e||void 0!==i)&&(t=this.rootView,He.is(t))){if(void 0!==e)for(var r=0,n=e.length;r<n;r+=1)t.deactivateConstraint(e[r]),this.requireUpdate(ze.NeedsLayout);if(void 0!==i)for(r=0,n=i.length;r<n;r+=1)t.deactivateConstraintVariable(i[r]),this.requireUpdate(ze.NeedsLayout)}},e.prototype.updateLayoutStates=function(){var t=this.getLayoutAnchor("topAnchor");null!==t&&t.updateState();var e=this.getLayoutAnchor("rightAnchor");null!==e&&e.updateState();var i=this.getLayoutAnchor("bottomAnchor");null!==i&&i.updateState();var r=this.getLayoutAnchor("leftAnchor");null!==r&&r.updateState();var n=this.getLayoutAnchor("widthAnchor");null!==n&&n.updateState();var o=this.getLayoutAnchor("heightAnchor");null!==o&&o.updateState();var s=this.getLayoutAnchor("centerXAnchor");null!==s&&s.updateState();var a=this.getLayoutAnchor("centerYAnchor");null!==a&&a.updateState()},e.prototype.isPositioned=function(){var t=window.getComputedStyle(this._node);return"relative"===t.position||"absolute"===t.position},Object.defineProperty(e.prototype,"parentTransform",{get:function(){var t=this.transform.value;if(void 0!==t)return t;if(this.isPositioned()){var e=this._node.offsetLeft,i=this._node.offsetTop;if(0!==e||0!==i)return Q.translate(-e,-i)}return Q.identity()},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,i){return this._node.addEventListener(t,e,i),this},e.prototype.off=function(t,e,i){return this._node.removeEventListener(t,e,i),this},e.prototype.borderColor=function(t,e,i){if(void 0===t){var n=this.borderTopColor(),o=this.borderRightColor(),s=this.borderBottomColor(),a=this.borderLeftColor();return r.Objects.equal(n,o)&&r.Objects.equal(o,s)&&r.Objects.equal(s,a)?n:[n,o,s,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopColor(t[0],e,i),t.length>=2&&this.borderRightColor(t[1],e,i),t.length>=3&&this.borderBottomColor(t[2],e,i),t.length>=4&&this.borderLeftColor(t[3],e,i)):(this.borderTopColor(t,e,i),this.borderRightColor(t,e,i),this.borderBottomColor(t,e,i),this.borderLeftColor(t,e,i)),this},e.prototype.borderRadius=function(t,e,i){if(void 0===t){var n=this.borderTopLeftRadius(),o=this.borderTopRightRadius(),s=this.borderBottomRightRadius(),a=this.borderBottomLeftRadius();return r.Objects.equal(n,o)&&r.Objects.equal(o,s)&&r.Objects.equal(s,a)?n:[n,o,s,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopLeftRadius(t[0],e,i),t.length>=2&&this.borderTopRightRadius(t[1],e,i),t.length>=3&&this.borderBottomRightRadius(t[2],e,i),t.length>=4&&this.borderBottomLeftRadius(t[3],e,i)):(this.borderTopLeftRadius(t,e,i),this.borderTopRightRadius(t,e,i),this.borderBottomRightRadius(t,e,i),this.borderBottomLeftRadius(t,e,i)),this},e.prototype.borderStyle=function(t,e,i){if(void 0===t){var n=this.borderTopStyle(),o=this.borderRightStyle(),s=this.borderBottomStyle(),a=this.borderLeftStyle();return r.Objects.equal(n,o)&&r.Objects.equal(o,s)&&r.Objects.equal(s,a)?n:[n,o,s,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopStyle(t[0],e,i),t.length>=2&&this.borderRightStyle(t[1],e,i),t.length>=3&&this.borderBottomStyle(t[2],e,i),t.length>=4&&this.borderLeftStyle(t[3],e,i)):(this.borderTopStyle(t,e,i),this.borderRightStyle(t,e,i),this.borderBottomStyle(t,e,i),this.borderLeftStyle(t,e,i)),this},e.prototype.borderWidth=function(t,e,i){if(void 0===t){var n=this.borderTopWidth(),o=this.borderRightWidth(),s=this.borderBottomWidth(),a=this.borderLeftWidth();return r.Objects.equal(n,o)&&r.Objects.equal(o,s)&&r.Objects.equal(s,a)?n:[n,o,s,a]}return Array.isArray(t)?(t.length>=1&&this.borderTopWidth(t[0],e,i),t.length>=2&&this.borderRightWidth(t[1],e,i),t.length>=3&&this.borderBottomWidth(t[2],e,i),t.length>=4&&this.borderLeftWidth(t[3],e,i)):(this.borderTopWidth(t,e,i),this.borderRightWidth(t,e,i),this.borderBottomWidth(t,e,i),this.borderLeftWidth(t,e,i)),this},e.prototype.font=function(t,e,i){if(void 0===t){var r=this.fontStyle(),n=this.fontVariant(),o=this.fontWeight(),s=this.fontStretch(),a=this.fontSize(),u=this.lineHeight(),l=this.fontFamily();return void 0!==l?W.from(r,n,o,s,a,u,l):void 0}return void 0!==t&&(t=W.fromAny(t)),void 0!==t&&null===t.style()||this.fontStyle(void 0!==t&&t.style()||void 0,e,i),void 0!==t&&null===t.variant()||this.fontVariant(void 0!==t&&t.variant()||void 0,e,i),void 0!==t&&null===t.weight()||this.fontWeight(void 0!==t&&t.weight()||void 0,e,i),void 0!==t&&null===t.stretch()||this.fontStretch(void 0!==t&&t.stretch()||void 0,e,i),void 0!==t&&null===t.size()||this.fontSize(void 0!==t&&t.size()||void 0,e,i),void 0!==t&&null===t.height()||this.lineHeight(void 0!==t&&t.height()||void 0,e,i),this.fontFamily(void 0!==t?t.family():void 0,e,i),this},e.prototype.margin=function(t,e,i){if(void 0===t){var n=this.marginTop(),o=this.marginRight(),s=this.marginBottom(),a=this.marginLeft();return r.Objects.equal(n,o)&&r.Objects.equal(o,s)&&r.Objects.equal(s,a)?n:[n,o,s,a]}return Array.isArray(t)?(t.length>=1&&this.marginTop(t[0],e,i),t.length>=2&&this.marginRight(t[1],e,i),t.length>=3&&this.marginBottom(t[2],e,i),t.length>=4&&this.marginLeft(t[3],e,i)):(this.marginTop(t,e,i),this.marginRight(t,e,i),this.marginBottom(t,e,i),this.marginLeft(t,e,i)),this},e.prototype.overflow=function(t,e,i){if(void 0===t){var n=this.overflowX(),o=this.overflowY();return r.Objects.equal(n,o)?n:[n,o]}return Array.isArray(t)?(t.length>=1&&this.overflowX(t[0],e,i),t.length>=2&&this.overflowY(t[1],e,i)):(this.overflowX(t,e,i),this.overflowY(t,e,i)),this},e.prototype.overscrollBehavior=function(t,e,i){if(void 0===t){var n=this.overscrollBehaviorX(),o=this.overscrollBehaviorY();return r.Objects.equal(n,o)?n:[n,o]}return Array.isArray(t)?(t.length>=1&&this.overscrollBehaviorX(t[0],e,i),t.length>=2&&this.overscrollBehaviorY(t[1],e,i)):(this.overscrollBehaviorX(t,e,i),this.overscrollBehaviorY(t,e,i)),this},e.prototype.padding=function(t,e,i){if(void 0===t){var n=this.paddingTop(),o=this.paddingRight(),s=this.paddingBottom(),a=this.paddingLeft();return r.Objects.equal(n,o)&&r.Objects.equal(o,s)&&r.Objects.equal(s,a)?n:[n,o,s,a]}return Array.isArray(t)?(t.length>=1&&this.paddingTop(t[0],e,i),t.length>=2&&this.paddingRight(t[1],e,i),t.length>=3&&this.paddingBottom(t[2],e,i),t.length>=4&&this.paddingLeft(t[3],e,i)):(this.paddingTop(t,e,i),this.paddingRight(t,e,i),this.paddingBottom(t,e,i),this.paddingLeft(t,e,i)),this},e.fromTag=function(t){return"canvas"===t?new ze.Canvas(document.createElement(t)):new e(document.createElement(t))},e.fromNode=function(t){if(t.view instanceof ze)return t.view;if(t instanceof HTMLCanvasElement)return new ze.Canvas(t);if(t instanceof HTMLElement)return new e(t);throw new TypeError(""+t)},e.fromConstructor=function(t){if(ci.isConstructor(t))return new t(document.createElement(t.tag));throw new TypeError(""+t)},e.create=function(t){if("string"==typeof t)return e.fromTag(t);if(t instanceof HTMLElement)return e.fromNode(t);if("function"==typeof t)return e.fromConstructor(t);throw new TypeError(""+t)},e.tag="div",h([Ye({get:function(t){var e=this._node.offsetParent.getBoundingClientRect(),i=this._node.getBoundingClientRect().top-e.top;return t!==i&&this.requireUpdate(ze.NeedsLayout),i},set:function(t){this.top.setState(w.px(t)),this.requireUpdate(ze.NeedsLayout)},strength:"strong"})],e.prototype,"topAnchor",void 0),h([Ye({get:function(t){var e=this._node.offsetParent.getBoundingClientRect(),i=this._node.getBoundingClientRect(),r=e.right+i.right;return t!==r&&this.requireUpdate(ze.NeedsLayout),r},set:function(t){this.right.setState(w.px(t)),this.requireUpdate(ze.NeedsLayout)},strength:"strong"})],e.prototype,"rightAnchor",void 0),h([Ye({get:function(t){var e=this._node.offsetParent.getBoundingClientRect(),i=this._node.getBoundingClientRect(),r=e.bottom+i.bottom;return t!==r&&this.requireUpdate(ze.NeedsLayout),r},set:function(t){this.bottom.setState(w.px(t)),this.requireUpdate(ze.NeedsLayout)},strength:"strong"})],e.prototype,"bottomAnchor",void 0),h([Ye({get:function(t){var e=this._node.offsetParent.getBoundingClientRect(),i=this._node.getBoundingClientRect().left-e.left;return t!==i&&this.requireUpdate(ze.NeedsLayout),i},set:function(t){this.left.setState(w.px(t)),this.requireUpdate(ze.NeedsLayout)},strength:"strong"})],e.prototype,"leftAnchor",void 0),h([Ye({get:function(t){var e=this._node.getBoundingClientRect().width;return t!==e&&this.requireUpdate(ze.NeedsLayout),e},set:function(t){this.width.setState(w.px(t)),this.requireUpdate(ze.NeedsLayout)},strength:"strong"})],e.prototype,"widthAnchor",void 0),h([Ye({get:function(t){var e=this._node.getBoundingClientRect().height;return t!==e&&this.requireUpdate(ze.NeedsLayout),e},set:function(t){this.height.setState(w.px(t)),this.requireUpdate(ze.NeedsLayout)},strength:"strong"})],e.prototype,"heightAnchor",void 0),h([Ye({get:function(t){var e=this._node.offsetParent.getBoundingClientRect(),i=this._node.getBoundingClientRect(),r=i.left+.5*i.width-e.left;return t!==r&&this.requireUpdate(ze.NeedsLayout),r},set:function(t){var e=this.getLayoutAnchor("rightAnchor"),i=this.getLayoutAnchor("leftAnchor"),r=this.getLayoutAnchor("widthAnchor");null!==i&&i.enabled()?(this.width.setState(w.px(2*(t-i.value))),this.requireUpdate(ze.NeedsLayout)):null!==e&&e.enabled()?(this.width.setState(w.px(2*(e.value-t))),this.requireUpdate(ze.NeedsLayout)):null!==r&&r.enabled()&&(this.left.setState(w.px(t-.5*r.value)),this.requireUpdate(ze.NeedsLayout))},strength:"strong"})],e.prototype,"centerXAnchor",void 0),h([Ye({get:function(t){var e=this._node.offsetParent.getBoundingClientRect(),i=this._node.getBoundingClientRect(),r=i.top+.5*i.height-e.top;return t!==r&&this.requireUpdate(ze.NeedsLayout),r},set:function(t){var e=this.getLayoutAnchor("topAnchor"),i=this.getLayoutAnchor("bottomAnchor"),r=this.getLayoutAnchor("heightAnchor");null!==e&&e.enabled()?(this.height.setState(w.px(2*(t-e.value))),this.requireUpdate(ze.NeedsLayout)):null!==i&&i.enabled()?(this.height.setState(w.px(2*(i.value-t))),this.requireUpdate(ze.NeedsLayout)):null!==r&&r.enabled()&&(this.top.setState(w.px(t-.5*r.value)),this.requireUpdate(ze.NeedsLayout))},strength:"strong"})],e.prototype,"centerYAnchor",void 0),h([Si("autocomplete",String)],e.prototype,"autocomplete",void 0),h([Si("checked",Boolean)],e.prototype,"checked",void 0),h([Si("colspan",Number)],e.prototype,"colspan",void 0),h([Si("disabled",Boolean)],e.prototype,"disabled",void 0),h([Si("placeholder",String)],e.prototype,"placeholder",void 0),h([Si("rowspan",Number)],e.prototype,"rowspan",void 0),h([Si("selected",Boolean)],e.prototype,"selected",void 0),h([Si("title",String)],e.prototype,"title",void 0),h([Si("type",String)],e.prototype,"type",void 0),h([Si("value",String)],e.prototype,"value",void 0),h([ki("align-content",String)],e.prototype,"alignContent",void 0),h([ki("align-items",String)],e.prototype,"alignItems",void 0),h([ki("align-self",String)],e.prototype,"alignSelf",void 0),h([ki("appearance",String)],e.prototype,"appearance",void 0),h([ki(["backdrop-filter","-webkit-backdrop-filter"],String)],e.prototype,"backdropFilter",void 0),h([ki("background-color",P)],e.prototype,"backgroundColor",void 0),h([ki("border-collapse",String)],e.prototype,"borderCollapse",void 0),h([ki("border-top-color",[P,String])],e.prototype,"borderTopColor",void 0),h([ki("border-right-color",[P,String])],e.prototype,"borderRightColor",void 0),h([ki("border-bottom-color",[P,String])],e.prototype,"borderBottomColor",void 0),h([ki("border-left-color",[P,String])],e.prototype,"borderLeftColor",void 0),h([ki("border-top-left-radius",w)],e.prototype,"borderTopLeftRadius",void 0),h([ki("border-top-right-radius",w)],e.prototype,"borderTopRightRadius",void 0),h([ki("border-bottom-right-radius",w)],e.prototype,"borderBottomRightRadius",void 0),h([ki("border-bottom-left-radius",w)],e.prototype,"borderBottomLeftRadius",void 0),h([ki("border-spacing",String)],e.prototype,"borderSpacing",void 0),h([ki("border-top-style",String)],e.prototype,"borderTopStyle",void 0),h([ki("border-right-style",String)],e.prototype,"borderRightStyle",void 0),h([ki("border-bottom-style",String)],e.prototype,"borderBottomStyle",void 0),h([ki("border-left-style",String)],e.prototype,"borderLeftStyle",void 0),h([ki("border-top-width",[w,String])],e.prototype,"borderTopWidth",void 0),h([ki("border-right-width",[w,String])],e.prototype,"borderRightWidth",void 0),h([ki("border-bottom-width",[w,String])],e.prototype,"borderBottomWidth",void 0),h([ki("border-left-width",[w,String])],e.prototype,"borderLeftWidth",void 0),h([ki("bottom",[w,String])],e.prototype,"bottom",void 0),h([ki("box-shadow",Y)],e.prototype,"boxShadow",void 0),h([ki("box-sizing",String)],e.prototype,"boxSizing",void 0),h([ki("color",[P,String])],e.prototype,"color",void 0),h([ki("cursor",String)],e.prototype,"cursor",void 0),h([ki("display",String)],e.prototype,"display",void 0),h([ki("filter",String)],e.prototype,"filter",void 0),h([ki("flex-basis",[w,String])],e.prototype,"flexBasis",void 0),h([ki("flex-direction",String)],e.prototype,"flexDirection",void 0),h([ki("flex-grow",Number)],e.prototype,"flexGrow",void 0),h([ki("flex-shrink",Number)],e.prototype,"flexShrink",void 0),h([ki("flex-wrap",String)],e.prototype,"flexWrap",void 0),h([ki("font-family",z)],e.prototype,"fontFamily",void 0),h([ki("font-size",[w,String])],e.prototype,"fontSize",void 0),h([ki("font-stretch",String)],e.prototype,"fontStretch",void 0),h([ki("font-style",String)],e.prototype,"fontStyle",void 0),h([ki("font-variant",String)],e.prototype,"fontVariant",void 0),h([ki("font-weight",String)],e.prototype,"fontWeight",void 0),h([ki("height",[w,String])],e.prototype,"height",void 0),h([ki("justify-content",String)],e.prototype,"justifyContent",void 0),h([ki("left",[w,String])],e.prototype,"left",void 0),h([ki("line-height",q)],e.prototype,"lineHeight",void 0),h([ki("margin-top",[w,String])],e.prototype,"marginTop",void 0),h([ki("margin-right",[w,String])],e.prototype,"marginRight",void 0),h([ki("margin-bottom",[w,String])],e.prototype,"marginBottom",void 0),h([ki("margin-left",[w,String])],e.prototype,"marginLeft",void 0),h([ki("max-height",[w,String])],e.prototype,"maxHeight",void 0),h([ki("max-width",[w,String])],e.prototype,"maxWidth",void 0),h([ki("min-height",[w,String])],e.prototype,"minHeight",void 0),h([ki("min-width",[w,String])],e.prototype,"minWidth",void 0),h([ki("opacity",Number)],e.prototype,"opacity",void 0),h([ki("order",Number)],e.prototype,"order",void 0),h([ki("outline-color",[P,String])],e.prototype,"outlineColor",void 0),h([ki("outline-style",String)],e.prototype,"outlineStyle",void 0),h([ki("outline-width",[w,String])],e.prototype,"outlineWidth",void 0),h([ki("overflow-x",String)],e.prototype,"overflowX",void 0),h([ki("overflow-y",String)],e.prototype,"overflowY",void 0),h([ki("overscroll-behavior-x",String)],e.prototype,"overscrollBehaviorX",void 0),h([ki("overscroll-behavior-y",String)],e.prototype,"overscrollBehaviorY",void 0),h([ki("padding-top",w)],e.prototype,"paddingTop",void 0),h([ki("padding-right",w)],e.prototype,"paddingRight",void 0),h([ki("padding-bottom",w)],e.prototype,"paddingBottom",void 0),h([ki("padding-left",w)],e.prototype,"paddingLeft",void 0),h([ki("pointer-events",String)],e.prototype,"pointerEvents",void 0),h([ki("position",String)],e.prototype,"position",void 0),h([ki("right",[w,String])],e.prototype,"right",void 0),h([ki("text-align",String)],e.prototype,"textAlign",void 0),h([ki("text-decoration-color",[P,String])],e.prototype,"textDecorationColor",void 0),h([ki("text-decoration-line",String)],e.prototype,"textDecorationLine",void 0),h([ki("text-decoration-style",String)],e.prototype,"textDecorationStyle",void 0),h([ki("text-overflow",String)],e.prototype,"textOverflow",void 0),h([ki("text-transform",String)],e.prototype,"textTransform",void 0),h([ki("top",[w,String])],e.prototype,"top",void 0),h([ki("touch-action",String)],e.prototype,"touchAction",void 0),h([ki("transform",Q)],e.prototype,"transform",void 0),h([ki(["user-select","-webkit-user-select","-moz-user-select","-ms-user-select"],String)],e.prototype,"userSelect",void 0),h([ki("vertical-align",[w,String])],e.prototype,"verticalAlign",void 0),h([ki("visibility",String)],e.prototype,"visibility",void 0),h([ki("-webkit-overflow-scrolling",String)],e.prototype,"webkitOverflowScrolling",void 0),h([ki("white-space",String)],e.prototype,"whiteSpace",void 0),h([ki("width",[w,String])],e.prototype,"width",void 0),h([ki("z-index",[Number,String])],e.prototype,"zIndex",void 0),e}(ci);ze.Html=Qi;var Zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(Yi),Ji=function(t){function e(e){var i=t.call(this,e)||this;return i.onClick=i.onClick.bind(i),i.onDblClick=i.onDblClick.bind(i),i.onContextMenu=i.onContextMenu.bind(i),i.onMouseDown=i.onMouseDown.bind(i),i.onMouseMove=i.onMouseMove.bind(i),i.onMouseUp=i.onMouseUp.bind(i),i.onWheel=i.onWheel.bind(i),i.onTouchStart=i.onTouchStart.bind(i),i.onTouchMove=i.onTouchMove.bind(i),i.onTouchCancel=i.onTouchCancel.bind(i),i.onTouchEnd=i.onTouchEnd.bind(i),i._eventSurface=i._node,i._renderedViews=[],i._renderer=void 0,i._viewFrame=s.BoxR2.empty(),i._clientX=0,i._clientY=0,i._screenX=0,i._screenY=0,i._hoverView=null,i._touches={},i}return l(e,t),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),e.prototype.initNode=function(t){t.style.position="absolute"},Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasView",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childViews",{get:function(){for(var t=this._node.childNodes,e=[],i=0,r=t.length;i<r;i+=1){var n=t[i].view;void 0!==n&&e.push(n)}return e.push.apply(e,this._renderedViews),e},enumerable:!1,configurable:!0}),e.prototype.setChildView=function(e,i){return di.is(i)?this.setRenderedView(e,i):t.prototype.setChildView.call(this,e,i)},e.prototype.setRenderedView=function(t,e){if(null!==e&&!di.is(e))throw new TypeError(""+e);var i=-1,r=null,n=null,o=this._renderedViews,s=this._childViewMap;if(void 0!==s){var a=s[t];if(di.is(a))i=o.indexOf(a),r=a,n=o[i+1],this.willRemoveChildView(a),a.setParentView(null,this),this.removeChildViewMap(a),o.splice(i,1),this.onRemoveChildView(a),this.didRemoveChildView(a),a.setKey(null);else if(void 0!==a){if(r=a,!(a instanceof hi))throw new TypeError(""+a);var u=a._node,l=u.nextSibling;n=null!==l&&l.view||null,this.willRemoveChildView(a),this.willRemoveChildNode(u),a.setParentView(null,this),this.removeChildViewMap(a),this._node.removeChild(u),this.onRemoveChildNode(u),this.onRemoveChildView(a),this.didRemoveChildNode(u),this.didRemoveChildView(a),a.setKey(null)}}return null!==e&&(e.setKey(t),this.willInsertChildView(e,n),i>=0?o.splice(i,0,e):o.push(e),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,n),this.didInsertChildView(e,n)),r},Object.defineProperty(e.prototype,"renderedViews",{get:function(){return this._renderedViews},enumerable:!1,configurable:!0}),e.prototype.append=function(t,e){return"string"==typeof t?t=ze.fromTag(t):t instanceof Node?t=ze.fromNode(t):"function"==typeof t&&(t=ze.fromConstructor(t)),this.appendChildView(t,e),t},e.prototype.appendChildView=function(e,i){di.is(e)?this.appendRenderedView(e,i):t.prototype.appendChildView.call(this,e,i)},e.prototype.appendRenderedView=function(t,e){void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this._renderedViews.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null)},e.prototype.prepend=function(t,e){return"string"==typeof t?t=ze.fromTag(t):t instanceof Node?t=ze.fromNode(t):"function"==typeof t&&(t=ze.fromConstructor(t)),this.prependChildView(t,e),t},e.prototype.prependChildView=function(e,i){di.is(e)?this.prependRenderedView(e):t.prototype.prependChildView.call(this,e)},e.prototype.prependRenderedView=function(t,e){void 0!==e&&(this.removeChildView(e),t.setKey(e)),this.willInsertChildView(t,null),this._renderedViews.unshift(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null)},e.prototype.insert=function(t,e,i){return"string"==typeof t?t=ze.fromTag(t):t instanceof Node?t=ze.fromNode(t):"function"==typeof t&&(t=ze.fromConstructor(t)),this.insertChild(t,e),t},e.prototype.insertChildView=function(e,i,r){di.is(e)&&di.is(i)?this.insertRenderedView(e,i,r):t.prototype.insertChildView.call(this,e,i,r)},e.prototype.insertRenderedView=function(t,e,i){if(null!==e&&!di.is(e))throw new TypeError(""+e);if(null!==e&&e.parentView!==this)throw new TypeError(""+e);void 0!==i&&(this.removeChildView(i),t.setKey(i)),this.willInsertChildView(t,e);var r=this._renderedViews,n=null!==e?r.indexOf(e):-1;n>=0?r.splice(n,0,t):r.push(t),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,e),this.didInsertChildView(t,e)},e.prototype.removeChildView=function(e){var i;if("string"==typeof e){if(null===(i=this.getChildView(e)))return null}else i=e;if(di.is(i)?this.removeRenderedView(i):t.prototype.removeChildView.call(this,i),"string"==typeof e)return i},e.prototype.removeRenderedView=function(t){if(t.parentView!==this)throw new Error("not a child view");this.willRemoveChildView(t),t.setParentView(null,this),this.removeChildViewMap(t);var e=this._renderedViews,i=e.indexOf(t);i>=0&&e.splice(i,1),this.onRemoveChildView(t),this.didRemoveChildView(t),t.setKey(null)},e.prototype.removeAll=function(){t.prototype.removeAll.call(this);for(var e=this._renderedViews;;){var i=e.length;if(!(i>0))break;var r=e[i-1];this.willRemoveChildView(r),r.setParentView(null,this),this.removeChildViewMap(r),e.pop(),this.onRemoveChildView(r),this.didRemoveChildView(r),r.setKey(null)}},Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){var t=this._renderer;return void 0===t&&(t=this.createRenderer(),this._renderer=t),t},enumerable:!1,configurable:!0}),e.prototype.setRenderer=function(t){"string"==typeof t&&(t=this.createRenderer(t)),this._renderer=t,this.resetRenderer()},e.prototype.createRenderer=function(t){if(void 0===t&&(t="canvas"),"canvas"===t){if(null!==(e=this._node.getContext("2d")))return new xe(e,this.pixelRatio);throw new Error("Failed to create canvas rendering context")}if("webgl"===t){var e;if(null!==(e=this._node.getContext("webgl")))return new Ve(e,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+t+" renderer")},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.addEventListeners(this._eventSurface)},e.prototype.doMountChildViews=function(){for(var t=this._node.childNodes,e=0;e<t.length;e+=1){void 0!==(r=t[e].view)&&r.cascadeMount()}var i=this._renderedViews;for(e=0;e<i.length;e+=1){var r;(r=i[e]).cascadeMount()}},e.prototype.onUnmount=function(){this.removeEventListeners(this._eventSurface),t.prototype.onUnmount.call(this)},e.prototype.doUnmountChildViews=function(){for(var t=this._node.childNodes,e=0;e<t.length;e+=1){void 0!==(r=t[e].view)&&r.cascadeUnmount()}var i=this._renderedViews;for(e=0;e<i.length;e+=1){var r;(r=i[e]).cascadeUnmount()}},e.prototype.doPowerChildViews=function(){for(var t=this._node.childNodes,e=0;e<t.length;e+=1){void 0!==(r=t[e].view)&&r.cascadePower()}var i=this._renderedViews;for(e=0;e<i.length;e+=1){var r;(r=i[e]).cascadePower()}},e.prototype.doUnpowerChildViews=function(){for(var t=this._node.childNodes,e=0;e<t.length;e+=1){void 0!==(r=t[e].view)&&r.cascadeUnpower()}var i=this._renderedViews;for(e=0;e<i.length;e+=1){var r;(r=i[e]).cascadeUnpower()}},e.prototype.modifyUpdate=function(t){var e=0;return 0!=(t&ze.UpdateMask)&&(0!=(t&ze.ProcessMask)&&(e|=ze.NeedsProcess),0!=(t&ze.DisplayMask)&&(e|=ze.NeedsDisplay),e|=ze.NeedsRender),e},e.prototype.cascadeProcess=function(e,i){i=this.canvasViewContext(i),t.prototype.cascadeProcess.call(this,e,i)},e.prototype.onScroll=function(e){t.prototype.onScroll.call(this,e),this.setCulled(!this.intersectsViewport())},e.prototype.doProcessChildViews=function(t,e){var i=this._node.childNodes,r=this._renderedViews;if(0!=(t&ze.ProcessMask)&&(0!==i.length||0!==r.length)){this.willProcessChildViews(e);for(var n=0;n<i.length;){if(void 0!==(s=i[n].view)){var o=this.childViewContext(s,e);if(this.doProcessChildView(s,t,o),0!=(s._viewFlags&ze.RemovingFlag)){s._viewFlags&=~ze.RemovingFlag,this.removeChildView(s);continue}}n+=1}for(n=0;n<r.length;){var s=r[n];o=this.childViewContext(s,e);this.doProcessChildView(s,t,o),0==(s.viewFlags&ze.RemovingFlag)?n+=1:(s.setViewFlags(s.viewFlags&~ze.RemovingFlag),this.removeChildView(s))}this.didProcessChildViews(e)}},e.prototype.cascadeDisplay=function(e,i){i=this.canvasViewContext(i),t.prototype.cascadeDisplay.call(this,e,i)},e.prototype.doDisplay=function(t,e){var i=t;this._viewFlags&=~(ze.NeedsDisplay|ze.NeedsComposite),this.willDisplay(e),this._viewFlags|=ze.DisplayingFlag;try{0!=((this._viewFlags|t)&ze.NeedsLayout)&&(i|=ze.NeedsLayout,this._viewFlags&=~ze.NeedsLayout,this.willLayout(e)),0!=((this._viewFlags|t)&ze.NeedsRender)&&(i|=ze.NeedsRender,this._viewFlags&=~ze.NeedsRender,this.willRender(e)),this.onDisplay(e),0!=(i&ze.NeedsLayout)&&this.onLayout(e),0!=(i&ze.NeedsRender)&&this.onRender(e),this.doDisplayChildViews(i,e),0!=(i&ze.NeedsRender)&&this.didRender(e),0!=(i&ze.NeedsLayout)&&this.didLayout(e)}finally{this._viewFlags&=~ze.DisplayingFlag,this.didDisplay(e)}},e.prototype.didDisplay=function(e){this.detectMouseHover(),t.prototype.didDisplay.call(this,e)},e.prototype.onLayout=function(e){t.prototype.onLayout.call(this,e),this.resizeCanvas(this._node),this.resetRenderer()},e.prototype.willRender=function(t){this.willObserve((function(e){void 0!==e.viewWillRender&&e.viewWillRender(t,this)}))},e.prototype.onRender=function(t){this.clearCanvas()},e.prototype.didRender=function(t){this.didObserve((function(e){void 0!==e.viewDidRender&&e.viewDidRender(t,this)}))},e.prototype.doDisplayChildViews=function(t,e){var i=this._node.childNodes,r=this._renderedViews;if(0!=(t&ze.DisplayMask)&&(0!==i.length||0!==r.length)){this.willDisplayChildViews(e);for(var n=0;n<i.length;){if(void 0!==(s=i[n].view)){var o=this.childViewContext(s,e);if(this.doDisplayChildView(s,t,o),0!=(s._viewFlags&ze.RemovingFlag)){s._viewFlags&=~ze.RemovingFlag,this.removeChildView(s);continue}}n+=1}for(n=0;n<r.length;){var s=r[n];o=this.childViewContext(s,e);this.doDisplayChildView(s,t,o),0==(s.viewFlags&ze.RemovingFlag)?n+=1:(s.setViewFlags(s.viewFlags&~ze.RemovingFlag),this.removeChildView(s))}this.didDisplayChildViews(e)}},e.prototype.childViewContext=function(t,e){return e},e.prototype.canvasViewContext=function(t){return void 0===t&&(t=this.rootView.viewContext),{updateTime:t.updateTime,viewport:t.viewport,viewIdiom:t.viewIdiom,renderer:this.renderer}},e.prototype.isHidden=function(){return 0!=(this._viewFlags&ze.HiddenFlag)},e.prototype.setHidden=function(t){0!=(this._viewFlags&ze.HiddenFlag)!==t&&(this.willSetHidden(t),t?this._viewFlags|=ze.HiddenFlag:this._viewFlags&=~ze.HiddenFlag,this.onSetHidden(t),this.didSetHidden(t))},e.prototype.willSetHidden=function(t){this.willObserve((function(e){void 0!==e.viewWillSetHidden&&e.viewWillSetHidden(t,this)}))},e.prototype.onSetHidden=function(t){this.requireUpdate(ze.NeedsLayout)},e.prototype.didSetHidden=function(t){this.didObserve((function(e){void 0!==e.viewDidSetHidden&&e.viewDidSetHidden(t,this)}))},e.prototype.isCulled=function(){return 0!=(this._viewFlags&ze.CulledFlag)},e.prototype.setCulled=function(t){0!=(this._viewFlags&ze.CulledFlag)!==t&&(this.willSetCulled(t),t?this._viewFlags|=ze.CulledFlag:this._viewFlags&=~ze.CulledFlag,this.onSetCulled(t),this.didSetCulled(t))},e.prototype.willSetCulled=function(t){this.willObserve((function(e){void 0!==e.viewWillSetCulled&&e.viewWillSetCulled(t,this)}))},e.prototype.onSetCulled=function(t){t||this.requireUpdate(ze.NeedsLayout)},e.prototype.didSetCulled=function(t){this.didObserve((function(e){void 0!==e.viewDidSetCulled&&e.viewDidSetCulled(t,this)}))},Object.defineProperty(e.prototype,"viewFrame",{get:function(){return this._viewFrame},enumerable:!1,configurable:!0}),e.prototype.setViewFrame=function(t){},Object.defineProperty(e.prototype,"viewBounds",{get:function(){return this._viewFrame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){return this._viewFrame},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e,i){void 0===i&&(i=this.canvasViewContext());for(var r=null,n=this._renderedViews,o=n.length-1;o>=0;o-=1){var s=n[o];if(!s.isHidden()&&!s.isCulled())if(s.hitBounds.contains(t,e)&&null!==(r=s.hitTest(t,e,i)))break}return r},Object.defineProperty(e.prototype,"eventSurface",{get:function(){return this._eventSurface},enumerable:!1,configurable:!0}),e.prototype.setEventSurface=function(t){void 0===t&&(t=this._node),this._eventSurface!==t&&(this.removeEventListeners(this._eventSurface),this._eventSurface=t,this.addEventListeners(this._eventSurface))},e.prototype.handleEvent=function(t){},e.prototype.bubbleEvent=function(t){return this.handleEvent(t),this},e.prototype.addEventListeners=function(t){t.addEventListener("click",this.onClick),t.addEventListener("dblclick",this.onDblClick),t.addEventListener("contextmenu",this.onContextMenu),t.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("wheel",this.onWheel,{passive:!0}),t.addEventListener("touchstart",this.onTouchStart,{passive:!0}),t.addEventListener("touchmove",this.onTouchMove,{passive:!0}),t.addEventListener("touchcancel",this.onTouchCancel),t.addEventListener("touchend",this.onTouchEnd)},e.prototype.removeEventListeners=function(t){t.removeEventListener("click",this.onClick),t.removeEventListener("dblclick",this.onDblClick),t.removeEventListener("contextmenu",this.onContextMenu),t.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("wheel",this.onWheel),t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchend",this.onTouchEnd)},e.prototype.fireEvent=function(t,e,i){var r=this.clientBounds;if(r.contains(e,i)){var n=e-r.x,o=i-r.y,s=this.hitTest(n,o);if(null!==s)return t.targetView=s,s.bubbleEvent(t),s}return null},e.prototype.fireMouseEvent=function(t){return this.fireEvent(t,t.clientX,t.clientY)},e.prototype.onClick=function(t){this.fireMouseEvent(t)},e.prototype.onDblClick=function(t){this.fireMouseEvent(t)},e.prototype.onContextMenu=function(t){this.fireMouseEvent(t)},e.prototype.onMouseDown=function(t){this.fireMouseEvent(t)},e.prototype.onMouseMove=function(t){this._clientX=t.clientX,this._clientY=t.clientY,this._screenX=t.screenX,this._screenY=t.screenY;var e=this._hoverView,i=this.fireMouseEvent(t);i!==this._hoverView&&this.onMouseHoverChange(i,e)},e.prototype.onMouseUp=function(t){this.fireMouseEvent(t)},e.prototype.onWheel=function(t){this.fireMouseEvent(t)},e.prototype.onMouseHoverChange=function(t,e){var i={clientX:this._clientX,clientY:this._clientY,screenX:this._screenX,screenY:this._screenY,bubbles:!0};if(null!==e){var r=new MouseEvent("mouseout",i);r.targetView=e,r.relatedTargetView=t,e.bubbleEvent(r)}if(this._hoverView=t,null!==t){var n=new MouseEvent("mouseover",i);n.targetView=t,n.relatedTargetView=e,t.bubbleEvent(n)}},e.prototype.detectMouseHover=function(){var t=this.clientBounds;if(t.contains(this._clientX,this._clientY)){var e=this._clientX-t.x,i=this._clientY-t.y,r=this._hoverView,n=this.hitTest(e,i);n!==r&&this.onMouseHoverChange(n,r)}},e.prototype.fireTouchEvent=function(t,e,i){for(var r=e.changedTouches,n=function(n,o){var s,a=r[n],u=a.targetView;if(void 0!==u&&i.indexOf(u)<0){var l=new TouchEvent(t,{changedTouches:r,targetTouches:e.targetTouches,touches:e.touches,bubbles:!0});l.targetView=u;for(var h=[a],c=n+1;c<o;c+=1){var d=r[c];d.targetView===u&&h.push(d)}document.createTouchList,l.targetViewTouches=(s=document).createTouchList.apply(s,h),u.bubbleEvent(l),i.push(u)}},o=0,s=r.length;o<s;o+=1)n(o,s)},e.prototype.onTouchStart=function(t){for(var e=this.clientBounds,i=t.changedTouches,r=0,n=i.length;r<n;r+=1){var o=i[r],s=o.clientX,a=o.clientY;if(e.contains(s,a)){var u=s-e.x,l=a-e.y,h=this.hitTest(u,l);null!==h&&(o.targetView=h)}this._touches[o.identifier]=o}this.fireTouchEvent("touchstart",t,[])},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0,r=e.length;i<r;i+=1){var n=e[i],o=this._touches[n.identifier];void 0!==o&&(n.targetView=o.targetView)}this.fireTouchEvent("touchmove",t,[])},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=e.length,r=0;r<i;r+=1){var n=e[r],o=this._touches[n.identifier];void 0!==o&&(n.targetView=o.targetView)}this.fireTouchEvent("touchcancel",t,[]);for(r=0;r<i;r+=1){n=e[r];delete this._touches[n.identifier]}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=e.length,r=0;r<i;r+=1){var n=e[r],o=this._touches[n.identifier];void 0!==o&&(n.targetView=o.targetView)}this.fireTouchEvent("touchend",t,[]);for(r=0;r<i;r+=1){n=e[r];delete this._touches[n.identifier]}},e.prototype.resizeCanvas=function(t){var e,i,r,n=t.parentNode;if(n instanceof HTMLElement){var o=void 0;do{if(0!==(o=n.getBoundingClientRect()).width&&0!==o.height)break;n=n.parentNode}while(n instanceof HTMLElement);e=Math.floor(o.width),i=Math.floor(o.height),r=this.pixelRatio,t.width=e*r,t.height=i*r,t.style.width=e+"px",t.style.height=i+"px"}else e=Math.floor(t.width),i=Math.floor(t.height),r=1;this._viewFrame=new s.BoxR2(0,0,e,i)},e.prototype.clearCanvas=function(){var t=this.renderer;if(t instanceof xe){var e=this._viewFrame;t.context.clearRect(0,0,e.width,e.height)}else if(t instanceof Ve){var i=t.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},e.prototype.resetRenderer=function(){var t=this.renderer;if(t instanceof xe){var e=this.pixelRatio;t.context.setTransform(e,0,0,e,0,0)}else if(t instanceof Ve){var i=this._viewFrame;t.context.viewport(0,0,i.width,i.height)}},e.tag="canvas",e}(Qi);ze.Canvas=Ji;var $i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.viewWillProcess=function(t,e){},e.prototype.viewDidProcess=function(t,e){},e.prototype.viewWillScroll=function(t,e){},e.prototype.viewDidScroll=function(t,e){},e.prototype.viewWillDerive=function(t,e){},e.prototype.viewDidDerive=function(t,e){},e.prototype.viewWillAnimate=function(t,e){},e.prototype.viewDidAnimate=function(t,e){},e.prototype.viewWillProcessChildViews=function(t,e){},e.prototype.viewDidProcessChildViews=function(t,e){},e.prototype.viewWillDisplay=function(t,e){},e.prototype.viewDidDisplay=function(t,e){},e.prototype.viewWillLayout=function(t,e){},e.prototype.viewDidLayout=function(t,e){},e.prototype.viewWillRender=function(t,e){},e.prototype.viewDidRender=function(t,e){},e.prototype.viewWillDisplayChildViews=function(t,e){},e.prototype.viewDidDisplayChildViews=function(t,e){},e.prototype.isHidden=function(){var t=this._view;return null!==t&&t.isHidden()},e.prototype.viewWillSetHidden=function(t,e){},e.prototype.viewDidSetHidden=function(t,e){},e.prototype.isCulled=function(){var t=this._view;return null!==t&&t.isCulled()},e.prototype.viewWillSetCulled=function(t,e){},e.prototype.viewDidSetCulled=function(t,e){},Object.defineProperty(e.prototype,"viewFrame",{get:function(){var t=this._view;return null!==t?t.viewFrame:s.BoxR2.empty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this._view;return null!==t?t.viewBounds:s.BoxR2.empty()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBounds",{get:function(){var t=this._view;return null!==t?t.hitBounds:s.BoxR2.empty()},enumerable:!1,configurable:!0}),e}(Zi),tr=function(t){function e(i){var r=t.call(this,i)||this;return r.runProcessPass=r.runProcessPass.bind(r),r.runDisplayPass=r.runDisplayPass.bind(r),r.throttleResize=r.throttleResize.bind(r),r.throttleScroll=r.throttleScroll.bind(r),r.debounceReorientation=r.debounceReorientation.bind(r),r.doReorientation=r.doReorientation.bind(r),r.onVisibilityChange=r.onVisibilityChange.bind(r),r.onClick=r.onClick.bind(r),r._processTimer=0,r._displayFrame=0,r._updateDelay=e.MinUpdateDelay,r._reorientationTimer=0,r._viewContext=r.createViewContext(),r.initUi(),r}return l(e,t),e.prototype.initUi=function(){this.doRootMount()},Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),e.prototype.isRootView=function(){for(var t=this._node;;){var e=t.parentNode;if(null===e)break;if(e.view instanceof ze)return!1;t=e}return!0},e.prototype.doRootMount=function(){this.isRootView()&&(!this.isMounted()&&this.isNodeMounted()&&this.cascadeMount(),this.isMounted()&&!this.isPowered()&&this.isUiPowered()&&this.cascadePower())},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.addEventListeners(this._node)},e.prototype.onUnmount=function(){this.removeEventListeners(this._node),t.prototype.onUnmount.call(this)},e.prototype.isUiPowered=function(){return"visible"===document.visibilityState},e.prototype.onPower=function(){t.prototype.onPower.call(this),this.requireUpdate(ze.NeedsResize|ze.NeedsScroll)},e.prototype.onUnpower=function(){this.cancelUpdate(),0!==this._reorientationTimer&&(clearTimeout(this._reorientationTimer),this._reorientationTimer=0),this._updateDelay=e.MinUpdateDelay,t.prototype.onUnpower.call(this)},e.prototype.modifyUpdate=function(e){var i=t.prototype.modifyUpdate.call(this,e);return 0!=(e&ze.NeedsResize)&&(i|=ze.NeedsLayout),i},e.prototype.requestUpdate=function(t,i){t=this.willRequestUpdate(t,i),i&&this._updateDelay<=e.MaxProcessInterval?this.runImmediatePass():this.scheduleUpdate(),this.didRequestUpdate(t,i)},e.prototype.scheduleUpdate=function(){var t=this._viewFlags;0===this._displayFrame&&0===this._processTimer&&0==(t&(ze.ProcessingFlag|ze.DisplayingFlag))&&(0!=(t&ze.ProcessMask)?this._processTimer=setTimeout(this.runProcessPass,this._updateDelay):0!=(t&ze.DisplayMask)&&(this._displayFrame=requestAnimationFrame(this.runDisplayPass)))},e.prototype.cancelUpdate=function(){0!==this._processTimer&&(clearTimeout(this._processTimer),this._processTimer=0),0!==this._displayFrame&&(cancelAnimationFrame(this._displayFrame),this._displayFrame=0)},e.prototype.runImmediatePass=function(){0!=(this._viewFlags&ze.ProcessMask)&&(this.cancelUpdate(),this.runProcessPass(!0)),0!=(this._viewFlags&ze.DisplayMask)&&this._updateDelay<=e.MaxProcessInterval&&(this.cancelUpdate(),this.runDisplayPass(void 0,!0))},e.prototype.runProcessPass=function(t){void 0===t&&(t=!1),t&&(this._viewFlags|=ze.ImmediateFlag);var i=this._viewContext,r=performance.now();i.updateTime=r;var n=this._viewFlags;n=this.needsProcess(n,i),this.doProcess(n,i);var o=performance.now(),s=Math.max(e.MinProcessInterval,this._updateDelay);this._updateDelay=o-r>s?Math.min(Math.max(2,this._updateDelay<<1),e.MaxUpdateDelay):Math.min(e.MinUpdateDelay,this._updateDelay>>>1),this.cancelUpdate(),0!=(this._viewFlags&ze.DisplayMask)?this._displayFrame=requestAnimationFrame(this.runDisplayPass):0!=(this._viewFlags&ze.ProcessMask)&&(0!=(this._viewFlags&ze.ImmediateFlag)&&(s=Math.max(e.MaxProcessInterval,s)),this._processTimer=setTimeout(this.runProcessPass,s)),t||(this._viewFlags&=~ze.ImmediateFlag)},e.prototype.runDisplayPass=function(t,i){void 0===i&&(i=!1),i&&(this._viewFlags|=ze.ImmediateFlag);var r=this._viewContext,n=this._viewFlags;if(n=this.needsDisplay(n,r),this.doDisplay(n,r),this.cancelUpdate(),0!=(this._viewFlags&ze.ProcessMask)){var o=this._updateDelay;0!=(this._viewFlags&ze.ImmediateFlag)&&(o=Math.max(e.MaxProcessInterval,o)),this._processTimer=setTimeout(this.runProcessPass,o)}else 0!=(this._viewFlags&ze.DisplayMask)&&(this._displayFrame=requestAnimationFrame(this.runDisplayPass));i||(this._viewFlags&=~ze.ImmediateFlag)},e.prototype.cascadeProcess=function(t,e){},e.prototype.doProcess=function(t,e){var i=t;this._viewFlags&=~(ze.NeedsProcess|ze.NeedsProject),this.willProcess(e),this._viewFlags|=ze.ProcessingFlag;try{0!=((this._viewFlags|t)&ze.NeedsResize)&&(i|=ze.NeedsResize,this._viewFlags&=~ze.NeedsResize,this.willResize(e)),0!=((this._viewFlags|t)&ze.NeedsScroll)&&(i|=ze.NeedsScroll,this._viewFlags&=~ze.NeedsScroll,this.willScroll(e)),0!=((this._viewFlags|t)&ze.NeedsDerive)&&(i|=ze.NeedsDerive,this._viewFlags&=~ze.NeedsDerive,this.willDerive(e)),0!=((this._viewFlags|t)&ze.NeedsAnimate)&&(i|=ze.NeedsAnimate,this._viewFlags&=~ze.NeedsAnimate,this.willAnimate(e)),this.onProcess(e),0!=(i&ze.NeedsResize)&&this.onResize(e),0!=(i&ze.NeedsScroll)&&this.onScroll(e),0!=(i&ze.NeedsDerive)&&this.onDerive(e),0!=(i&ze.NeedsAnimate)&&this.onAnimate(e),this.doProcessChildViews(i,e),0!=(i&ze.NeedsAnimate)&&this.didAnimate(e),0!=(i&ze.NeedsDerive)&&this.didDerive(e),0!=(i&ze.NeedsScroll)&&this.didScroll(e),0!=(i&ze.NeedsResize)&&this.didResize(e)}finally{this._viewFlags&=~ze.ProcessingFlag,this.didProcess(e)}},e.prototype.cascadeDisplay=function(t,e){},e.prototype.updateLayoutStates=function(){t.prototype.updateLayoutStates.call(this),null!==this.getLayoutAnchor("safeAreaInsetTop")&&this.safeAreaInsetTop.updateState();var e=this.getLayoutAnchor("safeAreaInsetRight");null!==e&&e.updateState();var i=this.getLayoutAnchor("safeAreaInsetBottom");null!==i&&i.updateState();var r=this.getLayoutAnchor("safeAreaInsetLeft");null!==r&&r.updateState()},e.prototype.willResize=function(t){this.willObserve((function(e){void 0!==e.viewWillResize&&e.viewWillResize(t,this)}))},e.prototype.onResize=function(t){this._viewContext.viewport=this.detectViewport()},e.prototype.didResize=function(t){this.didObserve((function(e){void 0!==e.viewDidResize&&e.viewDidResize(t,this)}))},Object.defineProperty(e.prototype,"layoutSolver",{get:function(){var t=this._layoutSolver;return void 0!==t?t:null},enumerable:!1,configurable:!0}),e.prototype.activateConstraint=function(t){var e=this._layoutSolver;void 0===e&&(e=new Xe(this),this._layoutSolver=e),e.addConstraint(t)},e.prototype.deactivateConstraint=function(t){var e=this._layoutSolver;void 0!==e&&e.removeConstraint(t)},e.prototype.activateConstraintVariable=function(t){var e=this._layoutSolver;void 0===e&&(e=new Xe(this),this._layoutSolver=e),e.addConstraintVariable(t)},e.prototype.deactivateConstraintVariable=function(t){var e=this._layoutSolver;void 0!==e&&e.removeConstraintVariable(t)},e.prototype.setConstraintVariable=function(t,e){var i=this._layoutSolver;void 0!==i&&i.setConstraintVariable(t,e)},e.prototype.updateConstraintVariables=function(){var t=this._layoutSolver;void 0!==t&&t.updateConstraintVariables()},e.prototype.didAddConstraint=function(t){this.requireUpdate(ze.NeedsLayout)},e.prototype.didRemoveConstraint=function(t){this.requireUpdate(ze.NeedsLayout)},e.prototype.didAddConstraintVariable=function(t){this.requireUpdate(ze.NeedsLayout)},e.prototype.didRemoveConstraintVariable=function(t){this.requireUpdate(ze.NeedsLayout)},e.prototype.didUpdateConstraintVariable=function(t,e,i){i!==e&&this.requireUpdate(ze.NeedsLayout)},Object.defineProperty(e.prototype,"modals",{get:function(){var t=this._modals;return void 0===t&&(t=[],this._modals=t),t},enumerable:!1,configurable:!0}),e.prototype.toggleModal=function(t,e){var i=t.modalState;"hidden"===i||"hiding"===i?this.presentModal(t,e):"shown"!==i&&"showing"!==i||this.dismissModal(t)},e.prototype.presentModal=function(t,e){void 0===e&&(e={});var i=this._modals;if(void 0===i&&(i=[],this._modals=i),i.indexOf(t)<0){e.multi||this.dismissModals(),this.willPresentModal(t,e),i.push(t);var r=t.modalView;null===r||r.isMounted()||this.insertModalView(r),this.onPresentModal(t,e),t.showModal(!0),this.didPresentModal(t,e)}},e.prototype.insertModalView=function(t){this.appendChildView(t)},e.prototype.willPresentModal=function(t,e){this.willObserve((function(i){void 0!==i.viewWillPresentModal&&i.viewWillPresentModal(t,e,this)}))},e.prototype.onPresentModal=function(t,e){},e.prototype.didPresentModal=function(t,e){this.didObserve((function(i){void 0!==i.viewDidPresentModal&&i.viewDidPresentModal(t,e,this)}))},e.prototype.dismissModal=function(t){var e=this._modals;if(void 0!==e){var i=e.indexOf(t);i>=0&&(this.willDismissModal(t),e.splice(i,1),this.onDismissModal(t),t.hideModal(!0),this.didDismissModal(t))}},e.prototype.willDismissModal=function(t){this.willObserve((function(e){void 0!==e.viewWillDismissModal&&e.viewWillDismissModal(t,this)}))},e.prototype.onDismissModal=function(t){},e.prototype.didDismissModal=function(t){this.didObserve((function(e){void 0!==e.viewDidDismissModal&&e.viewDidDismissModal(t,this)}))},e.prototype.dismissModals=function(){var t=this._modals;if(void 0!==t)for(;0!==t.length;){var e=t[0];this.willDismissModal(e),t.shift(),this.onDismissModal(e),e.hideModal(!0),this.didDismissModal(e)}},Object.defineProperty(e.prototype,"viewport",{get:function(){return this._viewContext.viewport},enumerable:!1,configurable:!0}),e.prototype.detectViewport=function(){var t=0,e=0,i=0,r=0,n=document.documentElement.style.width,o=document.documentElement.style.height;document.documentElement.style.width="100%",document.documentElement.style.height="100%";var s=document.createElement("div");s.style.setProperty("position","fixed"),s.style.setProperty("top","0"),s.style.setProperty("right","0"),s.style.setProperty("width",window.innerWidth===document.documentElement.offsetWidth?"100%":"100vw"),s.style.setProperty("height",window.innerHeight===document.documentElement.offsetHeight?"100%":"100vh"),s.style.setProperty("box-sizing","border-box"),s.style.setProperty("padding-top","env(safe-area-inset-top)"),s.style.setProperty("padding-right","env(safe-area-inset-right)"),s.style.setProperty("padding-bottom","env(safe-area-inset-bottom)"),s.style.setProperty("padding-left","env(safe-area-inset-left)"),s.style.setProperty("overflow","hidden"),s.style.setProperty("visibility","hidden"),document.body.appendChild(s);var a=window.getComputedStyle(s),u=parseFloat(a.getPropertyValue("width")),l=parseFloat(a.getPropertyValue("height"));"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports("padding-top: env(safe-area-inset-top)")&&(t=parseFloat(a.getPropertyValue("padding-top")),e=parseFloat(a.getPropertyValue("padding-right")),i=parseFloat(a.getPropertyValue("padding-bottom")),r=parseFloat(a.getPropertyValue("padding-left"))),document.body.removeChild(s),document.documentElement.style.width=n,document.documentElement.style.height=o;var h={insetTop:t,insetRight:e,insetBottom:i,insetLeft:r},c=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type;if(void 0===c)switch(window.orientation){case 0:c="portrait-primary";break;case 180:c="portrait-secondary";break;case-90:c="landscape-primary";break;case 90:c="landscape-secondary";break;default:c="landscape-primary"}return{width:u,height:l,safeArea:h,orientation:c,colorScheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":window.matchMedia("(prefers-color-scheme: light)").matches?"light":"no-preference"}},Object.defineProperty(e.prototype,"viewIdiom",{get:function(){return this._viewContext.viewIdiom},enumerable:!1,configurable:!0}),e.prototype.setViewIdiom=function(t){var e=this._viewContext,i=e.viewIdiom;i!==t&&(this.willSetViewIdiom(t,i),e.viewIdiom=t,this.onSetViewIdiom(t,i),this.didSetViewIdiom(t,i))},e.prototype.willSetViewIdiom=function(t,e){},e.prototype.onSetViewIdiom=function(t,e){this.requireUpdate(ze.NeedsLayout)},e.prototype.didSetViewIdiom=function(t,e){},Object.defineProperty(e.prototype,"viewContext",{get:function(){return this._viewContext},enumerable:!1,configurable:!0}),e.prototype.createViewContext=function(){return{updateTime:performance.now(),viewport:this.detectViewport(),viewIdiom:"unspecified"}},Object.defineProperty(e.prototype,"rootView",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.addEventListeners=function(t){"undefined"!=typeof window&&(window.addEventListener("resize",this.throttleResize),window.addEventListener("scroll",this.throttleScroll,{passive:!0}),window.addEventListener("orientationchange",this.debounceReorientation)),"undefined"!=typeof document&&document.addEventListener("visibilitychange",this.onVisibilityChange),t.addEventListener("click",this.onClick)},e.prototype.removeEventListeners=function(t){"undefined"!=typeof window&&(window.removeEventListener("resize",this.throttleResize),window.removeEventListener("scroll",this.throttleScroll),window.removeEventListener("orientationchange",this.debounceReorientation)),"undefined"!=typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange),t.removeEventListener("click",this.onClick)},e.prototype.throttleResize=function(){this.requireUpdate(ze.NeedsResize|ze.NeedsLayout)},e.prototype.throttleScroll=function(){this.requireUpdate(ze.NeedsScroll)},e.prototype.debounceReorientation=function(){0!==this._reorientationTimer&&(clearTimeout(this._reorientationTimer),this._reorientationTimer=0),this._reorientationTimer=setTimeout(this.doReorientation,500)},e.prototype.doReorientation=function(){0!==this._reorientationTimer&&(clearTimeout(this._reorientationTimer),this._reorientationTimer=0),this.throttleResize()},e.prototype.onVisibilityChange=function(){if(this.isMounted()){var t=this.isPowered(),e=document.visibilityState;t||"visible"!==e?t&&"visible"!==e&&this.cascadeUnpower():this.cascadePower()}},e.prototype.onClick=function(t){this.onFallthroughClick(t)},e.prototype.onFallthroughClick=function(t){this.dismissModals()},e.MinUpdateDelay=0,e.MaxUpdateDelay=167,e.MinProcessInterval=12,e.MaxProcessInterval=33,h([Ye({get:function(t){var e=this.viewport.safeArea.insetTop;return t!==e&&this.requireUpdate(ze.NeedsLayout),e},strength:"strong"})],e.prototype,"safeAreaInsetTop",void 0),h([Ye({get:function(t){var e=this.viewport.safeArea.insetRight;return t!==e&&this.requireUpdate(ze.NeedsLayout),e},strength:"strong"})],e.prototype,"safeAreaInsetRight",void 0),h([Ye({get:function(t){var e=this.viewport.safeArea.insetBottom;return t!==e&&this.requireUpdate(ze.NeedsLayout),e},strength:"strong"})],e.prototype,"safeAreaInsetBottom",void 0),h([Ye({get:function(t){var e=this.viewport.safeArea.insetLeft;return t!==e&&this.requireUpdate(ze.NeedsLayout),e},strength:"strong"})],e.prototype,"safeAreaInsetLeft",void 0),e}(Qi);ze.Ui=tr;var er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.viewWillResize=function(t,e){},e.prototype.viewDidResize=function(t,e){},Object.defineProperty(e.prototype,"modals",{get:function(){var t=this._view;return null!==t?t.modals:[]},enumerable:!1,configurable:!0}),e.prototype.viewWillPresentModal=function(t,e,i){},e.prototype.viewDidPresentModal=function(t,e,i){},e.prototype.viewWillDismissModal=function(t,e){},e.prototype.viewDidDismissModal=function(t,e){},e}(Zi),ir=function(){function t(t,e,i,r){this._x=t,this._y=e,this._width=i,this._height=r}return t.prototype.x=function(t){return void 0===t?this._x:(t=w.fromAny(t),this._x.equals(t)?this:this.copy(t,this._y,this._width,this._height))},t.prototype.y=function(t){return void 0===t?this._y:(t=w.fromAny(t),this._y.equals(t)?this:this.copy(this._x,t,this._width,this._height))},t.prototype.width=function(t){return void 0===t?this._width:(t=w.fromAny(t),this._width.equals(t)?this:this.copy(this._x,this._y,t,this._height))},t.prototype.height=function(t){return void 0===t?this._height:(t=w.fromAny(t),this._height.equals(t)?this:this.copy(this._x,this._y,this._width,t))},t.prototype.render=function(t,e){if(void 0===t){var i=new be;return this.draw(i,e),i.toString()}t instanceof Ce&&this.draw(t.context,e)},t.prototype.draw=function(t,e){this.renderRect(t,e)},t.prototype.renderRect=function(t,e){t.rect(this._x.pxValue(),this._y.pxValue(),this._width.pxValue(),this._height.pxValue())},t.prototype.copy=function(e,i,r,n){return new t(e,i,r,n)},t.prototype.toAny=function(){return{x:this._x,y:this._y,width:this._width,height:this._height}},t.prototype.equals=function(e){return this===e||e instanceof t&&(this._x.equals(e._x)&&this._y.equals(e._y)&&this._width.equals(e._width)&&this._height.equals(e._height))},t.prototype.debug=function(t){t=t.write("Rect").write(46).write("from").write(40).debug(this._x).write(", ").debug(this._y).write(", ").debug(this._width).write(", ").debug(this._height).write(41)},t.prototype.toString=function(){return e.Format.debug(this)},t.from=function(e,i,r,n){return new t(e=w.fromAny(e),i=w.fromAny(i),r=w.fromAny(r),n=w.fromAny(n))},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e)return t.from(e.x,e.y,e.width,e.height);throw new TypeError(""+e)},t}(),rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return new ir(this.x.value,this.y.value,this.width.value,this.height.value)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new ir(this.x.state,this.y.state,this.width.state,this.height.state)},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){t instanceof ir&&(t=t.toAny()),void 0!==t.x&&this.x(t.x,e),void 0!==t.y&&this.y(t.y,e),void 0!==t.width&&this.width(t.width,e),void 0!==t.height&&this.height(t.height,e),void 0!==t.fill&&this.fill(t.fill,e),void 0!==t.stroke&&this.stroke(t.stroke,e),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth,e),void 0!==t.hidden&&this.setHidden(t.hidden),void 0!==t.culled&&this.setCulled(t.culled)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof xe&&!this.isHidden()&&!this.isCulled()){var r=i.context;r.save(),this.renderRect(r,this.viewFrame),r.restore()}},e.prototype.renderRect=function(t,e){var i=this.x.value.pxValue(e.width),r=this.y.value.pxValue(e.height),n=this.width.value.pxValue(e.width),o=this.height.value.pxValue(e.height);t.beginPath(),t.rect(i,r,n,o);var s=this.fill.value;void 0!==s&&(t.fillStyle=s.toString(),t.fill());var a=this.stroke.value;if(void 0!==a){var u=this.strokeWidth.value;if(void 0!==u){var l=Math.min(e.width,e.height);t.lineWidth=u.pxValue(l)}t.strokeStyle=a.toString(),t.stroke()}},Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=this.x.value.pxValue(t.width),i=this.y.value.pxValue(t.height),r=this.width.value.pxValue(t.width),n=this.height.value.pxValue(t.height);return new s.BoxR2(e,i,e+r,i+n)},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(e,i,r){var n=t.prototype.hitTest.call(this,e,i,r);if(null===n){var o=r.renderer;if(o instanceof xe){var s=o.context;s.save(),e*=o.pixelRatio,i*=o.pixelRatio,n=this.hitTestRect(e,i,s,this.viewFrame),s.restore()}}return n},e.prototype.hitTestRect=function(t,e,i,r){var n=this.x.value.pxValue(r.width),o=this.y.value.pxValue(r.height),s=this.width.value.pxValue(r.width),a=this.height.value.pxValue(r.height);if(i.beginPath(),i.rect(n,o,s,a),void 0!==this.fill.value&&i.isPointInPath(t,e))return this;if(void 0!==this.stroke.value){var u=this.strokeWidth.value;if(void 0!==u){var l=Math.min(r.width,r.height);if(i.lineWidth=u.pxValue(l),i.isPointInStroke(t,e))return this}}return null},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof ir||"object"==typeof t&&null!==t){var i=new e;return i.setState(t),i}throw new TypeError(""+t)},h([$e(w,{value:w.zero()})],e.prototype,"x",void 0),h([$e(w,{value:w.zero()})],e.prototype,"y",void 0),h([$e(w,{value:w.zero()})],e.prototype,"width",void 0),h([$e(w,{value:w.zero()})],e.prototype,"height",void 0),h([$e(P,{inherit:!0})],e.prototype,"fill",void 0),h([$e(P,{inherit:!0})],e.prototype,"stroke",void 0),h([$e(w,{inherit:!0})],e.prototype,"strokeWidth",void 0),e}(yi),nr=Math.PI,or=2*nr,sr=function(){function t(t,e,i,r,n,o,s,a){this._center=t,this._innerRadius=e,this._outerRadius=i,this._startAngle=r,this._sweepAngle=n,this._padAngle=o,this._padRadius=s,this._cornerRadius=a}return t.prototype.center=function(t){return void 0===t?this._center:(t=s.PointR2.fromAny(t),this._center.equals(t)?this:this.copy(t,this._innerRadius,this._outerRadius,this._startAngle,this._sweepAngle,this._padAngle,this._padRadius,this._cornerRadius))},t.prototype.innerRadius=function(t){return void 0===t?this._innerRadius:(t=w.fromAny(t),this._innerRadius.equals(t)?this:this.copy(this._center,t,this._outerRadius,this._startAngle,this._sweepAngle,this._padAngle,this._padRadius,this._cornerRadius))},t.prototype.outerRadius=function(t){return void 0===t?this._outerRadius:(t=w.fromAny(t),this._outerRadius.equals(t)?this:this.copy(this._center,this._innerRadius,t,this._startAngle,this._sweepAngle,this._padAngle,this._padRadius,this._cornerRadius))},t.prototype.startAngle=function(t){return void 0===t?this._startAngle:(t=a.fromAny(t),this._startAngle.equals(t)?this:this.copy(this._center,this._innerRadius,this._outerRadius,t,this._sweepAngle,this._padAngle,this._padRadius,this._cornerRadius))},t.prototype.sweepAngle=function(t){return void 0===t?this._sweepAngle:(t=a.fromAny(t),this._sweepAngle.equals(t)?this:this.copy(this._center,this._innerRadius,this._outerRadius,this._startAngle,t,this._padAngle,this._padRadius,this._cornerRadius))},t.prototype.padAngle=function(t){return void 0===t?this._padAngle:(t=a.fromAny(t),this._padAngle.equals(t)?this:this.copy(this._center,this._innerRadius,this._outerRadius,this._startAngle,this._sweepAngle,t,this._padRadius,this._cornerRadius))},t.prototype.padRadius=function(t){return void 0===t?this._padRadius:(t=null!==t?w.fromAny(t):null,r.Objects.equal(this._padRadius,t)?this:this.copy(this._center,this._innerRadius,this._outerRadius,this._startAngle,this._sweepAngle,this._padAngle,t,this._cornerRadius))},t.prototype.cornerRadius=function(t){return void 0===t?this._cornerRadius:(t=w.fromAny(t),this._cornerRadius.equals(t)?this:this.copy(this._center,this._innerRadius,this._outerRadius,this._startAngle,this._sweepAngle,this._padAngle,this._padRadius,t))},t.prototype.render=function(t,e){if(void 0===t){var i=new be;return this.draw(i,e),i.toString()}t instanceof Ce&&this.draw(t.context,e)},t.prototype.draw=function(t,e){this.renderArc(t,e)},t.prototype.renderArc=function(e,i){var r;void 0!==i&&(r=Math.min(i.width,i.height));var n=this._center,o=n.x,s=n.y,a=this._innerRadius.pxValue(r),u=this._outerRadius.pxValue(r),l=this._startAngle.radValue(),h=this._sweepAngle.radValue(),c=l+h,d=h>=0;if(u<a){var p=u;u=a,a=p}if(u>1e-12)if(h>or-1e-12)e.moveTo(o+u*Math.cos(l),s+u*Math.sin(l)),e.arc(o,s,u,l,c,!d),a>1e-12&&(e.moveTo(o+a*Math.cos(c),s+a*Math.sin(c)),e.arc(o,s,a,c,l,d));else{var f=l,v=c,y=l,m=c,w=h,g=h,_=this._padAngle.radValue()/2,b=+(_>1e-12)&&(null!==this._padRadius?this._padRadius.pxValue(r):Math.sqrt(a*a+u*u)),C=Math.min(Math.abs(u-a)/2,this._cornerRadius.pxValue(r)),x=C,V=C;if(b>1e-12){var S=Math.asin(b/a*Math.sin(_)),A=Math.asin(b/u*Math.sin(_));(w-=2*S)>1e-12?(y+=S*=d?1:-1,m-=S):(w=0,y=m=(l+c)/2),(g-=2*A)>1e-12?(f+=A*=d?1:-1,v-=A):(g=0,f=v=(l+c)/2)}var P=void 0,M=void 0,D=u*Math.cos(f),E=u*Math.sin(f),R=a*Math.cos(m),T=a*Math.sin(m),O=void 0,F=void 0;if(C>1e-12&&(O=u*Math.cos(v),F=u*Math.sin(v),P=a*Math.cos(y),M=a*Math.sin(y),h<nr)){var k=w>1e-12?t.intersect(D,E,P,M,O,F,R,T):[R,T],N=D-k[0],U=E-k[1],I=O-k[0],L=F-k[1],j=1/Math.sin(.5*Math.acos((N*I+U*L)/(Math.sqrt(N*N+U*U)*Math.sqrt(I*I+L*L)))),q=Math.sqrt(k[0]*k[0]+k[1]*k[1]);x=Math.min(C,(a-q)/(j-1)),V=Math.min(C,(u-q)/(j+1))}if(g>1e-12)if(V>1e-12){var z=t.cornerTangents(P,M,D,E,u,V,d),B=t.cornerTangents(O,F,R,T,u,V,d);e.moveTo(o+z.cx+z.x01,s+z.cy+z.y01),V<C?e.arc(o+z.cx,s+z.cy,V,Math.atan2(z.y01,z.x01),Math.atan2(B.y01,B.x01),!d):(e.arc(o+z.cx,s+z.cy,V,Math.atan2(z.y01,z.x01),Math.atan2(z.y11,z.x11),!d),e.arc(o,s,u,Math.atan2(z.cy+z.y11,z.cx+z.x11),Math.atan2(B.cy+B.y11,B.cx+B.x11),!d),e.arc(o+B.cx,s+B.cy,V,Math.atan2(B.y11,B.x11),Math.atan2(B.y01,B.x01),!d))}else e.moveTo(o+D,s+E),e.arc(o,s,u,f,v,!d);else e.moveTo(o+D,s+E);if(a>1e-12&&w>1e-12)if(x>1e-12){z=t.cornerTangents(R,T,O,F,a,-x,d),B=t.cornerTangents(D,E,P,M,a,-x,d);e.lineTo(o+z.cx+z.x01,s+z.cy+z.y01),x<C?e.arc(o+z.cx,s+z.cy,x,Math.atan2(z.y01,z.x01),Math.atan2(B.y01,B.x01),!d):(e.arc(o+z.cx,s+z.cy,x,Math.atan2(z.y01,z.x01),Math.atan2(z.y11,z.x11),!d),e.arc(o,s,a,Math.atan2(z.cy+z.y11,z.cx+z.x11),Math.atan2(B.cy+B.y11,B.cx+B.x11),d),e.arc(o+B.cx,s+B.cy,x,Math.atan2(B.y11,B.x11),Math.atan2(B.y01,B.x01),!d))}else e.arc(o,s,a,m,y,d);else e.lineTo(o+R,s+T)}else e.moveTo(o,s);e.closePath()},t.prototype.copy=function(e,i,r,n,o,s,a,u){return new t(e,i,r,n,o,s,a,u)},t.prototype.toAny=function(){return{center:this._center,innerRadius:this._innerRadius,outerRadius:this._outerRadius,startAngle:this._startAngle,sweepAngle:this._sweepAngle,padAngle:this._padAngle,padRadius:this._padRadius,cornerRadius:this._cornerRadius}},t.prototype.equals=function(e){return this===e||e instanceof t&&(this._center.equals(e._center)&&this._innerRadius.equals(e._innerRadius)&&this._outerRadius.equals(e._outerRadius)&&this._startAngle.equals(e._startAngle)&&this._sweepAngle.equals(e._sweepAngle)&&this._padAngle.equals(e._padAngle)&&r.Objects.equal(this._padRadius,e._padRadius)&&this._cornerRadius.equals(e._cornerRadius))},t.prototype.debug=function(t){t=t.write("Arc").write(46).write("from").write(40).write(41),this._center.isDefined()&&(t=t.write(46).write("center").write(40).debug(this._center).write(41)),this._innerRadius.isDefined()&&(t=t.write(46).write("innerRadius").write(40).debug(this._innerRadius).write(41)),this._outerRadius.isDefined()&&(t=t.write(46).write("outerRadius").write(40).debug(this._outerRadius).write(41)),this._startAngle.isDefined()&&(t=t.write(46).write("startAngle").write(40).debug(this._startAngle).write(41)),this._sweepAngle.isDefined()&&(t=t.write(46).write("sweepAngle").write(40).debug(this._sweepAngle).write(41)),this._padAngle.isDefined()&&(t=t.write(46).write("padAngle").write(40).debug(this._padAngle).write(41)),null!==this._padRadius&&(t=t.write(46).write("padRadius").write(40).debug(this._padRadius).write(41)),this._cornerRadius.isDefined()&&(t=t.write(46).write("cornerRadius").write(40).debug(this._cornerRadius).write(41))},t.prototype.toString=function(){return e.Format.debug(this)},t.from=function(e,i,r,n,o,u,l,h){return void 0===e&&(e=s.PointR2.origin()),void 0===i&&(i=w.zero()),void 0===r&&(r=w.zero()),void 0===n&&(n=a.zero()),void 0===o&&(o=a.zero()),void 0===u&&(u=a.zero()),void 0===l&&(l=null),void 0===h&&(h=w.zero()),new t(e=s.PointR2.fromAny(e),i=w.fromAny(i),r=w.fromAny(r),n=a.fromAny(n),o=a.fromAny(o),u=a.fromAny(u),l=null!==l?w.fromAny(l):null,h=w.fromAny(h))},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e)return t.from(e.center,e.innerRadius,e.outerRadius,e.startAngle,e.sweepAngle,e.padAngle,e.padRadius,e.cornerRadius);throw new TypeError(""+e)},t.intersect=function(t,e,i,r,n,o,s,a){var u=i-t,l=r-e,h=s-n,c=a-o,d=(h*(e-o)-c*(t-n))/(c*u-h*l);return[t+d*u,e+d*l]},t.cornerTangents=function(t,e,i,r,n,o,s){var a=t-i,u=e-r,l=(s?o:-o)/Math.sqrt(a*a+u*u),h=l*u,c=-l*a,d=t+h,p=e+c,f=i+h,v=r+c,y=(d+f)/2,m=(p+v)/2,w=f-d,g=v-p,_=w*w+g*g,b=n-o,C=d*v-f*p,x=(g<0?-1:1)*Math.sqrt(Math.max(0,b*b*_-C*C)),V=(C*g-w*x)/_,S=(-C*w-g*x)/_,A=(C*g+w*x)/_,P=(-C*w+g*x)/_,M=V-y,D=S-m,E=A-y,R=P-m;return M*M+D*D>E*E+R*R&&(V=A,S=P),{cx:V,cy:S,x01:-h,y01:-c,x11:V*(n/b-1),y11:S*(n/b-1)}},t}(),ar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return new sr(this.center.value,this.innerRadius.value,this.outerRadius.value,this.startAngle.value,this.sweepAngle.value,this.padAngle.value,this.padRadius.value,this.cornerRadius.value)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new sr(this.center.state,this.innerRadius.state,this.outerRadius.state,this.startAngle.state,this.sweepAngle.state,this.padAngle.state,this.padRadius.state,this.cornerRadius.state)},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){t instanceof sr&&(t=t.toAny()),void 0!==t.center&&this.center(t.center,e),void 0!==t.innerRadius&&this.innerRadius(t.innerRadius,e),void 0!==t.outerRadius&&this.outerRadius(t.outerRadius,e),void 0!==t.startAngle&&this.startAngle(t.startAngle,e),void 0!==t.sweepAngle&&this.sweepAngle(t.sweepAngle,e),void 0!==t.padAngle&&this.padAngle(t.padAngle,e),void 0!==t.padRadius&&this.padRadius(t.padRadius,e),void 0!==t.cornerRadius&&this.cornerRadius(t.cornerRadius,e),void 0!==t.fill&&this.fill(t.fill,e),void 0!==t.stroke&&this.stroke(t.stroke,e),void 0!==t.strokeWidth&&this.strokeWidth(t.strokeWidth,e),void 0!==t.hidden&&this.setHidden(t.hidden),void 0!==t.culled&&this.setCulled(t.culled)},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof xe&&!this.isHidden()&&!this.isCulled()){var r=i.context;r.save(),this.renderArc(i.context,this.viewFrame),r.restore()}},e.prototype.renderArc=function(t,e){this.value.draw(t,e);var i=this.fill.value;void 0!==i&&(t.fillStyle=i.toString(),t.fill());var r=this.stroke.value;if(void 0!==r){var n=this.strokeWidth.value;if(void 0!==n){var o=Math.min(e.width,e.height);t.lineWidth=n.pxValue(o)}t.strokeStyle=r.toString(),t.stroke()}},Object.defineProperty(e.prototype,"popoverFrame",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.pageTransform.inverse(),r=this.center.value,n=i.transform(r.x,r.y),o=n[0],a=n[1],u=(this.innerRadius.value.pxValue(e)+this.outerRadius.value.pxValue(e))/2,l=this.startAngle.value.radValue()+this.sweepAngle.value.radValue()/2,h=o+u*Math.cos(l),c=a+u*Math.sin(l);return new s.BoxR2(h,c,h,c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBounds",{get:function(){var t=this.viewFrame,e=Math.min(t.width,t.height),i=this.center.value,r=this.outerRadius.value.pxValue(e);return new s.BoxR2(i.x-r,i.y-r,i.x+r,i.y+r)},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(e,i,r){var n=t.prototype.hitTest.call(this,e,i,r);if(null===n){var o=r.renderer;if(o instanceof xe){var s=o.context;s.save(),e*=o.pixelRatio,i*=o.pixelRatio,n=this.hitTestArc(e,i,s,this.viewFrame),s.restore()}}return n},e.prototype.hitTestArc=function(t,e,i,r){if(i.beginPath(),this.value.draw(i,r),void 0!==this.fill.value&&i.isPointInPath(t,e))return this;if(void 0!==this.stroke.value){var n=this.strokeWidth.value;if(void 0!==n){var o=Math.min(r.width,r.height);if(i.lineWidth=n.pxValue(o),i.isPointInStroke(t,e))return this}}return null},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof sr||"object"==typeof t&&null!==t){var i=new e;return i.setState(t),i}throw new TypeError(""+t)},h([$e(s.PointR2,{value:s.PointR2.origin()})],e.prototype,"center",void 0),h([$e(w,{value:w.zero()})],e.prototype,"innerRadius",void 0),h([$e(w,{value:w.zero()})],e.prototype,"outerRadius",void 0),h([$e(a,{value:a.zero()})],e.prototype,"startAngle",void 0),h([$e(a,{value:a.zero()})],e.prototype,"sweepAngle",void 0),h([$e(a,{value:a.zero()})],e.prototype,"padAngle",void 0),h([$e(w,{value:null})],e.prototype,"padRadius",void 0),h([$e(w,{value:w.zero()})],e.prototype,"cornerRadius",void 0),h([$e(P,{inherit:!0})],e.prototype,"fill",void 0),h([$e(P,{inherit:!0})],e.prototype,"stroke",void 0),h([$e(w,{inherit:!0})],e.prototype,"strokeWidth",void 0),e}(yi),ur=function(){function t(t,e,i,r,n,o){this._text=t,this._font=e,this._textAlign=i,this._textBaseline=r,this._textOrigin=n,this._textColor=o}return t.prototype.text=function(t){return void 0===t?this._text:this._text===t?this:this.copy(t,this._font,this._textAlign,this._textBaseline,this._textOrigin,this._textColor)},t.prototype.font=function(t){return void 0===t?this._font:(null!==t&&(t=W.fromAny(t)),this._font===t?this:this.copy(this._text,t,this._textAlign,this._textBaseline,this._textOrigin,this._textColor))},t.prototype.textAlign=function(t){return void 0===t?this._textAlign:this._textAlign===t?this:this.copy(this._text,this._font,t,this._textBaseline,this._textOrigin,this._textColor)},t.prototype.textBaseline=function(t){return void 0===t?this._textBaseline:this._textBaseline===t?this:this.copy(this._text,this._font,this._textAlign,t,this._textOrigin,this._textColor)},t.prototype.textOrigin=function(t){return void 0===t?this._textOrigin:(null!==t&&(t=s.PointR2.fromAny(t)),r.Objects.equal(this._textOrigin,t)?this:this.copy(this._text,this._font,this._textAlign,this._textBaseline,t,this._textColor))},t.prototype.textColor=function(t){return void 0===t?this._textColor:(null!==t&&(t=P.fromAny(t)),r.Objects.equal(this._textColor,t)?this:this.copy(this._text,this._font,this._textAlign,this._textBaseline,this._textOrigin,t))},t.prototype.render=function(t,e){t instanceof xe&&this.draw(t.context,e)},t.prototype.draw=function(t,e){this.renderText(t,e)},t.prototype.renderText=function(t,e){t.save(),null!==this._font&&(t.font=this._font.toString()),null!==this._textAlign&&(t.textAlign=this._textAlign),null!==this._textBaseline&&(t.textBaseline=this._textBaseline);var i=this._textOrigin;null===i&&(i=s.PointR2.origin()),null!==this._textColor&&(t.fillStyle=this._textColor.toString()),t.fillText(this._text,i.x,i.y),t.restore()},t.prototype.copy=function(e,i,r,n,o,s){return new t(e,i,r,n,o,s)},t.prototype.toAny=function(){var t={text:this._text};return t.text=this._text,null!==this._font&&(t.font=this._font),null!==this._font&&(t.font=this._font),null!==this._textAlign&&(t.textAlign=this._textAlign),null!==this._textBaseline&&(t.textBaseline=this._textBaseline),null!==this._textOrigin&&(t.textOrigin=this._textOrigin),null!==this._textColor&&(t.textColor=this._textColor),t},t.prototype.equals=function(e){return this===e||e instanceof t&&(this._text===e._text&&r.Objects.equal(this._font,e._font)&&this._textAlign===e._textAlign&&this._textBaseline===e._textBaseline&&r.Objects.equal(this._textOrigin,e._textOrigin)&&r.Objects.equal(this._textColor,e._textColor))},t.prototype.debug=function(t){t=t.write("TextRun").write(46).write("from").write(40).debug(this._text).write(41),null!==this._font&&(t=t.write(46).write("font").write(40).debug(this._font).write(41)),null!==this._textAlign&&(t=t.write(46).write("textAlign").write(40).debug(this._textAlign).write(41)),null!==this._textBaseline&&(t=t.write(46).write("textBaseline").write(40).debug(this._textBaseline).write(41)),null!==this._textOrigin&&(t=t.write(46).write("textOrigin").write(40).debug(this._textOrigin).write(41)),null!==this._textColor&&(t=t.write(46).write("textColor").write(40).debug(this._textColor).write(41))},t.prototype.toString=function(){return e.Format.debug(this)},t.from=function(e,i,r,n,o,a){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null),null!==i&&(i=W.fromAny(i)),null!==o&&(o=s.PointR2.fromAny(o)),null!==a&&(a=P.fromAny(a)),new t(e,i,r,n,o,a)},t.fromAny=function(e){if(e instanceof t)return e;if("string"==typeof e)return t.from(e);if("object"==typeof e&&null!==e)return t.from(e.text,e.font,e.textAlign,e.textBaseline,e.textOrigin,e.textColor);throw new TypeError(""+e)},t}(),lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return new ur(this.text.value,this.font.value,this.textAlign.value,this.textBaseline.value,this.textOrigin.value,this.textColor.value)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return new ur(this.text.state,this.font.state,this.textAlign.state,this.textBaseline.state,this.textOrigin.state,this.textColor.state)},enumerable:!1,configurable:!0}),e.prototype.setState=function(t,e){"string"==typeof t?this.text(t,e):(t instanceof ur&&(t=t.toAny()),void 0!==t.text&&this.text(t.text,e),void 0!==t.font&&this.font(t.font,e),void 0!==t.textAlign&&this.textAlign(t.textAlign,e),void 0!==t.textBaseline&&this.textBaseline(t.textBaseline,e),void 0!==t.textOrigin&&this.textOrigin(t.textOrigin,e),void 0!==t.textColor&&this.textColor(t.textColor,e),void 0!==t.hidden&&this.setHidden(t.hidden),void 0!==t.culled&&this.setCulled(t.culled))},e.prototype.onRender=function(e){t.prototype.onRender.call(this,e);var i=e.renderer;if(i instanceof xe&&!this.isHidden()&&!this.isCulled()){var r=i.context;r.save(),this.renderText(r),r.restore()}},e.prototype.renderText=function(t){var e=this.font.value;void 0!==e&&(t.font=e.toString());var i=this.textAlign.value;void 0!==i&&(t.textAlign=i);var r=this.textBaseline.value;void 0!==r&&(t.textBaseline=r);var n=this.textOrigin.value;void 0===n&&(n=s.PointR2.origin());var o=this.textColor.value;void 0!==o&&(t.fillStyle=o.toString()),t.fillText(this.text.value,n.x,n.y)},e.fromAny=function(t){if(t instanceof e)return t;if("string"==typeof t||"object"==typeof t&&null!==t){var i=new e;return i.setState(t),i}throw new TypeError(""+t)},h([$e(String,{value:""})],e.prototype,"text",void 0),h([$e(W,{inherit:!0})],e.prototype,"font",void 0),h([$e(String,{inherit:!0})],e.prototype,"textAlign",void 0),h([$e(String,{inherit:!0})],e.prototype,"textBaseline",void 0),h([$e(s.PointR2,{inherit:!0})],e.prototype,"textOrigin",void 0),h([$e(P,{inherit:!0})],e.prototype,"textColor",void 0),e}(yi),hr=Math.cos(Math.PI/4),cr=Math.sin(Math.PI/4),dr=function(t,e){var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles||!1,e.cancelable||!1,e.detail),i.points=e.points,i.originalEvent=e.originalEvent||null,i.__proto__=this.__proto__,i};"undefined"!=typeof Event&&(dr.prototype=Event.prototype);var pr=function(){function t(t,e){this.multitouch=t,this.identifier=e,this.path=[],this.t=NaN,this.cx=NaN,this.cy=NaN,this.vx=NaN,this.vy=NaN,this.ax=NaN,this.ay=NaN,this.dx=NaN,this.dy=NaN}return Object.defineProperty(t.prototype,"ghost",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.moveTo=function(t,e,i){for(this.path.push({t:t,cx:e,cy:i});this.path.length>1&&t-this.path[0].t>this.multitouch._hysteresis;)this.path.splice(0,1);this.update()},t.prototype.update=function(){var t=this.path[0],e=this.path[this.path.length-1];if(void 0!==e&&e!==t){var i=e.t-t.t,r=void 0,n=void 0;if(0!==i){var o=(r=(e.cx-t.cx)/i)*r+(n=(e.cy-t.cy)/i)*n,s=this.multitouch._velocityMax;if(s*s<o){var a=Math.sqrt(o);r=r*s/a,n=n*s/a}}else r=0,n=0;this.t=e.t,this.dx=e.cx-this.cx,this.dy=e.cy-this.cy,this.cx=e.cx,this.cy=e.cy,this.vx=r,this.vy=n}else void 0!==t&&(this.t=t.t,this.dx=t.cx-this.cx,this.dy=t.cy-this.cy,this.cx=t.cx,this.cy=t.cy,this.vx=0,this.vy=0)},t}(),fr=function(){function t(t,e,i,r,n,o,s,a,u){this.multitouch=t,this.identifier=e,this.t=i,this.cx=r,this.cy=n,this.vx=o,this.vy=s,this.ax=a,this.ay=u,this.dx=0,this.dy=0}return Object.defineProperty(t.prototype,"ghost",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.translate=function(t,e){this.cx+=t,this.cy+=e},t.prototype.update=function(t){var e=t-this.t;if(0!==e){var i=this.vx+this.ax*e,r=void 0;i<0==this.vx<0?r=this.cx+this.vx*e+this.ax*e*e*.5:(r=this.cx-this.vx*this.vx/(2*this.ax),i=0,this.ax=0);var n=this.vy+this.ay*e,o=void 0;n<0==this.vy<0?o=this.cy+this.vy*e+this.ay*e*e*.5:(o=this.cy-this.vy*this.vy/(2*this.ay),n=0,this.ay=0),this.dx=r-this.cx,this.dy=o-this.cy,this.cx=r,this.cy=o,this.vx=i,this.vy=n,this.t=t}},t}(),vr=function(){function t(){this.onGhostFrame=this.onGhostFrame.bind(this),this._surface=null,this._tracks={},this._trackCount=0,this._ghosts={},this._ghostCount=0,this._ghostFrame=0,this._hysteresis=67,this._acceleration=.00175,this._velocityMax=1.75,this._distanceMin=10}return t.prototype.surface=function(t){var e=this._surface;return void 0===t?e:(null!==e&&this.detach(e),this._surface=t,this)},t.prototype.target=function(){for(var t=this._surface;null!==t;){if(t instanceof ci)return t;t=t.parentView}return null},t.prototype.hysteresis=function(t){return void 0===t?this._hysteresis:(this._hysteresis=t,this)},t.prototype.acceleration=function(t){return void 0===t?this._acceleration:(this._acceleration=t,this)},t.prototype.velocityMax=function(t){return void 0===t?this._velocityMax:(this._velocityMax=t,this)},t.prototype.distanceMin=function(t){return void 0===t?this._distanceMin:(this._distanceMin=t,this)},t.prototype.wheel=function(t){return void 0!==t&&this},t.prototype.points=function(){var t=[];for(var e in this._tracks)t.push(this._tracks[e]);for(var e in this._ghosts)t.push(this._ghosts[e]);return t},t.prototype.interrupt=function(t){0!==this._ghostFrame&&(cancelAnimationFrame(this._ghostFrame),this._ghostFrame=0),0!==this._ghostCount&&(this._ghosts={},this._ghostCount=0,0!==this._trackCount?this.multitouchChange(t):this.multitouchEnd(t))},t.prototype.zoom=function(t,e,i,r){if(0!==i){var n=Date.now(),o=this._acceleration,s=o*hr,a=o*cr,u=this._velocityMax,l=.5*u*hr,h=.5*u*cr,c=4*l*l/s,d=4*h*h/a,p=this._ghosts.zoom0,f=this._ghosts.zoom1;if(void 0!==p&&void 0!==f){var v=Math.abs(f.cx-p.cx)/2,y=Math.abs(f.cy-p.cy)/2,m=n-p.t,w=(i=Math.min(Math.max(-u*m,i),u*m))*v*hr/c,g=i*y*cr/d;s=s*v/c,a=a*y/d,m>0&&(p.t=n,p.cx+=w,p.cy+=g,p.vx=w/m,p.vy=g/m,p.ax=p.vx<0?s:p.vx>0?-s:0,p.ay=p.vy<0?a:p.vy>0?-a:0,p.dx=w,p.dy=g,f.t=n,f.cx-=w,f.cy-=g,f.vx=-w/m,f.vy=-g/m,f.ax=f.vx<0?s:f.vx>0?-s:0,f.ay=f.vy<0?a:f.vy>0?-a:0,f.dx=-w,f.dy=-g)}else this.interrupt(r),this.multitouchStart(r),i<0?(p=new fr(this,"zoom0",n,t-c,e-d,-l,-h,s,a),f=new fr(this,"zoom1",n,t+c,e+d,l,h,-s,-a)):(p=new fr(this,"zoom0",n,t-c,e-d,l,h,-s,-a),f=new fr(this,"zoom1",n,t+c,e+d,-l,-h,s,a)),this._ghosts.zoom0=p,this._ghostCount+=1,this._ghosts.zoom1=f,this._ghostCount+=1;this.multitouchChange(r),0!==this._ghostFrame&&cancelAnimationFrame(this._ghostFrame),this._ghostFrame=requestAnimationFrame(this.onGhostFrame)}},t.prototype.updateVelocity=function(t,e){var i=e[0],r=e[1],n=0;if(void 0!==i&&void 0!==r){n=2;var o=Math.abs(r.cx-i.cx),s=Math.abs(r.cy-i.cy);i instanceof fr&&i.update(t),r instanceof fr&&r.update(t);var a=Math.abs(r.cx-i.cx)/o,u=Math.abs(r.cy-i.cy)/s;i.vx*=a,i.vy*=u,i.ax*=a,i.ay*=u,r.vx*=a,r.vy*=u,r.ax*=a,r.ay*=u}for(;n<e.length;){var l=e[n];l instanceof fr&&l.update(t),n+=1}},t.prototype.spreadVelocity=function(t){for(var e in this._ghosts){var i=this._ghosts[e];t.vx<0==i.vx<0?(t.vx=(t.vx+i.vx)/2,i.vx=(t.vx+i.vx)/2):(t.vx=(t.vx-i.vx)/2,i.vx=(i.vx-t.vx)/2),t.vy<0==i.vy<0?(t.vy=(t.vy+i.vy)/2,i.vy=(t.vy+i.vy)/2):(t.vy=(t.vy-i.vy)/2,i.vy=(i.vy-t.vy)/2)}},t.prototype.coast=function(t){if(0!==t.vx||0!==t.vy){this.spreadVelocity(t);var e=Math.atan2(Math.abs(t.vy),Math.abs(t.vx)),i=this._acceleration,r=(t.vx<0?i:t.vx>0?-i:0)*Math.cos(e),n=(t.vy<0?i:t.vy>0?-i:0)*Math.sin(e);if(0!==r||0!==n){var o=new fr(this,t.identifier,t.t,t.cx,t.cy,t.vx,t.vy,r,n);this._ghosts[o.identifier]=o,this._ghostCount+=1,0===this._ghostFrame&&(this._ghostFrame=requestAnimationFrame(this.onGhostFrame))}}},t.prototype.translate=function(t,e){for(var i in t=t||0,e=e||0,this._ghosts)this._ghosts[i].translate(t,e)},t.prototype.interpolate=function(t){for(var e in this._tracks)this._tracks[e].update();for(var e in this.updateVelocity(t,this.points()),this.multitouchChange(null),this._ghosts){0===(i=this._ghosts[e]).ax&&0===i.ay&&(this._ghostCount-=1)}for(var e in 0===this._trackCount&&0===this._ghostCount?this.multitouchEnd(null):0!==this._ghostCount&&0===this._ghostFrame&&(this._ghostFrame=requestAnimationFrame(this.onGhostFrame)),this._ghosts){var i;0===(i=this._ghosts[e]).ax&&0===i.ay&&delete this._ghosts[e]}},t.prototype.onGhostFrame=function(t){this._ghostFrame=0,this.interpolate(Date.now())},t.prototype.multitouchStart=function(t){var e=new dr("multitouchstart",{bubbles:!0,cancelable:!0,composed:!0,points:this.points(),originalEvent:t});this._surface.dispatchEvent(e)},t.prototype.multitouchChange=function(t){var e=new dr("multitouchchange",{bubbles:!0,cancelable:!0,composed:!0,points:this.points(),originalEvent:t});this._surface.dispatchEvent(e)},t.prototype.multitouchEnd=function(t){var e=new dr("multitouchend",{bubbles:!0,cancelable:!0,composed:!0,points:this.points(),originalEvent:t});this._surface.dispatchEvent(e)},t.prototype.multitouchCancel=function(t){var e=new dr("multitouchcancel",{bubbles:!0,cancelable:!0,composed:!0,points:this.points(),originalEvent:t});this._surface.dispatchEvent(e)},t.prototype.trackStart=function(t,e,i,r){this.interrupt(r);var n=new pr(this,t);if(this._tracks[t]=n,n.moveTo(Date.now(),e,i),this._trackCount+=1,1===this._trackCount){var o=this.target();null!==o&&this.startTracking(o)}this.trackDidStart(n,this._surface,r)},t.prototype.trackMove=function(t,e,i,r){var n=this._tracks[t];void 0!==n&&(n.moveTo(Date.now(),e,i),this.trackDidMove(n,this._surface,r))},t.prototype.trackEnd=function(t,e,i,r){var n=this._tracks[t];if(void 0!==n){if(this._trackCount-=1,n.update(),this.trackDidEnd(n,this._surface,r),0===this._trackCount){var o=this.target();null!==o&&this.endTracking(o)}delete this._tracks[t]}},t.prototype.trackCancel=function(t,e,i,r){var n=this._tracks[t];if(void 0!==n){if(this._trackCount-=1,n.update(),this.trackDidCancel(n,this._surface,r),0===this._trackCount){var o=this.target();null!==o&&this.endTracking(o)}delete this._tracks[t]}},t.prototype.trackDidStart=function(t,e,i){1===this._trackCount&&this.multitouchStart(i)},t.prototype.trackDidMove=function(t,e,i){this.translate(t.dx,t.dy),this.interpolate(Date.now())},t.prototype.trackDidEnd=function(t,e,i){this.coast(t),0===this._trackCount&&0===this._ghostCount&&this.multitouchEnd(i)},t.prototype.trackDidCancel=function(t,e,i){0===this._trackCount&&0===this._ghostCount&&this.multitouchCancel(i)},t.create=function(){return"undefined"!=typeof PointerEvent?new yr:"undefined"!=typeof TouchEvent?new mr:new wr},t}(),yr=function(t){function e(){var e=t.call(this)||this;return e.onPointerDown=e.onPointerDown.bind(e),e.onPointerMove=e.onPointerMove.bind(e),e.onPointerUp=e.onPointerUp.bind(e),e.onPointerCancel=e.onPointerCancel.bind(e),e.onWheel=e.onWheel.bind(e),e._wheel=!0,e}return l(e,t),e.prototype.wheel=function(t){if(void 0===t)return this._wheel;if(this._wheel!==t){this._wheel=t;var e=this.target();null!==e&&(t?e.on("wheel",this.onWheel):e.off("wheel",this.onWheel))}return this},e.prototype.attach=function(t){var e=this.target();null!==e&&(e.on("pointerdown",this.onPointerDown,{passive:!0}),this._wheel&&e.on("wheel",this.onWheel))},e.prototype.detach=function(t){var e=this.target();null!==e&&(e.off("pointerdown",this.onPointerDown),e.off("pointermove",this.onPointerMove),e.off("pointerup",this.onPointerUp),e.off("pointercancel",this.onPointerCancel),e.off("wheel",this.onWheel))},e.prototype.startTracking=function(t){var e=this.target();null!==e&&(e.on("pointermove",this.onPointerMove),e.on("pointerup",this.onPointerUp),e.on("pointercancel",this.onPointerCancel))},e.prototype.endTracking=function(t){var e=this.target();null!==e&&(e.off("pointermove",this.onPointerMove),e.off("pointerup",this.onPointerUp),e.off("pointercancel",this.onPointerCancel))},e.prototype.onPointerDown=function(t){this.trackStart(""+t.pointerId,t.clientX,t.clientY,t);var e=this.target();null!==e&&void 0!==e.node.setPointerCapture&&e.node.setPointerCapture(t.pointerId)},e.prototype.onPointerMove=function(t){this.trackMove(""+t.pointerId,t.clientX,t.clientY,t)},e.prototype.onPointerUp=function(t){this.trackEnd(""+t.pointerId,t.clientX,t.clientY,t);var e=this.target();null!==e&&void 0!==e.node.releasePointerCapture&&e.node.releasePointerCapture(t.pointerId)},e.prototype.onPointerCancel=function(t){this.trackCancel(""+t.pointerId,t.clientX,t.clientY,t);var e=this.target();null!==e&&void 0!==e.node.releasePointerCapture&&e.node.releasePointerCapture(t.pointerId)},e.prototype.onWheel=function(t){t.preventDefault(),this.zoom(t.clientX,t.clientY,t.deltaY,t)},e}(vr),mr=function(t){function e(){var e=t.call(this)||this;return e.onTouchStart=e.onTouchStart.bind(e),e.onTouchMove=e.onTouchMove.bind(e),e.onTouchEnd=e.onTouchEnd.bind(e),e.onTouchCancel=e.onTouchCancel.bind(e),e}return l(e,t),e.prototype.attach=function(t){var e=this.target();null!==e&&e.on("touchstart",this.onTouchStart,{passive:!0})},e.prototype.detach=function(t){var e=this.target();null!==e&&(e.off("touchstart",this.onTouchStart),e.off("touchmove",this.onTouchMove),e.off("touchend",this.onTouchEnd),e.off("touchcancel",this.onTouchCancel))},e.prototype.startTracking=function(t){var e=this.target();null!==e&&(e.on("touchmove",this.onTouchMove,{passive:!0}),e.on("touchend",this.onTouchEnd),e.on("touchcancel",this.onTouchCancel))},e.prototype.endTracking=function(t){var e=this.target();null!==e&&(e.off("touchmove",this.onTouchMove),e.off("touchend",this.onTouchEnd),e.off("touchcancel",this.onTouchCancel))},e.prototype.onTouchStart=function(t){for(var e=0;e<t.changedTouches.length;e+=1){var i=t.changedTouches[e];this.trackStart(""+i.identifier,i.clientX,i.clientY,t)}(t.changedTouches.length>1||this._trackCount>1)&&t.preventDefault()},e.prototype.onTouchMove=function(t){for(var e=0;e<t.changedTouches.length;e+=1){var i=t.changedTouches[e];this.trackMove(""+i.identifier,i.clientX,i.clientY,t)}},e.prototype.onTouchEnd=function(t){for(var e=0;e<t.changedTouches.length;e+=1){var i=t.changedTouches[e];this.trackEnd(""+i.identifier,i.clientX,i.clientY,t)}},e.prototype.onTouchCancel=function(t){for(var e=0;e<t.changedTouches.length;e+=1){var i=t.changedTouches[e];this.trackCancel(""+i.identifier,i.clientX,i.clientY,t)}},e}(vr),wr=function(t){function e(){var e=t.call(this)||this;return e.onMouseDown=e.onMouseDown.bind(e),e.onMouseMove=e.onMouseMove.bind(e),e.onMouseUp=e.onMouseUp.bind(e),e.onWheel=e.onWheel.bind(e),e._wheel=!0,e}return l(e,t),e.prototype.wheel=function(t){if(void 0===t)return this._wheel;if(this._wheel!==t){this._wheel=t;var e=this.target();null!==e&&(t?e.on("wheel",this.onWheel):e.off("wheel",this.onWheel))}return this},e.prototype.attach=function(t){var e=this.target();null!==e&&(e.on("mousedown",this.onMouseDown),this._wheel&&e.on("wheel",this.onWheel))},e.prototype.detach=function(t){var e=this.target();null!==e&&(e.off("mousedown",this.onMouseDown),document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),e.off("wheel",this.onWheel))},e.prototype.startTracking=function(t){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},e.prototype.endTracking=function(t){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp)},e.prototype.onMouseDown=function(t){this.trackStart("mouse",t.clientX,t.clientY,t)},e.prototype.onMouseMove=function(t){this.trackMove("mouse",t.clientX,t.clientY,t)},e.prototype.onMouseUp=function(t){this.trackEnd("mouse",t.clientX,t.clientY,t)},e.prototype.onWheel=function(t){t.preventDefault(),this.zoom(t.clientX,t.clientY,t.deltaY,t)},e}(vr),gr=function(t,e){var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles||!1,e.cancelable||!1,e.detail),i.gesture=e.gesture,i.multitouch=e.multitouch,i.ruler=e.ruler,i.scale=e.scale,i.originalEvent=e.originalEvent||null,i.__proto__=this.__proto__,i};"undefined"!=typeof Event&&(gr.prototype=Event.prototype);var _r=function(){function t(){this.onMultitouchStart=this.onMultitouchStart.bind(this),this.onMultitouchChange=this.onMultitouchChange.bind(this),this.onMultitouchCancel=this.onMultitouchCancel.bind(this),this.onMultitouchEnd=this.onMultitouchEnd.bind(this),this._multitouch=null,this._ruler=null,this._scale=null,this._xMin=null,this._xMax=null,this._zMin=null,this._zMax=null,this._points=[]}return t.prototype.multitouch=function(t){return void 0===t?this._multitouch:(null!==this._multitouch&&this.detach(this._multitouch),this._multitouch=t,this)},t.prototype.hysteresis=function(t){return void 0===t?this._multitouch.hysteresis():(this._multitouch.hysteresis(t),this)},t.prototype.acceleration=function(t){return void 0===t?this._multitouch.acceleration():(this._multitouch.acceleration(t),this)},t.prototype.velocityMax=function(t){return void 0===t?this._multitouch.velocityMax():(this._multitouch.velocityMax(t),this)},t.prototype.distanceMin=function(t){return void 0===t?this._multitouch.distanceMin():(this._multitouch.distanceMin(t),this)},t.prototype.wheel=function(t){return void 0===t?this._multitouch.wheel():(this._multitouch.wheel(t),this)},t.prototype.ruler=function(t){return void 0===t?this._ruler:(this._ruler=t,this)},t.prototype.scale=function(t){if(void 0===t)return this._scale;var e=this._scale;return this._scale=t,null===e&&this.zoomBounds(!0),this},t.prototype.domainMin=function(t){return void 0===t?this._xMin:(this._xMin=t,this)},t.prototype.domainMax=function(t){return void 0===t?this._xMax:(this._xMax=t,this)},t.prototype.domainBounds=function(t,e){return void 0===t?[this._xMin,this._xMax]:void 0===e?(t=t,this._xMin=t[0],this._xMax=t[1],this):(this._xMin=t,this._xMax=e,this)},t.prototype.zoomMin=function(t){return void 0===t?this._zMin:(this._zMin=t,this)},t.prototype.zoomMax=function(t){return void 0===t?this._zMax:(this._zMax=t,this)},t.prototype.zoomBounds=function(t,e){return void 0===t?[this._zMin,this._zMax]:void 0===e?("boolean"==typeof t?this._scale instanceof bt?(this._zMin=1e6,this._zMax=.001):this._scale instanceof Ct&&(this._zMin=864e5,this._zMax=1):(t=t,this._zMin=t[0],this._zMax=t[1]),this):(this._zMin=t,this._zMax=e,this)},t.prototype.attach=function(t){var e=this._multitouch&&this._multitouch.surface();null!==e&&(e.on("multitouchstart",this.onMultitouchStart),e.on("multitouchchange",this.onMultitouchChange),e.on("multitouchcancel",this.onMultitouchCancel),e.on("multitouchend",this.onMultitouchEnd))},t.prototype.detach=function(t){var e=this._multitouch&&this._multitouch.surface();null!==e&&(e.off("multitouchstart",this.onMultitouchStart),e.off("multitouchchange",this.onMultitouchChange),e.off("multitouchcancel",this.onMultitouchCancel),e.off("multitouchend",this.onMultitouchEnd))},t.prototype.createPoint=function(t){var e=this.coords(t.cx,t.cy);return{identifier:t.identifier,domainCoord:e.domainCoord,rangeCoord:e.rangeCoord}},t.prototype.updatePoint=function(t,e){e.rangeCoord=this.rangeCoord(t.cx,t.cy)},t.prototype.updatePoints=function(t){var e=this._points;t:for(var i=0;i<t.length;i+=1){for(var n=t[i],o=0;o<e.length;o+=1){var s=e[o];if(r.Objects.equal(n.identifier,s.identifier)){this.updatePoint(n,s);continue t}}var a=this.createPoint(n);e.push(a)}var u=0;t:for(;u<e.length;){for(a=e[u],i=0;i<t.length;i+=1){n=t[i];if(r.Objects.equal(a.identifier,n.identifier)){u+=1;continue t}}e.splice(u,1)}},t.prototype.clampScale=function(){var t=null!==this._xMin?this._xMin:void 0,e=null!==this._xMax?this._xMax:void 0,i=null!==this._zMin?this._zMin:void 0,r=null!==this._zMax?this._zMax:void 0,n=this._scale;if(this._scale=n.clampDomain(t,e,i,r),this._scale!==n){for(var o=0;o<this._points.length;o+=1){var s=this._points[o];s.domainCoord=this._scale.unscale(s.rangeCoord)}return!0}return!1},t.prototype.rescale=function(){var t=this._points[0],e=this._points[1],i=this._scale;if(void 0!==t&&void 0!==e){var r=t.domainCoord,n=t.rangeCoord,o=e.domainCoord,s=e.rangeCoord;this._scale=i.solveDomain(r,n,o,s),this.clampScale()}else if(void 0!==t){r=t.domainCoord,n=t.rangeCoord;this._scale=i.solveDomain(r,n),this.clampScale()}return!i.equals(this._scale)},t.prototype.onMultitouchStart=function(t){this.scaleStart(t)},t.prototype.onMultitouchChange=function(t){this.updatePoints(t.points),this.rescale()&&this.scaleChange(t)},t.prototype.onMultitouchCancel=function(t){this.scaleCancel(t)},t.prototype.onMultitouchEnd=function(t){this.scaleEnd(t)},t.prototype.scaleStart=function(t){var e=new gr("scalestart",{bubbles:!0,cancelable:!0,composed:!0,gesture:this,multitouch:this._multitouch,ruler:this._ruler,scale:this._scale,originalEvent:t});this._ruler.dispatchEvent(e)},t.prototype.scaleChange=function(t){var e=new gr("scalechange",{bubbles:!0,cancelable:!0,composed:!0,gesture:this,multitouch:this._multitouch,ruler:this._ruler,scale:this._scale,originalEvent:t});this._ruler.dispatchEvent(e)},t.prototype.scaleCancel=function(t){var e=new gr("scalecancel",{bubbles:!0,cancelable:!0,composed:!0,gesture:this,multitouch:this._multitouch,ruler:this._ruler,scale:this._scale,originalEvent:t});this._ruler.dispatchEvent(e),this._points.length=0},t.prototype.scaleEnd=function(t){var e=new gr("scaleend",{bubbles:!0,cancelable:!0,composed:!0,gesture:this,multitouch:this._multitouch,ruler:this._ruler,scale:this._scale,originalEvent:t});this._ruler.dispatchEvent(e),this._points.length=0},t.horizontal=function(){return new br},t.vertical=function(){return new Cr},t}(),br=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.coords=function(t,e){for(var i=this._ruler,r=di.is(i)?i.viewFrame.x:0;;){if(i instanceof ci){var n=t-i.node.getBoundingClientRect().left-r;return{domainCoord:this._scale.unscale(n),rangeCoord:n}}if(null===i)break;i=i.parentView}throw new Error(""+this._ruler)},e.prototype.rangeCoord=function(t,e){for(var i=this._ruler,r=di.is(i)?i.viewFrame.x:0;;){if(i instanceof ci)return t-i.node.getBoundingClientRect().left-r;if(null===i)break;i=i.parentView}throw new Error(""+this._ruler)},e.prototype.isParallel=function(t,e,i,r){return Math.abs(i-t)>=Math.abs(r-e)},e}(_r),Cr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.coords=function(t,e){for(var i=this._ruler,r=di.is(i)?i.viewFrame.y:0;;){if(i instanceof ci){var n=e-i.node.getBoundingClientRect().top-r;return{domainCoord:this._scale.unscale(n),rangeCoord:n}}if(null===i)break;i=i.parentView}throw new Error(""+this._ruler)},e.prototype.rangeCoord=function(t,e){for(var i=this._ruler,r=di.is(i)?i.viewFrame.y:0;;){if(i instanceof ci)return e-i.node.getBoundingClientRect().top-r;if(null===i)break;i=i.parentView}throw new Error(""+this._ruler)},e.prototype.isParallel=function(t,e,i,r){return Math.abs(r-e)>=Math.abs(i-t)},e}(_r),xr=function(t,e){this.id=t,this.pointerType=e,this.t0=performance.now(),this.view=void 0},Vr=function(){function t(t,e,i,r,n){this.id=t,this.pointerType=e,this.defaultPrevented=!1,this.holdTimer=0,this.holdDelay=400,this.buttons=i,this.x0=r,this.y0=n,this.t0=performance.now(),this.dx=0,this.dy=0,this.dt=0,this.x=r,this.y=n,this.t=this.t0,this.view=void 0}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.setHoldTimer=function(t){0!==this.holdDelay&&(this.clearHoldTimer(),this.holdTimer=setTimeout(t,this.holdDelay))},t.prototype.clearHoldTimer=function(){0!==this.holdTimer&&(clearTimeout(this.holdTimer),this.holdTimer=0)},t}(),Sr=function(t){function e(e){var i=t.call(this,e)||this;return i._hovers={},i._hoverCount=0,i._tracks={},i._trackCount=0,i}return l(e,t),Object.defineProperty(e.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hovers",{get:function(){return this._hovers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tracks",{get:function(){return this._tracks},enumerable:!1,configurable:!0}),e.prototype.activate=function(t){this.willActivate(t),this.onActivate(t),this.didActivate(t)},e.prototype.willActivate=function(t){this.willObserve((function(e){void 0!==e.viewWillActivate&&e.viewWillActivate(t,this)}))},e.prototype.onActivate=function(t){},e.prototype.didActivate=function(t){this.didObserve((function(e){void 0!==e.viewDidActivate&&e.viewDidActivate(t,this)}))},e.prototype.onMount=function(){t.prototype.onMount.call(this),this.attachNode(this._node)},e.prototype.onUnmount=function(){this._hovers={},this._hoverCount=0,this._tracks={},this._trackCount=0,this.detachNode(this._node),t.prototype.onUnmount.call(this)},e.prototype.attachNode=function(t){},e.prototype.detachNode=function(t){},e.prototype.startHovering=function(){this.willStartHovering(),this.onStartHovering(),this.didStartHovering()},e.prototype.willStartHovering=function(){this.willObserve((function(t){void 0!==t.viewWillStartHovering&&t.viewWillStartHovering(this)}))},e.prototype.onStartHovering=function(){},e.prototype.didStartHovering=function(){this.didObserve((function(t){void 0!==t.viewDidStartHovering&&t.viewDidStartHovering(this)}))},e.prototype.stopHovering=function(){this.willStopHovering(),this.onStopHovering(),this.didStopHovering()},e.prototype.willStopHovering=function(){this.willObserve((function(t){void 0!==t.viewWillStopHovering&&t.viewWillStopHovering(this)}))},e.prototype.onStopHovering=function(){},e.prototype.didStopHovering=function(){this.didObserve((function(t){void 0!==t.viewDidStopHovering&&t.viewDidStopHovering(this)}))},e.prototype.createHover=function(t,e){return new xr(t,e)},e.prototype.beginHover=function(t,e,i){var r=this._hovers[t];return void 0===r&&(r=this.createHover(t,e),this.willBeginHover(r,i),this._hovers[t]=r,this.onBeginHover(r,i),this._hoverCount+=1,1===this._hoverCount&&this.startHovering(),this.didBeginHover(r,i)),r},e.prototype.willBeginHover=function(t,e){this.willObserve((function(i){void 0!==i.viewWillBeginHover&&i.viewWillBeginHover(t,e,this)}))},e.prototype.onBeginHover=function(t,e){},e.prototype.didBeginHover=function(t,e){this.didObserve((function(i){void 0!==i.viewDidBeginHover&&i.viewDidBeginHover(t,e,this)}))},e.prototype.endHover=function(t,e){var i=this._hovers[t];return void 0!==i?(this.willEndHover(i,e),delete this._hovers[t],this._hoverCount-=1,this.onEndHover(i,e),0===this._hoverCount&&this.stopHovering(),this.didEndHover(i,e),i):null},e.prototype.willEndHover=function(t,e){this.willObserve((function(i){void 0!==i.viewWillEndHover&&i.viewWillEndHover(t,e,this)}))},e.prototype.onEndHover=function(t,e){},e.prototype.didEndHover=function(t,e){this.didObserve((function(i){void 0!==i.viewDidEndHover&&i.viewDidEndHover(t,e,this)}))},e.prototype.startTracking=function(){this.willStartTracking(),this.onStartTracking(),this.didStartTracking()},e.prototype.willStartTracking=function(){this.willObserve((function(t){void 0!==t.viewWillStartTracking&&t.viewWillStartTracking(this)}))},e.prototype.onStartTracking=function(){},e.prototype.didStartTracking=function(){this.didObserve((function(t){void 0!==t.viewDidStartTracking&&t.viewDidStartTracking(this)}))},e.prototype.stopTracking=function(){this.willStopTracking(),this.onStopTracking(),this.didStopTracking()},e.prototype.willStopTracking=function(){this.willObserve((function(t){void 0!==t.viewWillStopTracking&&t.viewWillStopTracking(this)}))},e.prototype.onStopTracking=function(){},e.prototype.didStopTracking=function(){this.didObserve((function(t){void 0!==t.viewDidStopTracking&&t.viewDidStopTracking(this)}))},e.prototype.createTrack=function(t,e,i,r,n){return new Vr(t,e,i,r,n)},e.prototype.beginTrack=function(t,e,i,r,n,o){var s=this._tracks[t];return void 0===s&&(s=this.createTrack(t,e,i,r,n),this.willBeginTrack(s,o),this._tracks[t]=s,this.onBeginTrack(s,o),this._trackCount+=1,s.setHoldTimer(this.holdTrack.bind(this,t)),1===this._trackCount&&this.startTracking(),this.didBeginTrack(s,o)),s},e.prototype.willBeginTrack=function(t,e){this.willObserve((function(i){void 0!==i.viewWillBeginTrack&&i.viewWillBeginTrack(t,e,this)}))},e.prototype.onBeginTrack=function(t,e){},e.prototype.didBeginTrack=function(t,e){this.didObserve((function(i){void 0!==i.viewDidBeginTrack&&i.viewDidBeginTrack(t,e,this)}))},e.prototype.holdTrack=function(t){var e=this._tracks[t];if(void 0!==e){var i=performance.now();return this.willHoldTrack(e),e.dt=i-e.t0,e.t=i,this.onHoldTrack(e),this.didHoldTrack(e),e}return null},e.prototype.willHoldTrack=function(t){this.willObserve((function(e){void 0!==e.viewWillHoldTrack&&e.viewWillHoldTrack(t,this)}))},e.prototype.onHoldTrack=function(t){},e.prototype.didHoldTrack=function(t){this.didObserve((function(e){void 0!==e.viewDidHoldTrack&&e.viewDidHoldTrack(t,this)}))},e.prototype.moveTrack=function(t,e,i,r){var n=this._tracks[t];if(void 0!==n){var o=performance.now();return this.willMoveTrack(n,r),n.dx=e-n.x0,n.dy=i-n.y0,n.dt=o-n.t0,n.x=e,n.y=i,n.t=o,this.onMoveTrack(n,r),this.didMoveTrack(n,r),n}return null},e.prototype.willMoveTrack=function(t,e){this.willObserve((function(i){void 0!==i.viewWillMoveTrack&&i.viewWillMoveTrack(t,e,this)}))},e.prototype.onMoveTrack=function(t,e){"mouse"!==t.pointerType&&t.dt<100&&t.dx*t.dx+t.dy*t.dy>100&&this.cancelTrack(t.id,t.x,t.y,e)},e.prototype.didMoveTrack=function(t,e){this.didObserve((function(i){void 0!==i.viewDidMoveTrack&&i.viewDidMoveTrack(t,e,this)}))},e.prototype.endTrack=function(t,e,i,r){var n=this._tracks[t];return void 0!==n?(this.willEndTrack(n,r),delete this._tracks[t],this._trackCount-=1,this.onEndTrack(n,r),n.clearHoldTimer(),0===this._trackCount&&this.stopTracking(),this.didEndTrack(n,r),n):null},e.prototype.willEndTrack=function(t,e){this.willObserve((function(i){void 0!==i.viewWillEndTrack&&i.viewWillEndTrack(t,e,this)}))},e.prototype.onEndTrack=function(t,e){},e.prototype.didEndTrack=function(t,e){this.didObserve((function(i){void 0!==i.viewDidEndTrack&&i.viewDidEndTrack(t,e,this)}))},e.prototype.cancelTrack=function(t,e,i,r){var n=this._tracks[t];return void 0!==n?(this.willCancelTrack(n,r),delete this._tracks[t],this._trackCount-=1,this.onCancelTrack(n,r),n.clearHoldTimer(),0===this._trackCount&&this.stopTracking(),this.didCancelTrack(n,r),n):null},e.prototype.willCancelTrack=function(t,e){this.willObserve((function(i){void 0!==i.viewWillCancelTrack&&i.viewWillCancelTrack(t,e,this)}))},e.prototype.onCancelTrack=function(t,e){},e.prototype.didCancelTrack=function(t,e){this.didObserve((function(i){void 0!==i.viewDidCancelTrack&&i.viewDidCancelTrack(t,e,this)}))},e}(Qi),Ar=function(t){function e(e){var i=t.call(this,e)||this;return i.onPointerEnter=i.onPointerEnter.bind(i),i.onPointerLeave=i.onPointerLeave.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.onPointerUp=i.onPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.onDocumentLeave=i.onDocumentLeave.bind(i),i}return l(e,t),e.prototype.attachNode=function(t){t.addEventListener("pointerenter",this.onPointerEnter),t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerdown",this.onPointerDown,{passive:!0})},e.prototype.detachNode=function(t){t.removeEventListener("pointerenter",this.onPointerEnter),t.removeEventListener("pointerleave",this.onPointerLeave),t.removeEventListener("pointerdown",this.onPointerDown),document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onDocumentLeave)},e.prototype.onStartTracking=function(){document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointercancel",this.onPointerCancel),document.body.addEventListener("pointerleave",this.onDocumentLeave)},e.prototype.onStopTracking=function(){document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointercancel",this.onPointerCancel),document.body.removeEventListener("pointerleave",this.onDocumentLeave)},e.prototype.onPointerEnter=function(t){if("mouse"===t.pointerType&&0===t.buttons){var i=""+t.pointerId;if(void 0===this._tracks[i]){var r=e.pointerType(t.pointerType);this.beginHover(i,r,t)}}},e.prototype.onPointerLeave=function(t){if("mouse"===t.pointerType){var e=""+t.pointerId;void 0===this._tracks[e]&&this.endHover(e,t)}},e.prototype.onPointerDown=function(t){var i=""+t.pointerId,r=e.pointerType(t.pointerType);this.beginTrack(i,r,t.buttons,t.clientX,t.clientY,t),"mouse"===t.pointerType&&0!==t.button&&this.cancelTrack(i,t.clientX,t.clientY,t)},e.prototype.onPointerMove=function(t){var e=""+t.pointerId;this.moveTrack(e,t.clientX,t.clientY,t)},e.prototype.onPointerUp=function(t){var e=""+t.pointerId,i=this.endTrack(e,t.clientX,t.clientY,t);null===i||i.defaultPrevented||0!==t.button||this.activate(t),this.endHover(e,t)},e.prototype.onPointerCancel=function(t){var e=""+t.pointerId;this.cancelTrack(e,t.clientX,t.clientY,t),this.endHover(e,t)},e.prototype.onDocumentLeave=function(t){var e=""+t.pointerId;this.cancelTrack(e,t.clientX,t.clientY,t),this.endHover(e,t)},e.pointerType=function(t){return"mouse"===t||"touch"===t||"pen"===t?t:"unknown"},e}(Sr),Pr=function(t){function e(e){var i=t.call(this,e)||this;return i.onTouchStart=i.onTouchStart.bind(i),i.onTouchMove=i.onTouchMove.bind(i),i.onTouchEnd=i.onTouchEnd.bind(i),i.onTouchCancel=i.onTouchCancel.bind(i),i}return l(e,t),e.prototype.attachNode=function(t){t.addEventListener("touchstart",this.onTouchStart,{passive:!0}),t.addEventListener("touchmove",this.onTouchMove),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchcancel",this.onTouchCancel)},e.prototype.detachNode=function(t){t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel)},e.prototype.onStartTracking=function(){this.on("touchmove",this.onTouchMove),this.on("touchend",this.onTouchEnd),this.on("touchcancel",this.onTouchCancel)},e.prototype.onStopTracking=function(){this.off("touchmove",this.onTouchMove),this.off("touchend",this.onTouchEnd),this.off("touchcancel",this.onTouchCancel)},e.prototype.onTouchStart=function(t){for(var e=t.targetTouches,i=0;i<e.length;i+=1){var r=e[i],n=""+r.identifier;this.beginTrack(n,"touch",0,r.clientX,r.clientY,t)}},e.prototype.onTouchMove=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var r=e[i],n=""+r.identifier;this.moveTrack(n,r.clientX,r.clientY,t)}},e.prototype.onTouchEnd=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var r=e[i],n=""+r.identifier,o=this.endTrack(n,r.clientX,r.clientY,t);null===o||o.defaultPrevented||this.activate(t),this.endHover(n,t)}},e.prototype.onTouchCancel=function(t){for(var e=t.changedTouches,i=0;i<e.length;i+=1){var r=e[i],n=""+r.identifier;this.cancelTrack(n,r.clientX,r.clientY,t),this.endHover(n,t)}},e}(Sr),Mr=function(t){function e(e){var i=t.call(this,e)||this;return i.onMouseEnter=i.onMouseEnter.bind(i),i.onMouseLeave=i.onMouseLeave.bind(i),i.onMouseDown=i.onMouseDown.bind(i),i.onMouseMove=i.onMouseMove.bind(i),i.onMouseUp=i.onMouseUp.bind(i),i.onDocumentLeave=i.onDocumentLeave.bind(i),i}return l(e,t),e.prototype.attachNode=function(t){t.addEventListener("mouseenter",this.onMouseEnter),t.addEventListener("mouseleave",this.onMouseLeave),t.addEventListener("mousedown",this.onMouseDown)},e.prototype.detachNode=function(t){t.removeEventListener("mouseenter",this.onMouseEnter),t.removeEventListener("mouseleave",this.onMouseLeave),t.removeEventListener("mousedown",this.onMouseDown),document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onDocumentLeave)},e.prototype.onStartTracking=function(){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onDocumentLeave)},e.prototype.onStopTracking=function(){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onDocumentLeave)},e.prototype.onMouseEnter=function(t){0===t.buttons&&void 0===this._tracks.mouse&&this.beginHover("mouse","mouse",t)},e.prototype.onMouseLeave=function(t){void 0===this._tracks.mouse&&this.endHover("mouse",t)},e.prototype.onMouseDown=function(t){this.beginTrack("mouse","mouse",t.buttons||0,t.clientX,t.clientY,t),0!==t.button&&this.cancelTrack("mouse",t.clientX,t.clientY,t)},e.prototype.onMouseMove=function(t){this.moveTrack("mouse",t.clientX,t.clientY,t)},e.prototype.onMouseUp=function(t){var e=this.endTrack("mouse",t.clientX,t.clientY,t);null===e||e.defaultPrevented||0!==t.button||this.activate(t),this.endHover("mouse",t)},e.prototype.onDocumentLeave=function(t){this.cancelTrack("mouse",t.clientX,t.clientY,t),this.endHover("mouse",t)},e}(Sr),Dr="undefined"!=typeof PointerEvent?Ar:"undefined"!=typeof TouchEvent?Pr:Mr,Er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.viewWillActivate=function(t,e){},e.prototype.viewDidActivate=function(t,e){},e.prototype.viewWillStartHovering=function(t){},e.prototype.viewDidStartHovering=function(t){},e.prototype.viewWillStopHovering=function(t){},e.prototype.viewDidStopHovering=function(t){},e.prototype.viewWillBeginHover=function(t,e,i){},e.prototype.viewDidBeginHover=function(t,e,i){},e.prototype.viewWillEndHover=function(t,e,i){},e.prototype.viewDidEndHover=function(t,e,i){},e.prototype.viewWillStartTracking=function(t){},e.prototype.viewDidStartTracking=function(t){},e.prototype.viewWillStopTracking=function(t){},e.prototype.viewDidStopTracking=function(t){},e.prototype.viewWillBeginTrack=function(t,e,i){},e.prototype.viewDidBeginTrack=function(t,e,i){},e.prototype.viewWillHoldTrack=function(t,e){},e.prototype.viewDidHoldTrack=function(t,e){},e.prototype.viewWillMoveTrack=function(t,e,i){},e.prototype.viewDidMoveTrack=function(t,e,i){},e.prototype.viewWillEndTrack=function(t,e,i){},e.prototype.viewDidEndTrack=function(t,e,i){},e.prototype.viewWillCancelTrack=function(t,e,i){},e.prototype.viewDidCancelTrack=function(t,e,i){},e}(Zi);t.AffineTransform=it,t.AffineTransformInterpolator=yt,t.AffineTransformParser=ut,t.Angle=a,t.AngleForm=m,t.AngleInterpolator=y,t.AngleMemberAnimator=oi,t.AngleParser=v,t.AnimatedView=Je,t.Animator=ie,t.AnyMemberAnimator=ti,t.Arc=sr,t.ArcView=ar,t.AtomicViewScope=Ze,t.AttributeAnimator=Si,t.AttributeString=ye,t.BaseGestureView=Sr,t.BooleanAttributeAnimator=Pi,t.BooleanMemberAnimator=ri,t.BoxShadow=Y,t.BoxShadowForm=K,t.BoxShadowParser=G,t.BoxShadowStyleAnimator=zi,t.CanvasRenderer=xe,t.CanvasView=Ji,t.CanvasViewController=$i,t.ChildAnimator=ne,t.Color=P,t.ColorAttributeAnimator=Ei,t.ColorChannel=E,t.ColorChannelParser=R,t.ColorForm=L,t.ColorInterpolator=N,t.ColorMemberAnimator=ai,t.ColorOrStringAttributeAnimator=Fi,t.ColorOrStringStyleAnimator=Xi,t.ColorParser=k,t.ColorStyleAnimator=Li,t.CompositedView=wi,t.Constrain=Re,t.ConstrainBinding=Ie,t.ConstrainConstant=ke,t.ConstrainProduct=Fe,t.ConstrainSum=Te,t.ConstrainTerm=Oe,t.ConstrainVariable=Ne,t.Constraint=Le,t.ConstraintDummy=Me,t.ConstraintError=De,t.ConstraintInvalid=Ee,t.ConstraintMap=Se,t.ConstraintSlack=Pe,t.ConstraintSolver=qe,t.ConstraintStrength=Ue,t.ConstraintSymbol=Ae,t.ContinuousScale=_t,t.DegAngle=c,t.Ease=Zt,t.EaseForm=Jt,t.ElementView=ci,t.ElementViewController=Yi,t.EmLength=_,t.FillView=pi,t.Font=W,t.FontFamily=z,t.FontFamilyParser=B,t.FontFamilyStyleAnimator=qi,t.FontForm=X,t.FontMemberAnimator=ui,t.FontParser=H,t.FontSize=j,t.FrameAnimator=re,t.GestureView=Dr,t.GestureViewController=Er,t.GestureViewHover=xr,t.GestureViewTrack=Vr,t.GradAngle=p,t.GraphicsView=yi,t.GraphicsViewController=mi,t.HexColorParser=T,t.HorizontalScaleGesture=br,t.HslColor=D,t.HslColorInterpolator=I,t.HslColorParser=F,t.HtmlView=Qi,t.HtmlViewController=Zi,t.IdentityTransform=Z,t.LayoutAnchor=Ye,t.LayoutManager=He,t.LayoutScope=We,t.LayoutSolver=Xe,t.LayoutView=Ge,t.Length=w,t.LengthAttributeAnimator=Di,t.LengthForm=A,t.LengthInterpolator=S,t.LengthMemberAnimator=si,t.LengthOrStringAttributeAnimator=Oi,t.LengthOrStringStyleAnimator=Hi,t.LengthParser=V,t.LengthStyleAnimator=Ii,t.LineHeight=q,t.LineHeightStyleAnimator=ji,t.LinearScale=bt,t.LinearScaleInterpolator=Vt,t.MemberAnimator=$e,t.Modal={is:function(t){if("object"==typeof t&&null!==t){var e=t;return void 0!==e.modalState&&void 0!==e.modalView&&"function"==typeof e.showModal&&"function"==typeof e.hideModal}return!1}},t.MouseGestureView=Mr,t.Multitouch=vr,t.MultitouchEvent=dr,t.MultitouchGhost=fr,t.MultitouchMouse=wr,t.MultitouchPointer=yr,t.MultitouchTouch=mr,t.MultitouchTrack=pr,t.NodeView=hi,t.NodeViewController=bi,t.NumberAttributeAnimator=Mi,t.NumberMemberAnimator=ni,t.NumberOrStringAttributeAnimator=Ti,t.NumberOrStringStyleAnimator=Wi,t.NumberStyleAnimator=Ui,t.ObjectMemberAnimator=ei,t.PathContext=be,t.PathRenderer=Ce,t.PctLength=C,t.PointerGestureView=Ar,t.PropertyAnimator=ue,t.PxLength=g,t.RadAngle=d,t.RasterView=gi,t.RasterViewController=_i,t.Rect=ir,t.RectView=rr,t.RemLength=b,t.RenderedView=di,t.Renderer=we,t.RgbColor=M,t.RgbColorInterpolator=U,t.RgbColorParser=O,t.RootView=Ke,t.RotateTransform=tt,t.RotateTransformInterpolator=ft,t.RotateTransformParser=st,t.Scale=gt,t.ScaleGesture=_r,t.ScaleGestureEvent=gr,t.ScaleInterpolator=xt,t.ScaleTransform=$,t.ScaleTransformInterpolator=pt,t.ScaleTransformParser=ot,t.SkewTransform=et,t.SkewTransformInterpolator=vt,t.SkewTransformParser=at,t.StringAttributeAnimator=Ai,t.StringMemberAnimator=ii,t.StringStyleAnimator=Ni,t.StrokeView=fi,t.StyleAnimator=ki,t.StyleInterpolatorForm=pe,t.StyleScaleForm=fe,t.StyleString=me,t.StyleTransitionForm=ve,t.StyleValue=le,t.StyleValueForm=de,t.StyleValueParser=ce,t.SvgView=Gi,t.SvgViewController=Ki,t.TextAnimator=Ci,t.TextRun=ur,t.TextRunView=lr,t.TextView=xi,t.TextViewController=Vi,t.TimeScale=Ct,t.TimeScaleInterpolator=St,t.TouchGestureView=Pr,t.Transform=Q,t.TransformAttributeAnimator=Ri,t.TransformForm=wt,t.TransformInterpolator=ct,t.TransformList=rt,t.TransformListInterpolator=mt,t.TransformListParser=lt,t.TransformMemberAnimator=li,t.TransformParser=ht,t.TransformStyleAnimator=Bi,t.Transition=ee,t.TransitionObserver=te,t.TranslateTransform=J,t.TranslateTransformInterpolator=dt,t.TranslateTransformParser=nt,t.TurnAngle=f,t.TweenAnimator=oe,t.TweenChildAnimator=ae,t.TweenFrameAnimator=se,t.TypesetView=vi,t.UiView=tr,t.UiViewController=er,t.UnitlessLength=x,t.VerticalScaleGesture=Cr,t.View=ze,t.ViewController=Be,t.ViewScope=Qe,t.WebGLRenderer=Ve,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=swim-ui.min.js.map