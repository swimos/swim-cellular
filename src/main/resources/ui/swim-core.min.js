// swim-core-3.11.0-dev.20200517; copyright 2015-2022 Swim.inc
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).swim=t.swim||{})}(this,(function(t){"use strict";var e;void 0===String.prototype.codePointAt&&Object.defineProperty(String.prototype,"codePointAt",{value:function(t){var e=this.length;if((t=t?Number(t):0)!=t&&(t=0),t>=0&&t<e){var r=this.charCodeAt(t);if(r<=55295||r>=57344)return r;if(r<=56319&&t+1<e){var n=this.charCodeAt(t+1);if(n>=56320&&n<=57343)return 65536+((1023&r)<<10+n&1023)}}},configurable:!0,writable:!0}),void 0===String.prototype.offsetByCodePoints&&Object.defineProperty(String.prototype,"offsetByCodePoints",{value:function(t,e){if(e>0)for(var r=this.length;e>0&&t<r;){if((i=this.charCodeAt(t))<=55295||i>=57344)t+=1;else if(i<=56319&&t+1<r){t+=(n=this.charCodeAt(t+1))>=56320&&n<=57343?2:1}else t+=1;e-=1}else if(e<0)for(;e<0&&t>0;){var n;if((n=this.charCodeAt(t-1))<=55295||n>=57344)t-=1;else if(n>=56320&&n<=57343&&t-1>0){var i;t-=(i=this.charCodeAt(t-2))>=55296&&i<=57343?2:1}else t-=1;e-=1}return t},configurable:!0,writable:!0}),(e=t.ByteOrder||(t.ByteOrder={})).BigEndian="BE",e.LittleEndian="LE";var r=function(){var t=new ArrayBuffer(2);new Uint16Array(t)[0]=65279;var e=new Uint8Array(t);if(254===e[0]&&255===e[1])return"BE";if(255===e[0]&&254===e[1])return"LE";throw new Error}(),n="undefined"!=typeof window?window.crypto||window.msCrypto:void 0;function i(t){n.getRandomValues(t)}function o(t){if(t instanceof Int8Array)for(var e=0;e<t.length;e+=1)t[e]=128-Math.round(256*Math.random());else if(t instanceof Uint8Array)for(e=0;e<t.length;e+=1)t[e]=Math.round(256*Math.random());else if(t instanceof Int16Array)for(e=0;e<t.length;e+=1)t[e]=32768-Math.round(65536*Math.random());else if(t instanceof Uint16Array)for(e=0;e<t.length;e+=1)t[e]=Math.round(65536*Math.random());else if(t instanceof Int32Array)for(e=0;e<t.length;e+=1)t[e]=2147483648-Math.round(4294967296*Math.random());else{if(!(t instanceof Uint32Array))throw new TypeError(""+t);for(e=0;e<t.length;e+=1)t[e]=Math.round(4294967296*Math.random())}}var s=function(){function t(){}return t.fillBytes=void 0!==n?i:o,t}(),u=new ArrayBuffer(8),a=new Float64Array(u),p=new Int32Array(u);function h(t,e){return t<<e|t>>>32-e}var f=function(){function t(){}return t.seed=function(e){return"object"==typeof e&&null!==e&&(e=e.constructor&&"string"==typeof e.constructor.name?e.constructor.name:e.toString()),t.hash(e)},t.hash=function(e){if(e instanceof Uint8Array||"string"==typeof e)return t.mash(t.mix(0,e));if("number"==typeof e)return~~e===e?~~e:(a[0]=e,p[0]^p[1]);if("boolean"==typeof e)return e?3:2;if(null===e)return 1;if(void 0===e)return 0;throw new TypeError(""+e)},t.mixUint8ArrayBE=function(e,r){for(var n=0,i=r.length;n+3<i;){var o=(255&r[n])<<24|(255&r[n+1])<<16|(255&r[n+2])<<8|255&r[n+3];e=t.mix(e,o),n+=4}if(n<i){o=(255&r[n])<<24;n+1<i&&(o|=(255&r[n+1])<<16,n+2<i&&(o|=(255&r[n+2])<<8)),e^=o=461845907*(65535&(o=h(o=3432918353*(65535&o)+((3432918353*(o>>>16)&65535)<<16)&4294967295,15)))+((461845907*(o>>>16)&65535)<<16)&4294967295}return e^i},t.mixUInt8ArrayLE=function(e,r){for(var n=0,i=r.length;n+3<i;){var o=255&r[n]|(255&r[n+1])<<8|(255&r[n+2])<<16|(255&r[n+3])<<24;e=t.mix(e,o),n+=4}if(n<i){o=255&r[n];n+1<i&&(o|=(255&r[n+1])<<8,n+2<i&&(o|=(255&r[n+2])<<16)),e^=o=461845907*(65535&(o=h(o=3432918353*(65535&o)+((3432918353*(o>>>16)&65535)<<16)&4294967295,15)))+((461845907*(o>>>16)&65535)<<16)&4294967295}return e^i},t.mixStringBE=function(e,r){for(var n=0,i=32,o=0,s=r.length,u=0;o<s;){var a=r.codePointAt(o);void 0===a&&(a=r.charCodeAt(o)),a>=0&&a<=127?(n|=a<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),u+=1):a>=128&&a<=2047?(n|=(192|a>>>6)<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),n|=(128|63&a)<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),u+=2):a>=2048&&a<=65535||a>=57344&&a<=65535?(n|=(224|a>>>12)<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),n|=(128|a>>>6&63)<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),n|=(128|63&a)<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),u+=3):a>=65536&&a<=1114111?(n|=(240|a>>>18)<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),n|=(128|a>>>12&63)<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),n|=(128|a>>>6&63)<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),n|=(128|63&a)<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),u+=4):(n|=239<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),n|=191<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),n|=189<<(i-=8),0===i&&(e=t.mix(e,n),n=0,i=32),u+=3),o=r.offsetByCodePoints(o,1)}return 32!==i&&(e^=n=461845907*(65535&(n=h(n=3432918353*(65535&n)+((3432918353*(n>>>16)&65535)<<16)&4294967295,15)))+((461845907*(n>>>16)&65535)<<16)&4294967295),e^u},t.mixStringLE=function(e,r){for(var n=0,i=0,o=0,s=r.length,u=0;o<s;){var a=r.codePointAt(o);void 0===a&&(a=r.charCodeAt(o)),a>=0&&a<=127?(n|=a<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),u+=1):a>=128&&a<=2047?(n|=(192|a>>>6)<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),n|=(128|63&a)<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),u+=2):a>=2048&&a<=65535||a>=57344&&a<=65535?(n|=(224|a>>>12)<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),n|=(128|a>>>6&63)<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),n|=(128|63&a)<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),u+=3):a>=65536&&a<=1114111?(n|=(240|a>>>18)<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),n|=(128|a>>>12&63)<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),n|=(128|a>>>6&63)<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),n|=(128|63&a)<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),u+=4):(n|=239<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),n|=191<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),n|=189<<i,32===(i+=8)&&(e=t.mix(e,n),n=0,i=0),u+=3),o=r.offsetByCodePoints(o,1)}return 32!==i&&(e^=n=461845907*(65535&(n=h(n=3432918353*(65535&n)+((3432918353*(n>>>16)&65535)<<16)&4294967295,15)))+((461845907*(n>>>16)&65535)<<16)&4294967295),e^u},t.mix=function(e,n){if("number"==typeof n)return n=h(n=3432918353*(65535&n)+((3432918353*(n>>>16)&65535)<<16)&4294967295,15),e=27492+(65535&(e=5*(65535&(e=h(e^=n=461845907*(65535&n)+((461845907*(n>>>16)&65535)<<16)&4294967295,13)))+((5*(e>>>16)&65535)<<16)&4294967295))+((58964+(e>>>16)&65535)<<16);if("string"==typeof n){if("BE"===r)return t.mixStringBE(e,n);if("LE"===r)return t.mixStringLE(e,n)}else if(n instanceof Uint8Array){if("BE"===r)return t.mixUint8ArrayBE(e,n);if("LE"===r)return t.mixUInt8ArrayLE(e,n)}throw new TypeError(""+n)},t.mash=function(t){return t=2246822507*(65535&(t^=t>>>16))+((2246822507*(t>>>16)&65535)<<16)&4294967295,t=3266489909*(65535&(t^=t>>>13))+((3266489909*(t>>>16)&65535)<<16)&4294967295,(t^=t>>>16)>>>0},t}(),c=function(){function t(){}return t.compare=function(e,r){if(e instanceof Date&&(e=e.getTime()),r instanceof Date&&(r=r.getTime()),void 0===e)return void 0===r?0:1;if(null===e)return void 0===r?-1:null===r?0:1;if("number"==typeof e)return null==r?-1:"number"==typeof r?e<r?-1:e>r?1:isNaN(r)?isNaN(e)?0:-1:isNaN(e)?1:0:1;if("string"==typeof e)return null==r||"number"==typeof r?-1:"string"==typeof r?e<r?-1:e>r?1:0:1;if("object"==typeof e&&"function"==typeof e.compareTo){var n=e.compareTo(r);return n<0?-1:n>0?1:0}return Array.isArray(e)?null==r||"number"==typeof r||"string"==typeof r?-1:Array.isArray(r)?t.compareArray(e,r):1:null==r||"number"==typeof r||"string"==typeof r||Array.isArray(r)?-1:t.compareObject(e,r)},t.compareArray=function(e,r){for(var n=e.length,i=r.length,o=0,s=0,u=Math.min(n,i);s<u&&0===o;s+=1)o=t.compare(e[s],r[s]);return 0!==o?o:n>i?1:n<i?-1:0},t.compareObject=function(e,r){for(var n=Object.keys(e),i=Object.keys(r),o=n.length,s=i.length,u=Math.min(o,s),a=0,p=0;p<u&&0===a;p+=1){var h=n[p],f=i[p];0===(a=t.compare(h,f))&&(a=t.compare(e[h],r[f]))}return 0!==a?a:o>s?1:o<s?-1:0},t.equal=function(e,r){if(e instanceof Date&&(e=e.getTime()),r instanceof Date&&(r=r.getTime()),e===r)return!0;if("number"==typeof e){if("number"==typeof r)return isNaN(e)&&isNaN(r)}else{if("object"==typeof e&&null!==e&&"function"==typeof e.equals)return e.equals(r);if(Array.isArray(e)){if(Array.isArray(r))return t.equalArray(e,r)}else if("object"==typeof e&&null!==e&&"object"==typeof r&&null!==r)return t.equalObject(e,r)}return!1},t.equalArray=function(e,r){var n=e.length;if(n!==r.length)return!1;for(var i=0;i<n;i+=1)if(!t.equal(e[i],r[i]))return!1;return!0},t.equalObject=function(e,r){var n=Object.keys(e),i=Object.keys(r),o=n.length;if(o!==i.length)return!1;for(var s=0;s<o;s+=1){var u=n[s];if(u!==i[s]||!t.equal(e[u],r[u]))return!1}return!0},t.hash=function(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e)return f.hash(e);if("object"==typeof e&&"function"==typeof e.hashCode)return e.hashCode();if(Array.isArray(e))return t.hashArray(e);if("object"==typeof e)return t.hashObject(e);throw new TypeError(""+e)},t.hashArray=function(e){for(var r=0,n=e.length,i=0;i<n;i+=1)r=f.mix(r,t.hash(e[i]));return f.mash(r)},t.hashObject=function(t){for(var e=0,r=Object.keys(t),n=r.length,i=0;i<n;i+=1){var o=r[i];e=f.mix(f.mix(e,f.hash(o)),t[o])}return f.mash(e)},t}(),l=function(){function t(){}return t.prototype.set=function(t){throw new Error("immutable")},t.prototype.delete=function(){throw new Error("immutable")},t.empty=function(){return void 0===t._empty&&(t._empty=new t.Empty),t._empty},t.unary=function(e){return new t.Unary(e)},t.array=function(e,r,n){return void 0===r&&(r=0),void 0===n&&(n=e.length),new t.Array(e,r,n)},t}(),d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function y(t,e){function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function _(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)n[i]=o[s];return n}var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.isEmpty=function(){return!0},e.prototype.head=function(){throw new Error("empty")},e.prototype.step=function(){throw new Error("empty")},e.prototype.skip=function(t){},e.prototype.hasNext=function(){return!1},e.prototype.nextIndex=function(){return 0},e.prototype.next=function(){return{done:!0}},e.prototype.hasPrevious=function(){return!1},e.prototype.previousIndex=function(){return-1},e.prototype.previous=function(){return{done:!0}},e}(l);l.Empty=v;var m=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r._index=0,r}return y(e,t),e.prototype.isEmpty=function(){return 0!==this._index},e.prototype.head=function(){if(0===this._index)return this._value;throw new Error("empty")},e.prototype.step=function(){if(0!==this._index)throw new Error("empty");this._index=1},e.prototype.skip=function(t){this._index=Math.min(Math.max(0,this._index+t),1)},e.prototype.hasNext=function(){return 0===this._index},e.prototype.nextIndex=function(){return this._index},e.prototype.next=function(){return 0===this._index?(this._index=1,{value:this._value,done:!0}):{done:!0}},e.prototype.hasPrevious=function(){return 1===this._index},e.prototype.previousIndex=function(){return this._index-1},e.prototype.previous=function(){return 1===this._index?(this._index=0,{value:this._value,done:!0}):{done:!0}},e}(l);l.Unary=m;var w=function(t){function e(e,r,n){var i=t.call(this)||this;return i._array=e,i._index=r,i._limit=n,i}return y(e,t),e.prototype.isEmpty=function(){return this._index>=this._limit},e.prototype.head=function(){if(this._index<this._limit)return this._array[this._index];throw new Error("empty")},e.prototype.step=function(){if(!(this._index<this._limit))throw new Error("empty");this._index=1},e.prototype.skip=function(t){this._index=Math.min(this._index+t,this._limit)},e.prototype.hasNext=function(){return this._index<this._limit},e.prototype.nextIndex=function(){return this._index},e.prototype.next=function(){var t=this._index;return t<this._limit?(this._index=t+1,{value:this._array[t],done:this._index===this._limit}):(this._index=this._limit,{done:!0})},e.prototype.hasPrevious=function(){return this._index>0},e.prototype.previousIndex=function(){return this._index-1},e.prototype.previous=function(){var t=this._index-1;return t>=0?(this._index=t,{value:this._array[t],done:0===t}):(this._index=0,{done:!0})},e}(l);l.Array=w;var g=function(t){function e(r){var n=t.call(this,r)||this;return n.__proto__=e.prototype,n}return y(e,t),e}(Error),b=function(t,e){if(!t)throw new g(e)};b.ok=function(t,e){if(!t)throw new g(e)},b.notOk=function(t,e){if(t)throw new g(e)},b.equal=function(t,e,r){if(!c.equal(t,e))throw new g(r)},b.notEqual=function(t,e,r){if(c.equal(t,e))throw new g(r)},b.identity=function(t,e,r){if(t!==e)throw new g(r)},b.notIdentity=function(t,e,r){if(t===e)throw new g(r)},b.compareLessThan=function(t,e,r){if(!(c.compare(t,e)<0))throw new g(r)},b.compareNotLessThan=function(t,e,r){if(c.compare(t,e)<0)throw new g(r)},b.compareLessThanOrEqual=function(t,e,r){if(!(c.compare(t,e)<=0))throw new g(r)},b.compareNotLessThanOrEqual=function(t,e,r){if(c.compare(t,e)<=0)throw new g(r)},b.compareEqual=function(t,e,r){if(0!==c.compare(t,e))throw new g(r)},b.compareNotEqual=function(t,e,r){if(0===c.compare(t,e))throw new g(r)},b.compareGreaterThanOrEqual=function(t,e,r){if(!(c.compare(t,e)>=0))throw new g(r)},b.compareNotGreaterThanOrEqual=function(t,e,r){if(c.compare(t,e)>=0)throw new g(r)},b.compareGreaterThan=function(t,e,r){if(!(c.compare(t,e)>0))throw new g(r)},b.compareNotGreaterThan=function(t,e,r){if(c.compare(t,e)>0)throw new g(r)};var x=function(){function t(t,e){this._level=t,this._label=e}return t.prototype.level=function(){return this._level},t.prototype.label=function(e){return void 0===e?this._label:t.create(this._level,e)},t.prototype.isTrace=function(){return this._level===t.TRACE_LEVEL},t.prototype.isDebug=function(){return this._level===t.DEBUG_LEVEL},t.prototype.isInfo=function(){return this._level===t.INFO_LEVEL},t.prototype.isNote=function(){return this._level===t.NOTE_LEVEL},t.prototype.isWarning=function(){return this._level===t.WARNING_LEVEL},t.prototype.isError=function(){return this._level===t.ERROR_LEVEL},t.prototype.isAlert=function(){return this._level===t.ALERT_LEVEL},t.prototype.isFatal=function(){return this._level===t.FATAL_LEVEL},t.prototype.compareTo=function(t){return this===t?0:this._level<t._level?-1:this._level>t._level?1:this._label.localeCompare(t._label)},t.prototype.equals=function(e){return this===e||e instanceof t&&(this._level===e._level&&this._label===e._label)},t.prototype.hashCode=function(){return void 0===t._hashSeed&&(t._hashSeed=f.seed(t)),f.mash(f.mix(f.mix(t._hashSeed,this._level),f.hash(this._label)))},t.prototype.toString=function(){return this._label},t.create=function(e,r){switch(e){case t.TRACE_LEVEL:return t.trace(r);case t.DEBUG_LEVEL:return t.debug(r);case t.INFO_LEVEL:return t.info(r);case t.NOTE_LEVEL:return t.note(r);case t.WARNING_LEVEL:return t.warning(r);case t.ERROR_LEVEL:return t.error(r);case t.ALERT_LEVEL:return t.alert(r);case t.FATAL_LEVEL:return t.fatal(r);default:throw new Error(""+e)}},t.trace=function(e){return void 0===e&&(e="trace"),"trace"===e?(void 0===t._trace&&(t._trace=new t(t.TRACE_LEVEL,e)),t._trace):new t(t.TRACE_LEVEL,e)},t.debug=function(e){return void 0===e&&(e="debug"),"debug"===e?(void 0===t._debug&&(t._debug=new t(t.DEBUG_LEVEL,e)),t._debug):new t(t.DEBUG_LEVEL,e)},t.info=function(e){return void 0===e&&(e="info"),"info"===e?(void 0===t._info&&(t._info=new t(t.INFO_LEVEL,e)),t._info):new t(t.INFO_LEVEL,e)},t.note=function(e){return void 0===e&&(e="note"),"note"===e?(void 0===t._note&&(t._note=new t(t.NOTE_LEVEL,e)),t._note):new t(t.NOTE_LEVEL,e)},t.warning=function(e){return void 0===e&&(e="warning"),"warning"===e?(void 0===t._warning&&(t._warning=new t(t.WARNING_LEVEL,e)),t._warning):new t(t.WARNING_LEVEL,e)},t.error=function(e){return void 0===e&&(e="error"),"error"===e?(void 0===t._error&&(t._error=new t(t.ERROR_LEVEL,e)),t._error):new t(t.ERROR_LEVEL,e)},t.alert=function(e){return void 0===e&&(e="alert"),"alert"===e?(void 0===t._alert&&(t._alert=new t(t.ALERT_LEVEL,e)),t._alert):new t(t.ALERT_LEVEL,e)},t.fatal=function(e){return void 0===e&&(e="fatal"),"fatal"===e?(void 0===t._fatal&&(t._fatal=new t(t.FATAL_LEVEL,e)),t._fatal):new t(t.FATAL_LEVEL,e)},t.TRACE_LEVEL=0,t.DEBUG_LEVEL=1,t.INFO_LEVEL=2,t.NOTE_LEVEL=3,t.WARNING_LEVEL=4,t.ERROR_LEVEL=5,t.ALERT_LEVEL=6,t.FATAL_LEVEL=7,t}(),S=function(){function t(t){this._buckets=new Array(t),this._gen4Hits=0,this._gen3Hits=0,this._gen2Hits=0,this._gen1Hits=0,this._misses=0}return t.prototype.get=function(t){if(0!==this._buckets.length){var e=Math.abs(c.hash(t))%this._buckets.length,r=this._buckets[e];if(void 0!==r){var n=r._gen4Key;if(void 0!==n&&c.equal(t,n)){var i=r._gen4Val;if(void 0!==i)return this._gen4Hits+=1,r._gen4Weight++,i;r._gen4Key=void 0}var o=r._gen3Key;if(void 0!==o&&c.equal(t,o)){var s=r._gen3Val;if(void 0!==s)return this._gen3Hits+=1,r._gen3Weight++>r._gen4Weight&&(this._buckets[e]=new O(r._gen3Key,r._gen3Val,r._gen3Weight,r._gen4Key,r._gen4Val,r._gen4Weight,r._gen2Key,r._gen2Val,r._gen2Weight,r._gen1Key,r._gen1Val,r._gen1Weight)),s;r._gen3Key=void 0}var u=r._gen2Key;if(void 0!==u&&c.equal(t,u)){var a=r._gen2Val;if(void 0!==a)return this._gen2Hits+=1,r._gen2Weight++>r._gen3Weight&&(this._buckets[e]=new O(r._gen4Key,r._gen4Val,r._gen4Weight,r._gen2Key,r._gen2Val,r._gen2Weight,r._gen3Key,r._gen3Val,r._gen3Weight,r._gen1Key,r._gen1Val,r._gen1Weight)),a;r._gen2Key=void 0}var p=r._gen1Key;if(void 0!==p&&c.equal(t,p)){var h=r._gen1Val;if(void 0!==h)return this._gen1Hits+=1,r._gen1Weight++>r._gen2Weight&&(this._buckets[e]=new O(r._gen4Key,r._gen4Val,r._gen4Weight,r._gen3Key,r._gen3Val,r._gen3Weight,r._gen1Key,r._gen1Val,r._gen1Weight,r._gen2Key,r._gen2Val,r._gen2Weight)),h;r._gen1Key=void 0}this._misses+=1}}},t.prototype.put=function(t,e){if(0===this._buckets.length)return e;var r=Math.abs(c.hash(t))%this._buckets.length,n=this._buckets[r]||new O,i=n._gen4Key;if(void 0!==i&&c.equal(t,i)){var o=n._gen4Val;if(void 0!==o)return this._gen4Hits+=1,n._gen4Weight++,o;n._gen4Key=void 0,i=void 0}var s=n._gen3Key;if(void 0!==s&&c.equal(t,s)){var u=n._gen3Val;if(void 0!==u)return this._gen3Hits+=1,n._gen3Weight++>n._gen4Weight&&(this._buckets[r]=new O(n._gen3Key,n._gen3Val,n._gen3Weight,n._gen4Key,n._gen4Val,n._gen4Weight,n._gen2Key,n._gen2Val,n._gen2Weight,n._gen1Key,n._gen1Val,n._gen1Weight)),u;n._gen3Key=void 0,s=void 0}var a=n._gen2Key;if(void 0!==a&&c.equal(t,a)){var p=n._gen2Val;if(void 0!==p)return this._gen2Hits+=1,n._gen2Weight++>n._gen3Weight&&(this._buckets[r]=new O(n._gen4Key,n._gen4Val,n._gen4Weight,n._gen2Key,n._gen2Val,n._gen2Weight,n._gen3Key,n._gen3Val,n._gen3Weight,n._gen1Key,n._gen1Val,n._gen1Weight)),p;n._gen2Key=void 0,a=void 0}var h=n._gen1Key;if(void 0!==h&&c.equal(t,h)){var f=n._gen1Val;if(void 0!==f)return this._gen1Hits+=1,n._gen1Weight++>n._gen2Weight&&(this._buckets[r]=new O(n._gen4Key,n._gen4Val,n._gen4Weight,n._gen3Key,n._gen3Val,n._gen3Weight,n._gen1Key,n._gen1Val,n._gen1Weight,n._gen2Key,n._gen2Val,n._gen2Weight)),f;n._gen1Key=void 0,h=void 0}return this._misses+=1,this._buckets[r]=void 0===i?new O(n._gen3Key,n._gen3Val,n._gen3Weight,n._gen2Key,n._gen2Val,n._gen2Weight,n._gen1Key,n._gen1Val,n._gen1Weight,t,e,1):void 0===s?new O(n._gen4Key,n._gen4Val,n._gen4Weight,n._gen2Key,n._gen2Val,n._gen2Weight,n._gen1Key,n._gen1Val,n._gen1Weight,t,e,1):void 0===a?new O(n._gen4Key,n._gen4Val,n._gen4Weight,n._gen3Key,n._gen3Val,n._gen3Weight,n._gen1Key,n._gen1Val,n._gen1Weight,t,e,1):void 0===h?new O(n._gen4Key,n._gen4Val,n._gen4Weight,n._gen3Key,n._gen3Val,n._gen3Weight,n._gen2Key,n._gen2Val,n._gen2Weight,t,e,1):new O(n._gen4Key,n._gen4Val,n._gen4Weight-1,n._gen3Key,n._gen3Val,n._gen3Weight-1,n._gen1Key,n._gen1Val,n._gen1Weight,t,e,1),e},t.prototype.remove=function(t){if(0!==this._buckets.length){var e=Math.abs(c.hash(t))%this._buckets.length,r=this._buckets[e];if(void 0!==r){var n=r._gen4Key;if(void 0!==n&&c.equal(t,n)){var i=r._gen4Val;return this._buckets[e]=new O(r._gen3Key,r._gen3Val,r._gen3Weight,r._gen2Key,r._gen2Val,r._gen2Weight,r._gen1Key,r._gen1Val,r._gen1Weight,void 0,void 0,0),i}var o=r._gen3Key;if(void 0!==o&&c.equal(t,o)){var s=r._gen3Val;return this._buckets[e]=new O(r._gen4Key,r._gen4Val,r._gen4Weight,r._gen2Key,r._gen2Val,r._gen2Weight,r._gen1Key,r._gen1Val,r._gen1Weight,void 0,void 0,0),s}var u=r._gen2Key;if(void 0!==u&&c.equal(t,u)){var a=r._gen2Val;return this._buckets[e]=new O(r._gen4Key,r._gen4Val,r._gen4Weight,r._gen3Key,r._gen3Val,r._gen3Weight,r._gen1Key,r._gen1Val,r._gen1Weight,void 0,void 0,0),a}var p=r._gen1Key;if(void 0!==p&&c.equal(t,p)){var h=r._gen1Val;return this._buckets[e]=new O(r._gen4Key,r._gen4Val,r._gen4Weight,r._gen3Key,r._gen3Val,r._gen3Weight,r._gen2Key,r._gen2Val,r._gen2Weight,void 0,void 0,0),h}}}},t.prototype.clear=function(){for(var t=0;t<this._buckets.length;t+=1)this._buckets[t]=void 0},t.prototype.hits=function(){return this._gen4Hits+this._gen3Hits+this._gen2Hits+this._gen1Hits},t.prototype.hitRatio=function(){var t=this.hits();return t/(t+this._misses)},t}(),O=function(t,e,r,n,i,o,s,u,a,p,h,f){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===f&&(f=0),this._gen4Key=t,this._gen4Val=e,this._gen4Weight=r,this._gen3Key=n,this._gen3Val=i,this._gen3Weight=o,this._gen2Key=s,this._gen2Val=u,this._gen2Weight=a,this._gen1Key=p,this._gen1Val=h,this._gen1Weight=f},A=function(){function t(t){this._buckets=new Array(t),this._gen4Hits=0,this._gen3Hits=0,this._gen2Hits=0,this._gen1Hits=0,this._misses=0}return t.prototype.put=function(t){if(0===this._buckets.length)return t;var e=Math.abs(c.hash(t))%this._buckets.length,r=this._buckets[e]||new E,n=r._gen4Val;if(void 0!==n&&c.equal(t,n))return this._gen4Hits+=1,r._gen4Weight++,n;var i=r._gen3Val;if(void 0!==i&&c.equal(t,i))return this._gen3Hits+=1,r._gen3Weight++>r._gen4Weight&&(this._buckets[e]=new E(r._gen3Val,r._gen3Weight,r._gen4Val,r._gen4Weight,r._gen2Val,r._gen2Weight,r._gen1Val,r._gen1Weight)),i;var o=r._gen2Val;if(void 0!==o&&c.equal(t,o))return this._gen2Hits+=1,r._gen2Weight++>r._gen3Weight&&(this._buckets[e]=new E(r._gen4Val,r._gen4Weight,r._gen2Val,r._gen2Weight,r._gen3Val,r._gen3Weight,r._gen1Val,r._gen1Weight)),o;var s=r._gen1Val;return void 0!==s&&c.equal(t,s)?(this._gen1Hits+=1,r._gen1Weight++>r._gen2Weight&&(this._buckets[e]=new E(r._gen4Val,r._gen4Weight,r._gen3Val,r._gen3Weight,r._gen1Val,r._gen1Weight,r._gen2Val,r._gen2Weight)),s):(this._misses+=1,this._buckets[e]=void 0===n?new E(r._gen3Val,r._gen3Weight,r._gen2Val,r._gen2Weight,r._gen1Val,r._gen1Weight,t,1):void 0===i?new E(r._gen4Val,r._gen4Weight,r._gen2Val,r._gen2Weight,r._gen1Val,r._gen1Weight,t,1):void 0===o?new E(r._gen4Val,r._gen4Weight,r._gen3Val,r._gen3Weight,r._gen1Val,r._gen1Weight,t,1):void 0===s?new E(r._gen4Val,r._gen4Weight,r._gen3Val,r._gen3Weight,r._gen2Val,r._gen2Weight,t,1):new E(r._gen4Val,r._gen4Weight-1,r._gen3Val,r._gen3Weight-1,r._gen1Val,r._gen1Weight,t,1),t)},t.prototype.remove=function(t){if(0===this._buckets.length)return!1;var e=Math.abs(c.hash(t))%this._buckets.length,r=this._buckets[e];if(void 0===r)return!1;var n=r._gen4Val;if(void 0!==n&&c.equal(t,n))return this._buckets[e]=new E(r._gen3Val,r._gen3Weight,r._gen2Val,r._gen2Weight,r._gen1Val,r._gen1Weight,void 0,0),!0;var i=r._gen3Val;if(void 0!==i&&c.equal(t,i))return this._buckets[e]=new E(r._gen4Val,r._gen4Weight,r._gen2Val,r._gen2Weight,r._gen1Val,r._gen1Weight,void 0,0),!0;var o=r._gen2Val;if(void 0!==o&&c.equal(t,o))return this._buckets[e]=new E(r._gen4Val,r._gen4Weight,r._gen3Val,r._gen3Weight,r._gen1Val,r._gen1Weight,void 0,0),!0;var s=r._gen1Val;return!(void 0===s||!c.equal(t,s))&&(this._buckets[e]=new E(r._gen4Val,r._gen4Weight,r._gen3Val,r._gen3Weight,r._gen2Val,r._gen2Weight,void 0,0),!0)},t.prototype.clear=function(){for(var t=0;t<this._buckets.length;t+=1)this._buckets[t]=void 0},t.prototype.hits=function(){return this._gen4Hits+this._gen3Hits+this._gen2Hits+this._gen1Hits},t.prototype.hitRatio=function(){var t=this.hits();return t/(t+this._misses)},t}(),E=function(t,e,r,n,i,o,s,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===u&&(u=0),this._gen4Val=t,this._gen4Weight=e,this._gen3Val=r,this._gen3Weight=n,this._gen2Val=i,this._gen2Weight=o,this._gen1Val=s,this._gen1Weight=u},C=function(){},I=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._offset=e,o._line=r,o._column=n,o._note=i,o}return y(e,t),e.prototype.offset=function(){return this._offset},e.prototype.line=function(){return this._line},e.prototype.column=function(){return this._column},e.prototype.note=function(){return this._note},e.prototype.min=function(t){return this._offset<=t._offset?this:t},e.prototype.max=function(t){return this._offset>=t._offset?this:t},e.prototype.start=function(){return this},e.prototype.end=function(){return this},e.prototype.union=function(t){if(t instanceof e)return this._offset===t._offset&&this._line===t._line&&this._column===t._column?this:C.Span.from(this,t);if(t instanceof C.Span){var r=this.min(t._start),n=this.max(t._end);return r===t._start&&n===t._end?t:C.Span.from(r,n)}throw new Error(t.toString())},e.prototype.shift=function(t){var r=this._offset+(this._offset-t._offset),n=this._line+(this._line-t._line),i=this._column;return 1===n&&(i+=this._column-t._column),r===this._offset&&n===this._line&&i===this._column?this:e.at(r,n,i,this._note)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._offset===t._offset&&this._line===t._line&&this._column===t._column&&this._note===t._note)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(f.mix(f.mix(e._hashSeed,this._offset),this._line),this._column),f.hash(this._note)))},e.prototype.display=function(t){C.Format.displayNumber(this._line,t),t=t.write(58),C.Format.displayNumber(this._column,t),null!==this._note&&(t=t.write(58).write(32).write(this._note))},e.prototype.debug=function(t){t=t.write("Mark").write(".").write("at").write("("),C.Format.debugNumber(this._offset,t),t=t.write(", "),C.Format.debugNumber(this._line,t),t=t.write(", "),C.Format.debugNumber(this._column,t),null!==this._note&&(t=t.write(", "),C.Format.debugString(this._note,t)),t=t.write(")")},e.prototype.toString=function(){return C.Format.display(this)},e.zero=function(){return void 0===e._zero&&(e._zero=new e(0,1,1,null)),e._zero},e.at=function(t,r,n,i){return void 0===i&&(i=null),new e(t,r,n,i)},e}(C);C.Mark=I;var D=function(t){function e(e,r){var n=t.call(this)||this;return n._start=e,n._end=r,n}return y(e,t),e.prototype.start=function(){return this._start},e.prototype.end=function(){return this._end},e.prototype.union=function(t){if(t instanceof C.Mark){var r=this._start.min(t),n=this._end.max(t);return r===this._start&&n===this._end?this:e.from(r,n)}if(t instanceof e){r=this._start.min(t._start),n=this._end.max(t._end);return r===this._start&&n===this._end?this:e.from(r,n)}throw new Error(t.toString())},e.prototype.shift=function(t){var r=this._start.shift(t),n=this._end.shift(t);return r===this._start&&n===this._end?this:e.from(r,n)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._start.equals(t._start)&&this._end.equals(t._end))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._start.hashCode()),this._end.hashCode()))},e.prototype.display=function(t){null!==this._start._note&&(t=t.write(this._start._note).write(58).write(32)),C.Format.displayNumber(this._start._line,t),t=t.write(58),C.Format.displayNumber(this._start._column,t),t=t.write(45),C.Format.displayNumber(this._end._line,t),t=t.write(58),C.Format.displayNumber(this._end._column,t),null!==this._end._note&&(t=t.write(58).write(32).write(this._end._note))},e.prototype.debug=function(t){t=t.write("Span").write(".").write("from").write("("),this._start.debug(t),t=t.write(", "),this._end.debug(t),t=t.write(")")},e.prototype.toString=function(){return C.Format.display(this)},e.from=function(t,r){if(t._offset>r._offset){var n=t;t=r,r=n}return new e(t,r)},e}(C);C.Span=D;var k=function(t){function e(r){var n=t.call(this,r)||this;return n.__proto__=e.prototype,n}return y(e,t),e}(Error),M=function(){function t(t,e,r){this._lineSeparator=t,this._isPretty=e,this._isStyled=r}return t.prototype.lineSeparator=function(t){return void 0===t?this._lineSeparator:this.copy(t,this._isPretty,this._isStyled)},t.prototype.isPretty=function(t){return void 0===t?this._isPretty:this.copy(this._lineSeparator,t,this._isStyled)},t.prototype.isStyled=function(t){return void 0===t?this._isStyled:this.copy(this._lineSeparator,this._isPretty,t)},t.prototype.copy=function(e,r,n){return t.create(e,r,n)},t.prototype.canEqual=function(e){return e instanceof t},t.prototype.equals=function(e){return this===e||e instanceof t&&(e.canEqual(this)&&this._lineSeparator===e._lineSeparator&&this._isPretty===e._isPretty&&this._isStyled===e._isStyled)},t.prototype.hashCode=function(){return void 0===t._hashSeed&&(t._hashSeed=f.seed(t)),f.mash(f.mix(f.mix(f.mix(t._hashSeed,f.hash(this._lineSeparator)),f.hash(this._isPretty)),f.hash(this._isStyled)))},t.prototype.debug=function(t){t=t.write("OutputSettings").write(46),t=(t=this._isPretty||this._isStyled?this._isPretty&&!this._isStyled?t.write("pretty"):!this._isPretty&&this._isStyled?t.write("styled"):t.write("prettyStyled"):t.write("standard")).write(40).write(41),X.lineSeparator()!==this._lineSeparator&&(t=t.write(46).write("lineSeparator").write(40).display(this._lineSeparator).write(41))},t.prototype.toString=function(){return X.debug(this)},t.standard=function(){return void 0===t._standard&&(t._standard=new t(X.lineSeparator(),!1,!1)),t._standard},t.pretty=function(){return void 0===t._pretty&&(t._pretty=new t(X.lineSeparator(),!0,!1)),t._pretty},t.styled=function(){return void 0===t._styled&&(t._styled=new t(X.lineSeparator(),!1,!0)),t._styled},t.prettyStyled=function(){return void 0===t._prettyStyled&&(t._prettyStyled=new t(X.lineSeparator(),!0,!0)),t._prettyStyled},t.create=function(e,r,n){return"string"!=typeof e&&(e=X.lineSeparator()),"boolean"!=typeof r&&(r=!1),"boolean"!=typeof n&&(n=!1),X.lineSeparator()===e?r||n?r&&!n?t.pretty():!r&&n?t.styled():t.prettyStyled():t.standard():new t(e,r,n)},t.fromAny=function(e){return e instanceof t?e:"object"==typeof e&&null!==e?t.create(e.lineSeparator,e.isPretty,e.isStyled):t.standard()},t}(),P=function(t){function e(r){var n=t.call(this,r)||this;return n.__proto__=e.prototype,n}return y(e,t),e}(Error),T=function(){function t(){}return t.prototype.writeln=function(t){return"string"==typeof t&&this.write(t),this.write(this.settings().lineSeparator())},t.prototype.display=function(t){return X.display(t,this),this},t.prototype.debug=function(t){return X.debug(t,this),this},t.prototype.flush=function(){return this},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length,n=0;n<r;n+=1)this.write(t[n])},t.prototype.trap=function(){throw new P},t.prototype.clone=function(){throw new Error},t.full=function(e,r){return void 0===e&&(e=null),void 0===r&&(r=M.standard()),null===e&&r===M.standard()?(void 0===t._full&&(t._full=new V(e,M.standard())),t._full):new V(e,r)},t.done=function(e,r){return void 0===e&&(e=null),void 0===r&&(r=M.standard()),null===e&&r===M.standard()?(void 0===t._done&&(t._done=new z(e,M.standard())),t._done):new z(e,r)},t.error=function(t,e){return void 0===e&&(e=M.standard()),new B(t,e)},t}(),V=function(t){function e(e,r){var n=t.call(this)||this;return n._value=e,n._settings=r,n}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isFull=function(){return!0},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0===t||(t?T.done(this._value,this._settings):this)},e.prototype.write=function(t){return T.error(new P("full"),this._settings)},e.prototype.writeln=function(t){return T.error(new P("full"),this._settings)},e.prototype.bind=function(){return this._value},e.prototype.settings=function(t){return void 0===t?this._settings:T.full(this._value,t)},e.prototype.clone=function(){return this},e}(T),z=function(t){function e(e,r){var n=t.call(this)||this;return n._value=e,n._settings=r,n}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isFull=function(){return!1},e.prototype.isDone=function(){return!0},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0!==t&&(t?this:T.full(this._value,this._settings))},e.prototype.write=function(t){return T.error(new P("done"),this._settings)},e.prototype.writeln=function(t){return T.error(new P("done"),this._settings)},e.prototype.bind=function(){return this._value},e.prototype.settings=function(t){return void 0===t?this._settings:T.done(this._value,t)},e.prototype.clone=function(){return this},e}(T),B=function(t){function e(e,r){var n=t.call(this)||this;return n._error=e,n._settings=r,n}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isFull=function(){return!1},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!0},e.prototype.isPart=function(t){return void 0!==t&&this},e.prototype.write=function(t){return this},e.prototype.writeln=function(t){return this},e.prototype.bind=function(){throw new P},e.prototype.trap=function(){return this._error},e.prototype.settings=function(t){return void 0===t?this._settings:T.error(this._error,t)},e.prototype.clone=function(){return this},e}(T),R=function(){function t(){}return t.prototype.trap=function(){throw new k},t.prototype.offset=function(){return this.mark()._offset},t.prototype.line=function(){return this.mark()._line},t.prototype.column=function(){return this.mark()._column},t.empty=function(e,r,n){return void 0===e&&(e=null),void 0===r&&(r=I.zero()),void 0===n&&(n=Y.standard()),null===e&&r===I.zero()&&n===Y.standard()?(void 0===t._empty&&(t._empty=new F(null,I.zero(),Y.standard())),t._empty):new F(e,r,n)},t.done=function(e,r,n){return void 0===e&&(e=null),void 0===r&&(r=I.zero()),void 0===n&&(n=Y.standard()),null===e&&r===I.zero()&&n===Y.standard()?(void 0===t._done&&(t._done=new L(null,I.zero(),Y.standard())),t._done):new L(e,r,n)},t.error=function(t,e,r,n){return void 0===e&&(e=null),void 0===r&&(r=I.zero()),void 0===n&&(n=Y.standard()),new q(t,e,r,n)},t}(),F=function(t){function e(e,r,n){var i=t.call(this)||this;return i._id=e,i._mark=r,i._settings=n,i}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isEmpty=function(){return!0},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0===t||(t?this:R.done(this._id,this._mark,this._settings))},e.prototype.head=function(){throw new k},e.prototype.step=function(){var t=new k("empty step");return R.error(t,this._id,this._mark,this._settings)},e.prototype.seek=function(t){var e=new k("empty seek");return R.error(e,this._id,this._mark,this._settings)},e.prototype.id=function(t){return void 0===t?this._id:R.empty(t,this._mark,this._settings)},e.prototype.mark=function(t){return void 0===t?this._mark:R.empty(this._id,t,this._settings)},e.prototype.settings=function(t){return void 0===t?this._settings:R.empty(this._id,this._mark,t)},e.prototype.clone=function(){return this},e}(R),L=function(t){function e(e,r,n){var i=t.call(this)||this;return i._id=e,i._mark=r,i._settings=n,i}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isEmpty=function(){return!1},e.prototype.isDone=function(){return!0},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0!==t&&(t?R.empty(this._id,this._mark,this._settings):this)},e.prototype.head=function(){throw new k},e.prototype.step=function(){var t=new k("done step");return R.error(t,this._id,this._mark,this._settings)},e.prototype.seek=function(t){var e=new k("empty seek");return R.error(e,this._id,this._mark,this._settings)},e.prototype.id=function(t){return void 0===t?this._id:R.done(t,this._mark,this._settings)},e.prototype.mark=function(t){return void 0===t?this._mark:R.done(this._id,t,this._settings)},e.prototype.settings=function(t){return void 0===t?this._settings:R.done(this._id,this._mark,t)},e.prototype.clone=function(){return this},e}(R),q=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._error=e,o._id=r,o._mark=n,o._settings=i,o}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isEmpty=function(){return!1},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!0},e.prototype.isPart=function(t){return void 0!==t&&this},e.prototype.head=function(){throw new k},e.prototype.step=function(){var t=new k("error step");return R.error(t,this._id,this._mark,this._settings)},e.prototype.trap=function(){return this._error},e.prototype.seek=function(t){var e=new k("error seek");return R.error(e,this._id,this._mark,this._settings)},e.prototype.id=function(t){return void 0===t?this._id:R.error(this._error,t,this._mark,this._settings)},e.prototype.mark=function(t){return void 0===t?this._mark:R.error(this._error,this._id,t,this._settings)},e.prototype.settings=function(t){return void 0===t?this._settings:R.error(this._error,this._id,this._mark,t)},e.prototype.clone=function(){return this},e}(R),N=function(t){function e(e,r,n,i,o,s,u,a){void 0===r&&(r=null),void 0===n&&(n=0),void 0===i&&(i=1),void 0===o&&(o=1),void 0===s&&(s=Y.standard()),void 0===u&&(u=0),void 0===a&&(a=!1);var p=t.call(this)||this;return p._string=e,p._id=r,p._offset=n,p._line=i,p._column=o,p._settings=s,p._index=u,p._isPart=a,p}return y(e,t),e.prototype.isCont=function(){return this._index<this._string.length},e.prototype.isEmpty=function(){return this._isPart&&this._index>=this._string.length},e.prototype.isDone=function(){return!this._isPart&&this._index>=this._string.length},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0===t?this._isPart:(this._isPart=t,this)},e.prototype.head=function(){if(this._index<this._string.length){var t=this._string.codePointAt(this._index);return void 0!==t?t:this._string.charCodeAt(this._index)}throw new k},e.prototype.step=function(){var t=this._index;if(t<this._string.length){var e=this._string.codePointAt(t);return this._index=this._string.offsetByCodePoints(t,1),this._offset+=this._index-t,10===e?(this._line+=1,this._column=1):this._column+=1,this}var r=new k("invalid step");return R.error(r,this._id,this.mark(),this._settings)},e.prototype.seek=function(t){if(void 0!==t){var e=this._index+(t._offset-this._offset);if(0<=e&&e<=this._string.length)return this._offset=t._offset,this._line=t._line,this._column=t._column,this._index=e,this;var r=new k("invalid seek to "+t);return R.error(r,this._id,this.mark(),this._settings)}return this._offset=0,this._line=1,this._column=1,this._index=0,this},e.prototype.id=function(t){return void 0===t?this._id:(this._id=t,this)},e.prototype.mark=function(t){return void 0===t?I.at(this._offset,this._line,this._column):(this._offset=t._offset,this._line=t._line,this._column=t._column,this)},e.prototype.offset=function(){return this._offset},e.prototype.line=function(){return this._line},e.prototype.column=function(){return this._column},e.prototype.settings=function(t){return void 0===t?this._settings:(this._settings=Y.fromAny(t),this)},e.prototype.clone=function(){return new e(this._string,this._id,this._offset,this._line,this._column,this._settings,this._index,this._isPart)},e}(R),U=function(t){function e(e,r){var n=t.call(this)||this;return n._string=e,n._settings=r,n}return y(e,t),e.prototype.isCont=function(){return!0},e.prototype.isFull=function(){return!1},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0!==t&&this},e.prototype.write=function(t){if("number"==typeof t)if(t>=0&&t<=55295||t>=57344&&t<=65535)t=String.fromCharCode(t);else if(t>=65536&&t<=1114111){var e=t-65536;t=String.fromCharCode(55296|e>>>10,56320|1023&e)}else t="�";return this._string+=t,this},e.prototype.writeln=function(t){return void 0===t?(this._string=this._string.concat(this._settings._lineSeparator),this):(this._string=this._string.concat(t).concat(this._settings._lineSeparator),this)},e.prototype.settings=function(t){return void 0===t?this._settings:(this._settings=M.fromAny(t),this)},e.prototype.bind=function(){return this._string},e.prototype.clone=function(){return new e(this._string,this._settings)},e.prototype.toString=function(){return this._string},e}(T),K=function(t){function e(r){var n=t.call(this,r)||this;return n.__proto__=e.prototype,n}return y(e,t),e}(Error),W=function(){function t(){}return t.prototype.isCont=function(){return!0},t.prototype.isDone=function(){return!1},t.prototype.isError=function(){return!1},t.prototype.feed=function(t){throw new Error},t.prototype.fork=function(t){return this},t.prototype.bind=function(){throw new Error},t.prototype.trap=function(){throw new Error},t.prototype.asDone=function(){throw new Error},t.prototype.asError=function(){throw new Error},t.prototype.andThen=function(t){return new G(this,t)},t.done=function(e){return void 0===e?(void 0===t._done&&(t._done=new H(void 0)),t._done):new H(e)},t.error=function(t){return new j(t)},t}(),H=function(t){function e(e){var r=t.call(this)||this;return r._output=e,r}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isDone=function(){return!0},e.prototype.pull=function(t){return this},e.prototype.bind=function(){return this._output},e.prototype.asDone=function(){return this},e.prototype.andThen=function(t){return t},e}(W),j=function(t){function e(e){var r=t.call(this)||this;return r._error=e,r}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isError=function(){return!0},e.prototype.pull=function(t){return this},e.prototype.bind=function(){throw this._error},e.prototype.trap=function(){return this._error},e.prototype.asError=function(){return this},e.prototype.andThen=function(t){return this},e}(W),G=function(t){function e(e,r){var n=t.call(this)||this;return n._head=e,n._tail=r,n}return y(e,t),e.prototype.pull=function(t){var r=this._head;return r.isCont()&&(r=r.pull(t)),r.isError()?r.asError():r.isDone()?this._tail.pull(t):new e(r,this._tail)},e}(W),Q=function(t){function e(e,r,n){void 0===n&&(n=0);var i=t.call(this)||this;return i._value=e,i._input=r,i._index=n,i}return y(e,t),e.prototype.feed=function(t){return new e(t,""+t)},e.prototype.pull=function(t){return e.write(t,this._value,this._input,this._index)},e.write=function(t,r,n,i){void 0===i&&(i=0);for(var o=n.length;i<o&&t.isCont();){var s=n.codePointAt(i);void 0===s&&(s=n.charCodeAt(i)),t=t.write(s),i=n.offsetByCodePoints(i,1)}return i===o?W.done(r):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i)},e}(W),Z=function(){function t(){}return t.stringInput=function(t){return new N(t)},t.stringOutput=function(t,e){return void 0===e&&"string"!=typeof t?(e=t,t=""):"string"!=typeof t&&(t=""),e=M.fromAny(e),new U(t,e)},t.stringWriter=function(t){return void 0===t?new Q(void 0,""):new Q(t,""+t)},t.writeString=function(t,e){return Q.write(e,void 0,""+t)},t.isAlpha=function(t){return t>=65&&t<=90||t>=97&&t<=122},t.isSpace=function(t){return 32===t||9===t},t.isNewline=function(t){return 10===t||13===t},t.isWhitespace=function(e){return t.isSpace(e)||t.isNewline(e)},t}(),X=function(){function e(){}return e.display=function(t,r){var n=!(r instanceof T);if(void 0===t){if(void 0===r)return"undefined";r instanceof T||(r=Z.stringOutput(r)),r=r.write("undefined")}else if(null===t){if(void 0===r)return"null";r instanceof T||(r=Z.stringOutput(r)),r=r.write("null")}else if("number"==typeof t){if(void 0===r)return""+t;r instanceof T||(r=Z.stringOutput(r)),e.displayNumber(t,r)}else if("string"==typeof t){if(void 0===r)return t;r instanceof T||(r=Z.stringOutput(r)),r=r.write(t)}else if("function"==typeof t.display)r instanceof T||(r=Z.stringOutput(r)),t.display(r);else{if(void 0===r)return""+t;r instanceof T||(r=Z.stringOutput(r)),r=r.write(""+t)}if(n)return r.toString()},e.debug=function(t,r){var n=!(r instanceof T);if(void 0===t){if(void 0===r)return"undefined";r instanceof T||(r=Z.stringOutput(r)),r=r.write("undefined")}else if(null===t){if(void 0===r)return"null";r instanceof T||(r=Z.stringOutput(r)),r=r.write("null")}else if("number"==typeof t){if(void 0===r)return""+t;r instanceof T||(r=Z.stringOutput(r)),e.debugNumber(t,r)}else if("string"==typeof t)r instanceof T||(r=Z.stringOutput(r)),e.debugString(t,r);else if("function"==typeof t.debug)r instanceof T||(r=Z.stringOutput(r)),t.debug(r);else{if(void 0===r)return""+t;r instanceof T||(r=Z.stringOutput(r)),r=r.write(""+t)}if(n)return r.toString()},e.displayNumber=function(t,e){if(isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<2147483648)if(t<0&&(e=e.write(45)),t>-10&&t<10)e=e.write(48+Math.abs(t));else{for(var r=new Array(19),n=t,i=18;0!==n;)r[i]=Math.abs(n%10|0),n=n/10|0,i-=1;for(i+=1;i<19;)e=e.write(48+r[i]),i+=1}else e=e.write(""+t)},e.debugNumber=function(t,r){e.displayNumber(t,r)},e.debugChar=function(t,r){switch(r=r.write(39),t){case 8:r.write(92).write(98);break;case 9:r.write(92).write(116);break;case 10:r.write(92).write(110);break;case 12:r.write(92).write(102);break;case 13:r.write(92).write(114);break;case 34:r.write(92).write(34);break;case 39:r.write(92).write(39);break;case 92:r.write(92).write(92);break;default:r=t>=0&&t<=31||t>=127&&t<=159?r.write(92).write(117).write(e.encodeHex(t>>>12&15)).write(e.encodeHex(t>>>8&15)).write(e.encodeHex(t>>>4&15)).write(e.encodeHex(15&t)):r.write(t)}r=r.write(39)},e.debugString=function(t,r){r=r.write(34);for(var n=Z.stringInput(t);n.isCont();){var i=n.head();switch(i){case 8:r.write(92).write(98);break;case 9:r.write(92).write(116);break;case 10:r.write(92).write(110);break;case 12:r.write(92).write(102);break;case 13:r.write(92).write(114);break;case 34:r.write(92).write(34);break;case 92:r.write(92).write(92);break;default:r=i>=0&&i<=31||i>=127&&i<=159?r.write(92).write(117).write(e.encodeHex(i>>>12&15)).write(e.encodeHex(i>>>8&15)).write(e.encodeHex(i>>>4&15)).write(e.encodeHex(15&i)):r.write(i)}n=n.step()}r=r.write(34)},e.encodeHex=function(t){return t<10?48+t:t-10+65},e.lineSeparator=function(){if(void 0===e._lineSeparator){if("object"==typeof t&&"undefined"!=typeof module&&"function"==typeof require){var r=require("os");"object"==typeof r&&null!==r&&(e._lineSeparator=r.EOL)}void 0===e._lineSeparator&&(e._lineSeparator="\n")}return e._lineSeparator},e.prefix=function(t,r){if(void 0===r&&(r=1),isFinite(t)){var n=Math.abs(t).toExponential(),i=n.indexOf("e"),o=i>=0?+n.slice(i+1):NaN,s=3*Math.min(Math.max(-8,Math.floor(o/3)),8),u=Math.pow(10,-s)*t,a=e.trimTrailingZeros(Math.abs(u).toFixed(r));return u<0&&0!=+a&&(a="-"+a),a+=e.Prefixes[8+s/3]}return""+t},e.trimTrailingZeros=function(t){for(var e,r=-1,n=1,i=t.length;n<i;n+=1){var o=t.charCodeAt(n);if(46===o)r=n,e=n;else if(48===o)0===r&&(r=n),e=n;else if(o>=49&&o<=57)r>0&&(r=0);else if(r>0)break}return r>0&&(t=t.slice(0,r)+t.slice(e+1)),t},e.duration=function(t,e){if(void 0===e&&(e=" "),isFinite(t)){var r=864e5,n=void 0;t>6048e5&&(n=Math.floor(t/6048e5),t%=6048e5);var i=void 0;t>r&&(i=Math.floor(t/r),t%=r);var o=void 0;t>36e5&&(o=Math.floor(t/36e5),t%=36e5);var s=void 0;t>6e4&&(s=Math.floor(t/6e4),t%=6e4);var u=void 0;t>1e3&&(u=Math.floor(t/1e3),t%=1e3);var a="";return void 0!==n&&(a+=n+"w"),void 0!==i&&(a+=(0!==a.length?e:"")+i+"d"),void 0!==o&&(a+=(0!==a.length?e:"")+o+"h"),void 0!==s&&(a+=(0!==a.length?e:"")+s+"m"),void 0===u&&0!==t||(a+=(0!==a.length?e:"")+(void 0!==u?u:0)+"s"),0!==t&&0===a.length&&(a+=t+"ms"),a}return""+t},e.Prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E"," Z","Y"],e}();C.Format=X;var Y=function(){function t(t){this._isStrict=t}return t.prototype.isStripped=function(t){return void 0===t?this._isStrict:this.copy(t)},t.prototype.copy=function(e){return t.create(e)},t.prototype.canEqual=function(e){return e instanceof t},t.prototype.equals=function(e){return this===e||e instanceof t&&(e.canEqual(this)&&this._isStrict===e._isStrict)},t.prototype.hashCode=function(){return void 0===t._hashSeed&&(t._hashSeed=f.seed(t)),f.mash(f.mix(t._hashSeed,f.hash(this._isStrict)))},t.prototype.debug=function(t){t=t.write("InputSettings").write(46),t=(t=this._isStrict?t.write("stripped"):t.write("standard")).write(40).write(41)},t.prototype.toString=function(){return X.debug(this)},t.standard=function(){return void 0===t._standard&&(t._standard=new t(!1)),t._standard},t.stripped=function(){return void 0===t._stripped&&(t._stripped=new t(!1)),t._stripped},t.create=function(e){return e?t.stripped():t.standard()},t.fromAny=function(e){return e instanceof t?e:"object"==typeof e&&null!==e?t.create(e.isStripped):t.standard()},t}(),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.empty=function(t,r,n){return void 0===t&&(t=null),void 0===r&&(r=I.zero()),void 0===n&&(n=Y.standard()),null===t&&r===I.zero()&&n===Y.standard()?(void 0===e._emptyBuffer&&(e._emptyBuffer=new J(null,I.zero(),Y.standard())),e._emptyBuffer):new J(t,r,n)},e.done=function(t,r,n){return void 0===t&&(t=null),void 0===r&&(r=I.zero()),void 0===n&&(n=Y.standard()),null===t&&r===I.zero()&&n===Y.standard()?(void 0===e._doneBuffer&&(e._doneBuffer=new tt(null,I.zero(),Y.standard())),e._doneBuffer):new tt(t,r,n)},e.error=function(t,e,r,n){return void 0===e&&(e=null),void 0===r&&(r=I.zero()),void 0===n&&(n=Y.standard()),new et(t,e,r,n)},e}(R),J=function(t){function e(e,r,n){var i=t.call(this)||this;return i._id=e,i._mark=r,i._settings=n,i}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isEmpty=function(){return!0},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0===t||(t?this:$.done(this._id,this._mark,this._settings))},e.prototype.index=function(t){if(void 0===t)return 0;if(0===t)return this;var e=new k("invalid index");return $.error(e,this._id,this._mark,this._settings)},e.prototype.limit=function(t){if(void 0===t)return 0;if(0===t)return this;var e=new k("invalid limit");return $.error(e,this._id,this._mark,this._settings)},e.prototype.capacity=function(){return 0},e.prototype.remaining=function(){return 0},e.prototype.has=function(t){return!1},e.prototype.get=function(t){throw new k},e.prototype.set=function(t,e){throw new k},e.prototype.head=function(){throw new k},e.prototype.step=function(t){var e=new k("empty step");return $.error(e,this._id,this._mark,this._settings)},e.prototype.seek=function(t){var e=new k("empty seek");return $.error(e,this._id,this._mark,this._settings)},e.prototype.id=function(t){return void 0===t?this._id:$.empty(t,this._mark,this._settings)},e.prototype.mark=function(t){return void 0===t?this._mark:$.empty(this._id,t,this._settings)},e.prototype.settings=function(t){return void 0===t?this._settings:$.empty(this._id,this._mark,t)},e.prototype.clone=function(){return this},e}($),tt=function(t){function e(e,r,n){var i=t.call(this)||this;return i._id=e,i._mark=r,i._settings=n,i}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isEmpty=function(){return!1},e.prototype.isDone=function(){return!0},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0!==t&&(t?$.empty(this._id,this._mark,this._settings):this)},e.prototype.index=function(t){if(void 0===t)return 0;if(0===t)return this;var e=new k("invalid index");return $.error(e,this._id,this._mark,this._settings)},e.prototype.limit=function(t){if(void 0===t)return 0;if(0===t)return this;var e=new k("invalid limit");return $.error(e,this._id,this._mark,this._settings)},e.prototype.capacity=function(){return 0},e.prototype.remaining=function(){return 0},e.prototype.has=function(t){return!1},e.prototype.get=function(t){throw new k},e.prototype.set=function(t,e){throw new k},e.prototype.head=function(){throw new k},e.prototype.step=function(t){var e=new k("done step");return $.error(e,this._id,this._mark,this._settings)},e.prototype.seek=function(t){var e=new k("done seek");return $.error(e,this._id,this._mark,this._settings)},e.prototype.id=function(t){return void 0===t?this._id:$.done(t,this._mark,this._settings)},e.prototype.mark=function(t){return void 0===t?this._mark:$.done(this._id,t,this._settings)},e.prototype.settings=function(t){return void 0===t?this._settings:$.done(this._id,this._mark,t)},e.prototype.clone=function(){return this},e}($),et=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._error=e,o._id=r,o._mark=n,o._settings=i,o}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isEmpty=function(){return!1},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!0},e.prototype.isPart=function(t){return void 0!==t&&this},e.prototype.index=function(t){if(void 0===t)return 0;if(0===t)return this;var e=new k("invalid index");return $.error(e,this._id,this._mark,this._settings)},e.prototype.limit=function(t){if(void 0===t)return 0;if(0===t)return this;var e=new k("invalid limit");return $.error(e,this._id,this._mark,this._settings)},e.prototype.capacity=function(){return 0},e.prototype.remaining=function(){return 0},e.prototype.has=function(t){return!1},e.prototype.get=function(t){throw new k},e.prototype.set=function(t,e){throw new k},e.prototype.head=function(){throw new k},e.prototype.step=function(t){var e=new k("error step");return $.error(e,this._id,this._mark,this._settings)},e.prototype.trap=function(){return this._error},e.prototype.seek=function(t){var e=new k("error seek");return $.error(e,this._id,this._mark,this._settings)},e.prototype.id=function(t){return void 0===t?this._id:$.error(this._error,t,this._mark,this._settings)},e.prototype.mark=function(t){return void 0===t?this._mark:$.error(this._error,this._id,t,this._settings)},e.prototype.settings=function(t){return void 0===t?this._settings:$.error(this._error,this._id,this._mark,t)},e.prototype.clone=function(){return this},e}($),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.writeln=function(t){return"string"==typeof t&&this.write(t),this.write(this.settings().lineSeparator())},e.prototype.display=function(t){return X.display(t,this),this},e.prototype.debug=function(t){return X.debug(t,this),this},e.prototype.flush=function(){return this},e.prototype.clone=function(){throw new Error},e.full=function(t,r){return void 0===t&&(t=null),void 0===r&&(r=M.standard()),null===t&&r===M.standard()?(void 0===e._fullBuffer&&(e._fullBuffer=new nt(t,M.standard())),e._fullBuffer):new nt(t,r)},e.done=function(t,r){return void 0===t&&(t=null),void 0===r&&(r=M.standard()),null===t&&r===M.standard()?(void 0===e._doneBuffer&&(e._doneBuffer=new it(t,M.standard())),e._doneBuffer):new it(t,r)},e.error=function(t,e){return void 0===e&&(e=M.standard()),new ot(t,e)},e}(T),nt=function(t){function e(e,r){var n=t.call(this)||this;return n._value=e,n._settings=r,n}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isFull=function(){return!0},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0===t||(t?rt.done(this._value,this._settings):this)},e.prototype.index=function(t){return void 0===t?0:0===t?this:rt.error(new P("invalid index"),this._settings)},e.prototype.limit=function(t){return void 0===t?0:0===t?this:rt.error(new P("invalid index"),this._settings)},e.prototype.capacity=function(){return 0},e.prototype.remaining=function(){return 0},e.prototype.has=function(t){return!1},e.prototype.get=function(t){throw new P},e.prototype.set=function(t,e){throw new P},e.prototype.write=function(t){return rt.error(new P("full"),this._settings)},e.prototype.writeln=function(t){return rt.error(new P("full"),this._settings)},e.prototype.step=function(t){return void 0===t&&(t=1),0===t?this:rt.error(new P("invalid step"),this._settings)},e.prototype.bind=function(){return this._value},e.prototype.settings=function(t){return void 0===t?this._settings:rt.full(this._value,t)},e.prototype.clone=function(){return this},e}(rt),it=function(t){function e(e,r){var n=t.call(this)||this;return n._value=e,n._settings=r,n}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isFull=function(){return!1},e.prototype.isDone=function(){return!0},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0!==t&&(t?this:rt.full(this._value,this._settings))},e.prototype.index=function(t){return void 0===t?0:0===t?this:rt.error(new P("invalid index"),this._settings)},e.prototype.limit=function(t){return void 0===t?0:0===t?this:rt.error(new P("invalid index"),this._settings)},e.prototype.capacity=function(){return 0},e.prototype.remaining=function(){return 0},e.prototype.has=function(t){return!1},e.prototype.get=function(t){throw new P},e.prototype.set=function(t,e){throw new P},e.prototype.write=function(t){return rt.error(new P("done"),this._settings)},e.prototype.writeln=function(t){return rt.error(new P("done"),this._settings)},e.prototype.step=function(t){return void 0===t&&(t=1),0===t?this:rt.error(new P("invalid step"),this._settings)},e.prototype.bind=function(){return this._value},e.prototype.settings=function(t){return void 0===t?this._settings:rt.done(this._value,t)},e.prototype.clone=function(){return this},e}(rt),ot=function(t){function e(e,r){var n=t.call(this)||this;return n._error=e,n._settings=r,n}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isFull=function(){return!1},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!0},e.prototype.isPart=function(t){return void 0!==t&&this},e.prototype.index=function(t){return void 0===t?0:0===t?this:rt.error(new P("invalid index"),this._settings)},e.prototype.limit=function(t){return void 0===t?0:0===t?this:rt.error(new P("invalid index"),this._settings)},e.prototype.capacity=function(){return 0},e.prototype.remaining=function(){return 0},e.prototype.has=function(t){return!1},e.prototype.get=function(t){throw new P},e.prototype.set=function(t,e){throw new P},e.prototype.write=function(t){return this},e.prototype.writeln=function(t){return this},e.prototype.step=function(t){return void 0===t&&(t=1),0===t?this:rt.error(new P("invalid step"),this._settings)},e.prototype.bind=function(){throw new P},e.prototype.trap=function(){return this._error},e.prototype.settings=function(t){return void 0===t?this._settings:rt.error(this._error,t)},e.prototype.clone=function(){return this},e}(rt),st=function(){function t(){}return t.reset=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(48).write(109))},t.bold=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(49).write(109))},t.faint=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(50).write(109))},t.black=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(48).write(59).write(51).write(48).write(109))},t.red=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(48).write(59).write(51).write(49).write(109))},t.green=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(48).write(59).write(51).write(50).write(109))},t.yellow=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(48).write(59).write(51).write(51).write(109))},t.blue=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(48).write(59).write(51).write(52).write(109))},t.magenta=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(48).write(59).write(51).write(53).write(109))},t.cyan=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(48).write(59).write(51).write(54).write(109))},t.gray=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(48).write(59).write(51).write(55).write(109))},t.blackBold=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(49).write(59).write(51).write(48).write(109))},t.redBold=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(49).write(59).write(51).write(49).write(109))},t.greenBold=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(49).write(59).write(51).write(50).write(109))},t.yellowBold=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(49).write(59).write(51).write(51).write(109))},t.blueBold=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(49).write(59).write(51).write(52).write(109))},t.magentaBold=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(49).write(59).write(51).write(53).write(109))},t.cyanBold=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(49).write(59).write(51).write(54).write(109))},t.grayBold=function(t){t.settings().isStyled()&&(t=t.write(27).write(91).write(49).write(59).write(51).write(55).write(109))},t}(),ut=function(){function t(){}return t.isDigit=function(t){return t>=48&&t<=57},t.decodeDigit=function(t){if(t>=48&&t<=57)return t-48;var e=Z.stringOutput();throw e.write("Invalid base-10 digit: "),X.debugChar(t,e),new Error(e.bind())},t.encodeDigit=function(t){if(t>=0&&t<=9)return 48+t;throw new Error(""+t)},t.countDigits=function(t){var e=0;do{e+=1,t=t/10|0}while(0!==t);return e},t.integerParser=function(){return new t.NumberParser(void 0,void 0,0)},t.parseInteger=function(e){return t.NumberParser.parse(e,void 0,void 0,0)},t.decimalParser=function(){return new t.NumberParser(void 0,void 0,1)},t.parseDecimal=function(e){return t.NumberParser.parse(e,void 0,void 0,1)},t.numberParser=function(){return new t.NumberParser},t.parseNumber=function(e){return t.NumberParser.parse(e)},t.integerWriter=function(e){return void 0===e?new t.IntegerWriter(void 0,0):new t.IntegerWriter(void 0,e)},t.writeInteger=function(e,r){return t.IntegerWriter.write(r,void 0,e)},t}(),at=function(){function t(t,e,r,n,i,o){this._input=t,this._tag=e,this._severity=r,this._message=n,this._note=i,this._cause=o}return t.prototype.input=function(){return this._input.clone()},t.prototype.tag=function(){return this._tag},t.prototype.severity=function(){return this._severity},t.prototype.message=function(){return this._message},t.prototype.note=function(){return this._note},t.prototype.cause=function(){return this._cause},t.prototype.lineDigits=function(){var t=ut.countDigits(this._tag.end().line());return null!==this._cause&&(t=Math.max(t,this._cause.lineDigits())),t},t.prototype.display=function(e){var r=this._input.clone(),n=this._tag.start(),i=this._tag.end(),o=this._severity,s=this._message,u=this._note,a=this._cause,p=this.lineDigits();t.displayDiagnostic(r,n,i,o,s,u,a,2,p,e)},t.prototype.toString=function(t){return X.display(this,t)},t.from=function(e,r,n,i,o,s){return i instanceof t?(s=i,o=null,i=null):o instanceof t&&(s=o,o=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new t(e=e.clone(),r,n,i,o,s)},t.message=function(e,r,n,i,o){null===n||n instanceof t?(o=n,n=void 0):"string"==typeof n&&(i=n,n=void 0),(null===i||i instanceof t)&&(o=i,i=void 0),void 0===i&&(i=null),void 0===n&&(n=x.error());var s=r.mark(),u=r.clone();return u.seek(),t.from(u,s,n,e,i,o)},t.unexpected=function(e,r,n,i){var o;if(null===r||r instanceof t?(i=r,r=void 0):"string"==typeof r&&(n=r,r=void 0),(null===n||n instanceof t)&&(i=n,n=void 0),void 0===n&&(n=null),void 0===r&&(r=x.error()),e.isCont()){var s=Z.stringOutput().write("unexpected").write(32);X.debugChar(e.head(),s),o=s.bind()}else o="unexpected end of input";var u=e.mark(),a=e.clone();return a.seek(),t.from(a,u,r,o,n,i)},t.expected=function(e,r,n,i,o){null===n||n instanceof t?(o=n,n=void 0):"string"==typeof n&&(i=n,n=void 0),(null===i||i instanceof t)&&(o=i,i=void 0),void 0===i&&(i=null),void 0===n&&(n=x.error());var s=Z.stringOutput().write("expected").write(32);"number"==typeof e?X.debugChar(e,s):s=s.write(e),s=s.write(44).write(32).write("but found").write(32),r.isCont()?X.debugChar(r.head(),s):s=s.write("end of input");var u=s.bind(),a=r.mark(),p=r.clone();return p.seek(),t.from(p,a,n,u,i,o)},t.displayDiagnostic=function(e,r,n,i,o,s,u,a,p,h){for(;;){null!==o&&(t.displayMessage(i,o,h),h=h.writeln()),t.displayAnchor(e,r,p,h),h=h.writeln();var f=t.displayContext(e,r,n,i,s,u,a,p,h);if(null===f)break;h=h.writeln(),e=f._input.clone(),r=f._tag.start(),n=f._tag.end(),i=f._severity,o=f._message,s=f._note,u=f._cause}},t.displayMessage=function(e,r,n){t.formatSeverity(e,n),n=n.write(e.label()),st.reset(n),st.bold(n),n=n.write(58),null!==r&&(n=n.write(32).write(r)),st.reset(n)},t.displayAnchor=function(e,r,n,i){t.displayLineLeadArrow(n,i),i=i.write(32);var o=e.id();null!==o&&X.display(o,i),i=i.write(58),X.displayNumber(r._line,i),i=i.write(58),X.displayNumber(r._column,i),i=i.writeln(),t.displayLineLead(n,i)},t.displayCause=function(e,r,n,i){var o=e._input.clone(),s=e._tag.start(),u=e._tag.end(),a=e._severity,p=e._note,h=e._cause;return t.displayContext(o,s,u,a,p,h,r,n,i)},t.displayContext=function(e,r,n,i,o,s,u,a,p){var h=s,f=null!==s&&null===s._message&&c.equal(e.id(),s._input.id())?r._offset<=s._tag.start()._offset?-1:1:0;return 1===f&&(h=t.displayCause(s,u,a,p),p=p.writeln(),t.displayLineLeadEllipsis(a,p),p=p.writeln()),t.displayLines(e,r,n,i,u,a,p),null!==o&&t.displayNote(o,a,p),-1===f&&(p=p.writeln(),t.displayLineLeadEllipsis(a,p),p=p.writeln(),h=t.displayCause(s,u,a,p)),h},t.displayLines=function(e,r,n,i,o,s,u){for(var a=r.line(),p=n.line(),h=e.line();h<a;)t.consumeLineText(e,h),h+=1;if(p-a>2*o+2){for(;h<=a+o;)t.displayLine(e,r,n,i,h,s,u),h+=1;for(t.displayLineLeadEllipsis(s,u),u=u.write(32),t.formatSeverity(i,u),u=u.write(124),st.reset(u),u=u.writeln();h<p-o;)t.consumeLineText(e,h),h+=1}for(;h<=p;)t.displayLine(e,r,n,i,h,s,u),h+=1},t.displayNote=function(e,r,n){n=n.writeln(),t.displayLineLead(r,n),n=n.writeln(),t.displayLineComment("note",e,r,n)},t.displayLine=function(e,r,n,i,o,s,u){r._line===o&&n._line===o?t.displaySingleLine(e,r,n,i,o,s,u):r._line===o?t.displayStartLine(e,r,i,o,s,u):n._line===o?t.displayEndLine(e,n,i,o,s,u):t.displayMidLine(e,i,o,s,u)},t.displaySingleLine=function(e,r,n,i,o,s,u){t.displayLineLeadNumber(o,s,u),u=u.write(32);for(var a=1;a<e.column();a+=1)u=u.write(32);t.displayLineText(e,o,u),t.displayLineLead(s,u),u=u.write(32);for(var p=1;p<r._column;)u=u.write(32),p+=1;for(t.formatSeverity(i,u);p<=n._column;)u=u.write(94),p+=1;null!==n._note&&(u=u.write(32).write(n._note)),st.reset(u)},t.displayStartLine=function(e,r,n,i,o,s){t.displayLineLeadNumber(i,o,s),s=s.write(32).write(32).write(32);for(var u=1;u<e.column();u+=1)s=s.write(32);t.displayLineText(e,i,s),t.displayLineLead(o,s),s=s.write(32).write(32),t.formatSeverity(n,s),s=s.write(95);for(var a=1;a<r._column;)s=s.write(95),a+=1;s=s.write(94),null!==r._note&&(s=s.write(32).write(r._note)),st.reset(s),s=s.writeln()},t.displayEndLine=function(e,r,n,i,o,s){t.displayLineLeadNumber(i,o,s),s=s.write(32),t.formatSeverity(n,s),s=s.write(124),st.reset(s),s=s.write(32),t.displayLineText(e,i,s),t.displayLineLead(o,s),s=s.write(32),t.formatSeverity(n,s),s=s.write(124).write(95);for(var u=1;u<r._column;)s=s.write(95),u+=1;s=s.write(94),null!==r._note&&(s=s.write(32).write(r._note)),st.reset(s)},t.displayMidLine=function(e,r,n,i,o){t.displayLineLeadNumber(n,i,o),o=o.write(32),t.formatSeverity(r,o),o=o.write(124),st.reset(o),o=o.write(32),t.displayLineText(e,n,o)},t.displayLineComment=function(e,r,n,i){t.displayLineLeadComment(n,i),i=i.write(32),st.bold(i),i=i.write(e).write(58),st.reset(i),null!==r&&(i=i.write(32).write(r))},t.displayLineLead=function(t,e){st.blueBold(e);for(var r=1+t,n=0;n<r;n+=1)e=e.write(32);e=e.write(124),st.reset(e)},t.displayLineLeadComment=function(t,e){st.blueBold(e);for(var r=1+t,n=0;n<r;n+=1)e=e.write(32);e=e.write(61),st.reset(e)},t.displayLineLeadArrow=function(t,e){for(var r=0;r<t;r+=1)e=e.write(32);st.blueBold(e),e=e.write(45).write(45).write(62),st.reset(e)},t.displayLineLeadEllipsis=function(t,e){st.blueBold(e);for(var r=0;r<t;r+=1)e=e.write(46);st.reset(e),e=e.write(32).write(32)},t.displayLineLeadNumber=function(t,e,r){for(var n=e-ut.countDigits(t),i=0;i<n;i+=1)r=r.write(32);st.blueBold(r),X.displayNumber(t,r),r=r.write(32).write(124),st.reset(r)},t.displayLineText=function(t,e,r){for(;t.isCont()&&t.line()===e;)r=r.write(t.head()),t=t.step();t.line()===e&&(r=r.writeln())},t.consumeLineText=function(t,e){for(;t.isCont()&&t.line()===e;)t=t.step()},t.formatSeverity=function(t,e){switch(t.level()){case x.FATAL_LEVEL:case x.ALERT_LEVEL:case x.ERROR_LEVEL:st.redBold(e);break;case x.WARNING_LEVEL:st.yellowBold(e);break;case x.NOTE_LEVEL:st.greenBold(e);break;case x.INFO_LEVEL:st.cyanBold(e);break;case x.DEBUG_LEVEL:case x.TRACE_LEVEL:default:st.magentaBold(e)}},t}(),pt=function(t){function e(r){var n=t.call(this,r instanceof at?r.message()||void 0:r)||this;return r instanceof at&&(n.diagnostic=r),n.__proto__=e.prototype,n}return y(e,t),e.prototype.toString=function(){return this.diagnostic?this.diagnostic.toString():t.prototype.toString.call(this)},e}(Error),ht=function(){function t(){}return t.prototype.isCont=function(){return!0},t.prototype.isDone=function(){return!1},t.prototype.isError=function(){return!1},t.prototype.fork=function(t){return this},t.prototype.bind=function(){throw new Error},t.prototype.trap=function(){throw new Error},t.prototype.asError=function(){throw new Error},t.done=function(e){return void 0===e?(void 0===t._done&&(t._done=new ft(void 0)),t._done):new ft(e)},t.error=function(t){return t instanceof Error?new ct(t):new ct(new pt(t))},t}(),ft=function(t){function e(e){var r=t.call(this)||this;return r._output=e,r}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isDone=function(){return!0},e.prototype.feed=function(t){return this},e.prototype.bind=function(){return this._output},e}(ht),ct=function(t){function e(e){var r=t.call(this)||this;return r._error=e,r}return y(e,t),e.prototype.isCont=function(){return!1},e.prototype.isError=function(){return!0},e.prototype.feed=function(t){return this},e.prototype.bind=function(){throw this._error},e.prototype.trap=function(){return this._error},e.prototype.asError=function(){return this},e}(ht),lt=function(){function t(){}return t.prototype.isFatal=function(){return!1},t.prototype.isReplacement=function(){return!1},t.prototype.replacementChar=function(){return 65533},t.prototype.toString=function(){return X.debug(this)},t.fatal=function(){return void 0===t._fatal&&(t._fatal=new dt(!1)),t._fatal},t.fatalNonZero=function(){return void 0===t._fatalNonZero&&(t._fatalNonZero=new dt(!0)),t._fatalNonZero},t.replacement=function(e){return void 0===e||65533===e?(void 0===t._replacement&&(t._replacement=new yt(65533,!1)),t._replacement):new yt(e,!1)},t.replacementNonZero=function(e){return void 0===e||65533===e?(void 0===t._replacementNonZero&&(t._replacementNonZero=new yt(65533,!0)),t._replacementNonZero):new yt(e,!0)},t}(),dt=function(t){function e(e){var r=t.call(this)||this;return r._isNonZero=e,r}return y(e,t),e.prototype.isFatal=function(){return!0},e.prototype.isNonZero=function(t){return void 0===t?this._isNonZero:t?lt.fatalNonZero():lt.fatal()},e.prototype.equals=function(t){return this===t||t instanceof e&&this._isNonZero===t._isNonZero},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,f.hash(this._isNonZero)))},e.prototype.debug=function(t){t=t.write("UtfErrorMode").write(46).write(this._isNonZero?"fatalNonZero":"fatal").write(40).write(41)},e}(lt),yt=function(t){function e(e,r){var n=t.call(this)||this;return n._replacementChar=e,n._isNonZero=r,n}return y(e,t),e.prototype.isReplacement=function(){return!0},e.prototype.replacementChar=function(){return this._replacementChar},e.prototype.isNonZero=function(t){return void 0===t?this._isNonZero:65533===this._replacementChar?t?lt.replacementNonZero():lt.replacement():new e(this._replacementChar,t)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._replacementChar===t._replacementChar&&this._isNonZero===t._isNonZero)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._replacementChar),f.hash(this._isNonZero)))},e.prototype.debug=function(t){t=t.write("UtfErrorMode").write(46).write(this._isNonZero?"replacementNonZero":"replacement").write(40),65533!==this._replacementChar&&X.debugChar(this._replacementChar,t),t=t.write(41)},e}(lt),_t=function(t){function e(e,r,n,i,o){void 0===i&&(i=M.standard()),void 0===o&&(o=!1);var s=t.call(this)||this;return s._array=e,s._index=r,s._limit=n,s._settings=i,s._isPart=o,s}return y(e,t),e.prototype.isCont=function(){return this._index<this._limit},e.prototype.isFull=function(){return this._isPart&&this._index>=this._limit},e.prototype.isDone=function(){return!this._isPart&&this._index>=this._limit},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0===t?this._isPart:(this._isPart=t,this)},e.prototype.index=function(t){return void 0===t?this._index:0<=t&&t<=this._limit?(this._index=t,this):rt.error(new P("invalid index"),this._settings)},e.prototype.limit=function(t){return void 0===t?this._limit:0<=t&&t<=this._array.length?(this._limit=t,this):rt.error(new P("invalid limit"),this._settings)},e.prototype.capacity=function(){return this._array.length},e.prototype.remaining=function(){return this._limit-this._index},e.prototype.has=function(t){return 0<=t&&t<this._limit},e.prototype.get=function(t){if(0<=t&&t<this._limit)return this._array[t];throw new P},e.prototype.set=function(t,e){if(!(0<=t&&t<this._limit))throw new P;this._array[t]=e},e.prototype.write=function(t){if("number"==typeof t){var e=this._index;return e<this._limit?(this._array[e]=t,this._index=e+1,this):rt.error(new P("full"),this._settings)}return rt.error(new P("binary output"),this._settings)},e.prototype.writeln=function(t){return rt.error(new P("binary output"),this._settings)},e.prototype.step=function(t){var e=this._index+t;return 0<=e&&e<=this._limit?(this._index=e,this):rt.error(new P("invalid step"),this._settings)},e.prototype.bind=function(){return new Uint8Array(this._array.buffer,0,this._index)},e.prototype.settings=function(t){return void 0===t?this._settings:(this._settings=M.fromAny(t),this)},e.prototype.clone=function(){return new e(this._array,this._index,this._limit,this._settings,this._isPart)},e}(rt),vt=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return y(e,t),e.prototype.bind=function(){return this.toUint8Array()},e.prototype.clone=function(){return new e(this.cloneArray(),this._size,this._settings)},e}(function(t){function e(e,r,n){var i=t.call(this)||this;return i._array=e,i._size=r,i._settings=n,i}return y(e,t),e.prototype.isCont=function(){return!0},e.prototype.isFull=function(){return!1},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0!==t&&this},e.prototype.write=function(t){if("number"==typeof t){var r=this._size,n=this._array,i=void 0;return null===n||r+1>n.length?(i=new Uint8Array(e.expand(r+1)),null!==n&&i.set(n,0),this._array=i):i=n,i[r]=t,this._size=r+1,this}throw new TypeError(""+t)},e.prototype.writeln=function(t){throw new TypeError(""+t)},e.prototype.toUint8Array=function(){var t=this._size,e=this._array;if(null!==e&&t===e.length)return e;var r=new Uint8Array(t);return null!==e&&r.set(e.slice(0,t),0),this._array=r,r},e.prototype.cloneArray=function(){var t=this._array;return null!==t?t.slice(0,this._size):null},e.prototype.settings=function(t){return void 0===t?this._settings:(this._settings=M.fromAny(t),this)},e.expand=function(t){return t=Math.max(32,t)-1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},e}(T)),mt=function(){function t(){}return t.outputBuffer=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=t.length),new _t(t,e,e+r)},t.uint8ArrayOutput=function(t,e){var r;return void 0===e&&"number"!=typeof t?(e=t,t=void 0):"number"!=typeof t&&(t=void 0),r="number"==typeof t?new Uint8Array(t):null,e=M.fromAny(e),new vt(r,0,e)},t}(),wt=function(){function t(t){this._alphabet=t}return t.prototype.alphabet=function(){return this._alphabet},t.prototype.encodeDigit=function(t){return this._alphabet.charCodeAt(t)},t.prototype.uint8ArrayWriter=function(e){return void 0===e?new t.Writer(void 0,void 0,this):new t.Writer(e,e,this)},t.prototype.writeUint8Array=function(e,r){return t.Writer.write(r,void 0,e,this)},t.prototype.writeInteger=function(e,r,n){return void 0===n&&(n=0),t.IntegerWriter.write(r,void 0,e,n,this)},t.prototype.writeIntegerLiteral=function(e,r,n){return void 0===n&&(n=0),t.IntegerWriter.writeLiteral(r,void 0,e,n,this)},t.lowercase=function(){return void 0===t._lowercase&&(t._lowercase=new t("0123456789abcdef")),t._lowercase},t.uppercase=function(){return void 0===t._uppercase&&(t._uppercase=new t("0123456789ABCDEF")),t._uppercase},t.isDigit=function(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102},t.decodeDigit=function(t){if(t>=48&&t<=57)return t-48;if(t>=65&&t<=70)return t-65+10;if(t>=97&&t<=102)return t-97+10;var e=Z.stringOutput();throw e.write("Invalid base-16 digit: "),X.debugChar(t,e),new Error(e.bind())},t.writeQuantum=function(e,r,n){var i=t.decodeDigit(e),o=t.decodeDigit(r);n=n.write(i<<4|o)},t.parser=function(e){return new t.Parser(e)},t.parse=function(e,r){return t.Parser.parse(e,r)},t.parseUint8Array=function(e){return t.Parser.parse(e,mt.uint8ArrayOutput())},t}(),gt=function(t){function e(e,r,n,i,o,s){void 0===n&&(n=-1),void 0===i&&(i=-1),void 0===o&&(o=-1),void 0===s&&(s=0);var u=t.call(this)||this;return u._output=e,u._errorMode=r,u._c1=n,u._c2=i,u._c3=o,u._have=s,u}return y(e,t),e.prototype.isCont=function(){return this._output.isCont()},e.prototype.isFull=function(){return this._output.isFull()},e.prototype.isDone=function(){return this._output.isDone()},e.prototype.isError=function(){return this._output.isError()},e.prototype.isPart=function(t){return void 0===t?this._output.isPart():(this._output=this._output.isPart(t),this)},e.prototype.write=function(t){if("number"==typeof t){var r=this._c1,n=this._c2,i=this._c3,o=-1,s=this._have;if(t>=0)switch(s){case 0:r=255&t,s=1;break;case 1:n=255&t,s=2;break;case 2:i=255&t,s=3;break;case 3:o=255&t,s=4;break;default:throw new Error("unreachable")}if(0===r&&this._errorMode.isNonZero())return T.error(new P("unexpected NUL byte"));if(r>=0&&r<=127)this._output=this._output.write(r),this._have=0;else if(r>=194&&r<=244)if(r>=194&&r<=223&&n>=128&&n<=191)this._output=this._output.write((31&r)<<6|63&n),this._c1=-1,this._have=0;else if(224===r&&n>=160&&n<=191||r>=225&&r<=236&&n>=128&&n<=191||237===r&&n>=128&&n<=159||r>=238&&r<=239&&n>=128&&n<=191)if(i>=128&&i<=191)this._output=this._output.write((15&r)<<12|(63&n)<<6|63&i),this._c1=-1,this._c2=-1,this._have=0;else if(i>=0){if(this._errorMode.isFatal())return T.error(new P(e.invalid(r,n,i)));this._output=this._output.write(this._errorMode.replacementChar()),this._c1=i,this._c2=-1,this._have=1}else{if(t<0||this._output.isDone())return T.error(new P(e.invalid(r,n)));this._c2=n,this._have=2}else if(240===r&&n>=144&&n<=191||r>=241&&r<=243&&n>=128&&n<=191||244===r&&n>=128&&n<=143)if(i>=128&&i<=191)if(o>=128&&o<=191)this._have=4,this._output=this._output.write((7&r)<<18|(63&n)<<12|(63&i)<<6|63&o),this._c1=-1,this._c2=-1,this._c3=-1,this._have=0;else if(o>=0){if(this._errorMode.isFatal())return T.error(new P(e.invalid(r,n,i,o)));this._output=this._output.write(this._errorMode.replacementChar()),this._c1=o,this._c2=-1,this._c3=-1,this._have=1}else{if(t<0||this._output.isDone())return T.error(new P(e.invalid(r,n,i)));this._c3=i,this._have=3}else if(i>=0){if(this._errorMode.isFatal())return T.error(new P(e.invalid(r,n,i)));this._output=this._output.write(this._errorMode.replacementChar()),this._c1=i,this._c2=-1,this._have=1}else{if(t<0||this._output.isDone())return T.error(new P(e.invalid(r,n)));this._c2=n,this._have=2}else if(n>=0){if(this._errorMode.isFatal())return T.error(new P(e.invalid(r,n)));this._output=this._output.write(this._errorMode.replacementChar()),this._c1=n,this._have=1}else{if(t<0||this._output.isDone())return T.error(new P(e.invalid(r)));this._c1=r,this._have=1}else if(r>=0){if(this._errorMode.isFatal())return T.error(new P(e.invalid(r)));this._output=this._output.write(this._errorMode.replacementChar()),this._have=0}return this._output.isError()?this._output:this}if("string"==typeof t)return this._output.write(t),this;throw new TypeError(""+t)},e.invalid=function(t,e,r,n){var i=Z.stringOutput();return i=i.write("invalid UTF-8 code unit sequence: "),wt.uppercase().writeIntegerLiteral(t,i,2),void 0!==e&&(i=i.write(" "),wt.uppercase().writeIntegerLiteral(e,i,2),void 0!==r&&(i=i.write(" "),wt.uppercase().writeIntegerLiteral(r,i,2),void 0!==n&&(i=i.write(" "),wt.uppercase().writeIntegerLiteral(n,i,2)))),i.bind()},e.prototype.settings=function(t){return void 0===t?this._output.settings():(this._output.settings(t),this)},e.prototype.bind=function(){return 0===this._have?this._output.bind():this.write(-1).bind()},e.prototype.trap=function(){return this._output.trap()},e.prototype.clone=function(){return new e(this._output.clone(),this._errorMode,this._c1,this._c2,this._c3,this._have)},e}(T),bt=function(t){function e(e,r,n,i,o,s){void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=4);var u=t.call(this)||this;return u._output=e,u._errorMode=r,u._c2=n,u._c3=i,u._c4=o,u._index=s,u}return y(e,t),e.prototype.isCont=function(){return this._output.isCont()},e.prototype.isFull=function(){return this._output.isFull()},e.prototype.isDone=function(){return this._output.isDone()},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0===t?this._output.isPart():(this._output=this._output.isPart(t),this)},e.prototype.write=function(t){if("number"==typeof t){for(var e=0,r=this._c2,n=this._c3,i=this._c4,o=this._index;o<4;){if(!this._output.isCont())return T.error(new P("unable to flush buffered code units"));switch(o){case 1:this._output=this._output.write(r),this._c2=0;break;case 2:this._output=this._output.write(n),this._c3=0;break;case 3:this._output=this._output.write(i),this._c4=0;break;default:throw new Error("unreachable")}o+=1}if(t>=0&&t<=127)i=t,o=3;else if(t>=128&&t<=2047)n=192|t>>>6,i=128|63&t,o=2;else if(t>=2048&&t<=65535||t>=57344&&t<=65535)r=224|t>>>12,n=128|t>>>6&63,i=128|63&t,o=1;else{if(!(t>=65536&&t<=1114111))return this._errorMode.isFatal()?T.error(new P("invalid code point: "+t)):this.write(this._errorMode.replacementChar());e=240|t>>>18,r=128|t>>>12&63,n=128|t>>>6&63,i=128|63&t,o=0}do{switch(o){case 0:this._output=this._output.write(e);break;case 1:this._output=this._output.write(r),this._c2=0;break;case 2:this._output=this._output.write(n),this._c3=0;break;case 3:this._output=this._output.write(i),this._c4=0;break;default:throw new Error("unreachable")}o+=1}while(o<4&&this._output.isCont());return o<4&&(o<3&&(o<2&&(this._c2=r),this._c3=n),this._c4=i),this._index=o,this}if("string"==typeof t)return this._output.write(t),this;throw new TypeError(""+t)},e.prototype.flush=function(){for(var t=this._index;t<4;){if(!this._output.isCont())return T.error(new P("unable to flush buffered code units"));switch(t){case 1:this._output=this._output.write(this._c2),this._c2=0;break;case 2:this._output=this._output.write(this._c3),this._c3=0;break;case 3:this._output=this._output.write(this._c4),this._c4=0;break;default:throw new Error("unreachable")}t+=1}return this._index=t,this},e.prototype.settings=function(t){return void 0===t?this._output.settings():(this._output.settings(t),this)},e.prototype.bind=function(){return this._output.bind()},e.prototype.clone=function(){return new e(this._output.clone(),this._errorMode,this._c2,this._c3,this._c4,this._index)},e}(T),xt=function(){function t(){}return t.sizeOf=function(e,r){if("number"==typeof e||void 0===e){if("number"==typeof e){if(0===e&&void 0!==r&&r.isNonZero())return 2;if(e>=0&&e<=127)return 1;if(e>=128&&e<=2047)return 2;if(e>=2048&&e<=65535||e>=57344&&e<=65535)return 3;if(e>=65536&&e<=1114111)return 4}return void 0===r?3:r.isReplacement()?t.sizeOf(r.replacementChar()):0}if("string"==typeof e){for(var n=0,i=0,o=e.length;i<o;i=e.offsetByCodePoints(i,1))n+=t.sizeOf(e.charCodeAt(i),r);return n}throw new TypeError(""+e)},t.decodedOutput=function(t,e){return void 0===e&&(e=lt.fatal()),new gt(t,e)},t.encodedOutput=function(t,e){return void 0===e&&(e=lt.fatal()),new bt(t,e)},t.decodedString=function(){return t.decodedOutput(Z.stringOutput())},t}(),St=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._sign=e,o._value=r,o._mode=n,o._step=i,o}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._sign,this._value,this._mode,this._step)},e.parse=function(t,r,n,i,o){void 0===r&&(r=1),void 0===n&&(n=0),void 0===i&&(i=2),void 0===o&&(o=1);var s=0;if(1===o)if(t.isCont())45===(s=t.head())&&(t=t.step(),r=-1),o=2;else if(t.isDone())return ht.error(at.expected("number",t));if(2===o)if(t.isCont())if(48===(s=t.head()))t=t.step(),o=4;else{if(!(s>=49&&s<=57)){if(i>0&&46===s){var u=Z.stringOutput();return r<0&&(u=u.write(45)),Ot.parse(t,u,i)}return ht.error(at.expected("number",t))}t=t.step(),n=r*(s-48),o=3}else if(t.isDone())return ht.error(at.expected("number",t));if(3===o){for(;t.isCont()&&(s=t.head())>=48&&s<=57;){var a=10*n+r*(s-48);if(!(-9007199254740991<=a&&a<=9007199254740992))return ht.error(at.message("integer overflow",t));n=a,t=t.step()}if(t.isCont())o=4;else if(t.isDone())return ht.done(n)}if(4===o){if(t.isCont()){if(s=t.head(),i>0&&46===s||i>1&&(69===s||101===s)){u=Z.stringOutput();return u=r<0&&0===n?u.write(45).write(48):u.write(""+n),Ot.parse(t,u,i)}return ht.done(n)}if(t.isDone())return ht.done(n)}return new e(r,n,i,o)},e}(ht);ut.NumberParser=St;var Ot=function(t){function e(e,r,n){var i=t.call(this)||this;return i._output=e,i._mode=r,i._step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._output,this._mode,this._step)},e.parse=function(t,r,n,i){void 0===n&&(n=2),void 0===i&&(i=1);var o=0;if(1===i)if(t.isCont())if(46===(o=t.head()))t=t.step(),r=r.write(o),i=2;else{if(!(n>1)||69!==o&&101!==o)return ht.error(at.expected("decimal or exponent",t));t=t.step(),r=r.write(o),i=5}else if(t.isDone())return ht.error(at.expected("decimal or exponent",t));if(2===i)if(t.isCont()){if(!((o=t.head())>=48&&o<=57))return ht.error(at.expected("digit",t));t=t.step(),r=r.write(o),i=3}else if(t.isDone())return ht.error(at.expected("digit",t));if(3===i){for(;t.isCont()&&(o=t.head())>=48&&o<=57;)t=t.step(),r=r.write(o);if(t.isCont()){if(!(n>1))return ht.done(+r.bind());i=4}else if(t.isDone())return ht.done(+r.bind())}if(4===i){if(69!==(o=t.head())&&101!==o)return ht.done(+r.bind());t=t.step(),r=r.write(o),i=5}if(5===i)if(t.isCont())43!==(o=t.head())&&45!==o||(t=t.step(),r=r.write(o)),i=6;else if(t.isDone())return ht.error(at.unexpected(t));if(6===i)if(t.isCont()){if(!((o=t.head())>=48&&o<=57))return ht.error(at.expected("digit",t));t=t.step(),r=r.write(o),i=7}else if(t.isDone())return ht.error(at.expected("digit",t));if(7===i){for(;t.isCont()&&(o=t.head())>=48&&o<=57;)t=t.step(),r=r.write(o);if(!t.isEmpty())return ht.done(+r.bind())}return new e(r,n,i)},e}(ht),At=function(t){function e(e,r,n,i){void 0===n&&(n=0),void 0===i&&(i=1);var o=t.call(this)||this;return o._value=e,o._input=r,o._index=n,o._step=i,o}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._value,this._input,this._index,this._step)},e.write=function(t,r,n,i,o){if(void 0===i&&(i=0),void 0===o&&(o=1),0===o)return W.done();if(1===o&&(n<0?t.isCont()&&(t=t.write(45),o=2):o=2),2===o)if(n>-10&&n<10){if(t.isCont())return t=t.write(ut.encodeDigit(Math.abs(0|n))),W.done(r)}else{for(var s=new Array(19),u=n,a=18;0!==u;)s[a]=Math.abs(u%10|0),u=u/10|0,a-=1;for(a+=1+i;a<19&&t.isCont();)t=t.write(ut.encodeDigit(s[a])),i+=1,a+=1;if(19===a)return W.done(r)}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o)},e}(W);ut.IntegerWriter=At;var Et=function(t){function e(e,r,n){void 0===r&&(r=0),void 0===n&&(n=1);var i=t.call(this)||this;return i._output=e,i._p=r,i._step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._output.clone(),this._p,this._step)},e.parse=function(t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=1);for(var o=0;!t.isEmpty();){if(1===i)if(t.isCont()&&(o=t.head(),wt.isDigit(o)))t=t.step(),n=o,i=2;else if(!t.isEmpty())return ht.done(r.bind());if(2===i)if(t.isCont()&&(o=t.head(),wt.isDigit(o)))t=t.step(),wt.writeQuantum(n,o,r),n=0,i=1;else if(!t.isEmpty())return ht.error(at.expected("base16 digit",t))}return new e(r,n,i)},e}(ht);wt.Parser=Et;var Ct=function(t){function e(e,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=1);var s=t.call(this)||this;return s._value=e,s._input=r,s._base16=n,s._index=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){if(t instanceof Uint8Array)return new e(void 0,t,this._base16);throw new TypeError(""+t)},e.prototype.pull=function(t){return e.write(t,this._value,this._input,this._base16,this._index,this._step)},e.write=function(t,r,n,i,o,s){for(void 0===o&&(o=0),void 0===s&&(s=1);o<n.length;){var u=n[o];1===s&&t.isCont()&&(t=t.write(i.encodeDigit(u>>>4)),s=2),2===s&&t.isCont()&&(t=t.write(i.encodeDigit(15&u)),o+=1,s=1)}return o===n.length?W.done(r):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e}(W);wt.Writer=Ct;var It=function(t){function e(e,r,n,i,o,s){var u=t.call(this)||this;return u._value=e,u._input=r,u._width=n,u._base16=i,u._index=o,u._step=s,u}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._value,this._input,this._width,this._base16,this._index,this._step)},e.write=function(t,r,n,i,o,s,u){if(void 0===s&&(s=0),void 0===u&&(u=3),u<=0)return W.done();if(1===u&&t.isCont()&&(t=t.write(48),u=2),2===u&&t.isCont()&&(t=t.write(120),u=3),3===u)if(n>=0&&n<16&&i<=1){if(t.isCont())return t=t.write(o.encodeDigit(n)),W.done(r)}else{for(var a=15,p=new Array(16),h=n;0!==h||a>=16-i;)p[a]=15&h,h>>>=4,a-=1;for(a+=1+s;a<16&&t.isCont();)t=t.write(o.encodeDigit(p[a])),s+=1,a+=1;if(16===a)return W.done(r)}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s,u)},e.writeLiteral=function(t,r,n,i,o){return e.write(t,r,n,i,o,0,1)},e}(W);wt.IntegerWriter=It;var Dt=function(){function t(){}return t.prototype.decodeDigit=function(t){if(t>=65&&t<=90)return t-65;if(t>=97&&t<=122)return t+-71;if(t>=48&&t<=57)return t+4;if(43===t||45===t)return 62;if(47===t||95===t)return 63;var e=Z.stringOutput();throw e.write("Invalid base-64 digit: "),X.debugChar(t,e),new Error(e.bind())},t.prototype.encodeDigit=function(t){return this.alphabet().charCodeAt(t)},t.prototype.writeQuantum=function(t,e,r,n,i){var o=this.decodeDigit(t),s=this.decodeDigit(e);if(61!==r){var u=this.decodeDigit(r);if(61!==n){var a=this.decodeDigit(n);i=(i=(i=i.write(o<<2|s>>>4)).write(s<<4|u>>>2)).write(u<<6|a)}else i=(i=i.write(o<<2|s>>>4)).write(s<<4|u>>>2)}else{if(61!==n)throw new Error("Improperly padded base-64");i=i.write(o<<2|s>>>4)}},t.prototype.parser=function(e){return new t.Parser(e,this)},t.prototype.parse=function(e,r){return t.Parser.parse(e,r,this)},t.prototype.parseUint8Array=function(e){return t.Parser.parse(e,mt.uint8ArrayOutput(),this)},t.prototype.uint8ArrayWriter=function(e){return void 0===e?new t.Writer(void 0,void 0,this):new t.Writer(e,e,this)},t.prototype.writeUint8Array=function(e,r){return t.Writer.write(r,void 0,e,this)},t.standard=function(e){return void 0===e&&(e=!0),e?(void 0===t._standard&&(t._standard=new kt(!0)),t._standard):(void 0===t._standardUnpadded&&(t._standardUnpadded=new kt(!0)),t._standardUnpadded)},t.url=function(e){return void 0===e&&(e=!0),e?(void 0===t._url&&(t._url=new Mt(!0)),t._url):(void 0===t._urlUnpadded&&(t._urlUnpadded=new Mt(!1)),t._urlUnpadded)},t}(),kt=function(t){function e(e){var r=t.call(this)||this;return r._isPadded=e,r}return y(e,t),e.prototype.alphabet=function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},e.prototype.isPadded=function(t){return void 0===t?this._isPadded:t===this._isPadded?this:Dt.standard(t)},e.prototype.isDigit=function(t){return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||43===t||47===t},e}(Dt),Mt=function(t){function e(e){var r=t.call(this)||this;return r._isPadded=e,r}return y(e,t),e.prototype.alphabet=function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},e.prototype.isPadded=function(t){return void 0===t?this._isPadded:t===this._isPadded?this:Dt.url(t)},e.prototype.isDigit=function(t){return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||45===t||95===t},e}(Dt),Pt=function(t){function e(e,r,n,i,o,s){void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=1);var u=t.call(this)||this;return u._output=e,u._base64=r,u._p=n,u._q=i,u._r=o,u._step=s,u}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._output.clone(),this._base64,this._p,this._q,this._r,this._step)},e.parse=function(t,r,n,i,o,s,u){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=1);for(var a=0;!t.isEmpty();){if(1===u)if(t.isCont()&&(a=t.head(),n.isDigit(a)))t=t.step(),i=a,u=2;else if(!t.isEmpty())return ht.done(r.bind());if(2===u)if(t.isCont()&&(a=t.head(),n.isDigit(a)))t=t.step(),o=a,u=3;else if(!t.isEmpty())return ht.error(at.expected("base64 digit",t));if(3===u)if(t.isCont()&&(a=t.head(),n.isDigit(a)||61===a))t=t.step(),s=a,u=61!==a?4:5;else if(!t.isEmpty())return n.isPadded()?ht.error(at.unexpected(t)):(n.writeQuantum(i,o,61,61,r),ht.done(r.bind()));if(4===u){if(t.isCont()&&(a=t.head(),n.isDigit(a)||61===a)){if(t=t.step(),n.writeQuantum(i,o,s,a,r),s=0,o=0,i=0,61===a)return ht.done(r.bind());u=1}else if(!t.isEmpty())return n.isPadded()?ht.error(at.unexpected(t)):(n.writeQuantum(i,o,s,61,r),ht.done(r.bind()))}else if(5===u){if(t.isCont()&&61===(a=t.head()))return t=t.step(),n.writeQuantum(i,o,s,a,r),s=0,o=0,i=0,ht.done(r.bind());if(!t.isEmpty())return ht.error(at.expected(61,t))}}return new e(r,n,i,o,s,u)},e}(ht);Dt.Parser=Pt;var Tt=function(t){function e(e,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=1);var s=t.call(this)||this;return s._value=e,s._input=r,s._base64=n,s._index=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){if(t instanceof Uint8Array)return new e(void 0,t,this._base64);throw new TypeError(""+t)},e.prototype.pull=function(t){return e.write(t,this._value,this._input,this._base64,this._index,this._step)},e.write=function(t,r,n,i,o,s){for(void 0===o&&(o=0),void 0===s&&(s=1);o+2<n.length&&t.isCont();){var u=n[o],a=n[o+1],p=n[o+2];1===s&&t.isCont()&&(t=t.write(i.encodeDigit(u>>>2)),s=2),2===s&&t.isCont()&&(t=t.write(i.encodeDigit(63&(u<<4|a>>>4))),s=3),3===s&&t.isCont()&&(t=t.write(i.encodeDigit(63&(a<<2|p>>>6))),s=4),4===s&&t.isCont()&&(t=t.write(i.encodeDigit(63&p)),o+=3,s=1)}if(o+1<n.length&&t.isCont()){u=n[o],a=n[o+1];1===s&&t.isCont()&&(t=t.write(i.encodeDigit(u>>>2)),s=2),2===s&&t.isCont()&&(t=t.write(i.encodeDigit(63&(u<<4|a>>>4))),s=3),3===s&&t.isCont()&&(t=t.write(i.encodeDigit(a<<2&63)),s=4),4===s&&(i.isPadded()?t.isCont()&&(t=t.write(61),o+=2):o+=2)}else if(o<n.length&&t.isCont()){u=n[o];1===s&&t.isCont()&&(t=t.write(i.encodeDigit(u>>>2)),s=2),2===s&&t.isCont()&&(t=t.write(i.encodeDigit(u<<4&63)),s=3),3===s&&(i.isPadded()?t.isCont()&&(t=t.write(61),s=4):o+=1),4===s&&t.isCont()&&(t=t.write(61),o+=1)}return o===n.length?W.done(r):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e}(W);Dt.Writer=Tt;var Vt=function(t){function e(e){var r=t.call(this)||this;return r._cursor=e,r}return y(e,t),e.prototype.isEmpty=function(){return this._cursor.isEmpty()},e.prototype.head=function(){return this._cursor.head()[0]},e.prototype.step=function(){this._cursor.step()},e.prototype.skip=function(t){this._cursor.skip(t)},e.prototype.hasNext=function(){return this._cursor.hasNext()},e.prototype.nextIndex=function(){return this._cursor.nextIndex()},e.prototype.next=function(){var t=this._cursor.next(),e=t.value,r=t.done;return{value:e&&e[0],done:r}},e.prototype.hasPrevious=function(){return this._cursor.hasPrevious()},e.prototype.previousIndex=function(){return this._cursor.previousIndex()},e.prototype.previous=function(){var t=this._cursor.previous(),e=t.value,r=t.done;return{value:e&&e[0],done:r}},e.prototype.delete=function(){this._cursor.delete()},e}(l),zt=function(t){function e(e){var r=t.call(this)||this;return r._cursor=e,r}return y(e,t),e.prototype.isEmpty=function(){return this._cursor.isEmpty()},e.prototype.head=function(){return this._cursor.head()[1]},e.prototype.step=function(){this._cursor.step()},e.prototype.skip=function(t){this._cursor.skip(t)},e.prototype.hasNext=function(){return this._cursor.hasNext()},e.prototype.nextIndex=function(){return this._cursor.nextIndex()},e.prototype.next=function(){var t=this._cursor.next(),e=t.value,r=t.done;return{value:e&&e[1],done:r}},e.prototype.hasPrevious=function(){return this._cursor.hasPrevious()},e.prototype.previousIndex=function(){return this._cursor.previousIndex()},e.prototype.previous=function(){var t=this._cursor.previous(),e=t.value,r=t.done;return{value:e&&e[1],done:r}},e.prototype.delete=function(){this._cursor.delete()},e}(l),Bt=function(t){function e(e,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0);var o=t.call(this)||this;return o._pages=e,o._index=r,o._pageIndex=n,o._pageCursor=i,o}return y(e,t),e.prototype.isEmpty=function(){for(;;)if(void 0!==this._pageCursor){if(!this._pageCursor.isEmpty())return!1;this._pageCursor=void 0}else{if(!(this._pageIndex<this._pages.length))return this._pageIndex=this._pages.length,!0;this._pageCursor=this.pageCursor(this._pages[this._pageIndex]),this._pageIndex+=1}},e.prototype.head=function(){for(;;)if(void 0!==this._pageCursor){if(!this._pageCursor.isEmpty())return this._pageCursor.head();this._pageCursor=void 0}else{if(!(this._pageIndex<this._pages.length))throw this._pageIndex=this._pages.length,new Error("empty");this._pageCursor=this.pageCursor(this._pages[this._pageIndex]),this._pageIndex+=1}},e.prototype.step=function(){for(;;)if(void 0!==this._pageCursor){if(!this._pageCursor.isEmpty())return void(this._index+=1);this._pageCursor=void 0}else{if(!(this._pageIndex<this._pages.length))throw this._pageIndex=this._pages.length,new Error("empty");this._pageCursor=this.pageCursor(this._pages[this._pageIndex]),this._pageIndex+=1}},e.prototype.skip=function(t){for(;t>0;)if(void 0!==this._pageCursor)this._pageCursor.hasNext()?(this._index+=1,t-=1,this._pageCursor.next()):this._pageCursor=void 0;else{if(!(this._pageIndex<this._pages.length))break;var e=this._pages[this._pageIndex],r=this.pageSize(e);if(this._pageIndex+=1,r<t){this._pageCursor=this.pageCursor(e),t>0&&(this._index+=t,this._pageCursor.skip(t),t=0);break}this._index+=r,t-=r}},e.prototype.hasNext=function(){for(;;)if(void 0!==this._pageCursor){if(this._pageCursor.hasNext())return!0;this._pageCursor=void 0}else{if(!(this._pageIndex<this._pages.length))return this._pageIndex=this._pages.length,!1;this._pageCursor=this.pageCursor(this._pages[this._pageIndex]),this._pageIndex+=1}},e.prototype.nextIndex=function(){return this._index},e.prototype.next=function(){for(;;)if(void 0!==this._pageCursor){if(this._pageCursor.hasNext())return this._index+=1,this._pageCursor.next();this._pageCursor=void 0}else{if(!(this._pageIndex<this._pages.length))return this._pageIndex=this._pages.length,{done:!0};this._pageCursor=this.pageCursor(this._pages[this._pageIndex]),this._pageIndex+=1}},e.prototype.hasPrevious=function(){for(;;)if(void 0!==this._pageCursor){if(this._pageCursor.hasPrevious())return!0;this._pageCursor=void 0}else{if(!(this._pageIndex>0))return this._pageIndex=0,!1;this._pageCursor=this.reversePageCursor(this._pages[this._pageIndex-1]),this._pageIndex-=1}},e.prototype.previousIndex=function(){return this._index-1},e.prototype.previous=function(){for(;;)if(void 0!==this._pageCursor){if(this._pageCursor.hasPrevious())return this._index-=1,this._pageCursor.previous();this._pageCursor=void 0}else{if(!(this._pageIndex>0))return this._pageIndex=0,{done:!0};this._pageCursor=this.reversePageCursor(this._pages[this._pageIndex-1]),this._pageIndex-=1}},e.prototype.set=function(t){this._pageCursor.set(t)},e.prototype.delete=function(){this._pageCursor.delete()},e}(l),Rt=function(){function t(){}return t.prototype.compare=function(t,e){return c.compare(t,e)},t.prototype.pageShouldSplit=function(t){return t.arity>this.pageSplitSize},t.prototype.pageShouldMerge=function(t){return t.arity<this.pageSplitSize>>>1},t}();Rt.prototype.pageSplitSize=32;var Ft=function(t){function e(r){void 0===r&&(r=e.Page.empty());var n=t.call(this)||this;return n.root=r,n}return y(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return this.root.isEmpty()},e.prototype.has=function(t){return this.root.has(t,this)},e.prototype.get=function(t){return this.root.get(t,this)},e.prototype.getEntry=function(t){return this.root.getEntry(t)},e.prototype.firstKey=function(){var t=this.root.firstEntry();return void 0!==t?t[0]:void 0},e.prototype.firstValue=function(){var t=this.root.firstEntry();return void 0!==t?t[1]:void 0},e.prototype.firstEntry=function(){return this.root.firstEntry()},e.prototype.lastKey=function(){var t=this.root.lastEntry();return void 0!==t?t[0]:void 0},e.prototype.lastValue=function(){var t=this.root.lastEntry();return void 0!==t?t[1]:void 0},e.prototype.lastEntry=function(){return this.root.lastEntry()},e.prototype.nextKey=function(t){var e=this.root.nextEntry(t,this);return void 0!==e?e[0]:void 0},e.prototype.nextValue=function(t){var e=this.root.nextEntry(t,this);return void 0!==e?e[1]:void 0},e.prototype.nextEntry=function(t){return this.root.nextEntry(t,this)},e.prototype.previousKey=function(t){var e=this.root.previousEntry(t,this);return void 0!==e?e[0]:void 0},e.prototype.previousValue=function(t){var e=this.root.previousEntry(t,this);return void 0!==e?e[1]:void 0},e.prototype.previousEntry=function(t){return this.root.previousEntry(t,this)},e.prototype.set=function(t,e){var r=this.root,n=this.root.updated(t,e,this);return r!==n&&(n.size>r.size&&(n=n.balanced(this)),this.root=n),this},e.prototype.delete=function(t){var e=this.root,r=this.root.removed(t,this);return e!==r&&(this.root=r,!0)},e.prototype.drop=function(t){return t>0&&this.root.size>0&&(t<this.root.size?this.root=this.root.drop(t,this):this.root=e.Page.empty()),this},e.prototype.take=function(t){return t<this.root.size&&this.root.size>0&&(this.root=t>0?this.root.take(t,this):e.Page.empty()),this},e.prototype.clear=function(){this.root=e.Page.empty()},e.prototype.updated=function(t,e){var r=this.root,n=r.updated(t,e,this);return r!==n?(n.size>r.size&&(n=n.balanced(this)),this.copy(n)):this},e.prototype.removed=function(t){var e=this.root,r=e.removed(t,this);return e!==r?this.copy(r):this},e.prototype.cleared=function(){return this.root.isEmpty()?this:this.copy(e.Page.empty())},e.prototype.reduced=function(t,e,r){var n=this.root,i=n.reduced(t,e,r);return n!==i&&(this.root=i),i.fold()},e.prototype.forEach=function(t,e){return this.root.forEach(t,e,this)},e.prototype.keys=function(){return this.root.keys()},e.prototype.values=function(){return this.root.values()},e.prototype.entries=function(){return this.root.entries()},e.prototype.reverseKeys=function(){return this.root.reverseKeys()},e.prototype.reverseValues=function(){return this.root.reverseValues()},e.prototype.reverseEntries=function(){return this.root.reverseEntries()},e.prototype.clone=function(){return this.copy(this.root)},e.prototype.copy=function(t){var r=new e(t);return r.compare!==this.compare&&(r.compare=this.compare),r.pageSplitSize!==this.pageSplitSize&&(r.pageSplitSize=this.pageSplitSize),r},e}(Rt),Lt=function(){function t(){}return t.prototype.keys=function(){return new Vt(this.entries())},t.prototype.values=function(){return new zt(this.entries())},t.prototype.reverseKeys=function(){return new Vt(this.reverseEntries())},t.prototype.reverseValues=function(){return new zt(this.reverseEntries())},t.empty=function(){return void 0===t._empty&&(t._empty=new Ft.Leaf([],void 0)),t._empty},t}();Ft.Page=Lt;var qt=function(t){function e(e,r){var n=t.call(this)||this;return n._slots=e,n._fold=r,n}return y(e,t),Object.defineProperty(e.prototype,"arity",{get:function(){return this._slots.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._slots.length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._slots.length},e.prototype.fold=function(){return this._fold},e.prototype.minKey=function(){return this._slots[0][0]},e.prototype.maxKey=function(){return this._slots[this._slots.length-1][0]},e.prototype.has=function(t,e){return this.lookup(t,e)>=0},e.prototype.get=function(t,e){var r=this.lookup(t,e);return r>=0?this._slots[r][1]:void 0},e.prototype.getEntry=function(t){return this._slots[t]},e.prototype.firstEntry=function(){var t=this._slots;return 0!==t.length?t[0]:void 0},e.prototype.lastEntry=function(){var t=this._slots;return 0!==t.length?t[t.length-1]:void 0},e.prototype.nextEntry=function(t,e){var r=this.lookup(t,e);return r>=0?r+=1:r=-(r+1),this._slots[r]},e.prototype.previousEntry=function(t,e){var r=this.lookup(t,e);return r>=0?r-=1:r=-(r+2),this._slots[r]},e.prototype.updated=function(t,e,r){var n=this.lookup(t,r);return n>=0?this.updatedSlot(n,t,e):(n=-(n+1),this.insertedSlot(n,t,e))},e.prototype.updatedSlot=function(t,e,r){var n=this._slots;if(r!==n[t][1]){var i=n.slice(0);return i[t]=[e,r],this.newLeaf(i,void 0)}return this},e.prototype.insertedSlot=function(t,e,r){for(var n=this._slots,i=n.length+1,o=new Array(i),s=0;s<t;s+=1)o[s]=n[s];o[t]=[e,r];for(s=t;s<i-1;s+=1)o[s+1]=n[s];return this.newLeaf(o,void 0)},e.prototype.removed=function(t,e){var r=this.lookup(t,e);return r>=0?this._slots.length>1?this.removedSlot(r):Lt.empty():this},e.prototype.removedSlot=function(t){for(var e=this._slots,r=new Array(e.length-1),n=0;n<t;n+=1)r[n]=e[n];for(n=t;n<r.length;n+=1)r[n]=e[n+1];return this.newLeaf(r,void 0)},e.prototype.drop=function(t,e){if(t>0){var r=this._slots;if(t<r.length){for(var n=r.length-t,i=new Array(n),o=0;o<n;o+=1)i[o]=r[o+t];return this.newLeaf(i,void 0)}return Lt.empty()}return this},e.prototype.take=function(t,e){var r=this._slots;if(t<r.length){if(t>0){for(var n=new Array(t),i=0;i<t;i+=1)n[i]=r[i];return this.newLeaf(n,void 0)}return Lt.empty()}return this},e.prototype.balanced=function(t){var e=this._slots.length;if(e>1&&t.pageShouldSplit(this)){var r=e>>>1;return this.split(r)}return this},e.prototype.split=function(t){var e=new Array(2),r=this.splitLeft(t),n=this.splitRight(t);e[0]=r,e[1]=n;var i=new Array(1);return i[0]=n.minKey(),this.newNode(e,i,void 0,this._slots.length)},e.prototype.splitLeft=function(t){for(var e=this._slots,r=new Array(t),n=0;n<t;n+=1)r[n]=e[n];return this.newLeaf(r,void 0)},e.prototype.splitRight=function(t){for(var e=this._slots,r=e.length-t,n=new Array(r),i=0;i<r;i+=1)n[i]=e[i+t];return this.newLeaf(n,void 0)},e.prototype.reduced=function(t,e,r){if(void 0===this._fold){for(var n=this._slots,i=t,o=0,s=n.length;o<s;o+=1)i=e(i,n[o][1]);return this.newLeaf(n,i)}return this},e.prototype.forEach=function(t,e,r){for(var n=this._slots,i=0,o=n.length;i<o;i+=1){var s=n[i],u=t.call(e,s[0],s[1],r);if(void 0!==u)return u}},e.prototype.entries=function(){return l.array(this._slots)},e.prototype.reverseEntries=function(){return l.array(this._slots,this._slots.length)},e.prototype.lookup=function(t,e){for(var r=0,n=this._slots.length-1;r<=n;){var i=r+n>>>1,o=e.compare(t,this._slots[i][0]);if(o>0)r=i+1;else{if(!(o<0))return i;n=i-1}}return-(r+1)},e.prototype.newLeaf=function(t,r){return new e(t,r)},e.prototype.newNode=function(t,e,r,n){return new Ft.Node(t,e,r,n)},e}(Lt);Ft.Leaf=qt;var Nt=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._pages=e,o._knots=r,o._fold=n,o._size=i,o}return y(e,t),Object.defineProperty(e.prototype,"arity",{get:function(){return this._pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._size},e.prototype.fold=function(){return this._fold},e.prototype.minKey=function(){return this._pages[0].minKey()},e.prototype.maxKey=function(){return this._pages[this._pages.length-1].maxKey()},e.prototype.has=function(t,e){var r=this.lookup(t,e);if(r>0)r+=1;else{if(!(r<0))return!0;r=-(r+1)}return this._pages[r].has(t,e)},e.prototype.get=function(t,e){var r=this.lookup(t,e);return r>=0?r+=1:r=-(r+1),this._pages[r].get(t,e)},e.prototype.getEntry=function(t){for(var e=this._pages,r=0,n=e.length;r<n;r+=1){var i=e[r];if(t<i.size)return i.getEntry(t);t-=i.size}},e.prototype.firstEntry=function(){var t=this._pages;return 0!==t.length?t[0].firstEntry():void 0},e.prototype.lastEntry=function(){var t=this._pages;return 0!==t.length?t[t.length-1].lastEntry():void 0},e.prototype.nextEntry=function(t,e){var r=this.lookup(t,e);r>=0?r+=1:r=-(r+1);var n=this._pages,i=n[r].nextEntry(t,e);return void 0===i&&r+1<n.length&&(i=n[r+1].nextEntry(t,e)),i},e.prototype.previousEntry=function(t,e){var r=this.lookup(t,e);r>=0?r+=1:r=-(r+1);var n=this._pages,i=n[r].previousEntry(t,e);return void 0===i&&r>0&&(i=n[r-1].previousEntry(t,e)),i},e.prototype.updated=function(t,e,r){var n=this.lookup(t,r);n>=0?n+=1:n=-(n+1);var i=this._pages[n],o=i.updated(t,e,r);return i!==o?i.size!==o.size&&r.pageShouldSplit(o)?this.updatedPageSplit(n,o,i):this.updatedPage(n,o,i):this},e.prototype.updatedPage=function(t,e,r){var n=this._pages.slice(0);n[t]=e;var i,o=this._knots;o.length>0?(i=o.slice(0),t>0&&(i[t-1]=e.minKey())):i=[];var s=this._size-r.size+e.size;return this.newNode(n,i,void 0,s)},e.prototype.updatedPageSplit=function(t,e,r){for(var n=this._pages,i=new Array(n.length+1),o=0;o<t;o+=1)i[o]=n[o];var s=e.splitLeft(e.arity>>>1),u=e.splitRight(e.arity>>>1);i[t]=s,i[t+1]=u;for(o=t+1;o<n.length;o+=1)i[o+1]=n[o];var a=this._knots,p=new Array(n.length);if(t>0){for(o=0;o<t-1;o+=1)p[o]=a[o];p[t-1]=s.minKey(),p[t]=u.minKey();for(o=t;o<a.length;o+=1)p[o+1]=a[o]}else{p[0]=u.minKey();for(o=0;o<a.length;o+=1)p[o+1]=a[o]}var h=this._size-r.size+e.size;return this.newNode(i,p,void 0,h)},e.prototype.updatedPageMerge=function(t,e,r){for(var n=this._pages,i=e._pages,o=new Array(n.length+i.length-1),s=0;s<t;s+=1)o[s]=n[s];for(s=0;s<i.length;s+=1)o[s+t]=i[s];for(s=t+1;s<n.length;s+=1)o[s+i.length-1]=n[s];var u=this._knots,a=e._knots,p=new Array(o.length-1);if(t>0){for(s=0;s<t-1;s+=1)p[s]=u[s];p[t-1]=i[0].minKey();for(s=0;s<a.length;s+=1)p[s+t]=a[s];for(s=t;s<u.length;s+=1)p[s+a.length]=u[s]}else{for(s=0;s<a.length;s+=1)p[s]=a[s];p[a.length]=n[1].minKey();for(s=1;s<u.length;s+=1)p[s+a.length]=u[s]}var h=this._size-r.size+e.size;return this.newNode(o,p,void 0,h)},e.prototype.removed=function(t,e){var r=this.lookup(t,e);r>=0?r+=1:r=-(r+1);var n=this._pages[r],i=n.removed(t,e);return n!==i?this.replacedPage(r,i,n,e):this},e.prototype.replacedPage=function(t,r,n,i){return r.isEmpty()?this._pages.length>2?this.removedPage(t,r,n):this._pages.length>1?0===t?this._pages[1]:this._pages[0]:Lt.empty():r instanceof e&&i.pageShouldMerge(r)?this.updatedPageMerge(t,r,n):this.updatedPage(t,r,n)},e.prototype.removedPage=function(t,e,r){for(var n=this._pages,i=new Array(n.length-1),o=0;o<t;o+=1)i[o]=n[o];for(o=t+1;o<n.length;o+=1)i[o-1]=n[o];var s=this._knots,u=new Array(s.length-1);if(t>0){for(o=0;o<t-1;o+=1)u[o]=s[o];for(o=t;o<s.length;o+=1)u[o-1]=s[o]}else for(o=1;o<s.length;o+=1)u[o-1]=s[o];var a=this._size-r.size;return this.newNode(i,u,void 0,a)},e.prototype.drop=function(t,e){if(t>0){var r=this._size;if(t<r){for(var n=this._pages,i=0;i<n.length;){var o=n[i].size;if(!(o<=t))break;r-=o,t-=o,i+=1}var s=n.length-i;if(s>1){var u=void 0;if(i>0){for(var a=new Array(s),p=0;p<s;p+=1)a[p]=n[p+i];var h=new Array(s-1);for(p=0;p<h.length;p+=1)h[p]=this._knots[p+i];u=this.newNode(a,h,void 0,r)}else u=this;if(t>0){var f=n[i],c=f.drop(t,e);return u.replacedPage(0,c,f,e)}return u}return n[i].drop(t,e)}return Lt.empty()}return this},e.prototype.take=function(t,e){if(t<this._size){if(t>0){for(var r=this._pages,n=0,i=0;n<r.length&&t>0;){var o=r[n].size;if(i+=o,n+=1,!(o<=t))break;t-=o}var s=0===t?n:n+1;if(s>1){var u=void 0;if(n<r.length){for(var a=new Array(s),p=0;p<s;p+=1)a[p]=r[p];var h=new Array(s-1);for(p=0;p<h.length;p+=1)h[p]=this._knots[p];u=this.newNode(a,h,void 0,i)}else u=this;if(t>0){var f=r[n-1],c=f.take(t,e);return u.replacedPage(n-1,c,f,e)}return u}return t>0?r[0].take(t,e):r[0]}return Lt.empty()}return this},e.prototype.balanced=function(t){if(this._pages.length>1&&t.pageShouldSplit(this)){var e=this._knots.length>>>1;return this.split(e)}return this},e.prototype.split=function(t){var e=new Array(2),r=this.splitLeft(t),n=this.splitRight(t);e[0]=r,e[1]=n;var i=new Array(1);return i[0]=n.minKey(),this.newNode(e,i,void 0,this._size)},e.prototype.splitLeft=function(t){for(var e=this._pages,r=new Array(t+1),n=0;n<t+1;n+=1)r[n]=e[n];var i=this._knots,o=new Array(t);for(n=0;n<t;n+=1)o[n]=i[n];var s=0;for(n=0;n<=t;n+=1)s+=r[n].size;return this.newNode(r,o,void 0,s)},e.prototype.splitRight=function(t){for(var e=this._pages,r=e.length-(t+1),n=new Array(r),i=0;i<r;i+=1)n[i]=e[i+(t+1)];var o=this._knots,s=new Array(r-1);for(i=0;i<s.length;i+=1)s[i]=o[i+(t+1)];var u=0;for(i=0;i<r;i+=1)u+=n[i].size;return this.newNode(n,s,void 0,u)},e.prototype.reduced=function(t,e,r){if(void 0===this._fold){for(var n=this._pages,i=n.length,o=new Array(i),s=0;s<i;s+=1)o[s]=n[s].reduced(t,e,r);var u=o[0].fold();for(s=1;s<i;s+=1)u=r(u,o[s].fold());return this.newNode(o,this._knots,u,this._size)}return this},e.prototype.forEach=function(t,e,r){for(var n=this._pages,i=0,o=n.length;i<o;i+=1){var s=n[i].forEach(t,e,r);if(void 0!==s)return s}},e.prototype.entries=function(){return new Ft.NodeCursor(this._pages)},e.prototype.reverseEntries=function(){return new Ft.NodeCursor(this._pages,this._size,this._pages.length)},e.prototype.lookup=function(t,e){for(var r=0,n=this._knots.length-1;r<=n;){var i=r+n>>>1,o=e.compare(t,this._knots[i]);if(o>0)r=i+1;else{if(!(o<0))return i;n=i-1}}return-(r+1)},e.prototype.newNode=function(t,r,n,i){return new e(t,r,n,i)},e}(Lt);Ft.Node=Nt;var Ut=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return y(e,t),e.prototype.pageSize=function(t){return t.size},e.prototype.pageCursor=function(t){return t.entries()},e.prototype.reversePageCursor=function(t){return t.reverseEntries()},e}(Bt);Ft.NodeCursor=Ut;var Kt=function(){function t(){}return t.prototype.identify=function(t){var e=new Uint8Array(6);return s.fillBytes(e),e},t.prototype.compare=function(t,e){return c.compare(t,e)},t.prototype.pageShouldSplit=function(t){return t.arity>this.pageSplitSize},t.prototype.pageShouldMerge=function(t){return t.arity<this.pageSplitSize>>>1},t}();Kt.prototype.pageSplitSize=32;var Wt=function(t){function e(r){void 0===r&&(r=e.Page.empty());var n=t.call(this)||this;return n.root=r,n}return y(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return this.root.isEmpty()},e.prototype.get=function(t,e){if(!(void 0!==e&&(t=this.lookup(e,t))<0))return this.root.get(t)},e.prototype.getEntry=function(t,e){if(!(void 0!==e&&(t=this.lookup(e,t))<0))return this.root.getEntry(t)},e.prototype.set=function(t,e,r){if(void 0!==r&&(t=this.lookup(r,t))<0)throw new RangeError(""+r);var n=this.root;if(t<0||t>=n.size)throw new RangeError(""+t);return this.root=n.updated(t,e,this),this},e.prototype.insert=function(t,e,r){var n=this.root;if(t<0||t>n.size)throw new RangeError(""+t);return this.root=n.inserted(t,e,r,this).balanced(this),this},e.prototype.remove=function(t,e){if(void 0!==e&&(t=this.lookup(e,t))<0)throw new RangeError(""+e);var r=this.root;if(t<0||t>r.size)throw new RangeError(""+t);return this.root=r.removed(t,this),this},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this.root,n=0;n<t.length;n+=1)r=r.inserted(r.size,t[n],void 0,this).balanced(this);return this.root=r,r.size},e.prototype.pop=function(){var t=this.root,e=t.size-1;if(e>=0){var r=t.get(e);return this.root=t.removed(e,this),r}},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this.root,n=t.length-1;n>=0;n-=1)r=r.inserted(0,t[n],void 0,this).balanced(this);return this.root=r,r.size},e.prototype.shift=function(){var t=this.root;if(t.size>0){var e=t.get(0);return this.root=t.removed(0,this),e}},e.prototype.move=function(t,e,r){if(void 0!==r&&(t=this.lookup(r,t))<0)throw new RangeError(""+r);var n=this.root;if(t<0||t>=n.size)throw new RangeError(""+t);if(e<0||e>=n.size)throw new RangeError(""+e);if(t!==e){var i=n.getEntry(t);this.root=n.removed(t,this).inserted(e,i[1],i[0],this).balanced(this)}return this},e.prototype.splice=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=this.root;t<0&&(t=i.size+t),t=Math.min(Math.max(0,t),i.size),void 0===e&&(e=i.size-t);for(var o=[],s=t,u=t+e;s<u;s+=1)o.push(i.get(t)),i=i.removed(t,this);for(s=0;s<r.length;s+=1)i=i.inserted(t+s,r[s],void 0,this).balanced(this);return this.root=i,o},e.prototype.drop=function(t){var r=this.root;return t>0&&r.size>0&&(t<r.size?this.root=r.drop(t,this):this.root=e.Page.empty()),this},e.prototype.take=function(t){var r=this.root;return t<r.size&&r.size>0&&(this.root=t>0?r.take(t,this):e.Page.empty()),this},e.prototype.clear=function(){this.root=e.Page.empty()},e.prototype.forEach=function(t,e){return this.root.forEach(t,e,0,this)},e.prototype.keys=function(){return this.root.keys()},e.prototype.values=function(){return this.root.values()},e.prototype.entries=function(){return this.root.entries()},e.prototype.reverseKeys=function(){return this.root.reverseKeys()},e.prototype.reverseValues=function(){return this.root.reverseValues()},e.prototype.reverseEntries=function(){return this.root.reverseEntries()},e.prototype.clone=function(){return this.copy(this.root)},e.prototype.copy=function(t){var r=new e(t);return r.identify!==this.identify&&(r.identify=this.identify),r.compare!==this.compare&&(r.compare=this.compare),r.pageSplitSize!==this.pageSplitSize&&(r.pageSplitSize=this.pageSplitSize),r},e.prototype.lookup=function(t,e){void 0===e&&(e=0);var r=this.root,n=e=Math.min(Math.max(0,e),r.size-1);do{var i=r.getEntry(n);if(void 0!==i&&0===this.compare(i[0],t))return n;n=(n+1)%r.size}while(isFinite(n)&&n!==e);return-1},e}(Kt);Wt.prototype.pageSplitSize=32;var Ht=function(){function t(){}return t.prototype.keys=function(){return new Vt(this.entries())},t.prototype.values=function(){return new zt(this.entries())},t.prototype.reverseKeys=function(){return new Vt(this.reverseEntries())},t.prototype.reverseValues=function(){return new zt(this.reverseEntries())},t.empty=function(){return void 0===t._empty&&(t._empty=new Wt.Leaf([])),t._empty},t}();Wt.Page=Ht;var jt=function(t){function e(e){var r=t.call(this)||this;return r._slots=e,r}return y(e,t),Object.defineProperty(e.prototype,"arity",{get:function(){return this._slots.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._slots.length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._slots.length},e.prototype.get=function(t){var e=this._slots[t];return void 0!==e?e[1]:void 0},e.prototype.getEntry=function(t){return this._slots[t]},e.prototype.updated=function(t,e,r){if(t<0||t>=this._slots.length)throw new RangeError(""+t);return this.updatedItem(t,e)},e.prototype.updatedItem=function(t,r){var n=this._slots,i=n[t];if(r!==i[1]){var o=n.slice(0);return o[t]=[i[0],r],new e(o)}return this},e.prototype.inserted=function(t,e,r,n){if(t<0||t>this._slots.length)throw new RangeError(""+t);return this.insertedItem(t,e,r,n)},e.prototype.insertedItem=function(t,r,n,i){void 0===n&&(n=i.identify(r));for(var o=this._slots,s=new Array(o.length+1),u=0;u<t;u+=1)s[u]=o[u];s[t]=[n,r];for(u=t;u<o.length;u+=1)s[u+1]=o[u];return new e(s)},e.prototype.removed=function(t,e){if(t<0||t>=this._slots.length)throw new RangeError(""+t);return this._slots.length>1?this.removedSlot(t):Ht.empty()},e.prototype.removedSlot=function(t){for(var r=this._slots,n=new Array(r.length-1),i=0;i<t;i+=1)n[i]=r[i];for(i=t;i<n.length;i+=1)n[i]=r[i+1];return new e(n)},e.prototype.drop=function(t,r){var n=this._slots;if(t>0&&n.length>0){if(t<n.length){for(var i=n.length-t,o=new Array(i),s=0;s<i;s+=1)o[s]=n[s+t];return new e(o)}return Ht.empty()}return this},e.prototype.take=function(t,r){var n=this._slots;if(t<n.length&&n.length>0){if(t>0){for(var i=new Array(t),o=0;o<t;o+=1)i[o]=n[o];return new e(i)}return Ht.empty()}return this},e.prototype.balanced=function(t){var e=this._slots.length;return e>1&&t.pageShouldSplit(this)?this.split(e>>>1):this},e.prototype.split=function(t){var e=new Array(2),r=this.splitLeft(t),n=this.splitRight(t);e[0]=r,e[1]=n;var i=new Array(1);return i[0]=t,new Wt.Node(e,i,this._slots.length)},e.prototype.splitLeft=function(t){for(var r=this._slots,n=new Array(t),i=0;i<t;i+=1)n[i]=r[i];return new e(n)},e.prototype.splitRight=function(t){for(var r=this._slots,n=r.length-t,i=new Array(n),o=0;o<n;o+=1)i[o]=r[o+t];return new e(i)},e.prototype.forEach=function(t,e,r,n){for(var i=0;i<this._slots.length;i+=1){var o=this._slots[i],s=t.call(e,o[1],r+i,n,o[0]);if(void 0!==s)return s}},e.prototype.entries=function(){return l.array(this._slots)},e.prototype.reverseEntries=function(){return l.array(this._slots,this._slots.length)},e}(Ht);Wt.Leaf=jt;var Gt=function(t){function e(e,r,n){var i=t.call(this)||this;if(i._pages=e,void 0===r||void 0===n){n=0;for(var o=0,s=(r=new Array(e.length-1)).length;o<s;o+=1)n+=e[o].size,r[o]=n;n+=e[r.length].size}return i._knots=r,i._size=n,i}return y(e,t),Object.defineProperty(e.prototype,"arity",{get:function(){return this._pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._size},e.prototype.get=function(t){var e=this.lookup(t);e>=0?e+=1:e=-(e+1);var r=0===e?t:t-this._knots[e-1];return this._pages[e].get(r)},e.prototype.getEntry=function(t){var e=this.lookup(t);e>=0?e+=1:e=-(e+1);var r=0===e?t:t-this._knots[e-1];return this._pages[e].getEntry(r)},e.prototype.updated=function(t,e,r){var n=this.lookup(t);n>=0?n+=1:n=-(n+1);var i=0===n?t:t-this._knots[n-1],o=this._pages[n],s=o.updated(i,e,r);return o!==s?o.size!==s.size&&r.pageShouldSplit(s)?this.updatedPageSplit(n,s,o):this.updatedPage(n,s,o):this},e.prototype.updatedPage=function(t,r,n){var i=this._pages,o=i.slice(0);o[t]=r;var s,u,a=this._knots;if(i.length-1>0){s=a.slice(0),u=t>0?a[t-1]:0;for(var p=t;p<s.length;p+=1)u+=o[p].size,s[p]=u;u+=o[s.length].size}else s=[],u=0;return new e(o,s,u)},e.prototype.updatedPageSplit=function(t,r,n){for(var i=this._pages,o=new Array(i.length+1),s=0;s<t;s+=1)o[s]=i[s];var u=r.splitLeft(r.arity>>>1),a=r.splitRight(r.arity>>>1);o[t]=u,o[t+1]=a;for(s=t+1;s<i.length;s+=1)o[s+1]=i[s];return new e(o)},e.prototype.updatedPageMerge=function(t,r,n){for(var i=this._pages,o=r._pages,s=new Array(i.length+o.length-1),u=0;u<t;u+=1)s[u]=i[u];for(u=0;u<o.length;u+=1)s[u+t]=o[u];for(u=t+1;u<i.length;u+=1)s[u+o.length-1]=i[u];return new e(s)},e.prototype.inserted=function(t,e,r,n){var i=this.lookup(t);i>=0?i+=1:i=-(i+1);var o=0===i?t:t-this._knots[i-1],s=this._pages[i],u=s.inserted(o,e,r,n);return s!==u?n.pageShouldSplit(u)?this.updatedPageSplit(i,u,s):this.updatedPage(i,u,s):this},e.prototype.removed=function(t,e){var r=this.lookup(t);r>=0?r+=1:r=-(r+1);var n=0===r?t:t-this._knots[r-1],i=this._pages[r],o=i.removed(n,e);return i!==o?this.replacedPage(r,o,i,e):this},e.prototype.replacedPage=function(t,r,n,i){return r.isEmpty()?this._pages.length>2?this.removedPage(t,r,n):this._pages.length>1?0===t?this._pages[1]:this._pages[0]:Ht.empty():r instanceof e&&i.pageShouldMerge(r)?this.updatedPageMerge(t,r,n):this.updatedPage(t,r,n)},e.prototype.removedPage=function(t,r,n){for(var i=this._pages,o=new Array(i.length-1),s=0;s<t;s+=1)o[s]=i[s];for(s=t+1;s<i.length;s+=1)o[s-1]=i[s];var u,a=this._knots,p=new Array(a.length-1);if(t>0){for(s=0;s<t;s+=1)p[s]=a[s];u=a[t-1]}else u=0;for(s=t;s<p.length;s+=1)u+=o[s].size,p[s]=u;return new e(o,p,u+=o[p.length].size)},e.prototype.drop=function(t,r){if(t>0){if(t<this._size){var n=this.lookup(t);n>=0?n+=1:n=-(n+1),t=0===n?t:t-this._knots[n-1];var i=this._pages,o=i.length-n;if(o>1){var s=void 0;if(n>0){for(var u=new Array(o),a=0;a<o;a+=1)u[a]=i[a+n];s=new e(u)}else s=this;if(t>0){var p=i[n],h=p.drop(t,r);return s.replacedPage(0,h,p,r)}return s}return i[n].drop(t,r)}return Ht.empty()}return this},e.prototype.take=function(t,r){if(t<this._size){if(t>0){var n=this.lookup(t);n>=0?n+=1:n=-(n+1),t=0===n?t:t-this._knots[n-1];var i=this._pages,o=0===t?n:n+1;if(o>1){var s=void 0;if(n<i.length){for(var u=new Array(o),a=0;a<o;a+=1)u[a]=i[a];var p=new Array(o-1);for(a=0;a<p.length;a+=1)p[a]=this._knots[a];s=new e(u,p,p[o-2]+u[o-1].size)}else s=this;if(t>0){var h=i[n],f=h.take(t,r);return s.replacedPage(n,f,h,r)}return s}return t>0?i[0].take(t,r):i[0]}return Ht.empty()}return this},e.prototype.balanced=function(t){if(this._pages.length>1&&t.pageShouldSplit(this)){var e=this._knots.length>>>1;return this.split(e)}return this},e.prototype.split=function(t){var r=new Array(2),n=this.splitLeft(t),i=this.splitRight(t);r[0]=n,r[1]=i;var o=new Array(1);return o[0]=n._size,new e(r,o,this._size)},e.prototype.splitLeft=function(t){for(var r=this._pages,n=new Array(t+1),i=0;i<t+1;i+=1)n[i]=r[i];var o=this._knots,s=new Array(t);for(i=0;i<t;i+=1)s[i]=o[i];var u=0;for(i=0;i<=t;i+=1)u+=n[i].size;return new e(n,s,u)},e.prototype.splitRight=function(t){for(var r=this._pages,n=r.length-(t+1),i=new Array(n),o=0;o<n;o+=1)i[o]=r[o+(t+1)];var s,u=new Array(n-1);if(n>0){s=i[0].size;for(o=1;o<n;o+=1)u[o-1]=s,s+=i[o].size}else s=0;return new e(i,u,s)},e.prototype.forEach=function(t,e,r,n){for(var i=0;i<this._pages.length;i+=1){var o=this._pages[i],s=o.forEach(t,e,r,n);if(void 0!==s)return s;r+=o.size}},e.prototype.entries=function(){return new Wt.NodeCursor(this._pages)},e.prototype.reverseEntries=function(){return new Wt.NodeCursor(this._pages,this._size,this._pages.length)},e.prototype.lookup=function(t){for(var e=0,r=this._knots.length-1;e<=r;){var n=e+r>>>1;if(t>this._knots[n])e=n+1;else{if(!(t<this._knots[n]))return n;r=n-1}}return-(e+1)},e}(Ht);Wt.Node=Gt;var Qt=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return y(e,t),e.prototype.pageSize=function(t){return t.size},e.prototype.pageCursor=function(t){return t.entries()},e.prototype.reversePageCursor=function(t){return t.reverseEntries()},e}(Bt);Wt.NodeCursor=Qt;var Zt=function(){function t(){}return t.prototype.map=function(e){return new t.Map(this,e)},t.map=function(e,r,n){return new t.Map(t.between(e,r),n)},t.between=function(e,r){for(var n=null,i=this._factories,o=i.length,s=0;null===n&&s<o;s+=1){n=(u=i[s]).tryBetween(e,r)}for(s=0;null===n&&s<o;s+=1){var u;void 0!==(u=i[s]).tryBetweenAny&&(n=u.tryBetweenAny(e,r))}return null===n&&(n=t.Interpolator.tryBetween(e,r)),null===n&&(n=t.Array.tryBetween(e,r)),null===n&&(n=new t.Step(e,r)),n},Object.defineProperty(t,"factories",{get:function(){return this._factories},enumerable:!1,configurable:!0}),t.registerFactory=function(t){this._factories.indexOf(t)<0&&this._factories.push(t)},t.unregisterFactory=function(t){var e=this._factories.indexOf(t);e>=0&&this._factories.splice(e,1)},t._factories=[],t}(),Xt=function(t){function e(e,r){var n=t.call(this)||this;return n.y0=e,n.dy=r-n.y0,n}return y(e,t),e.prototype.interpolate=function(t){return this.y0+this.dy*t},e.prototype.deinterpolate=function(t){return t=+t,0!==this.dy?(t-this.y0)/this.dy:this.dy},e.prototype.range=function(t,r){return void 0===t?[this.y0,this.y0+this.dy]:void 0===r?(t=t,e.between(t[0],t[1])):e.between(t,r)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.y0===t.y0&&this.dy===t.dy)},e.between=function(t,r){return"number"!=typeof t&&"string"!=typeof t||"number"!=typeof r&&"string"!=typeof r?Zt.between(t,r):new e(+t,+r)},e.tryBetween=function(t,r){return"number"==typeof t&&"number"==typeof r?new e(t,r):null},e.tryBetweenAny=function(t,r){if("number"==typeof t&&"number"==typeof r)return new e(t,r);if("number"==typeof t&&"string"==typeof r){var n=+r;if(!isNaN(n))return new e(t,n)}else if("string"==typeof t&&"number"==typeof r){var i=+t;if(!isNaN(i))return new e(i,r)}else if("string"==typeof t&&"string"==typeof r){i=+t,n=+r;if(!isNaN(i)&&!isNaN(n))return new e(i,n)}return null},e}(Zt);Zt.Number=Xt,Zt.registerFactory(Xt);var Yt=function(t){function e(e,r){var n=t.call(this)||this;return n.y0=e,n.y1=r,n}return y(e,t),e.prototype.interpolate=function(t){return t<1?this.y0:this.y1},e.prototype.deinterpolate=function(t){return t===this.y1?1:0},e.prototype.range=function(t,e){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===e?(t=t,Zt.between(t[0],t[1])):Zt.between(t,e)},e.prototype.equals=function(t){return this===t||t instanceof e&&(c.equal(this.y0,t.y0)&&c.equal(this.y1,t.y1))},e}(Zt);Zt.Step=Yt;var $t=function(t){function e(e,r){for(var n=t.call(this)||this,i=Math.min(e.length,r.length),o=new Array(i),s=0;s<i;s+=1)o[s]=Zt.between(e[s],r[s]);return n.interpolators=o,n}return y(e,t),e.prototype.interpolate=function(t){for(var e=this.interpolators,r=e.length,n=new Array(r),i=0;i<r;i+=1)n[i]=e[i].interpolate(t);return n},e.prototype.deinterpolate=function(t){return 0},e.prototype.range=function(t,r){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===r?(t=t,e.between(t[0],t[1])):e.between(t,r)},e.prototype.equals=function(t){if(this===t)return!0;if(t instanceof e){var r=this.interpolators.length;if(r===t.interpolators.length){for(var n=0;n<r;n+=1)if(!this.interpolators[n].equals(t.interpolators[n]))return!1;return!0}}return!1},e.between=function(t,r){return Array.isArray(t)&&Array.isArray(r)?new e(t,r):Zt.between(t,r)},e.tryBetween=function(t,r){return Array.isArray(t)&&Array.isArray(r)?new e(t,r):null},e}(Zt);Zt.Array=$t;var Jt=function(t){function e(e,r){var n=t.call(this)||this;return n.i0=e,n.i1=r,n.i00=n.i1.range(n.i0.interpolate(0),n.i1.interpolate(0)),n.i11=n.i1.range(n.i0.interpolate(1),n.i1.interpolate(1)),n}return y(e,t),e.prototype.interpolate=function(t){return 0===t?this.i0:1===t?this.i1:this.i1.range(this.i00.interpolate(t),this.i11.interpolate(t))},e.prototype.deinterpolate=function(t){return 0},e.prototype.range=function(t,r){return void 0===t?[this.i0,this.i1]:void 0===r?(t=t,e.between(t[0],t[1])):e.between(t,r)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.i0.equals(t.i0)&&this.i1.equals(t.i1))},e.between=function(t,r){return t instanceof Zt&&r instanceof Zt?new e(t,r):Zt.between(t,r)},e.tryBetween=function(t,r){return t instanceof Zt&&r instanceof Zt?new e(t,r):null},e}(Zt);Zt.Interpolator=Jt;var te=function(t){function e(e,r){var n=t.call(this)||this;return n.interpolator=e,n.transform=r,n}return y(e,t),e.prototype.interpolate=function(t){return this.transform(this.interpolator.interpolate(t))},e.prototype.deinterpolate=function(t){return 0},e.prototype.range=function(t,e){if(void 0===t){var r=this.interpolator.range();return[this.transform(r[0]),this.transform(r[1])]}return void 0===e?(t=t,this):this},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.interpolator.equals(t.interpolator)&&this.transform===t.transform)},e}(Zt);Zt.Map=te;var ee=function(){function t(){}return t.prototype.updated=function(e,r){var n=t.Record.create(2);return n.push(this),n.set(e,r),n},t.prototype.updatedAttr=function(e,r){var n=t.Record.create(2);return n.push(this),n.setAttr(e,r),n},t.prototype.updatedSlot=function(e,r){var n=t.Record.create(2);return n.push(this),n.setSlot(e,r),n},t.prototype.appended=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.Record.create(1+arguments.length);return n.push(this),n.push.apply(n,arguments),n},t.prototype.prepended=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.Record.create(arguments.length+1);return n.push.apply(n,arguments),n.push(this),n},t.prototype.concat=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.Record.create();n.push(this);for(var i=0,o=arguments.length;i<o;i+=1)t.fromAny(arguments[i]).forEach((function(t){n.push(t)}));return n},t.prototype.lt=function(e){return e=t.fromAny(e),this.compareTo(e)<0?t.Bool.from(!0):t.absent()},t.prototype.le=function(e){return e=t.fromAny(e),this.compareTo(e)<=0?t.Bool.from(!0):t.absent()},t.prototype.eq=function(e){return e=t.fromAny(e),this.equals(e)?t.Bool.from(!0):t.absent()},t.prototype.ne=function(e){return e=t.fromAny(e),this.equals(e)?t.absent():t.Bool.from(!0)},t.prototype.ge=function(e){return e=t.fromAny(e),this.compareTo(e)>=0?t.Bool.from(!0):t.absent()},t.prototype.gt=function(e){return e=t.fromAny(e),this.compareTo(e)>0?t.Bool.from(!0):t.absent()},t.prototype.invoke=function(e){return t.absent()},t.prototype.filter=function(e){var r=t.Selector.literal(this);return r.filter.apply(r,arguments)},t.prototype.max=function(t){return this.compareTo(t)>=0?this:t},t.prototype.min=function(t){return this.compareTo(t)<=0?this:t},t.prototype.evaluate=function(t){return this},t.prototype.substitute=function(t){return this},t.prototype.cast=function(t,e){var r=t.cast(this);return void 0===r&&(r=e),r},t.prototype.coerce=function(t,e){var r=t.cast(this);return void 0===r&&(r=t.unit()),void 0===r&&(r=e),r},t.prototype.precedence=function(){return 11},t.prototype.forEach=function(t,e){return t.call(e,this,0)},t.prototype.iterator=function(){return l.unary(this)},t.prototype.display=function(t){this.debug(t)},t.prototype.toString=function(){return X.debug(this)},t.empty=function(){return t.Record.empty()},t.extant=function(){return t.Extant.extant()},t.absent=function(){return t.Absent.absent()},t.fromAny=function(e){return e instanceof t?e:t.Value.fromAny(e)},t.globalScope=function(){return void 0===t._globalScope&&(t._globalScope=t.Record.create(1).slot("math",t.MathModule.scope()).commit()),t._globalScope},t}(),re=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.isDefined=function(){return!0},e.prototype.isDistinct=function(){return!0},e.prototype.toValue=function(){return this.value},e.prototype.tag=function(){},e.prototype.target=function(){return this.value},e.prototype.flattened=function(){return ee.Value.absent()},e.prototype.unflattened=function(){return ee.Record.of(this)},e.prototype.header=function(t){return ee.Value.absent()},e.prototype.headers=function(t){},e.prototype.head=function(){return ee.absent()},e.prototype.tail=function(){return ee.Record.empty()},e.prototype.body=function(){return ee.Value.absent()},Object.defineProperty(e.prototype,"length",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.has=function(t){return!1},e.prototype.get=function(t){return ee.Value.absent()},e.prototype.getAttr=function(t){return ee.Value.absent()},e.prototype.getSlot=function(t){return ee.Value.absent()},e.prototype.getField=function(t){},e.prototype.getItem=function(t){return ee.absent()},e.prototype.deleted=function(t){return this},e.prototype.conditional=function(t,e){return t=ee.fromAny(t)},e.prototype.or=function(t){return this},e.prototype.and=function(t){return t=ee.fromAny(t)},e.prototype.lambda=function(t){return ee.Value.absent()},e.prototype.stringValue=function(t){return this.value.stringValue(t)},e.prototype.numberValue=function(t){return this.value.numberValue(t)},e.prototype.booleanValue=function(t){return this.value.booleanValue(t)},e.of=function(t,e){var r;return"string"==typeof t?r=t:t instanceof ee.Text&&(r=t.value),void 0!==r&&64===r.charCodeAt(0)?(arguments[0]=r.slice(1),ee.Attr.of.apply(void 0,arguments)):ee.Slot.of.apply(void 0,arguments)},e.fromAny=function(t){if(t instanceof e)return t;if("object"==typeof t&&null!==t){if(void 0!==t.$key)return e.of(t.$key,t.$value);for(var r in t)return e.of(r,t[r])}throw new TypeError(""+t)},e.IMMUTABLE=1,e}(ee);ee.Field=re;var ne=function(t){function e(r){var n=t.call(this,r)||this;return n.__proto__=e.prototype,n}return y(e,t),e}(Error),ie=function(){function t(t){this._maxScopeDepth=t}return t.prototype.maxScopeDepth=function(t){return void 0===t?this._maxScopeDepth:this.copy(t)},t.prototype.copy=function(e){return new t(e)},t.prototype.canEqual=function(e){return e instanceof t},t.prototype.equals=function(e){return this===e||e instanceof t&&(e.canEqual(this)&&this._maxScopeDepth===e._maxScopeDepth)},t.prototype.hashCode=function(){return void 0===t._hashSeed&&(t._hashSeed=f.seed(t)),f.mash(f.mix(t._hashSeed,this._maxScopeDepth))},t.prototype.debug=function(t){t=t.write("new").write(32).write("InterpreterSettings").write(40).debug(this._maxScopeDepth).write(41)},t.prototype.toString=function(){return X.debug(this)},t.standard=function(){if(void 0===t._standard){t._standard=new t(1024)}return t._standard},t}(),oe=function(){function t(t,e,r){void 0===t&&(t=ie.standard()),void 0===e&&(e=null),void 0===r&&(r=0),this._settings=t,this._scopeStack=e,this._scopeDepth=r}return t.prototype.settings=function(t){return void 0===t?this._settings:(this._settings=t,this)},t.prototype.scopeDepth=function(){return this._scopeDepth},t.prototype.peekScope=function(){var t=this._scopeDepth;if(t<=0)throw new ne("scope stack empty");return this._scopeStack[t-1]},t.prototype.getScope=function(t){if(t<0||t>=this._scopeDepth)throw new RangeError(""+t);return this._scopeStack[t]},t.prototype.pushScope=function(e){var r=this._scopeDepth;if(r>=this._settings._maxScopeDepth)throw new ne("scope stack overflow");var n,i=this._scopeStack;if(null===i||r+1>i.length){if(n=new Array(t.expand(r+1)),null!==i)for(var o=0;o<r;o+=1)n[o]=i[o];this._scopeStack=n}else n=i;n[r]=e,this._scopeDepth=r+1},t.prototype.popScope=function(){var t=this._scopeDepth;if(t<=0)throw new ne("scope stack empty");var e=this._scopeStack,r=e[t-1];return e[t-1]=void 0,this._scopeDepth=t-1,r},t.prototype.swapScope=function(t){var e=this._scopeDepth;if(e<=0)throw new ne("scope stack empty");var r=this._scopeStack,n=r[e-1];return r[e-1]=t,n},t.prototype.willOperate=function(t){},t.prototype.didOperate=function(t,e){},t.prototype.willSelect=function(t){},t.prototype.didSelect=function(t,e){},t.prototype.willTransform=function(t){},t.prototype.didTransform=function(t,e){},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=arguments.length,i=new Array(t.expand(n)),o=0;o<n;o+=1){var s=ee.fromAny(arguments[o]);i[o]=s}return new t(ie.standard(),i,n)},t.fromAny=function(e,r){if(void 0===r&&(r=ee.globalScope()),!(e instanceof t)){var n=e;e=new t,void 0!==r&&e.pushScope(r),void 0!==n&&e.pushScope(ee.fromAny(n))}return e},t.expand=function(t){return t=Math.max(32,t)-1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},t}(),se=function(t){function e(e,r,n){void 0===r&&(r=ee.Value.extant()),void 0===n&&(n=0);var i=t.call(this)||this;return i._key=e,i._value=r,i._flags=n,i}return y(e,t),e.prototype.isConstant=function(){return this._key.isConstant()&&this._value.isConstant()},Object.defineProperty(e.prototype,"name",{get:function(){return this._key.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),e.prototype.setValue=function(t){if(0!=(this._flags&re.IMMUTABLE))throw new Error("immutable");var e=this._value;return this._value=t,e},e.prototype.updatedValue=function(t){return new e(this._key,t)},e.prototype.bitwiseOr=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.BitwiseOrOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.bitwiseOr(t._value):t instanceof ee.Value?this._value.bitwiseOr(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.bitwiseXor=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.BitwiseXorOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.bitwiseXor(t._value):t instanceof ee.Value?this._value.bitwiseXor(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.bitwiseAnd=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.BitwiseAndOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.bitwiseAnd(t._value):t instanceof ee.Value?this._value.bitwiseAnd(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.plus=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.PlusOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.plus(t._value):t instanceof ee.Value?this._value.plus(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.minus=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.MinusOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.minus(t._value):t instanceof ee.Value?this._value.minus(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.times=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.TimesOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.times(t._value):t instanceof ee.Value?this._value.times(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.divide=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.DivideOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.divide(t._value):t instanceof ee.Value?this._value.divide(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.modulo=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.ModuloOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.modulo(t._value):t instanceof ee.Value?this._value.modulo(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.not=function(){var t=this._value.not();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.bitwiseNot=function(){var t=this._value.bitwiseNot();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.negative=function(){var t=this._value.negative();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.positive=function(){var t=this._value.positive();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.inverse=function(){var t=this._value.inverse();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.evaluate=function(t){t=oe.fromAny(t);var r=this._key.evaluate(t).toValue(),n=this._value.evaluate(t).toValue();return r===this._key&&n===this._value?this:r.isDefined()&&n.isDefined()?r instanceof ee.Text?new e(r,n):new ee.Slot(r,n):ee.absent()},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._key.substitute(t).toValue(),n=this._value.substitute(t).toValue();return r===this._key&&n===this._value?this:r.isDefined()&&n.isDefined()?r instanceof ee.Text?new e(r,n):new ee.Slot(r,n):ee.absent()},e.prototype.toAny=function(){var t={};return t["@"+this._key.value]=this._value.toAny(),t},e.prototype.isAliased=function(){return!1},e.prototype.isMutable=function(){return 0==(this._flags&re.IMMUTABLE)},e.prototype.alias=function(){this._flags|=re.IMMUTABLE},e.prototype.branch=function(){return 0!=(this._flags&re.IMMUTABLE)?new e(this._key,this._value,this._flags&~re.IMMUTABLE):this},e.prototype.clone=function(){return new e(this._key.clone(),this._value.clone())},e.prototype.commit=function(){return 0==(this._flags&re.IMMUTABLE)&&(this._flags|=re.IMMUTABLE,this._value.commit()),this},e.prototype.typeOrder=function(){return 1},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._key.compareTo(t._key);return 0===r&&(r=this._value.compareTo(t._value)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.keyEquals=function(t){return"string"==typeof t?this._key.value===t:t instanceof re?this._key.equals(t.key):this._key.equals(t)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._key.equals(t._key)&&this._value.equals(t._value))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._key.hashCode()),this._value.hashCode()))},e.prototype.debug=function(t){t=t.write("Attr").write(46).write("of").write(40).display(this.key),this.value instanceof ee.Extant||(t=t.write(44).write(32).display(this.value)),t=t.write(41)},e.prototype.display=function(t){this.debug(t)},e.of=function(t,r){return new e(t=ee.Text.fromAny(t),r=arguments.length>=2?ee.Value.fromAny(r):ee.Value.extant())},e}(re);ee.Attr=se;var ue=function(t){function e(e,r,n){void 0===r&&(r=ee.Value.extant()),void 0===n&&(n=0);var i=t.call(this)||this;return i._key=e.commit(),i._value=r,i._flags=n,i}return y(e,t),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),e.prototype.isConstant=function(){return this._key.isConstant()&&this._value.isConstant()},e.prototype.setValue=function(t){if(0!=(this._flags&re.IMMUTABLE))throw new Error("immutable");var e=this._value;return this._value=t,e},e.prototype.updatedValue=function(t){return new e(this._key,t)},e.prototype.bitwiseOr=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.BitwiseOrOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.bitwiseOr(t._value):t instanceof ee.Value?this._value.bitwiseOr(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.bitwiseXor=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.BitwiseXorOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.bitwiseXor(t._value):t instanceof ee.Value?this._value.bitwiseXor(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.bitwiseAnd=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.BitwiseAndOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.bitwiseAnd(t._value):t instanceof ee.Value?this._value.bitwiseAnd(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.plus=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.PlusOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.plus(t._value):t instanceof ee.Value?this._value.plus(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.minus=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.MinusOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.minus(t._value):t instanceof ee.Value?this._value.minus(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.times=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.TimesOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.times(t._value):t instanceof ee.Value?this._value.times(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.divide=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.DivideOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.divide(t._value):t instanceof ee.Value?this._value.divide(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.modulo=function(t){return(t=ee.fromAny(t))instanceof ee.Expression?new ee.ModuloOperator(this,t):(r=t instanceof e&&this._key.equals(t._key)?this._value.modulo(t._value):t instanceof ee.Value?this._value.modulo(t):ee.Value.absent()).isDefined()?new e(this._key,r):ee.absent();var r},e.prototype.not=function(){var t=this._value.not();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.bitwiseNot=function(){var t=this._value.bitwiseNot();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.negative=function(){var t=this._value.negative();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.positive=function(){var t=this._value.positive();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.inverse=function(){var t=this._value.inverse();return t.isDefined()?new e(this._key,t):ee.absent()},e.prototype.evaluate=function(t){t=oe.fromAny(t);var r=this._key.evaluate(t).toValue(),n=this._value.evaluate(t).toValue();return r===this._key&&n===this._value?this:r.isDefined()&&n.isDefined()?new e(r,n):ee.absent()},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._key.substitute(t).toValue(),n=this._value.substitute(t).toValue();return r===this._key&&n===this._value?this:r.isDefined()&&n.isDefined()?new e(r,n):ee.absent()},e.prototype.toAny=function(){var t={};return this._key instanceof ee.Text?t[this._key.value]=this._value.toAny():(t.$key=this._key.toAny(),t.$value=this._value.toAny()),t},e.prototype.isAliased=function(){return!1},e.prototype.isMutable=function(){return 0==(this._flags&re.IMMUTABLE)},e.prototype.alias=function(){this._flags|=re.IMMUTABLE},e.prototype.branch=function(){return 0!=(this._flags&re.IMMUTABLE)?new e(this._key,this._value,this._flags&~re.IMMUTABLE):this},e.prototype.clone=function(){return new e(this._key.clone(),this._value.clone())},e.prototype.commit=function(){return 0==(this._flags&re.IMMUTABLE)&&(this._flags|=re.IMMUTABLE,this._value.commit()),this},e.prototype.typeOrder=function(){return 2},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._key.compareTo(t._key);return 0===r&&(r=this._value.compareTo(t._value)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.keyEquals=function(t){return"string"==typeof t&&this._key instanceof ee.Text?this._key.value===t:t instanceof re?this._key.equals(t.key):this._key.equals(t)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._key.equals(t._key)&&this._value.equals(t._value))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._key.hashCode()),this._value.hashCode()))},e.prototype.debug=function(t){t=t.write("Slot").write(46).write("of").write(40).display(this.key),this.value instanceof ee.Extant||(t=t.write(44).write(32).display(this.value)),t=t.write(41)},e.prototype.display=function(t){this.debug(t)},e.of=function(t,r){return new e(t=ee.Value.fromAny(t),r=arguments.length>=2?ee.Value.fromAny(r):ee.Value.extant())},e}(re);ee.Slot=ue;var ae=function(){function t(){this._record=null,this._value=null}return t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=arguments.length;r<n;r+=1){var i=arguments[r];if(i instanceof re)return this.pushField(i);if(i instanceof pe)return this.pushValue(i);throw new TypeError(""+i)}},t.prototype.pushField=function(t){null===this._record&&(this._record=ee.Record.create(),null!==this._value&&(this._record.push(this._value),this._value=null)),this._record.push(t)},t.prototype.pushValue=function(t){null!==this._record?this._record.push(t):null===this._value?this._value=t:(this._record=ee.Record.create(),this._record.push(this._value),this._value=null,this._record.push(t))},t.prototype.bind=function(){return null!==this._record?this._record:null!==this._value?this._value:pe.absent()},t}(),pe=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.isDefined=function(){return!0},e.prototype.isDistinct=function(){return!0},Object.defineProperty(e.prototype,"key",{get:function(){return e.absent()},enumerable:!1,configurable:!0}),e.prototype.toValue=function(){return this},e.prototype.tag=function(){},e.prototype.target=function(){return this},e.prototype.flattened=function(){return this},e.prototype.unflattened=function(){return e.Record.of(this)},e.prototype.header=function(t){return e.absent()},e.prototype.headers=function(t){},e.prototype.head=function(){return ee.absent()},e.prototype.tail=function(){return e.Record.empty()},e.prototype.body=function(){return e.extant()},Object.defineProperty(e.prototype,"length",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.has=function(t){return!1},e.prototype.get=function(t){return e.absent()},e.prototype.getAttr=function(t){return e.absent()},e.prototype.getSlot=function(t){return e.absent()},e.prototype.getField=function(t){},e.prototype.getItem=function(t){return ee.absent()},e.prototype.deleted=function(t){return this},e.prototype.conditional=function(t,e){return t=ee.fromAny(t)},e.prototype.or=function(t){return this},e.prototype.and=function(t){return t=ee.fromAny(t)},e.prototype.bitwiseOr=function(t){if((t=ee.fromAny(t))instanceof ee.Expression)return new ee.BitwiseOrOperator(this,t);if(t instanceof ee.Attr){if((e=this.bitwiseOr(t.value)).isDefined())return new ee.Attr(t.key,e)}else if(t instanceof ee.Slot){var e;if((e=this.bitwiseOr(t.value)).isDefined())return new ee.Slot(t.key,e)}return ee.absent()},e.prototype.bitwiseXor=function(t){if((t=ee.fromAny(t))instanceof ee.Expression)return new ee.BitwiseXorOperator(this,t);if(t instanceof ee.Attr){if((e=this.bitwiseXor(t.value)).isDefined())return new ee.Attr(t.key,e)}else if(t instanceof ee.Slot){var e;if((e=this.bitwiseXor(t.value)).isDefined())return new ee.Slot(t.key,e)}return ee.absent()},e.prototype.bitwiseAnd=function(t){if((t=ee.fromAny(t))instanceof ee.Expression)return new ee.BitwiseAndOperator(this,t);if(t instanceof ee.Attr){if((e=this.bitwiseAnd(t.value)).isDefined())return new ee.Attr(t.key,e)}else if(t instanceof ee.Slot){var e;if((e=this.bitwiseAnd(t.value)).isDefined())return new ee.Slot(t.key,e)}return ee.absent()},e.prototype.lt=function(e){return(e=ee.fromAny(e))instanceof ee.Expression?new ee.LtOperator(this,e):t.prototype.lt.call(this,e)},e.prototype.le=function(e){return(e=ee.fromAny(e))instanceof ee.Expression?new ee.LeOperator(this,e):t.prototype.le.call(this,e)},e.prototype.eq=function(e){return(e=ee.fromAny(e))instanceof ee.Expression?new ee.EqOperator(this,e):t.prototype.eq.call(this,e)},e.prototype.ne=function(e){return(e=ee.fromAny(e))instanceof ee.Expression?new ee.NeOperator(this,e):t.prototype.ne.call(this,e)},e.prototype.ge=function(e){return(e=ee.fromAny(e))instanceof ee.Expression?new ee.GeOperator(this,e):t.prototype.ge.call(this,e)},e.prototype.gt=function(e){return(e=ee.fromAny(e))instanceof ee.Expression?new ee.GtOperator(this,e):t.prototype.gt.call(this,e)},e.prototype.plus=function(t){if((t=ee.fromAny(t))instanceof ee.Expression)return new ee.PlusOperator(this,t);if(t instanceof ee.Attr){if((e=this.plus(t.value)).isDefined())return new ee.Attr(t.key,e)}else if(t instanceof ee.Slot){var e;if((e=this.plus(t.value)).isDefined())return new ee.Slot(t.key,e)}return ee.absent()},e.prototype.minus=function(t){if((t=ee.fromAny(t))instanceof ee.Expression)return new ee.MinusOperator(this,t);if(t instanceof ee.Attr){if((e=this.minus(t.value)).isDefined())return new ee.Attr(t.key,e)}else if(t instanceof ee.Slot){var e;if((e=this.minus(t.value)).isDefined())return new ee.Slot(t.key,e)}return ee.absent()},e.prototype.times=function(t){if((t=ee.fromAny(t))instanceof ee.Expression)return new ee.TimesOperator(this,t);if(t instanceof ee.Attr){if((e=this.times(t.value)).isDefined())return new ee.Attr(t.key,e)}else if(t instanceof ee.Slot){var e;if((e=this.times(t.value)).isDefined())return new ee.Slot(t.key,e)}return ee.absent()},e.prototype.divide=function(t){if((t=ee.fromAny(t))instanceof ee.Expression)return new ee.DivideOperator(this,t);if(t instanceof ee.Attr){if((e=this.divide(t.value)).isDefined())return new ee.Attr(t.key,e)}else if(t instanceof ee.Slot){var e;if((e=this.divide(t.value)).isDefined())return new ee.Slot(t.key,e)}return ee.absent()},e.prototype.modulo=function(t){if((t=ee.fromAny(t))instanceof ee.Expression)return new ee.ModuloOperator(this,t);if(t instanceof ee.Attr){if((e=this.modulo(t.value)).isDefined())return new ee.Attr(t.key,e)}else if(t instanceof ee.Slot){var e;if((e=this.modulo(t.value)).isDefined())return new ee.Slot(t.key,e)}return ee.absent()},e.prototype.not=function(){return e.absent()},e.prototype.bitwiseNot=function(){return e.absent()},e.prototype.negative=function(){return e.absent()},e.prototype.positive=function(){return e.absent()},e.prototype.inverse=function(){return e.absent()},e.prototype.lambda=function(t){return new ee.LambdaFunc(this,t)},e.prototype.stringValue=function(t){return t},e.prototype.numberValue=function(t){return t},e.prototype.booleanValue=function(t){return t},e.prototype.isAliased=function(){return!1},e.prototype.isMutable=function(){return!1},e.prototype.alias=function(){},e.prototype.branch=function(){return this},e.prototype.clone=function(){return this},e.prototype.commit=function(){return this},e.prototype.keyEquals=function(t){return!1},e.builder=function(){return new ae},e.empty=function(){return e.Record.empty()},e.extant=function(){return e.Extant.extant()},e.absent=function(){return e.Absent.absent()},e.fromAny=function(t){if(t instanceof e)return t;if(void 0===t)return e.Absent.absent();if(null===t)return e.Extant.extant();if("boolean"==typeof t)return e.Bool.from(t);if("number"==typeof t)return e.Num.from(t);if("string"==typeof t)return e.Text.from(t);if(t instanceof Uint8Array)return e.Data.wrap(t);if(Array.isArray(t))return e.Record.fromArray(t);if("object"==typeof t)return e.Record.fromObject(t);throw new TypeError(""+t)},e}(ee);ee.Value=pe;var he=function(t){function e(e,r,n,i){void 0===r&&(r=0),void 0===n&&(n=e.length),void 0===i&&(i=r);var o=t.call(this)||this;return o._record=e,o._lower=r,o._upper=n,o._index=i,o._direction=0,o}return y(e,t),e.prototype.isEmpty=function(){return this._index>=this._upper},e.prototype.head=function(){if(this._direction=0,this._index<this._upper)return this._record.getItem(this._index);throw new Error("empty")},e.prototype.step=function(){if(this._direction=0,!(this._index<this._upper))throw new Error("empty");this._index+=1},e.prototype.skip=function(t){this._index=Math.min(Math.max(this._lower,this._index+t,this._upper))},e.prototype.hasNext=function(){return this._index<this._upper},e.prototype.nextIndex=function(){return this._index-this._lower},e.prototype.next=function(){this._direction=1;var t=this._index;return t<this._upper?(this._index=t+1,{value:this._record.getItem(t),done:this._index===this._upper}):(this._index=this._upper,{done:!0})},e.prototype.hasPrevious=function(){return this._index>this._lower},e.prototype.previousIndex=function(){return this._index-this._lower-1},e.prototype.previous=function(){this._direction=-1;var t=this._index-1;return t>=this._lower?(this._index=t,{value:this._record.getItem(t),done:t===this._lower}):(this._index=0,{done:!0})},e.prototype.set=function(t){this._direction>0?this._record.setItem(this._index-1,t):this._record.setItem(this._index,t)},e.prototype.delete=function(){this._direction>0&&(this._index-=1),this._record.splice(this._index,1),this._direction=0},e}(l),fe=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.isArray=function(){return 0===this.fieldCount()},e.prototype.isObject=function(){return 0===this.valueCount()},e.prototype.fieldCount=function(){var t=0;return this.forEach((function(e){e instanceof ee.Field&&(t+=1)}),this),t},e.prototype.valueCount=function(){var t=0;return this.forEach((function(e){e instanceof pe&&(t+=1)}),this),t},e.prototype.isConstant=function(){return void 0===this.forEach((function(t){return!!t.isConstant()&&void 0}),this)},e.prototype.tag=function(){var t=this.head();if(t instanceof ee.Attr)return t.key.value},e.prototype.target=function(){var t,r,n=!1;return this.forEach((function(i){i instanceof ee.Attr?n=!0:void 0===t&&i instanceof pe?t=i:(void 0===r&&(r=e.create(),void 0!==t&&r.push(t)),r.push(i))}),this),void 0===t?pe.extant():void 0===r?t:n?r:this},e.prototype.flattened=function(){if(this.isEmpty())return pe.extant();var t=this.iterator(),e=t.head();return t.step(),t.isEmpty()&&e instanceof pe?e:this.branch()},e.prototype.unflattened=function(){return this},e.prototype.header=function(t){var e=this.head();return e instanceof ee.Attr&&e.key.value===t?e.value:pe.absent()},e.prototype.headers=function(t){var r=this.head();if(r instanceof ee.Attr&&r.key.value===t){var n=r.value;return n instanceof e?n:e.of(n)}},e.prototype.head=function(){return this.forEach((function(t){return t}),this)||ee.absent()},e.prototype.tail=function(){var t=e.create();return this.forEach((function(e,r){r>0&&t.push(e)}),this),t},e.prototype.body=function(){var t=this.tail();return t.isEmpty()?pe.absent():t.flattened()},e.prototype.has=function(t){return t=pe.fromAny(t),this.forEach((function(e){return!!(e instanceof ee.Field&&e.key.equals(t))||void 0}),this)||!1},e.prototype.indexOf=function(t,e){void 0===e&&(e=0),t=ee.fromAny(t),e<0&&(e=Math.max(0,this.length+e));var r=this.forEach((function(r,n){return n>=e&&t.equals(r)?n:void 0}),this);return void 0!==r?r:-1},e.prototype.lastIndexOf=function(t,e){t=ee.fromAny(t);var r=this.length;for(void 0===e?e=r-1:e<0&&(e=r+e),e=Math.min(e,r-1);e>=0;){if(t.equals(this.getItem(e)))return e;e-=1}return-1},e.prototype.get=function(t){return t=pe.fromAny(t),this.forEach((function(e){return e instanceof ee.Field&&e.key.equals(t)?e.value:void 0}),this)||pe.absent()},e.prototype.getAttr=function(t){return t=pe.Text.fromAny(t),this.forEach((function(e){return e instanceof ee.Attr&&e.key.equals(t)?e.value:void 0}),this)||pe.absent()},e.prototype.getSlot=function(t){return t=pe.fromAny(t),this.forEach((function(e){return e instanceof ee.Slot&&e.key.equals(t)?e.value:void 0}),this)||pe.absent()},e.prototype.getField=function(t){return t=pe.fromAny(t),this.forEach((function(e){return e instanceof ee.Field&&e.key.equals(t)?e:void 0}),this)},e.prototype.set=function(t,e){t=pe.fromAny(t),e=pe.fromAny(e);for(var r=this.iterator();!r.isEmpty();){var n=r.head();if(n instanceof ee.Field&&n.key.equals(t))return n.isMutable()?n.setValue(e):r.set(n.updatedValue(e)),this;r.step()}return this.push(new ee.Slot(t,e)),this},e.prototype.setAttr=function(t,e){t=pe.Text.fromAny(t),e=pe.fromAny(e);for(var r=this.iterator();!r.isEmpty();){var n=r.head();if(n instanceof ee.Field&&n.key.equals(t))return n instanceof ee.Attr&&n.isMutable()?n.setValue(e):r.set(new ee.Attr(t,e)),this;r.step()}return this.push(new ee.Attr(t,e)),this},e.prototype.setSlot=function(t,e){t=pe.fromAny(t),e=pe.fromAny(e);for(var r=this.iterator();!r.isEmpty();){var n=r.head();if(n instanceof ee.Field&&n.key.equals(t))return n instanceof ee.Slot&&n.isMutable()?n.setValue(e):r.set(new ee.Slot(t,e)),this;r.step()}return this.push(new ee.Slot(t,e)),this},e.prototype.updated=function(t,e){t=pe.fromAny(t),e=pe.fromAny(e);for(var r=this.isMutable()?this:this.branch(),n=r.iterator();!n.isEmpty();){var i=n.head();if(i.key.equals(t))return i instanceof ee.Field&&i.isMutable()?i.setValue(e):n.set(new ee.Slot(t,e)),r;n.step()}return r.push(new ee.Slot(t,e)),r},e.prototype.updatedAttr=function(t,e){t=pe.Text.fromAny(t),e=pe.fromAny(e);for(var r=this.isMutable()?this:this.branch(),n=r.iterator();!n.isEmpty();){var i=n.head();if(i.key.equals(t))return i instanceof ee.Attr&&i.isMutable()?i.setValue(e):n.set(new ee.Attr(t,e)),r;n.step()}return r.push(new ee.Attr(t,e)),r},e.prototype.updatedSlot=function(t,e){t=pe.fromAny(t),e=pe.fromAny(e);for(var r=this.isMutable()?this:this.branch(),n=r.iterator();!n.isEmpty();){var i=n.head();if(i.key.equals(t))return i instanceof ee.Slot&&i.isMutable()?i.setValue(e):n.set(new ee.Slot(t,e)),r;n.step()}return r.push(new ee.Slot(t,e)),r},e.prototype.appended=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.isMutable()?this:this.branch();return r.push.apply(r,arguments),r},e.prototype.prepended=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.isMutable()?this:this.branch();return r.splice.apply(r,Array.prototype.concat.apply([0,0],arguments)),r},e.prototype.deleted=function(t){var e=this.isMutable()?this:this.branch();return e.delete(t),e},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this.isMutable()?this:this.branch(),n=0,i=arguments.length;n<i;n+=1)ee.fromAny(arguments[n]).forEach((function(t){r.push(t)}));return r},e.prototype.slice=function(t,e){return this.subRecord.apply(this,arguments).branch()},e.prototype.attr=function(t,e){return this.push(ee.Attr.of.apply(void 0,arguments)),this},e.prototype.slot=function(t,e){return this.push(ee.Slot.of.apply(void 0,arguments)),this},e.prototype.item=function(t){return this.push(t),this},e.prototype.items=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.push.apply(this,arguments),this},e.prototype.evaluate=function(t){t=oe.fromAny(t);var r=e.create();t.pushScope(r);var n=!1;return this.forEach((function(e){var i=e.evaluate(t);i.isDefined()&&r.push(i),e!==i&&(n=!0)}),this),t.popScope(),n?r:this},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=e.create();t.pushScope(r);var n=!1;return this.forEach((function(e){var i=e.substitute(t);i.isDefined()&&r.push(i),e!==i&&(n=!0)}),this),t.popScope(),n?r:this},e.prototype.stringValue=function(t){var e="";return void 0===this.forEach((function(t){if(t instanceof pe){var r=t.stringValue();if(void 0!==r)return void(e+=r)}return null}),this)?e:void 0},e.prototype.toAny=function(){return!this.isEmpty()&&this.isArray()?this.toArray():this.toObject()},e.prototype.toArray=function(){var t=new Array(this.length);return this.forEach((function(e,r){e instanceof pe?t[r]=e.toAny():e instanceof ee.Field&&(t[r]={$key:e.key.toAny(),$value:e.value.toAny()})}),this),t},e.prototype.toObject=function(){var t={};return this.forEach((function(e,r){e instanceof ee.Attr?t["@"+e.key.value]=e.value.toAny():e instanceof ee.Slot?e.key instanceof pe.Text?t[e.key.value]=e.value.toAny():t["$"+r]={$key:e.key.toAny(),$value:e.value.toAny()}:e instanceof pe&&(t["$"+r]=e.toAny())}),this),t},e.prototype.isAliased=function(){return!1},e.prototype.isMutable=function(){return!0},e.prototype.alias=function(){},e.prototype.branch=function(){var t=e.create();return this.forEach((function(e){t.push(e)}),this),t},e.prototype.clone=function(){var t=e.create();return this.forEach((function(e){t.push(e.clone())}),this),t},e.prototype.commit=function(){return this},e.prototype.bind=function(){return this},e.prototype.subRecord=function(t,e){var r=this.length;void 0===t?t=0:t<0&&(t=r+t),t=Math.min(Math.max(0,t),r),void 0===e?e=r:e<0&&(e=r+e);var n=pe.Record.create();return this.forEach((function(r,i){return i<t?void 0:i<e?void n.push(r):null}),this),n},e.prototype.iterator=function(){return new he(this)},e.prototype.typeOrder=function(){return 3},e.prototype.compareTo=function(t){if(t instanceof e){var r=this.iterator(),n=t.iterator(),i=0;do{if(r.isEmpty()||n.isEmpty())break;i=r.head().compareTo(n.head()),r.step(),n.step()}while(0===i);return 0!==i?i:r.isEmpty()&&!n.isEmpty()?-1:!r.isEmpty()&&n.isEmpty()?1:0}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){if(this===t)return!0;if(t instanceof e){for(var r=this.iterator(),n=t.iterator();!r.isEmpty()&&!n.isEmpty();){if(!r.head().equals(n.head()))return!1;r.step(),n.step()}return r.isEmpty()&&n.isEmpty()}return!1},e.prototype.hashCode=function(){if(void 0===this._hashCode){void 0===e._hashSeed&&(e._hashSeed=f.seed(e));var t=e._hashSeed;this.forEach((function(e){t=f.mix(t,e.hashCode())}),this),this._hashCode=f.mash(t)}return this._hashCode},e.prototype.debug=function(t){t=t.write("Record").write(46),this.isEmpty()?t=t.write("empty").write(40).write(41):(t=t.write("of").write(40),this.forEach((function(e,r){0!==r&&(t=t.write(44).write(32)),t.display(e)}),this),t=t.write(41))},e.prototype.display=function(t){this.debug(t)},e.empty=function(){return e.RecordMap.empty()},e.create=function(t){return e.RecordMap.create(t)},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.RecordMap.of.apply(void 0,arguments)},e.fromAny=function(t){if(t instanceof e)return t;if(Array.isArray(t))return e.fromArray(t);if("object"==typeof t&&null!==t)return e.fromObject(t);throw new TypeError(""+t)},e.fromArray=function(t){for(var r=t.length||0,n=e.create(r),i=0;i<r;i+=1)n.push(ee.fromAny(t[i]));return n},e.fromObject=function(t){var r=e.create();for(var n in t){var i=t[n];36===n.charCodeAt(0)?i&&"object"==typeof i&&i.hasOwnProperty("$key")?r.push(ee.Field.of(i.$key,i.$value)):r.push(pe.fromAny(i)):r.push(ee.Field.of(n,i))}return r},e.expand=function(t){return t=Math.max(8,t)-1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},e.ALIASED=1,e.IMMUTABLE=2,e}(pe);ee.Record=fe;var ce=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._array=e,s._table=r,s._itemCount=n,s._fieldCount=i,s._flags=o,s}return y(e,t),e.prototype.isEmpty=function(){return 0===this._itemCount},Object.defineProperty(e.prototype,"length",{get:function(){return this._itemCount},enumerable:!1,configurable:!0}),e.prototype.fieldCount=function(){return this._fieldCount},e.prototype.valueCount=function(){return this._itemCount-this._fieldCount},e.prototype.isConstant=function(){for(var t=this._array,e=0,r=this._itemCount;e<r;e+=1)if(!t[e].isConstant())return!1;return!0},e.prototype.tag=function(){if(this._fieldCount>0){var t=this._array[0];if(t instanceof ee.Attr)return t.key.value}},e.prototype.target=function(){for(var t,e,r=!1,n=this._array,i=0,o=this._itemCount;i<o;i+=1){var s=n[i];s instanceof ee.Attr?r=!0:void 0===t&&s instanceof pe?t=s:(void 0===e&&(e=fe.create(),void 0!==t&&e.push(t)),e.push(s))}return void 0===t?pe.extant():void 0===e?t:r?e:this},e.prototype.head=function(){return this._itemCount>0?this._array[0]:ee.absent()},e.prototype.tail=function(){var t=this._itemCount;return t>0?new fe.RecordMapView(this,1,t):fe.empty()},e.prototype.body=function(){var t=this._itemCount;if(t>2)return new fe.RecordMapView(this,1,t).branch();if(2===t){var e=this._array[1];return e instanceof pe?e:fe.of(e)}return pe.absent()},e.prototype.has=function(t){if(0!==this._fieldCount){t=pe.fromAny(t);var e=this.hashTable(),r=e.length,n=Math.abs(t.hashCode()%r),i=n;do{var o=e[i];if(void 0===o)break;if(o.key.equals(t))return!0;i=(i+1)%r}while(i!==n)}return!1},e.prototype.indexOf=function(t,e){void 0===e&&(e=0),t=ee.fromAny(t);var r=this._array,n=this._itemCount;for(e<0&&(e=Math.max(0,n+e));e<n;){if(t.equals(r[e]))return e;e+=1}return-1},e.prototype.lastIndexOf=function(t,e){t=ee.fromAny(t);var r=this._array,n=this._itemCount;for(void 0===e?e=n-1:e<0&&(e=n+e),e=Math.min(e,n-1);e>=0;){if(t.equals(r[e]))return e;e-=1}return-1},e.prototype.get=function(t){if(this._fieldCount>0){t=pe.fromAny(t);var e=this.hashTable(),r=e.length,n=Math.abs(t.hashCode()%r),i=n;do{var o=e[i];if(void 0===o)break;if(o.key.equals(t))return o.value;i=(i+1)%r}while(i!==n)}return pe.absent()},e.prototype.getAttr=function(t){if(this._fieldCount>0){t=pe.Text.fromAny(t);var e=this.hashTable(),r=e.length,n=Math.abs(t.hashCode()%r),i=n;do{var o=e[i];if(void 0===o)break;if(o instanceof ee.Attr&&o.key.equals(t))return o.value;i=(i+1)%r}while(i!==n)}return pe.absent()},e.prototype.getSlot=function(t){if(this._fieldCount>0){t=pe.fromAny(t);var e=this.hashTable(),r=e.length,n=Math.abs(t.hashCode()%r),i=n;do{var o=e[i];if(void 0===o)break;if(o instanceof ee.Slot&&o.key.equals(t))return o.value;i=(i+1)%r}while(i!==n)}return pe.absent()},e.prototype.getField=function(t){if(this._fieldCount>0){t=pe.fromAny(t);var e=this.hashTable(),r=e.length,n=Math.abs(t.hashCode()%r),i=n;do{var o=e[i];if(void 0===o)break;if(o.key.equals(t))return o;i=(i+1)%r}while(i!==n)}},e.prototype.getItem=function(t){t instanceof ee.Num&&(t=t.value);var e=this._itemCount;return t<0&&(t=e+t),t>=0&&t<e?this._array[t]:ee.absent()},e.prototype.set=function(t,e){if(0!=(this._flags&fe.IMMUTABLE))throw new Error("immutable");return t=pe.fromAny(t),e=pe.fromAny(e),0!=(this._flags&fe.ALIASED)?this._fieldCount>0?this.setAliased(t,e):this.pushAliased(new ee.Slot(t,e)):this._fieldCount>0?null!==this._table?this.setMutable(t,e):this.updateMutable(t,e):this.pushMutable(new ee.Slot(t,e)),this},e.prototype.setAliased=function(t,e){for(var r=this._itemCount,n=this._array,i=new Array(fe.expand(r+1)),o=0;o<r;o+=1){var s=n[o];if(s instanceof ee.Field&&s.key.equals(t)){for(i[o]=s.updatedValue(e),o+=1;o<r;)i[o]=n[o],o+=1;return this._array=i,this._table=null,void(this._flags&=~fe.ALIASED)}i[o]=s}i[r]=new ee.Slot(t,e),this._array=i,this._table=null,this._itemCount=r+1,this._fieldCount+=1,this._flags&=~fe.ALIASED},e.prototype.setMutable=function(t,r){var n=this._table,i=n.length,o=Math.abs(t.hashCode()%i),s=o;do{var u=n[s];if(void 0===u)break;if(u.key.equals(t))return u.isMutable()?void u.setValue(r):void this.updateMutable(t,r);s=(s+1)%i}while(s!==o);var a=new ee.Slot(t,r);this.pushMutable(a),e.put(n,a)},e.prototype.updateMutable=function(t,r){for(var n=this._array,i=0,o=this._itemCount;i<o;i+=1){var s=n[i];if(s instanceof ee.Field&&s.key.equals(t))return n[i]=s.updatedValue(r),void(this._table=null)}var u=new ee.Slot(t,r);this.pushMutable(u),e.put(this._table,u)},e.prototype.setAttr=function(t,e){if(0!=(this._flags&fe.IMMUTABLE))throw new Error("immutable");return t=pe.Text.fromAny(t),e=pe.fromAny(e),0!=(this._flags&fe.ALIASED)?this._fieldCount>0?this.setAttrAliased(t,e):this.pushAliased(new ee.Attr(t,e)):this._fieldCount>0?null!==this._table?this.setAttrMutable(t,e):this.updateAttrMutable(t,e):this.pushMutable(new ee.Attr(t,e)),this},e.prototype.setAttrAliased=function(t,e){for(var r=this._itemCount,n=this._array,i=new Array(fe.expand(r+1)),o=0;o<r;o+=1){var s=n[o];if(s instanceof ee.Field&&s.key.equals(t)){for(i[o]=new ee.Attr(t,e),o+=1;o<r;)i[o]=n[o],o+=1;return this._array=i,this._table=null,void(this._flags&=~fe.ALIASED)}i[o]=s}i[r]=new ee.Attr(t,e),this._array=i,this._table=null,this._itemCount=r+1,this._fieldCount+=1,this._flags&=~fe.ALIASED},e.prototype.setAttrMutable=function(t,r){var n=this._table,i=n.length,o=Math.abs(t.hashCode()%i),s=o;do{var u=n[s];if(void 0===u)break;if(u.key.equals(t))return void(u instanceof ee.Attr&&u.isMutable()?u.setValue(r):this.updateAttrMutable(t,r));s=(s+1)%i}while(s!==o);var a=new ee.Attr(t,r);this.push(a),e.put(n,a)},e.prototype.updateAttrMutable=function(t,r){for(var n=this._array,i=0,o=this._itemCount;i<o;i+=1){var s=n[i];if(s instanceof ee.Field&&s.key.equals(t))return n[i]=new ee.Attr(t,r),void(this._table=null)}var u=new ee.Attr(t,r);this.push(u),e.put(this._table,u)},e.prototype.setSlot=function(t,e){if(0!=(this._flags&fe.IMMUTABLE))throw new Error("immutable");return t=pe.fromAny(t),e=pe.fromAny(e),0!=(this._flags&fe.ALIASED)?this._fieldCount>0?this.setSlotAliased(t,e):this.pushAliased(new ee.Slot(t,e)):this._fieldCount>0?null!==this._table?this.setSlotMutable(t,e):this.updateSlotMutable(t,e):this.pushMutable(new ee.Slot(t,e)),this},e.prototype.setSlotAliased=function(t,e){for(var r=this._itemCount,n=this._array,i=new Array(fe.expand(r+1)),o=0;o<r;o+=1){var s=n[o];if(s instanceof ee.Field&&s.key.equals(t)){for(i[o]=new ee.Slot(t,e),o+=1;o<r;)i[o]=n[o],o+=1;return this._array=i,this._table=null,void(this._flags&=~fe.ALIASED)}i[o]=s}i[r]=new ee.Slot(t,e),this._array=i,this._table=null,this._itemCount=r+1,this._fieldCount+=1,this._flags&=~fe.ALIASED},e.prototype.setSlotMutable=function(t,r){var n=this._table,i=n.length,o=Math.abs(t.hashCode()%i),s=o;do{var u=n[s];if(void 0===u)break;if(u.key.equals(t))return void(u instanceof ee.Slot&&u.isMutable()?u.setValue(r):this.updateSlotMutable(t,r));s=(s+1)%i}while(s!==o);var a=new ee.Slot(t,r);this.push(a),e.put(n,a)},e.prototype.updateSlotMutable=function(t,r){for(var n=this._array,i=0,o=this._itemCount;i<o;i+=1){var s=n[i];if(s instanceof ee.Field&&s.key.equals(t))return n[i]=new ee.Slot(t,r),void(this._table=null)}var u=new ee.Slot(t,r);this.push(u),e.put(this._table,u)},e.prototype.setItem=function(t,e){if(0!=(this._flags&fe.IMMUTABLE))throw new Error("immutable");e=ee.fromAny(e);var r=this._itemCount;if(t<0&&(t=r+t),t<0||t>r)throw new RangeError(""+t);return 0!=(this._flags&fe.ALIASED)?this.setItemAliased(t,e):this.setItemMutable(t,e),this},e.prototype.setItemAliased=function(t,e){for(var r=this._itemCount,n=this._array,i=new Array(fe.expand(r)),o=0;o<r;o+=1)i[o]=n[o];var s=n[t];i[t]=e,this._array=i,this._table=null,e instanceof ee.Field?s instanceof ee.Field||(this._fieldCount+=1):s instanceof ee.Field&&(this._fieldCount-=1),this._flags&=~fe.ALIASED},e.prototype.setItemMutable=function(t,e){var r=this._array,n=r[t];r[t]=e,e instanceof ee.Field?(this._table=null,n instanceof ee.Field||(this._fieldCount+=1)):n instanceof ee.Field&&(this._table=null,this._fieldCount-=1)},e.prototype.updated=function(t,e){t=pe.fromAny(t),e=pe.fromAny(e);var r=0==(this._flags&fe.IMMUTABLE)?this:this.branch();return 0!=(r._flags&fe.ALIASED)?r._fieldCount>0?r.setAliased(t,e):r.pushAliased(new ee.Slot(t,e)):r._fieldCount>0?null!==r._table?r.setMutable(t,e):r.updateMutable(t,e):r.pushMutable(new ee.Slot(t,e)),r},e.prototype.updatedAttr=function(t,e){t=pe.Text.fromAny(t),e=pe.fromAny(e);var r=0==(this._flags&fe.IMMUTABLE)?this:this.branch();return 0!=(r._flags&fe.ALIASED)?r._fieldCount>0?r.setAttrAliased(t,e):r.pushAliased(new ee.Attr(t,e)):r._fieldCount>0?null!==r._table?r.setAttrMutable(t,e):r.updateAttrMutable(t,e):r.pushMutable(new ee.Attr(t,e)),r},e.prototype.updatedSlot=function(t,e){t=pe.fromAny(t),e=pe.fromAny(e);var r=0==(this._flags&fe.IMMUTABLE)?this:this.branch();return 0!=(r._flags&fe.ALIASED)?r._fieldCount>0?r.setSlotAliased(t,e):r.pushAliased(new ee.Slot(t,e)):r._fieldCount>0?null!==r._table?r.setSlotMutable(t,e):r.updateSlotMutable(t,e):r.pushMutable(new ee.Slot(t,e)),r},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0!=(this._flags&fe.IMMUTABLE))throw new Error("immutable");return 0!=(this._flags&fe.ALIASED)?this.pushAliased.apply(this,arguments):this.pushMutable.apply(this,arguments),this._itemCount},e.prototype.pushAliased=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=arguments.length,n=this._itemCount,i=this._fieldCount,o=this._array,s=new Array(fe.expand(n+r));if(null!==o)for(var u=0;u<n;u+=1)s[u]=o[u];for(u=0;u<r;u+=1){var a=ee.fromAny(arguments[u]);s[n]=a,n+=1,a instanceof ee.Field&&(i+=1)}this._array=s,this._table=null,this._itemCount=n,this._fieldCount=i,this._flags&=~fe.ALIASED},e.prototype.pushMutable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,n=arguments.length,i=this._itemCount,o=this._fieldCount,s=this._array;if(null===s||i+n>s.length){if(r=new Array(fe.expand(i+n)),null!==s)for(var u=0;u<i;u+=1)r[u]=s[u]}else r=s;for(u=0;u<n;u+=1){var a=ee.fromAny(arguments[u]);r[i]=a,i+=1,a instanceof ee.Field&&(o+=1,this._table=null)}this._array=r,this._itemCount=i,this._fieldCount=o},e.prototype.splice=function(t,e){void 0===e&&(e=0);for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(0!=(this._flags&fe.IMMUTABLE))throw new Error("immutable");var i=this._itemCount;return t<0&&(t=i+t),t=Math.min(Math.max(0,t),i),e=Math.min(Math.max(0,e),i-t),0!=(this._flags&fe.ALIASED)?this.spliceAliased.apply(this,arguments):this.spliceMutable.apply(this,arguments)},e.prototype.spliceAliased=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];for(var i=r.length,o=this._itemCount,s=this._fieldCount,u=this._array,a=new Array(fe.expand(o-e+i)),p=0;p<t;p+=1)a[p]=u[p];var h=[];for(p=t;p<t+e;p+=1){var f=u[p];h.push(f),o-=1,f instanceof ee.Field&&(s-=1)}for(p=t;p<o;p+=1)a[p+i]=u[p+e];for(p=0;p<i;p+=1){var c=ee.fromAny(r[p]);a[p+t]=c,o+=1,c instanceof ee.Field&&(s+=1)}return this._array=a,this._table=null,this._itemCount=o,this._fieldCount=s,this._flags&=~fe.ALIASED,h},e.prototype.spliceMutable=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i,o=r.length,s=this._itemCount,u=this._fieldCount,a=this._array;if(null===a||s-e+o>a.length){if(i=new Array(fe.expand(s-e+o)),null!==a)for(var p=0;p<t;p+=1)i[p]=a[p]}else i=a;var h=[];for(p=t;p<t+e;p+=1){var f=a[p];h.push(f),s-=1,f instanceof ee.Field&&(u-=1)}if(o>e)for(p=s-1;p>=t;p-=1)i[p+o]=a[p+e];else for(p=t;p<s;p+=1)i[p+o]=a[p+e];for(p=0;p<o;p+=1){var c=ee.fromAny(r[p]);i[p+t]=c,s+=1,c instanceof ee.Field&&(u+=1)}return this._array=i,this._itemCount=s,this._fieldCount=u,h},e.prototype.delete=function(t){if(0!=(this._flags&fe.IMMUTABLE))throw new Error("immutable");return t=pe.fromAny(t),0!=(this._flags&fe.ALIASED)?this.deleteAliased(t):this.deleteMutable(t)},e.prototype.deleteAliased=function(t){for(var e=this._itemCount,r=this._array,n=new Array(fe.expand(e)),i=0;i<e;i+=1){var o=r[i];if(o instanceof ee.Field&&o.key.equals(t)){for(var s=i+1;s<e;s+=1,i+=1)n[i]=r[s];return this._array=n,this._table=null,this._itemCount=e-1,this._fieldCount-=1,this._flags&=~fe.ALIASED,o}n[i]=o}return ee.absent()},e.prototype.deleteMutable=function(t){for(var e=this._itemCount,r=this._array,n=0;n<e;n+=1){var i=r[n];if(i instanceof ee.Field&&i.key.equals(t)){for(var o=n+1;o<e;o+=1,n+=1)r[n]=r[o];return r[e-1]=void 0,this._table=null,this._itemCount=e-1,this._fieldCount-=1,i}}return ee.absent()},e.prototype.clear=function(){if(0!=(this._flags&fe.IMMUTABLE))throw new Error("immutable");this._array=null,this._table=null,this._itemCount=0,this._fieldCount=0,this._flags=0},e.prototype.isAliased=function(){return 0!=(this._flags&fe.ALIASED)},e.prototype.isMutable=function(){return 0==(this._flags&fe.IMMUTABLE)},e.prototype.alias=function(){this._flags|=fe.ALIASED},e.prototype.branch=function(){if(0==(this._flags&(fe.ALIASED|fe.IMMUTABLE)))for(var t=this._array,r=0,n=this._itemCount;r<n;r+=1)t[r].alias();return this._flags|=fe.ALIASED,new e(this._array,this._table,this._itemCount,this._fieldCount,fe.ALIASED)},e.prototype.clone=function(){for(var t=this._itemCount,r=this._array,n=new Array(t),i=0;i<t;i+=1)n[i]=r[i].clone();return new e(n,null,t,this._fieldCount,0)},e.prototype.commit=function(){if(0==(this._flags&fe.IMMUTABLE)){this._flags|=fe.IMMUTABLE;for(var t=this._array,e=0,r=this._itemCount;e<r;e+=1)t[e].commit()}return this},e.prototype.hashTable=function(){var t=this._fieldCount,r=this._table;if(0!==t&&null===this._table){r=new Array(fe.expand(Math.max(t,10*t/7)));for(var n=this._array,i=0,o=this._itemCount;i<o;i+=1){var s=n[i];s instanceof ee.Field&&e.put(r,s)}this._table=r}return r},e.put=function(t,e){if(null!==t){var r=t.length,n=Math.abs(e.key.hashCode()%r),i=n;do{var o=t[i];if(void 0===o)return void(t[i]=e);if(e.key.equals(o.key))return void(t[i]=e);i=(i+1)%r}while(i!==n);throw new Error}},e.prototype.evaluate=function(t){t=oe.fromAny(t);var e=this._array,r=this._itemCount,n=fe.create(r);t.pushScope(n);for(var i=!1,o=0;o<r;o+=1){var s=e[o],u=s.evaluate(t);u.isDefined()&&n.push(u),s!==u&&(i=!0)}return t.popScope(),i?n:this},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._array,r=this._itemCount,n=fe.create(r);t.pushScope(n);for(var i=!1,o=0;o<r;o+=1){var s=e[o],u=s.substitute(t);u.isDefined()&&n.push(u),s!==u&&(i=!0)}return t.popScope(),i?n:this},e.prototype.subRecord=function(t,e){var r=this._itemCount;if(void 0===t?t=0:t<0&&(t=r+t),void 0===e?e=r:e<0&&(e=r+e),t<0||e>r||t>e)throw new RangeError(t+", "+e);return new fe.RecordMapView(this,t,e)},e.prototype.forEach=function(t,e){for(var r=this._array,n=0,i=this._itemCount;n<i;n+=1){var o=t.call(e,r[n],n);if(void 0!==o)return o}},e.empty=function(){return void 0===e._empty&&(e._empty=new e(null,null,0,0,fe.ALIASED|fe.IMMUTABLE)),e._empty},e.create=function(t){return void 0===t?new e(null,null,0,0,fe.ALIASED):new e(new Array(t),null,0,0,0)},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=arguments.length;if(0===n)return new e(null,null,0,0,fe.ALIASED);for(var i=new Array(n),o=0,s=0,u=0;u<n;u+=1){var a=ee.fromAny(arguments[u]);i[u]=a,o+=1,a instanceof ee.Field&&(s+=1)}return new e(i,null,o,s,0)},e}(fe);ee.RecordMap=ce;var le=function(t){function e(e,r,n){var i=t.call(this)||this;return i._record=e,i._lower=r,i._upper=n,i}return y(e,t),e.prototype.isEmpty=function(){return this._lower===this._upper},e.prototype.isArray=function(){for(var t=this._record._array,e=this._lower,r=this._upper;e<r;e+=1)if(t[e]instanceof ee.Field)return!1;return!0},e.prototype.isObject=function(){for(var t=this._record._array,e=this._lower,r=this._upper;e<r;e+=1)if(t[e]instanceof pe)return!1;return!0},Object.defineProperty(e.prototype,"length",{get:function(){return this._upper-this._lower},enumerable:!1,configurable:!0}),e.prototype.fieldCount=function(){for(var t=this._record._array,e=0,r=this._lower,n=this._upper;r<n;r+=1)t[r]instanceof ee.Field&&(e+=1);return e},e.prototype.valueCount=function(){for(var t=0,e=this._record._array,r=this._lower,n=this._upper;r<n;r+=1)e[r]instanceof pe&&(t+=1);return t},e.prototype.isConstant=function(){for(var t=this._record._array,e=this._lower,r=this._upper;e<r;e+=1)if(!t[e].isConstant())return!1;return!0},e.prototype.tag=function(){if(this.length>0){var t=this._record._array[this._lower];if(t instanceof ee.Attr)return t.key.value}},e.prototype.target=function(){for(var t,e,r=!1,n=this._record._array,i=this._lower,o=this._upper;i<o;i+=1){var s=n[i];s instanceof ee.Attr?r=!0:void 0===t&&s instanceof pe?t=s:(void 0===e&&(e=fe.create(),void 0!==t&&e.push(t)),e.push(s))}return void 0===t?pe.extant():void 0===e?t:r?e:this},e.prototype.head=function(){return this.length>0?this._record._array[this._lower]:ee.absent()},e.prototype.tail=function(){return this.length>0?new e(this._record,this._lower+1,this._upper):fe.empty()},e.prototype.body=function(){var t=this.length;if(t>2)return new e(this._record,this._lower+1,this._upper).branch();if(2===t){var r=this._record._array[this._lower+1];return r instanceof pe?r:fe.of(r)}return pe.absent()},e.prototype.indexOf=function(t,e){void 0===e&&(e=0),t=ee.fromAny(t);var r=this._record._array,n=this.length;for(e<0&&(e=Math.max(0,n+e)),e=this._lower+e;e<this._upper;){if(t.equals(r[e]))return e-this._lower;e+=1}return-1},e.prototype.lastIndexOf=function(t,e){t=ee.fromAny(t);var r=this._record._array,n=this.length;for(void 0===e?e=n-1:e<0&&(e=n+e),e=this._lower+Math.min(e,n-1);e>=this._lower;){if(t.equals(r[e]))return e-this._lower;e-=1}return-1},e.prototype.getItem=function(t){t instanceof ee.Num&&(t=t.value);var e=this.length;return t<0&&(t=e+t),t>=0&&t<e?this._record._array[this._lower+t]:ee.absent()},e.prototype.setItem=function(t,e){if(0!=(this._record._flags&fe.IMMUTABLE))throw new Error("immutable");e=ee.fromAny(e);var r=this.length;if(t<0&&(t=r+t),t<0||t>r)throw new RangeError(""+t);return 0!=(this._record._flags&fe.ALIASED)?this.setItemAliased(t,e):this.setItemMutable(t,e),this},e.prototype.setItemAliased=function(t,e){for(var r=this._record._itemCount,n=this._record._array,i=new Array(fe.expand(r)),o=0;o<r;o+=1)i[o]=n[o];var s=n[this._lower+t];i[this._lower+t]=e,this._record._array=i,this._record._table=null,e instanceof ee.Field?s instanceof ee.Field||(this._record._fieldCount+=1):s instanceof ee.Field&&(this._record._fieldCount-=1),this._record._flags&=~fe.ALIASED},e.prototype.setItemMutable=function(t,e){var r=this._record._array,n=r[this._lower+t];r[this._lower+t]=e,e instanceof ee.Field?(this._record._table=null,n instanceof ee.Field||(this._record._fieldCount+=1)):n instanceof ee.Field&&(this._record._table=null,this._record._fieldCount-=1)},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0!=(this._record._flags&fe.IMMUTABLE))throw new Error("immutable");return 0!=(this._record._flags&fe.ALIASED)?this.pushAliased.apply(this,arguments):this.pushMutable.apply(this,arguments),this.length},e.prototype.pushAliased=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length,n=this._record._itemCount,i=this._record._fieldCount,o=this._record._array,s=new Array(fe.expand(n+r));if(null!==o){for(var u=0;u<this._upper;u+=1)s[u]=o[u];for(u=this._upper;u<n;u+=1)s[u+r]=o[u]}for(u=0;u<r;u+=1){var a=ee.fromAny(t[u]);s[u+this._upper]=a,n+=1,a instanceof ee.Field&&(i+=1)}this._record._array=s,this._record._table=null,this._record._itemCount=n,this._record._fieldCount=i,this._record._flags&=~fe.ALIASED,this._upper+=r},e.prototype.pushMutable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,n=t.length,i=this._record._itemCount,o=this._record._fieldCount,s=this._record._array;if(null===s||i+n>s.length){if(r=new Array(fe.expand(i+n)),null!==s)for(var u=0;u<this._upper;u+=1)r[u]=s[u]}else r=s;for(u=i-1;u>=this._upper;u-=1)r[u+n]=s[u];for(u=0;u<n;u+=1){var a=ee.fromAny(t[u]);r[u+this._upper]=a,i+=1,a instanceof ee.Field&&(o+=1,this._record._table=null)}this._record._array=r,this._record._itemCount=i,this._record._fieldCount=o,this._upper+=n},e.prototype.splice=function(t,e){var r,n;void 0===e&&(e=0);for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(0!=(this._record._flags&fe.IMMUTABLE))throw new Error("immutable");var s,u=this.length;return t<0&&(t=u+t),t=Math.min(Math.max(0,t),u),e=Math.min(Math.max(0,e),u-t),s=0!=(this._record._flags&fe.ALIASED)?(r=this._record).spliceAliased.apply(r,_([this._lower+t,e],i)):(n=this._record).spliceMutable.apply(n,_([this._lower+t,e],i)),this._upper+=i.length-s.length,s},e.prototype.delete=function(t){if(0!=(this._record._flags&fe.IMMUTABLE))throw new Error("immutable");return t=pe.fromAny(t),0!=(this._record._flags&fe.ALIASED)?this.deleteAliased(t):this.deleteMutable(t)},e.prototype.deleteAliased=function(t){for(var e=this._record._itemCount,r=this._record._array,n=new Array(fe.expand(e)),i=this._lower;i<this._upper;i+=1){var o=r[i];if(o instanceof ee.Field&&o.key.equals(t)){for(var s=i+1;s<e;s+=1,i+=1)n[i]=r[s];return this._record._array=n,this._record._table=null,this._record._itemCount=e-1,this._record._fieldCount-=1,this._record._flags&=~fe.ALIASED,this._upper-=1,o}n[i]=o}return ee.absent()},e.prototype.deleteMutable=function(t){for(var e=this._record._itemCount,r=this._record._array,n=this._lower;n<this._upper;n+=1){var i=r[n];if(i instanceof ee.Field&&i.key.equals(t)){for(var o=n+1;o<e;o+=1,n+=1)r[n]=r[o];return r[e-1]=void 0,this._record._table=null,this._record._itemCount-=1,this._record._fieldCount-=1,this._upper-=1,i}}return ee.absent()},e.prototype.clear=function(){if(0!=(this._record._flags&fe.IMMUTABLE))throw new Error("immutable");0!=(this._record._flags&fe.ALIASED)?this.clearAliased():this.clearMutable()},e.prototype.clearAliased=function(){for(var t=this._record._itemCount,e=this._record._fieldCount,r=t-this.length,n=this._record._array,i=new Array(fe.expand(r)),o=0;o<this._lower;)i[o]=n[o],o+=1;for(;o<this._upper;)n[o]instanceof ee.Field&&(e-=1),o+=1;o=this._lower;for(var s=this._upper;s<t;)i[o]=n[s],o+=1,s+=1;this._record._array=i,this._record._table=null,this._record._itemCount=r,this._record._fieldCount=e,this._record._flags&=~fe.ALIASED,this._upper=this._lower},e.prototype.clearMutable=function(){for(var t=this._record._itemCount,e=this._record._fieldCount,r=this._record._array,n=this._lower;n<this._upper;)r[n]instanceof ee.Field&&(e-=1),n+=1;n=this._lower;for(var i=this._upper;i<t;){var o=r[i];o instanceof ee.Field&&(this._record._table=null),r[n]=o,n+=1,i+=1}for(this._record._itemCount=n,this._record._fieldCount=e;n<t;)r[n]=void 0,n+=1;this._upper=this._lower},e.prototype.isAliased=function(){return 0!=(this._record._flags&fe.ALIASED)},e.prototype.isMutable=function(){return 0==(this._record._flags&fe.IMMUTABLE)},e.prototype.alias=function(){this._record._flags|=fe.ALIASED},e.prototype.branch=function(){for(var t=this.length,e=0,r=this._record._array,n=new Array(fe.expand(t)),i=this._lower,o=0;o<t;){var s=r[i];n[o]=s,s instanceof ee.Field&&(e+=1),i+=1,o+=1}return new ce(n,null,t,e,0)},e.prototype.clone=function(){for(var t=this.length,e=0,r=this._record._array,n=new Array(fe.expand(t)),i=this._lower,o=0;o<t;){var s=r[i];n[o]=s.clone(),s instanceof ee.Field&&(e+=1),i+=1,o+=1}return new ce(n,null,t,e,0)},e.prototype.commit=function(){return this._record.commit(),this},e.prototype.subRecord=function(t,r){var n=this.length;if(void 0===t?t=0:t<0&&(t=n+t),void 0===r?r=n:r<0&&(r=n+r),t<0||r>n||t>r)throw new RangeError(t+", "+r);return new e(this._record,this._lower+t,this._upper+r)},e.prototype.forEach=function(t,e){for(var r=this._record._array,n=this._lower,i=this._upper;n<i;n+=1){var o=t.call(e,r[n],n);if(void 0!==o)return o}},e}(fe);ee.RecordMapView=le;var de=function(t){function e(e,r){var n=t.call(this)||this;return n._data=e,n._settings=r,n}return y(e,t),e.prototype.isCont=function(){return!0},e.prototype.isFull=function(){return!1},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0!==t&&this},e.prototype.write=function(t){if("number"==typeof t)return this._data.addByte(t),this;throw new TypeError(""+t)},e.prototype.writeln=function(t){throw new TypeError(""+t)},e.prototype.settings=function(t){return void 0===t?this._settings:(this._settings=M.fromAny(t),this)},e.prototype.bind=function(){return this._data},e.prototype.clone=function(){return new e(this._data.branch(),this._settings)},e}(T),ye=function(t){function e(e,r,n){var i=t.call(this)||this;return i._array=e,i._size=r,i._flags=n,i}return y(e,t),e.prototype.isConstant=function(){return!0},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.getByte=function(t){if(t<0||t>=this.size)throw new RangeError(""+t);return this._array[t]},e.prototype.setByte=function(t,r){var n=this._flags;if(0!=(n&e.IMMUTABLE))throw new Error("immutable");if(t<0||t>=this._size)throw new RangeError(""+t);return 0!=(n&e.ALIASED)?this.setByteAliased(t,r):this.setByteMutable(t,r)},e.prototype.setByteAliased=function(t,r){var n=this.size,i=this._array,o=new Uint8Array(e.expand(n));return o.set(i,0),o[t]=r,this._array=o,this._flags&=~e.ALIASED,this},e.prototype.setByteMutable=function(t,e){return this._array[t]=e,this},e.prototype.addByte=function(t){var r=this._flags;if(0!=(r&e.IMMUTABLE))throw new Error("immutable");return 0!=(r&e.ALIASED)?this.addByteAliased(t):this.addByteMutable(t)},e.prototype.addByteAliased=function(t){var r=this.size,n=this._array,i=new Uint8Array(e.expand(r+1));return null!==n&&i.set(n,0),i[r]=t,this._array=i,this._size=r+1,this._flags&=~e.ALIASED,this},e.prototype.addByteMutable=function(t){var r,n=this.size,i=this._array;return null===i||n+1>i.length?(r=new Uint8Array(e.expand(n+1)),null!==i&&r.set(i,0),this._array=r):r=i,r[n]=t,this._size=n+1,this},e.prototype.addData=function(t){var e=t._array;if(null!==e){var r=t._size;return e.length>r&&(e=e.slice(0,r)),this.addUint8Array(e)}return this},e.prototype.addUint8Array=function(t){var r=this._flags;if(0!=(r&e.IMMUTABLE))throw new Error("immutable");return 0!=(r&e.ALIASED)?this.addUint8ArrayAliased(t):this.addUint8ArrayMutable(t)},e.prototype.addUint8ArrayAliased=function(t){var r=t.length;if(0===r)return this;var n=this.size,i=this._array,o=new Uint8Array(e.expand(n+r));return null!==i&&o.set(i,0),o.set(t,n),this._array=o,this._size=n+r,this._flags&=~e.ALIASED,this},e.prototype.addUint8ArrayMutable=function(t){var r=t.length;if(0===r)return this;var n,i=this.size,o=this._array;return null===o||i+r>o.length?(n=new Uint8Array(e.expand(i+r)),null!==o&&n.set(o,0),this._array=n):n=o,n.set(t,i),this._size=i+r,this},e.prototype.clear=function(){if(0!=(this._flags&e.IMMUTABLE))throw new Error("immutable");this._array=null,this._size=0,this._flags=e.ALIASED},e.prototype.toUint8Array=function(){var t=this._array,r=this._flags;if(0!=(r&e.IMMUTABLE))return null!==t?t.slice(0):new Uint8Array(0);if(0!=(r&e.ALIASED)||this._size!==t.length){var n=null!==t?t.slice(0):new Uint8Array(0);return this._array=n,this._flags&=~e.ALIASED,n}return t},e.prototype.asUint8Array=function(){var t;return null!==this._array&&this._size>0?(t=this._array).length!==this._size&&(t=new Uint8Array(t.buffer,t.byteOffset,this._size)):t=void 0,t},e.prototype.toAny=function(){return this.toUint8Array()},e.prototype.isAliased=function(){return 0!=(this._flags&e.ALIASED)},e.prototype.isMutable=function(){return 0==(this._flags&e.IMMUTABLE)},e.prototype.branch=function(){return this._flags|=e.ALIASED,new e(this._array,this._size,e.ALIASED)},e.prototype.clone=function(){return this.branch()},e.prototype.commit=function(){return this._flags|=e.IMMUTABLE,this},e.prototype.writeBase16=function(t,e){void 0===e&&(e=wt.uppercase());var r=this._array,n=this._size;return null!==r&&0!==n?(r.length!==n&&(r=r.slice(0,n)),e.writeUint8Array(r,t)):W.done()},e.prototype.toBase16=function(t){void 0===t&&(t=wt.uppercase());var e=Z.stringOutput();return this.writeBase16(e,t),e.bind()},e.prototype.writeBase64=function(t,e){void 0===e&&(e=Dt.standard());var r=this._array,n=this._size;return null!==r&&0!==n?(r.length!==n&&(r=r.slice(0,n)),e.writeUint8Array(r,t)):W.done()},e.prototype.toBase64=function(t){void 0===t&&(t=Dt.standard());var e=Z.stringOutput();return this.writeBase64(e,t),e.bind()},e.prototype.typeOrder=function(){return 4},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._array,n=t._array,i=this._size,o=t._size,s=0,u=0;do{if(!(u<i&&u<o))break;s=r[u]-n[u],u+=1}while(0===s);return s>0?1:s<0?-1:i>o?1:i<o?-1:0}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){if(this===t)return!0;if(t instanceof e){var r=this._array,n=t._array,i=this._size;if(i!==t._size)return!1;for(var o=0;o<i;o+=1)if(r[o]!==n[o])return!1;return!0}return!1},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,this._array||new Uint8Array(0)))},e.prototype.debug=function(t){t=t.write("Data").write(46),0===this._size?t=t.write("empty").write(40).write(41):(t=t.write("base16").write(40).write(34),this.writeBase16(t),t=t.write(34).write(41))},e.prototype.display=function(t){this.debug(t)},e.output=function(t){return t instanceof e||(t=e.create(t)),new de(t,M.standard())},e.empty=function(){return void 0===e._empty&&(e._empty=new e(null,0,e.ALIASED|e.IMMUTABLE)),e._empty},e.create=function(t){return void 0===t?new e(null,0,e.ALIASED):new e(new Uint8Array(t),0,0)},e.wrap=function(t){return new e(t,t.length,e.ALIASED)},e.fromBase16=function(t){return"string"==typeof t&&(t=Z.stringInput(t)),wt.parse(t,e.output()).bind()},e.fromBase64=function(t,r){return void 0===r&&(r=Dt.standard()),"string"==typeof t&&(t=Z.stringInput(t)),r.parse(t,e.output()).bind()},e.fromAny=function(t){if(t instanceof e)return t;if(t instanceof Uint8Array)return e.wrap(t);throw new TypeError(""+t)},e.random=function(t){var r=new Uint8Array(t);return s.fillBytes(r),e.wrap(r)},e.expand=function(t){return t=Math.max(32,t)-1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},e.ALIASED=1,e.IMMUTABLE=2,e}(pe);ee.Data=ye;var _e=function(t){function e(e,r){var n=t.call(this)||this;return n._string=e,n._settings=r,n}return y(e,t),e.prototype.isCont=function(){return!0},e.prototype.isFull=function(){return!1},e.prototype.isDone=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.isPart=function(t){return void 0!==t&&this},e.prototype.write=function(t){if("number"==typeof t)if(t>=0&&t<=55295||t>=57344&&t<=65535)t=String.fromCharCode(t);else if(t>=65536&&t<=1114111){var e=t-65536;t=String.fromCharCode(55296|e>>>10,56320|1023&e)}else t="�";return this._string+=t,this},e.prototype.settings=function(t){return void 0===t?this._settings:(this._settings=M.fromAny(t),this)},e.prototype.bind=function(){return ve.from(this._string)},e.prototype.clone=function(){return new e(this._string,this._settings)},e.prototype.toString=function(){return this._string},e}(T),ve=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return y(e,t),e.prototype.isConstant=function(){return!0},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._value.length},enumerable:!1,configurable:!0}),e.prototype.stringValue=function(t){return this._value},e.prototype.numberValue=function(t){try{return ee.Num.from(this._value).numberValue()}catch(e){return t}},e.prototype.booleanValue=function(t){return"true"===this._value||"false"!==this._value&&t},e.prototype.toAny=function(){return this._value},e.prototype.valueOf=function(){return this._value},e.prototype.plus=function(r){return(r=ee.fromAny(r))instanceof e?e.from(this._value+r._value):t.prototype.plus.call(this,r)},e.prototype.branch=function(){return this},e.prototype.clone=function(){return this},e.prototype.commit=function(){return this},e.prototype.typeOrder=function(){return 5},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._value.localeCompare(t._value);return r<0?-1:r>0?1:0}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._value===t._value},e.prototype.hashCode=function(){return void 0===this._hashCode&&(this._hashCode=f.hash(this._value)),this._hashCode},e.prototype.debug=function(t){t=t.write("Text").write(46),t=0===this._value.length?t.write("empty").write(40).write(41):t.write("from").write(40).debug(this._value).write(41)},e.prototype.display=function(t){X.debug(this._value,t)},e.prototype.toString=function(){return this._value},e.output=function(t){return void 0===t&&(t=M.standard()),new _e("",t)},e.empty=function(){return void 0===e._empty&&(e._empty=new e("")),e._empty},e.from=function(t){var r=t.length;if(0===r)return e.empty();var n=new e(t);return r<=64&&(n=e.cache().put(n)),n},e.fromAny=function(t){if(t instanceof e)return t;if("string"==typeof t)return e.from(t);throw new TypeError(""+t)},e.cache=function(){if(void 0===e._cache){e._cache=new A(128)}return e._cache},e}(pe);ee.Text=ve;var me=function(t){function e(e,r){void 0===r&&(r=0);var n=t.call(this)||this;return n._value=e,n._flags=r,n}return y(e,t),e.prototype.isConstant=function(){return!0},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),e.prototype.isNaN=function(){return isNaN(this._value)},e.prototype.isInfinite=function(){return!isNaN(this._value)&&!isFinite(this._value)},e.prototype.isUint32=function(){return 0!=(this._flags&e.UINT32)},e.prototype.isUint64=function(){return 0!=(this._flags&e.UINT64)},e.prototype.stringValue=function(t){return""+this._value},e.prototype.numberValue=function(t){return this._value},e.prototype.booleanValue=function(t){return!!this._value},e.prototype.toAny=function(){return this._value},e.prototype.valueOf=function(){return this._value},e.prototype.bitwiseOr=function(r){return(r=ee.fromAny(r))instanceof e?e.from((this._value|r._value)>>>0):t.prototype.bitwiseOr.call(this,r)},e.prototype.bitwiseXor=function(r){return(r=ee.fromAny(r))instanceof e?e.from((this._value^r._value)>>>0):t.prototype.bitwiseXor.call(this,r)},e.prototype.bitwiseAnd=function(r){return(r=ee.fromAny(r))instanceof e?e.from((this._value&r._value)>>>0):t.prototype.bitwiseAnd.call(this,r)},e.prototype.plus=function(r){return(r=ee.fromAny(r))instanceof e?e.from(this._value+r._value):t.prototype.plus.call(this,r)},e.prototype.minus=function(r){return(r=ee.fromAny(r))instanceof e?e.from(this._value-r._value):t.prototype.minus.call(this,r)},e.prototype.times=function(r){return(r=ee.fromAny(r))instanceof e?e.from(this._value*r._value):t.prototype.times.call(this,r)},e.prototype.divide=function(r){return(r=ee.fromAny(r))instanceof e?e.from(this._value/r._value):t.prototype.divide.call(this,r)},e.prototype.modulo=function(r){return(r=ee.fromAny(r))instanceof e?e.from(this._value%r._value):t.prototype.modulo.call(this,r)},e.prototype.bitwiseNot=function(){return e.from(~this._value>>>0)},e.prototype.negative=function(){return e.from(-this._value)},e.prototype.positive=function(){return this},e.prototype.inverse=function(){return e.from(1/this._value)},e.prototype.abs=function(){return e.from(Math.abs(this._value))},e.prototype.ceil=function(){return e.from(Math.ceil(this._value))},e.prototype.floor=function(){return e.from(Math.floor(this._value))},e.prototype.round=function(){return e.from(Math.round(this._value))},e.prototype.sqrt=function(){return e.from(Math.sqrt(this._value))},e.prototype.pow=function(t){return t=e.fromAny(t),e.from(Math.pow(this._value,t._value))},e.prototype.max=function(t){return this.compareTo(t)>=0?this:t},e.prototype.min=function(t){return this.compareTo(t)<=0?this:t},e.prototype.typeOrder=function(){return 6},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._value,n=t._value;return r<n?-1:r>n?1:isNaN(n)?isNaN(r)?0:-1:isNaN(r)?1:0}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){if(this===t)return!0;if(t instanceof e){var r=this._value,n=t._value;return r===n||isNaN(r)&&isNaN(n)}return!1},e.prototype.hashCode=function(){return f.hash(this._value)},e.prototype.debug=function(t){t=t.write("Num").write(46).write("from").write(40).display(this).write(41)},e.prototype.display=function(t){X.displayNumber(this._value,t)},e.positiveZero=function(){return void 0===e._positiveZero&&(e._positiveZero=new e(0)),e._positiveZero},e.negativeZero=function(){return void 0===e._negativeZero&&(e._negativeZero=new e(-0)),e._negativeZero},e.positiveOne=function(){return void 0===e._positiveOne&&(e._positiveOne=new e(1)),e._positiveOne},e.negativeOne=function(){return void 0===e._negativeOne&&(e._negativeOne=new e(-1)),e._negativeOne},e.nan=function(){return void 0===e._nan&&(e._nan=new e(NaN)),e._nan},e.uint32=function(t){return new e(t,e.UINT32)},e.uint64=function(t){return new e(t,e.UINT64)},e.from=function(t){if("number"==typeof t)return 0===t?1/t==-1/0?e.negativeZero():e.positiveZero():1===t?e.positiveOne():-1===t?e.negativeOne():isNaN(t)?e.nan():e.cache().put(new e(t));if("string"==typeof t){if("NaN"===t)return e.nan();var r=+t;if(isFinite(r))return e.from(r);throw new Error(t)}throw new TypeError(""+t)},e.fromAny=function(t){if(t instanceof e)return t;if("number"==typeof t)return e.from(t);throw new TypeError(""+t)},e.cache=function(){if(void 0===e._cache){e._cache=new A(16)}return e._cache},e.TYPE_MASK=3,e.UINT32=1,e.UINT64=2,e}(pe);ee.Num=me;var we=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return y(e,t),e.prototype.isConstant=function(){return!0},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),e.prototype.stringValue=function(t){return this._value?"true":"false"},e.prototype.booleanValue=function(t){return this._value},e.prototype.toAny=function(){return this._value},e.prototype.valueOf=function(){return this._value},e.prototype.conditional=function(t,e){return this._value?ee.fromAny(t):ee.fromAny(e)},e.prototype.or=function(t){return this._value?this:ee.fromAny(t)},e.prototype.and=function(t){return this._value?ee.fromAny(t):this},e.prototype.not=function(){return e.from(!this._value)},e.prototype.typeOrder=function(){return 7},e.prototype.compareTo=function(t){return t instanceof e?this._value&&!t._value?-1:!this._value&&t._value?1:0:c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._value===t._value},e.prototype.hashCode=function(){return void 0===this._hashCode&&(this._hashCode=f.hash(this._value?"true":"false")),this._hashCode},e.prototype.debug=function(t){t=t.write("Bool").write(46).write("from").write(40).write(this._value?"true":"false").write(41)},e.prototype.display=function(t){t=t.write(this._value?"true":"false")},e.from=function(t){return t?e.True:e.False},e.fromAny=function(t){if(t instanceof e)return t;if("boolean"==typeof t)return e.from(t);throw new TypeError(""+t)},e.True=new e(!0),e.False=new e(!1),e}(pe);ee.Bool=we;var ge=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.conditional=function(t,e){return t=ee.fromAny(t),e=ee.fromAny(e),new ee.ConditionalOperator(this,t,e)},e.prototype.or=function(t){return t=ee.fromAny(t),new ee.OrOperator(this,t)},e.prototype.and=function(t){return t=ee.fromAny(t),new ee.AndOperator(this,t)},e.prototype.bitwiseOr=function(t){return t=ee.fromAny(t),new ee.BitwiseOrOperator(this,t)},e.prototype.bitwiseXor=function(t){return t=ee.fromAny(t),new ee.BitwiseXorOperator(this,t)},e.prototype.bitwiseAnd=function(t){return t=ee.fromAny(t),new ee.BitwiseAndOperator(this,t)},e.prototype.lt=function(t){return t=ee.fromAny(t),new ee.LtOperator(this,t)},e.prototype.le=function(t){return t=ee.fromAny(t),new ee.LeOperator(this,t)},e.prototype.eq=function(t){return t=ee.fromAny(t),new ee.EqOperator(this,t)},e.prototype.ne=function(t){return t=ee.fromAny(t),new ee.NeOperator(this,t)},e.prototype.ge=function(t){return t=ee.fromAny(t),new ee.GeOperator(this,t)},e.prototype.gt=function(t){return t=ee.fromAny(t),new ee.GtOperator(this,t)},e.prototype.plus=function(t){return t=ee.fromAny(t),new ee.PlusOperator(this,t)},e.prototype.minus=function(t){return t=ee.fromAny(t),new ee.MinusOperator(this,t)},e.prototype.times=function(t){return t=ee.fromAny(t),new ee.TimesOperator(this,t)},e.prototype.divide=function(t){return t=ee.fromAny(t),new ee.DivideOperator(this,t)},e.prototype.modulo=function(t){return t=ee.fromAny(t),new ee.ModuloOperator(this,t)},e.prototype.not=function(){return new ee.NotOperator(this)},e.prototype.bitwiseNot=function(){return new ee.BitwiseNotOperator(this)},e.prototype.negative=function(){return new ee.NegativeOperator(this)},e.prototype.positive=function(){return new ee.PositiveOperator(this)},e.prototype.inverse=function(){return new ee.DivideOperator(ee.Num.positiveOne(),this)},e.prototype.toAny=function(){return this},e}(pe);ee.Expression=ge;var be=function(t){function e(){return t.call(this)||this}return y(e,t),e}(ge);ee.Operator=be;var xe=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.isConstant=function(){return!1},e.prototype.evaluate=function(t){t=oe.fromAny(t);var e=ee.Record.create();return this.forSelected(t,(function(t){var r=t.peekScope();void 0!==r&&e.push(r)}),this),e.isEmpty()?ee.absent():e.flattened()},e.prototype.get=function(t){return t=pe.fromAny(t),this.andThen(new ee.GetSelector(t,e.identity()))},e.prototype.getAttr=function(t){return t=ee.Text.fromAny(t),this.andThen(new ee.GetAttrSelector(t,e.identity()))},e.prototype.getItem=function(t){return t=ee.Num.fromAny(t),this.andThen(new ee.GetItemSelector(t,e.identity()))},e.prototype.keys=function(){return this.andThen(e.keys())},e.prototype.values=function(){return this.andThen(e.values())},e.prototype.children=function(){return this.andThen(e.children())},e.prototype.descendants=function(){return this.andThen(e.descendants())},e.prototype.filter=function(t){return 0===arguments.length?new ee.FilterSelector(this,e.identity()):(t=ee.fromAny(t),this.andThen(t.filter()))},e.prototype.invoke=function(t){return new ee.InvokeOperator(this,t)},e.prototype.precedence=function(){return 11},e.prototype.debug=function(t){t=t.write("Selector").write(46).write("identity").write(40).write(41),this.debugThen(t)},e.identity=function(){return e._identity},e.get=function(t){return t=pe.fromAny(t),new ee.GetSelector(t,e.identity())},e.getAttr=function(t){return t=ee.Text.fromAny(t),new ee.GetAttrSelector(t,e.identity())},e.getItem=function(t){return t=ee.Num.fromAny(t),new ee.GetItemSelector(t,e.identity())},e.keys=function(){return void 0===e._keys&&(e._keys=new ee.KeysSelector(e.identity())),e._keys},e.values=function(){return void 0===e._values&&(e._values=new ee.ValuesSelector(e.identity())),e._values},e.children=function(){return void 0===e._children&&(e._children=new ee.ChildrenSelector(e.identity())),e._children},e.descendants=function(){return void 0===e._descendants&&(e._descendants=new ee.DescendantsSelector(e.identity())),e._descendants},e.literal=function(t){return(t=ee.fromAny(t))instanceof e||(t=new ee.LiteralSelector(t,e.identity())),t},e}(ge);ee.Selector=xe;var Se=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.expand=function(t,e,r){},e.prototype.isConstant=function(){return!1},e}(ge);ee.Func=Se;var Oe=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.isDefined=function(){return!0},e.prototype.isDistinct=function(){return!1},e.prototype.isConstant=function(){return!0},e.prototype.unflattened=function(){return pe.Record.empty()},e.prototype.not=function(){return pe.absent()},e.prototype.stringValue=function(t){return""},e.prototype.booleanValue=function(t){return!0},e.prototype.toAny=function(){return null},e.prototype.typeOrder=function(){return 98},e.prototype.compareTo=function(t){return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),e._hashSeed},e.prototype.debug=function(t){t=t.write("Value").write(46).write("extant").write(40).write(41)},e.prototype.display=function(t){t=t.write("null")},e.extant=function(){return e._extant},e.fromAny=function(t){if(t instanceof e)return t;if(null===t)return e.extant();throw new TypeError(""+t)},e._extant=new e,e}(pe);ee.Extant=Oe;var Ae=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.isDefined=function(){return!1},e.prototype.isDistinct=function(){return!1},e.prototype.isConstant=function(){return!0},e.prototype.unflattened=function(){return pe.Record.empty()},e.prototype.updated=function(t,e){return pe.Record.of(ee.Slot.of(t,e))},e.prototype.updatedAttr=function(t,e){return pe.Record.of(ee.Attr.of(t,e))},e.prototype.updatedSlot=function(t,e){return pe.Record.of(ee.Slot.of(t,e))},e.prototype.appended=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pe.Record.of(t)},e.prototype.prepended=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pe.Record.of(t)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=pe.Record.create(),n=0,i=arguments.length;n<i;n+=1)ee.fromAny(arguments[n]).forEach((function(t){r.push(t)}));return r},e.prototype.cond=function(t,e){return ee.fromAny(e)},e.prototype.or=function(t){return ee.fromAny(t)},e.prototype.and=function(t){return this},e.prototype.not=function(){return pe.extant()},e.prototype.booleanValue=function(t){return!1},e.prototype.toAny=function(){},e.prototype.forEach=function(t,e){},e.prototype.iterator=function(){return l.empty()},e.prototype.typeOrder=function(){return 99},e.prototype.compareTo=function(t){return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),e._hashSeed},e.prototype.debug=function(t){t=t.write("Value").write(46).write("absent").write(40).write(41)},e.prototype.display=function(t){t=t.write("undefined")},e.absent=function(){return e._absent},e.fromAny=function(t){if(t instanceof e)return t;if(void 0===t)return e.absent();throw new TypeError(""+t)},e._absent=new e,e}(pe);ee.Absent=Ae;var Ee=function(t){function e(r){var n=t.call(this,r)||this;return n.__proto__=e.prototype,n}return y(e,t),e}(Error),Ce=function(){function t(){}return t.prototype.tag=function(e){return 0===arguments.length?void 0:void 0!==e?new t.TagForm(e,this):this},t.prototype.unit=function(e){return 0===arguments.length?void 0:void 0!==e?new t.UnitForm(e,this):this},t.forString=function(){return void 0===t._stringForm&&(t._stringForm=new t.StringForm("")),t._stringForm},t.forNumber=function(){return void 0===t._numberForm&&(t._numberForm=new t.NumberForm(0)),t._numberForm},t.forBoolean=function(){return void 0===t._booleanForm&&(t._booleanForm=new t.BooleanForm(!1)),t._booleanForm},t.forAny=function(){return void 0===t._anyForm&&(t._anyForm=new t.AnyForm(void 0)),t._anyForm},t.forItem=function(){return void 0===t._itemForm&&(t._itemForm=new t.ItemForm(ee.absent())),t._itemForm},t.forValue=function(){return void 0===t._valueForm&&(t._valueForm=new t.ValueForm(pe.absent())),t._valueForm},t}(),Ie=function(t){function e(e,r){var n=t.call(this)||this;return n._operand1=e,n._operand2=r,n}return y(e,t),e.prototype.operand1=function(){return this._operand1},e.prototype.operand2=function(){return this._operand2},e.prototype.isConstant=function(){return this._operand1.isConstant()&&this._operand2.isConstant()},e}(be);ee.BinaryOperator=Ie;var De=function(t){function e(e){var r=t.call(this)||this;return r._operand=e,r}return y(e,t),e.prototype.operand=function(){return this._operand},e.prototype.isConstant=function(){return this._operand.isConstant()},e}(be);ee.UnaryOperator=De;var ke=function(t){function e(e,r,n){var i=t.call(this)||this;return i._ifTerm=e.commit(),i._thenTerm=r.commit(),i._elseTerm=n.commit(),i}return y(e,t),e.prototype.ifTerm=function(){return this._ifTerm},e.prototype.thenTerm=function(){return this._thenTerm},e.prototype.elseTerm=function(){return this._elseTerm},e.prototype.isConstant=function(){return this._ifTerm.isConstant()&&this._thenTerm.isConstant()&&this._elseTerm.isConstant()},e.prototype.precedence=function(){return 2},e.prototype.evaluate=function(t){var e;((t=oe.fromAny(t)).willOperate(this),this._ifTerm.evaluate(t).booleanValue(!1))?e=this._thenTerm.evaluate(t):e=this._elseTerm.evaluate(t);return t.didOperate(this,e),e},e.prototype.substitute=function(t){return t=oe.fromAny(t),new e(this._ifTerm.substitute(t),this._thenTerm.substitute(t),this._elseTerm.substitute(t))},e.prototype.typeOrder=function(){return 20},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._ifTerm.compareTo(t._ifTerm);return 0===r&&0===(r=this._thenTerm.compareTo(t._thenTerm))&&(r=this._elseTerm.compareTo(t._elseTerm)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._ifTerm.equals(t._ifTerm)&&this._thenTerm.equals(t._thenTerm)&&this._elseTerm.equals(t._elseTerm))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(f.mix(e._hashSeed,this._ifTerm.hashCode()),this._thenTerm.hashCode()),this._elseTerm.hashCode()))},e.prototype.debug=function(t){t.debug(this._ifTerm).write(46).write("conditional").write(40).debug(this._thenTerm).write(44).write(32).debug(this._elseTerm).write(41)},e.prototype.clone=function(){return new e(this._ifTerm.clone(),this._thenTerm.clone(),this._elseTerm.clone())},e}(be);ee.ConditionalOperator=ke;var Me=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"||"},e.prototype.precedence=function(){return 3},e.prototype.evaluate=function(t){var e;(t=oe.fromAny(t)).willOperate(this);var r=this._operand1.evaluate(t);r.booleanValue(!1)?e=r:e=this._operand2.evaluate(t);return t.didOperate(this,e),e},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.or(r)},e.prototype.typeOrder=function(){return 21},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("or").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.OrOperator=Me;var Pe=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"&&"},e.prototype.precedence=function(){return 4},e.prototype.evaluate=function(t){var e;(t=oe.fromAny(t)).willOperate(this);var r=this._operand1.evaluate(t);r.booleanValue(!1)?e=this._operand2.evaluate(t):e=r;return t.didOperate(this,e),e},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.and(r)},e.prototype.typeOrder=function(){return 22},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("and").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.AndOperator=Pe;var Te=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"|"},e.prototype.precedence=function(){return 5},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.bitwiseOr(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.bitwiseOr(r)},e.prototype.typeOrder=function(){return 23},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("bitwiseOr").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.BitwiseOrOperator=Te;var Ve=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"^"},e.prototype.precedence=function(){return 6},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.bitwiseXor(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.bitwiseXor(r)},e.prototype.typeOrder=function(){return 24},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("bitwiseXor").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.BitwiseXorOperator=Ve;var ze=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"&"},e.prototype.precedence=function(){return 7},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.bitwiseAnd(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.bitwiseAnd(r)},e.prototype.typeOrder=function(){return 25},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("bitwiseAnd").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.BitwiseAndOperator=ze;var Be=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"<"},e.prototype.precedence=function(){return 0},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.lt(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.lt(r)},e.prototype.typeOrder=function(){return 26},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("lt").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.LtOperator=Be;var Re=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"<="},e.prototype.precedence=function(){return 0},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.le(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.le(r)},e.prototype.typeOrder=function(){return 27},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("le").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.LeOperator=Re;var Fe=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"=="},e.prototype.precedence=function(){return 0},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.eq(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.eq(r)},e.prototype.typeOrder=function(){return 28},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("eq").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.EqOperator=Fe;var Le=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"!="},e.prototype.precedence=function(){return 0},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.ne(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.ne(r)},e.prototype.typeOrder=function(){return 29},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("ne").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.NeOperator=Le;var qe=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return">="},e.prototype.precedence=function(){return 0},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.ge(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.ge(r)},e.prototype.typeOrder=function(){return 30},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("ge").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.GeOperator=qe;var Ne=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return">"},e.prototype.precedence=function(){return 0},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.gt(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.gt(r)},e.prototype.typeOrder=function(){return 31},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("gt").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.GtOperator=Ne;var Ue=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"+"},e.prototype.precedence=function(){return 8},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.plus(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.plus(r)},e.prototype.typeOrder=function(){return 32},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("plus").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.PlusOperator=Ue;var Ke=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"-"},e.prototype.precedence=function(){return 8},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.minus(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.minus(r)},e.prototype.typeOrder=function(){return 33},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("minus").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.MinusOperator=Ke;var We=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"*"},e.prototype.precedence=function(){return 9},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.times(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.times(r)},e.prototype.typeOrder=function(){return 34},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("times").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.TimesOperator=We;var He=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"/"},e.prototype.precedence=function(){return 9},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.divide(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.divide(r)},e.prototype.typeOrder=function(){return 35},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("divide").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.DivideOperator=He;var je=function(t){function e(e,r){return t.call(this,e,r)||this}return y(e,t),e.prototype.operator=function(){return"%"},e.prototype.precedence=function(){return 9},e.prototype.evaluate=function(t){(t=oe.fromAny(t)).willOperate(this);var e=this._operand1.evaluate(t),r=this._operand2.evaluate(t),n=e.modulo(r);return t.didOperate(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var e=this._operand1.substitute(t),r=this._operand2.substitute(t);return e.modulo(r)},e.prototype.typeOrder=function(){return 36},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._operand1.compareTo(t._operand1);return 0===r&&(r=this._operand2.compareTo(t._operand2)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._operand1.equals(t._operand1)&&this._operand2.equals(t._operand2))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._operand1.hashCode()),this._operand2.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand1).write(46).write("modulo").write(40).debug(this._operand2).write(41)},e.prototype.clone=function(){return new e(this._operand1.clone(),this._operand2.clone())},e}(Ie);ee.ModuloOperator=je;var Ge=function(t){function e(e){return t.call(this,e)||this}return y(e,t),e.prototype.operator=function(){return"!"},e.prototype.precedence=function(){return 10},e.prototype.evaluate=function(t){return t=oe.fromAny(t),this._operand.evaluate(t).not()},e.prototype.substitute=function(t){return t=oe.fromAny(t),this._operand.substitute(t).not()},e.prototype.typeOrder=function(){return 37},e.prototype.compareTo=function(t){return t instanceof e?this._operand.compareTo(t._operand):c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._operand.equals(t._operand)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,this._operand.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand).write(46).write("not").write(40).write(41)},e.prototype.clone=function(){return new e(this._operand.clone())},e}(De);ee.NotOperator=Ge;var Qe=function(t){function e(e){return t.call(this,e)||this}return y(e,t),e.prototype.operator=function(){return"~"},e.prototype.precedence=function(){return 10},e.prototype.evaluate=function(t){return t=oe.fromAny(t),this._operand.evaluate(t).bitwiseNot()},e.prototype.substitute=function(t){return t=oe.fromAny(t),this._operand.substitute(t).bitwiseNot()},e.prototype.typeOrder=function(){return 38},e.prototype.compareTo=function(t){return t instanceof e?this._operand.compareTo(t._operand):c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._operand.equals(t._operand)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,this._operand.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand).write(46).write("bitwiseNot").write(40).write(41)},e.prototype.clone=function(){return new e(this._operand.clone())},e}(De);ee.BitwiseNotOperator=Qe;var Ze=function(t){function e(e){return t.call(this,e)||this}return y(e,t),e.prototype.operator=function(){return"-"},e.prototype.precedence=function(){return 10},e.prototype.evaluate=function(t){return t=oe.fromAny(t),this._operand.evaluate(t).negative()},e.prototype.substitute=function(t){return t=oe.fromAny(t),this._operand.substitute(t).negative()},e.prototype.typeOrder=function(){return 39},e.prototype.compareTo=function(t){return t instanceof e?this._operand.compareTo(t._operand):c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._operand.equals(t._operand)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,this._operand.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand).write(46).write("negative").write(40).write(41)},e.prototype.clone=function(){return new e(this._operand.clone())},e}(De);ee.NegativeOperator=Ze;var Xe=function(t){function e(e){return t.call(this,e)||this}return y(e,t),e.prototype.operator=function(){return"+"},e.prototype.precedence=function(){return 10},e.prototype.evaluate=function(t){return t=oe.fromAny(t),this._operand.evaluate(t).positive()},e.prototype.substitute=function(t){return t=oe.fromAny(t),this._operand.substitute(t).positive()},e.prototype.typeOrder=function(){return 40},e.prototype.compareTo=function(t){return t instanceof e?this._operand.compareTo(t._operand):c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._operand.equals(t._operand)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,this._operand.hashCode()))},e.prototype.debug=function(t){t.debug(this._operand).write(46).write("positive").write(40).write(41)},e.prototype.clone=function(){return new e(this._operand.clone())},e}(De);ee.PositiveOperator=Xe;var Ye=function(t){function e(e,r){var n=t.call(this)||this;return n._func=e,n._args=r.commit(),n}return y(e,t),e.prototype.func=function(){return this._func},e.prototype.args=function(){return this._args},e.prototype.state=function(){return this._state},e.prototype.setState=function(t){this._state=t},e.prototype.isConstant=function(){return this._func.isConstant()&&this._args.isConstant()},e.prototype.precedence=function(){return 11},e.prototype.evaluate=function(t){t=oe.fromAny(t);var e=this._func.evaluate(t);return e instanceof ee.Func?e.invoke(this._args,t,this):ee.absent()},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._func.evaluate(t);if(r instanceof ee.Func){var n=r.expand(this._args,t,this);if(void 0!==n)return n}var i=this._args.substitute(t).toValue();return new e(this._func,i)},e.prototype.typeOrder=function(){return 41},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._func.compareTo(t._func);return 0===r&&(r=this._args.compareTo(t._args)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._func.equals(t._func)&&this._args.equals(t._args))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._func.hashCode()),this._args.hashCode()))},e.prototype.debug=function(t){t.debug(this._func).write(46).write("invoke").write(40).debug(this._args).write(41)},e.prototype.clone=function(){return new e(this._func.clone(),this._args.clone())},e}(be);ee.InvokeOperator=Ye;var $e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.then=function(){return this},e.prototype.forSelected=function(t,e,r){var n;if(t.willSelect(this),0!==t.scopeDepth()){var i=t.popScope(),o=i.evaluate(t);t.pushScope(o),n=e.call(r,t),t.swapScope(i)}return t.didSelect(this,n),n},e.prototype.mapSelected=function(t,e,r){return e.call(r,t)},e.prototype.substitute=function(t){return(t=oe.fromAny(t)).peekScope().substitute(t)},e.prototype.get=function(t){return t=pe.fromAny(t),new ee.GetSelector(t,this)},e.prototype.getAttr=function(t){return t=ee.Text.fromAny(t),new ee.GetAttrSelector(t,this)},e.prototype.getItem=function(t){return t=ee.Num.fromAny(t),new ee.GetItemSelector(t,this)},e.prototype.andThen=function(t){return t},e.prototype.keys=function(){return xe.keys()},e.prototype.values=function(){return xe.values()},e.prototype.children=function(){return xe.children()},e.prototype.descendants=function(){return xe.descendants()},e.prototype.filter=function(t){return 0===arguments.length?new ee.FilterSelector(this,this):(t=ee.fromAny(t)).filter()},e.prototype.typeOrder=function(){return 10},e.prototype.compareTo=function(t){return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),e._hashSeed},e.prototype.debugThen=function(t){},e.prototype.clone=function(){return this},e}(xe);ee.IdentitySelector=$e,xe._identity=new $e;var Je=function(t){function e(e,r){var n=t.call(this)||this;return n._key=e.commit(),n._then=r,n}return y(e,t),e.prototype.accessor=function(){return this._key},e.prototype.then=function(){return this._then},e.prototype.forSelected=function(t,r,n){t.willSelect(this);var i=this._key.evaluate(t).toValue(),o=e.forSelected(i,this._then,t,r,n);return t.didSelect(this,o),o},e.forSelected=function(t,r,n,i,o){var s;if(0!==n.scopeDepth()){var u=n.popScope().toValue(),a=void 0;u instanceof ee.Record&&void 0!==(a=u.getField(t))&&(n.pushScope(a.toValue()),s=r.forSelected(n,i,o),n.popScope()),void 0===a&&void 0===s&&e.forSelected(t,r,n,i,o),n.pushScope(u)}return s},e.prototype.mapSelected=function(t,e,r){var n;t.willTransform(this);var i=this._key.evaluate(t).toValue();if(0!==t.scopeDepth()){var o=t.popScope().toValue();if(o instanceof ee.Record){var s=o.getField(i);if(void 0!==s){t.pushScope(s.toValue());var u=this._then.mapSelected(t,e,r);t.popScope(),u instanceof ee.Field?i.equals(u.key)?o.set(i,u.toValue()):(o.delete(i),o.push(u)):u.isDefined()?o.set(i,u.toValue()):o.delete(i)}}t.pushScope(o),n=o}else n=ee.absent();return t.didTransform(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._key.evaluate(t).toValue(),n=e.substitute(r,this._then,t);if(void 0!==n)return n;var i=this._then.substitute(t);return i instanceof xe||(i=this._then),new e(this._key,i)},e.substitute=function(t,r,n){var i;if(0!==n.scopeDepth()){var o=n.popScope().toValue(),s=void 0;o instanceof ee.Record&&void 0!==(s=o.getField(t))&&(i=s.toValue().substitute(n)),void 0===s&&void 0===i&&e.substitute(t,r,n),n.pushScope(o)}return i},e.prototype.andThen=function(t){return new e(this._key,this._then.andThen(t))},e.prototype.typeOrder=function(){return 12},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._key.compareTo(t._key);return 0===r&&(r=this._then.compareTo(t._then)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._key.equals(t._key)&&this._then.equals(t._then))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._key.hashCode()),this._then.hashCode()))},e.prototype.debugThen=function(t){t=t.write(46).write("get").write(40).debug(this._key).write(41),this._then.debugThen(t)},e.prototype.clone=function(){return new e(this._key.clone(),this._then.clone())},e}(xe);ee.GetSelector=Je;var tr=function(t){function e(e,r){var n=t.call(this)||this;return n._key=e,n._then=r,n}return y(e,t),e.prototype.accessor=function(){return this._key},e.prototype.then=function(){return this._then},e.prototype.forSelected=function(t,r,n){t.willSelect(this);var i=this._key,o=e.forSelected(i,this._then,t,r);return t.didSelect(this,o),o},e.forSelected=function(t,r,n,i,o){var s;if(0!==n.scopeDepth()){var u=n.popScope().toValue(),a=void 0;u instanceof ee.Record&&(a=u.getField(t))instanceof se&&(n.pushScope(a.toValue()),s=r.forSelected(n,i,o),n.popScope()),void 0===a&&void 0===s&&e.forSelected(t,r,n,i,o),n.pushScope(u)}return s},e.prototype.mapSelected=function(t,e,r){var n;t.willTransform(this);var i=this._key;if(0!==t.scopeDepth()){var o=t.popScope().toValue();if(o instanceof ee.Record){var s=o.getField(i);if(s instanceof ee.Attr){t.pushScope(s.toValue());var u=this._then.mapSelected(t,e,r);t.popScope(),u instanceof ee.Field?i.equals(u.key)?o.setAttr(i,u.toValue()):(o.delete(i),o.push(u)):u.isDefined()?o.setAttr(i,u.toValue()):o.delete(i)}}t.pushScope(o),n=o}else n=ee.absent();return t.didTransform(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._key,n=e.substitute(r,this._then,t);if(void 0!==n)return n;var i=this._then.substitute(t);return i instanceof xe||(i=this._then),new e(this._key,i)},e.substitute=function(t,r,n){var i;if(0!==n.scopeDepth()){var o=n.popScope().toValue(),s=void 0;o instanceof ee.Record&&(s=o.getField(t))instanceof ee.Attr&&(i=s.toValue().substitute(n)),void 0===s&&void 0===i&&e.substitute(t,r,n),n.pushScope(o)}return i},e.prototype.andThen=function(t){return new e(this._key,this._then.andThen(t))},e.prototype.typeOrder=function(){return 13},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._key.compareTo(t._key);return 0===r&&(r=this._then.compareTo(t._then)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._key.equals(t._key)&&this._then.equals(t._then))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._key.hashCode()),this._then.hashCode()))},e.prototype.debugThen=function(t){t=t.write(46).write("getAttr").write(40).debug(this._key).write(41),this._then.debugThen(t)},e.prototype.clone=function(){return new e(this._key.clone(),this._then.clone())},e}(xe);ee.GetAttrSelector=tr;var er=function(t){function e(e,r){var n=t.call(this)||this;return n._index=e,n._then=r,n}return y(e,t),e.prototype.accessor=function(){return this._index},e.prototype.then=function(){return this._then},e.prototype.forSelected=function(t,e,r){var n;t.willSelect(this);var i=this._index.numberValue();if(0!==t.scopeDepth()){var o=t.popScope().toValue();if(o instanceof ee.Record&&i<o.length){var s=o.getItem(i);t.pushScope(s),n=this._then.forSelected(t,e,r),t.popScope()}t.pushScope(o)}return t.didSelect(this,n),n},e.prototype.mapSelected=function(t,e,r){var n;if(t.willTransform(this),0!==t.scopeDepth()){var i=t.popScope().toValue(),o=this._index.numberValue();if(i instanceof ee.Record&&o<i.length){var s=i.getItem(o);t.pushScope(s);var u=this._then.mapSelected(t,e,r);t.popScope(),u.isDefined()?i.setItem(o,u):i.splice(o,1)}t.pushScope(i),n=i}else n=ee.absent();return t.didTransform(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._index.numberValue();if(0!==t.scopeDepth()){var n=t.popScope().toValue(),i=void 0;if(n instanceof ee.Record&&r<n.length)i=n.getItem(r).substitute(t);if(t.pushScope(n),void 0!==i)return i}var o=this._then.substitute(t);return o instanceof xe||(o=this._then),new e(this._index,o)},e.prototype.andThen=function(t){return new e(this._index,this._then.andThen(t))},e.prototype.typeOrder=function(){return 14},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._index.compareTo(t._index);return 0===r&&(r=this._then.compareTo(t._then)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._index.equals(t._index)&&this._then.equals(t._then))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._index.hashCode()),this._then.hashCode()))},e.prototype.debugThen=function(t){t=t.write(46).write("getItem").write(40).debug(this._index).write(41),this._then.debugThen(t)},e.prototype.clone=function(){return new e(this._index,this._then.clone())},e}(xe);ee.GetItemSelector=er;var rr=function(t){function e(e){var r=t.call(this)||this;return r._then=e,r}return y(e,t),e.prototype.then=function(){return this._then},e.prototype.forSelected=function(t,e,r){var n;if(t.willSelect(this),0!==t.scopeDepth()){var i=t.popScope();if(i instanceof ee.Record)for(var o=i.iterator();void 0===n&&o.hasNext();){var s=o.next().value;s instanceof ee.Field&&(t.pushScope(s.key),n=this._then.forSelected(t,e,r),t.popScope())}else i instanceof ee.Field&&(t.pushScope(i.key),n=this._then.forSelected(t,e,r),t.popScope());t.pushScope(i)}return t.didSelect(this,n),n},e.prototype.mapSelected=function(t,e,r){var n;if(t.willTransform(this),0!==t.scopeDepth()){var i=t.popScope();if(i instanceof ee.Record)for(var o=i.iterator();o.hasNext();){var s=o.next().value;if(s instanceof ee.Field){var u=s.key;t.pushScope(u);var a=this._then.mapSelected(t,e,r).toValue();t.popScope(),a.isDefined()?u!==a&&(i instanceof ee.Attr&&a instanceof ee.Text?o.set(ee.Attr.of(a,i.toValue())):o.set(ee.Slot.of(a,i.toValue()))):o.delete()}}else if(i instanceof ee.Field){u=i.key;t.pushScope(u);a=this._then.mapSelected(t,e,r).toValue();t.popScope(),a.isDefined()?u!==a&&(i=i instanceof ee.Attr&&a instanceof ee.Text?ee.Attr.of(a,i.toValue()):ee.Slot.of(a,i.toValue())):i=ee.absent()}t.pushScope(i),n=i}else n=ee.absent();return t.didTransform(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._then.substitute(t);return r instanceof xe||(r=this._then),new e(r)},e.prototype.andThen=function(t){return new e(this._then.andThen(t))},e.prototype.typeOrder=function(){return 15},e.prototype.compareTo=function(t){return t instanceof e?this._then.compareTo(t._then):c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._then.equals(t._then)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,this._then.hashCode()))},e.prototype.debugThen=function(t){t=t.write(46).write("keys").write(40).write(41),this._then.debugThen(t)},e.prototype.clone=function(){return new e(this._then.clone())},e}(xe);ee.KeysSelector=rr;var nr=function(t){function e(e){var r=t.call(this)||this;return r._then=e,r}return y(e,t),e.prototype.then=function(){return this._then},e.prototype.forSelected=function(t,e,r){var n;if(t.willSelect(this),0!==t.scopeDepth()){var i=t.popScope();if(i instanceof ee.Record)for(var o=i.iterator();void 0===n&&o.hasNext();){var s=o.next().value;t.pushScope(s.toValue()),n=this._then.forSelected(t,e,r),t.popScope()}else t.pushScope(i.toValue()),n=this._then.forSelected(t,e,r),t.popScope();t.pushScope(i)}return t.didSelect(this,n),n},e.prototype.mapSelected=function(t,e,r){var n;if(t.willTransform(this),0!==t.scopeDepth()){var i=t.popScope();if(i instanceof ee.Record)for(var o=i.iterator();o.hasNext();){var s=o.next().value;if(s instanceof ee.Field){var u=s.toValue();t.pushScope(u);var a=this._then.mapSelected(t,e,r);t.popScope(),a.isDefined()?a instanceof ee.Field?o.set(a):a!==u&&o.set(s.updatedValue(a.toValue())):o.delete()}else{t.pushScope(s.toValue());a=this._then.mapSelected(t,e,r);t.popScope(),a.isDefined()?s!==a&&o.set(a):o.delete()}}else if(i instanceof ee.Field){u=i.toValue();t.pushScope(u);a=this._then.mapSelected(t,e,r);t.popScope(),a.isDefined()?a instanceof ee.Field?i=a:a!==u&&(i=i.updatedValue(a.toValue())):i=ee.absent()}else t.pushScope(i),i=this._then.mapSelected(t,e,r),t.popScope();t.pushScope(i),n=i}else n=ee.absent();return t.didTransform(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._then.substitute(t);return r instanceof xe||(r=this._then),new e(r)},e.prototype.andThen=function(t){return new e(this._then.andThen(t))},e.prototype.typeOrder=function(){return 16},e.prototype.compareTo=function(t){return t instanceof e?this._then.compareTo(t._then):c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._then.equals(t._then)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,this._then.hashCode()))},e.prototype.debugThen=function(t){t=t.write(46).write("values").write(40).write(41),this._then.debugThen(t)},e.prototype.clone=function(){return new e(this._then.clone())},e}(xe);ee.ValuesSelector=nr;var ir=function(t){function e(e){var r=t.call(this)||this;return r._then=e,r}return y(e,t),e.prototype.then=function(){return this._then},e.prototype.forSelected=function(t,e,r){var n;if(t.willSelect(this),0!==t.scopeDepth()){var i=t.popScope().toValue();if(i instanceof ee.Record)for(var o=i.iterator();void 0===n&&o.hasNext();){var s=o.next().value;t.pushScope(s),n=this._then.forSelected(t,e,r),t.popScope()}t.pushScope(i)}return t.didSelect(this,n),n},e.prototype.mapSelected=function(t,e,r){var n;if(t.willTransform(this),0!==t.scopeDepth()){var i=t.popScope().toValue();if(i instanceof ee.Record)for(var o=i.iterator();o.hasNext();){var s=o.next().value;t.pushScope(s);var u=this._then.mapSelected(t,e);t.popScope(),u.isDefined()?u!==s&&o.set(u):o.delete()}t.pushScope(i),n=i}else n=ee.absent();return t.didTransform(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._then.substitute(t);return r instanceof xe||(r=this._then),new e(r)},e.prototype.andThen=function(t){return new e(this._then.andThen(t))},e.prototype.typeOrder=function(){return 17},e.prototype.compareTo=function(t){return t instanceof e?this._then.compareTo(t._then):c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._then.equals(t._then)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,this._then.hashCode()))},e.prototype.debugThen=function(t){t=t.write(46).write("children").write(40).write(41),this._then.debugThen(t)},e.prototype.clone=function(){return new e(this._then.clone())},e}(xe);ee.ChildrenSelector=ir;var or=function(t){function e(e){var r=t.call(this)||this;return r._then=e,r}return y(e,t),e.prototype.then=function(){return this._then},e.prototype.forSelected=function(t,e,r){var n;if(t.willSelect(this),0!==t.scopeDepth()){var i=t.popScope().toValue();if(i instanceof ee.Record)for(var o=i.iterator();void 0===n&&o.hasNext();){var s=o.next().value;t.pushScope(s),void 0===(n=this._then.forSelected(t,e,r))&&this.forSelected(t,e,r),t.popScope()}t.pushScope(i)}return t.didSelect(this,n),n},e.prototype.mapSelected=function(t,e,r){var n;if(t.willTransform(this),0!==t.scopeDepth()){var i=t.popScope().toValue();if(i instanceof ee.Record)for(var o=i.iterator();o.hasNext();){var s=o.next().value;t.pushScope(s);var u=this._then.mapSelected(t,e,r);u.isDefined()&&(u=this.mapSelected(t,e,r)),t.popScope(),u.isDefined()?u!==s&&o.set(u):o.delete()}t.pushScope(i),n=i}else n=ee.absent();return t.didTransform(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._then.substitute(t);return r instanceof xe||(r=this._then),new e(r)},e.prototype.andThen=function(t){return new e(this._then.andThen(t))},e.prototype.typeOrder=function(){return 18},e.prototype.compareTo=function(t){return t instanceof e?this._then.compareTo(t._then):c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&this._then.equals(t._then)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(e._hashSeed,this._then.hashCode()))},e.prototype.debugThen=function(t){t=t.write(46).write("descendants").write(40).write(41),this._then.debugThen(t)},e.prototype.clone=function(){return new e(this._then.clone())},e}(xe);ee.DescendantsSelector=or;var sr=function(t){function e(e,r){var n=t.call(this)||this;return n._predicate=e,n._then=r,n}return y(e,t),e.prototype.predicate=function(){return this._predicate},e.prototype.then=function(){return this._then},e.prototype.forSelected=function(t,e,r){var n;return t.willSelect(this),0!==t.scopeDepth()&&this.filterSelected(t)&&(n=this._then.forSelected(t,e,r)),t.didSelect(this,n),n},e.prototype.mapSelected=function(t,e,r){var n;return t.willTransform(this),n=0!==t.scopeDepth()?this.filterSelected(t)?this._then.mapSelected(t,e,r):t.peekScope().toValue():ee.absent(),t.didTransform(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._predicate.substitute(t);r instanceof xe||(r=this._predicate);var n=this._then.substitute(t);return n instanceof xe||(n=this._then),new e(r,n)},e.prototype.filterSelected=function(t){return void 0!==this._predicate.forSelected(t,this.selected,this)},e.prototype.selected=function(t){return null},e.prototype.andThen=function(t){return new e(this._predicate,this._then.andThen(t))},e.prototype.filter=function(t){return 0===arguments.length?this:(t=ee.fromAny(t),this.andThen(t.filter()))},e.prototype.typeOrder=function(){return 19},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._predicate.compareTo(t._predicate);return 0===r&&(r=this._then.compareTo(t._then)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._predicate.equals(t._predicate)&&this._then.equals(t._then))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._predicate.hashCode()),this._then.hashCode()))},e.prototype.debugThen=function(t){t=t.write(46).write("filter").write(40).debug(this._predicate).write(41),this._then.debugThen(t)},e.prototype.clone=function(){return new e(this._predicate.clone(),this._then.clone())},e}(xe);ee.FilterSelector=sr;var ur=function(t){function e(e,r){var n=t.call(this)||this;return n._item=e.commit(),n._then=r,n}return y(e,t),e.prototype.item=function(){return this._item},e.prototype.then=function(){return this._then},e.prototype.forSelected=function(t,e,r){var n;if(t.willSelect(this),0!==t.scopeDepth()){var i=this._item.evaluate(t);i.isDefined()&&(t.pushScope(i),n=this._then.forSelected(t,e,r),t.popScope())}return t.didSelect(this,n),n},e.prototype.mapSelected=function(t,e,r){var n;if(t.willTransform(this),0!==t.scopeDepth()){var i=this._item.evaluate(t);i.isDefined()&&(t.pushScope(i),i=this._then.mapSelected(t,e,r),t.popScope()),n=i}else n=ee.absent();return t.didTransform(this,n),n},e.prototype.substitute=function(t){t=oe.fromAny(t);var r=this._item.substitute(t),n=this._then.substitute(t);return n instanceof xe||(n=this._then),new e(r,n)},e.prototype.andThen=function(t){return new e(this._item,this._then.andThen(t))},e.prototype.precedence=function(){return this._item.precedence()},e.prototype.typeOrder=function(){return 11},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._item.compareTo(t._item);return 0===r&&(r=this._then.compareTo(t._then)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._item.equals(t._item)&&this._then.equals(t._then))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._item.hashCode()),this._then.hashCode()))},e.prototype.debug=function(t){t=t.write("Selector").write(46).write("literal").write(40).debug(this._item).write(41),this._then.debugThen(t)},e.prototype.debugThen=function(t){},e.prototype.clone=function(){return new e(this._item.clone(),this._then.clone())},e}(xe);ee.LiteralSelector=ur;var ar=function(t){function e(e,r){var n=t.call(this)||this;return n._bindings=e,n._template=r,n}return y(e,t),e.prototype.bindings=function(){return this._bindings},e.prototype.template=function(){return this._template},e.prototype.precedence=function(){return 1},e.prototype.invoke=function(t,e,r){e=oe.fromAny(e);for(var n=this._bindings,i=Math.max(1,n.length),o=ee.Record.create(i),s=0,u=0;s<i;){var a=n instanceof ee.Record?n.getItem(s):0===s?n:ee.absent(),p=t instanceof ee.Record?t.getItem(u).toValue():0===u?t:ee.Value.absent();a instanceof ee.Text&&p.isDistinct()?(o.push(ee.Slot.of(a,p)),u+=1):a instanceof ee.Slot&&(p.isDistinct()?o.push(a.updatedValue(p)):o.push(a),u+=1),s+=1}e.pushScope(o);var h=this._template.evaluate(e);return e.popScope(),h},e.prototype.typeOrder=function(){return 50},e.prototype.compareTo=function(t){if(t instanceof e){var r=this._bindings.compareTo(t._bindings);return 0===r&&(r=this._template.compareTo(t._template)),r}return c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._bindings.equals(t._bindings)&&this._template.equals(t._template))},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,this._bindings.hashCode()),this._template.hashCode()))},e.prototype.debug=function(t){t.debug(this.bindings).write(46).write("lambda").write(40).debug(this.template).write(41)},e}(Se);ee.LambdaFunc=ar;var pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.typeOrder=function(){return 51},e.prototype.compareTo=function(t){return t instanceof e?c.compare(this.__proto__.constructor.name,t.__proto__.constructor.name):c.compare(this.typeOrder(),t.typeOrder())},e.prototype.equals=function(t){return this===t},e.prototype.hashCode=function(){return f.seed(this.__proto__.constructor)},e.prototype.debug=function(t){t=t.write(this.__proto__.constructor.name)},e}(Se);ee.BridgeFunc=pr;var hr=function(){function t(){}return t.max=function(){return void 0===t._max&&(t._max=new fr),t._max},t.min=function(){return void 0===t._min&&(t._min=new cr),t._min},t.abs=function(){return void 0===t._abs&&(t._abs=new lr),t._abs},t.ceil=function(){return void 0===t._ceil&&(t._ceil=new dr),t._ceil},t.floor=function(){return void 0===t._floor&&(t._floor=new yr),t._floor},t.round=function(){return void 0===t._round&&(t._round=new _r),t._round},t.sqrt=function(){return void 0===t._sqrt&&(t._sqrt=new vr),t._sqrt},t.pow=function(){return void 0===t._pow&&(t._pow=new mr),t._pow},t.rate=function(){return void 0===t._rate&&(t._rate=new wr),t._rate},t.random=function(){return void 0===t._random&&(t._random=new gr),t._random},t.scope=function(){return void 0===t._scope&&(t._scope=ee.Record.create(10).slot("max",t.max()).slot("min",t.min()).slot("abs",t.abs()).slot("ceil",t.ceil()).slot("floor",t.floor()).slot("round",t.round()).slot("pow",t.pow()).slot("sqrt",t.sqrt()).slot("rate",t.rate()).slot("random",t.random()).commit()),t._scope},t}();ee.MathModule=hr;var fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){var n,i;if(e=oe.fromAny(e),t.length>=2?(n=t.getItem(0).evaluate(e),i=t.getItem(1).evaluate(e)):n=t.evaluate(e),void 0!==i)return n.max(i);if(void 0!==r){var o=void 0!==(i=r.state())?n.max(i):n;return r.setState(o),o}return ee.absent()},e.prototype.expand=function(t,e,r){if(1===t.length)return t=t.evaluate(e).toValue(),this.invoke(t,e,r)},e}(pr),cr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){var n,i;if(e=oe.fromAny(e),t.length>=2?(n=t.getItem(0).evaluate(e),i=t.getItem(1).evaluate(e)):n=t.evaluate(e),void 0!==i)return n.min(i);if(void 0!==r){var o=void 0!==(i=r.state())?n.min(i):n;return r.setState(o),o}return ee.absent()},e.prototype.expand=function(t,e,r){if(1===t.length)return t=t.evaluate(e).toValue(),this.invoke(t,e,r)},e}(pr),lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){return(t=t.evaluate(e).toValue())instanceof ee.Num?t.abs():ee.absent()},e}(pr),dr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){return(t=t.evaluate(e).toValue())instanceof ee.Num?t.ceil():ee.absent()},e}(pr),yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){return(t=t.evaluate(e).toValue())instanceof ee.Num?t.floor():ee.absent()},e}(pr),_r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){return(t=t.evaluate(e).toValue())instanceof ee.Num?t.round():ee.absent()},e}(pr),vr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){return(t=t.evaluate(e).toValue())instanceof ee.Num?t.sqrt():ee.absent()},e}(pr),mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){e=oe.fromAny(e);var n=t.getItem(0).evaluate(e),i=t.getItem(1).evaluate(e);return n instanceof ee.Num&&i instanceof ee.Num?n.pow(i):ee.absent()},e}(pr),wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){var n,i;if(e=oe.fromAny(e),t.length>=2?(n=t.getItem(0).evaluate(e).numberValue(NaN),i=t.getItem(1).evaluate(e).numberValue(1e3)):(n=t.evaluate(e).numberValue(NaN),i=1e3),isFinite(n)&&void 0!==r){var o=r.state();if(void 0===o)o={v0:n,t0:Date.now(),dv:0,dt:0},r.setState(o);else{var s=Date.now(),u=s-o.t0;if(u>i&&s>o.t0||u>2*i){var a=n-o.v0;o.v0=n,o.t0=s,o.dv=a,o.dt=u}if(r.setState(o),0!==o.dt){var p=i*o.dv/o.dt;return ee.Num.from(p)}}}return ee.absent()},e.prototype.expand=function(t,e,r){return t=t.evaluate(e).toValue(),this.invoke(t,e,r)},e}(pr),gr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.invoke=function(t,e,r){var n=(t=t.evaluate(e).toValue()).length>=1?t.getItem(0).numberValue(0):0,i=t.length>=2?t.getItem(1).numberValue(n+1):n+1,o=n+Math.random()*(i-n);return ee.Num.from(o)},e}(pr),br=function(t){function e(e,r){var n=t.call(this)||this;return n._tag=e,n._form=r,n}return y(e,t),e.prototype.tag=function(t){return 0===arguments.length?this._tag:void 0!==t?new e(t,this._form):this._form},e.prototype.unit=function(t){return 0===arguments.length?this._form.unit():new e(this._tag,this._form.unit(t))},e.prototype.mold=function(t,e){return(e=this._form.mold(t,e)).header(this._tag).isDefined()||(e=e.prepended(se.of(this._tag))),e},e.prototype.cast=function(t,e){return t.header(this._tag).isDefined()?this._form.cast(t,e):t.keyEquals(this._tag)?this._form.cast(t.toValue(),e):void 0},e}(Ce);Ce.TagForm=br;var xr=function(t){function e(e,r){var n=t.call(this)||this;return n._unit=e,n._form=r,n}return y(e,t),e.prototype.tag=function(t){return 0===arguments.length?this._form.tag():new e(this._unit,this._form.tag(t))},e.prototype.unit=function(t){return 0===arguments.length?this._form.unit():void 0!==t?new e(t,this._form):this._form},e.prototype.mold=function(t,e){return this._form.mold.apply(this._form,arguments)},e.prototype.cast=function(t,e){return this._form.cast.apply(this._form,arguments)},e}(Ce);Ce.UnitForm=xr;var Sr=function(t){function e(e){var r=t.call(this)||this;return r._unit=e,r}return y(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t,e){return void 0===e?ve.from(t):e.concat(ve.from(t))},e.prototype.cast=function(t,e){var r=t.target();try{return r.stringValue()}catch(t){return}},e}(Ce);Ce.StringForm=Sr;var Or=function(t){function e(e){var r=t.call(this)||this;return r._unit=e,r}return y(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t,e){return void 0===e?me.from(t):e.concat(me.from(t))},e.prototype.cast=function(t,e){var r=t.target();try{return r.numberValue()}catch(t){return}},e}(Ce);Ce.NumberForm=Or;var Ar=function(t){function e(e){var r=t.call(this)||this;return r._unit=e,r}return y(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t,e){return void 0===e?we.from(t):e.concat(we.from(t))},e.prototype.cast=function(t,e){var r=t.target();try{return r.booleanValue()}catch(t){return}},e}(Ce);Ce.BooleanForm=Ar;var Er=function(t){function e(e){var r=t.call(this)||this;return r._unit=e,r}return y(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t,e){return t=ee.fromAny(t),void 0!==e&&(t=e.concat(t)),t},e.prototype.cast=function(t,e){return t.toAny()},e}(Ce);Ce.AnyForm=Er;var Cr=function(t){function e(e){var r=t.call(this)||this;return r._unit=e?e.commit():e,r}return y(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t,e){return t=ee.fromAny(t),void 0!==e&&(t=e.concat(t)),t},e.prototype.cast=function(t,e){return t},e}(Ce);Ce.ItemForm=Cr;var Ir=function(t){function e(e){var r=t.call(this)||this;return r._unit=e?e.commit():e,r}return y(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t,e){return t=pe.fromAny(t),void 0!==e&&(t=e.concat(t)),t},e.prototype.cast=function(t,e){return t.toValue()},e}(Ce);Ce.ValueForm=Ir;var Dr=function(t){function e(e,r){var n=t.call(this)||this;return n._cursor=e,n._form=r,n}return y(e,t),e.prototype.isEmpty=function(){return this._cursor.isEmpty()},e.prototype.head=function(){return this._cursor.head().coerce(this._form)},e.prototype.step=function(){this._cursor.step()},e.prototype.skip=function(t){this._cursor.skip(t)},e.prototype.hasNext=function(){return this._cursor.hasNext()},e.prototype.nextIndex=function(){return this._cursor.nextIndex()},e.prototype.next=function(){var t=this._cursor.next(),e=t.value,r=t.done;return{value:e&&e.coerce(this._form),done:r}},e.prototype.hasPrevious=function(){return this._cursor.hasPrevious()},e.prototype.previousIndex=function(){return this._cursor.previousIndex()},e.prototype.previous=function(){var t=this._cursor.next(),e=t.value,r=t.done;return{value:e&&e.coerce(this._form),done:r}},e.prototype.delete=function(){this._cursor.delete()},e}(l),kr=function(t){function e(e,r,n){var i=t.call(this)||this;return i._cursor=e,i._keyForm=r,i._valueForm=n,i}return y(e,t),e.prototype.isEmpty=function(){return this._cursor.isEmpty()},e.prototype.head=function(){var t=this._cursor.head();return[t[0].coerce(this._keyForm),t[1].coerce(this._valueForm)]},e.prototype.step=function(){this._cursor.step()},e.prototype.skip=function(t){this._cursor.skip(t)},e.prototype.hasNext=function(){return this._cursor.hasNext()},e.prototype.nextIndex=function(){return this._cursor.nextIndex()},e.prototype.next=function(){var t=this._cursor.next(),e=t.value,r=t.done;return{value:e&&[e[0].coerce(this._keyForm),e[1].coerce(this._valueForm)],done:r}},e.prototype.hasPrevious=function(){return this._cursor.hasPrevious()},e.prototype.previousIndex=function(){return this._cursor.previousIndex()},e.prototype.previous=function(){var t=this._cursor.next(),e=t.value,r=t.done;return{value:e&&[e[0].coerce(this._keyForm),e[1].coerce(this._valueForm)],done:r}},e.prototype.delete=function(){this._cursor.delete()},e}(l),Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.range=function(t,r){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===r?(t=t,e.between(t[0],t[1])):e.between(t,r)},e.between=function(t,r){return t instanceof se&&r instanceof se?new e.Attr(t,r):t instanceof re&&r instanceof re?new e.Slot(t,r):t instanceof fe&&r instanceof fe?new e.Record(t,r):t instanceof me&&r instanceof me?new e.Num(t.value,r.value):t instanceof Ie&&r instanceof Ie?new e.BinaryOperator(t,r):t instanceof De&&r instanceof De?new e.UnaryOperator(t,r):t instanceof Ye&&r instanceof Ye?new e.InvokeOperator(t,r):t instanceof pe&&r instanceof pe?new e.Value(t,r):t instanceof ee||r instanceof ee?Zt.between(t,r):e.between(ee.fromAny(t),ee.fromAny(r))},e.tryBetween=function(t,r){return t instanceof se&&r instanceof se?new e.Attr(t,r):t instanceof re&&r instanceof re?new e.Slot(t,r):t instanceof fe&&r instanceof fe?new e.Record(t,r):t instanceof me&&r instanceof me?new e.Num(t.value,r.value):t instanceof Ie&&r instanceof Ie?new e.BinaryOperator(t,r):t instanceof De&&r instanceof De?new e.UnaryOperator(t,r):t instanceof Ye&&r instanceof Ye?new e.InvokeOperator(t,r):t instanceof pe&&r instanceof pe?new e.Value(t,r):null},e}(Zt);Zt.registerFactory(Mr);var Pr=function(t){function e(e,r){var n=t.call(this)||this;return n.keyInterpolator=Mr.between(e.key,r.key),n.valueInterpolator=Mr.between(e.value,r.value),n}return y(e,t),e.prototype.interpolate=function(t){var e=this.keyInterpolator.interpolate(t),r=this.valueInterpolator.interpolate(t);return se.of(e,r)},e.prototype.deinterpolate=function(t){return 0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.keyInterpolator.equals(t.keyInterpolator)&&this.valueInterpolator.equals(t.valueInterpolator))},e}(Mr);Mr.Attr=Pr;var Tr=function(t){function e(e,r){var n=t.call(this)||this;return n.keyInterpolator=Mr.between(e.key,r.key),n.valueInterpolator=Mr.between(e.value,r.value),n}return y(e,t),e.prototype.interpolate=function(t){var e=this.keyInterpolator.interpolate(t),r=this.valueInterpolator.interpolate(t);return ue.of(e,r)},e.prototype.deinterpolate=function(t){return 0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.keyInterpolator.equals(t.keyInterpolator)&&this.valueInterpolator.equals(t.valueInterpolator))},e}(Mr);Mr.Slot=Tr;var Vr=function(t){function e(e,r){var n=t.call(this)||this;return n.v0=e.commit(),n.v1=r.commit(),n}return y(e,t),e.prototype.interpolate=function(t){return t<1?this.v0:this.v1},e.prototype.deinterpolate=function(t){return(t=ee.fromAny(t)).equals(this.v1)?1:0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.v0.equals(t.v0)&&this.v1.equals(t.v1))},e}(Mr);Mr.Value=Vr;var zr=function(t){function e(e,r){for(var n=t.call(this)||this,i=Math.min(e.length,r.length),o=new Array(i),s=0;s<i;s+=1)o[s]=Mr.between(e.getItem(s),r.getItem(s));return n.interpolators=o,n}return y(e,t),e.prototype.interpolate=function(t){for(var e=this.interpolators.length,r=fe.create(e),n=0;n<e;n+=1)r.push(this.interpolators[n].interpolate(t));return r},e.prototype.deinterpolate=function(t){return 0},e.prototype.equals=function(t){if(this===t)return!0;if(t instanceof e){var r=this.interpolators.length;if(r===t.interpolators.length){for(var n=0;n<r;n+=1)if(!this.interpolators[n].equals(t.interpolators[n]))return!1;return!0}}return!1},e}(Mr);Mr.Record=zr;var Br=function(t){function e(e,r){var n=t.call(this)||this;return n.y0=e,n.dy=r-n.y0,n}return y(e,t),e.prototype.interpolate=function(t){return me.from(this.y0+this.dy*t)},e.prototype.deinterpolate=function(t){return(t=ee.fromAny(t))instanceof me?0!==this.dy?(t.value-this.y0)/this.dy:this.dy:0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.y0===t.y0&&this.dy===t.dy)},e}(Mr);Mr.Num=Br;var Rr=function(t){function e(e,r){var n=t.call(this)||this;return n.ifTermInterpolator=Mr.between(e.ifTerm(),r.ifTerm()),n.thenTermInterpolator=Mr.between(e.thenTerm(),r.thenTerm()),n.elseTermInterpolator=Mr.between(e.elseTerm(),r.elseTerm()),n}return y(e,t),e.prototype.interpolate=function(t){var e=this.ifTermInterpolator.interpolate(t),r=this.thenTermInterpolator.interpolate(t),n=this.elseTermInterpolator.interpolate(t);return e.conditional(r,n)},e.prototype.deinterpolate=function(t){return 0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.ifTermInterpolator.equals(t.ifTermInterpolator)&&this.thenTermInterpolator.equals(t.thenTermInterpolator)&&this.elseTermInterpolator.equals(t.elseTermInterpolator))},e}(Mr);Mr.ConditionalOperator=Rr;var Fr=function(t){function e(e,r){var n=t.call(this)||this;if(n.operator=e.operator(),n.operator!==r.operator())throw new Error(r.operator());return n.operand1Interpolator=Mr.between(e.operand1(),r.operand1()),n.operand2Interpolator=Mr.between(e.operand2(),r.operand2()),n}return y(e,t),e.prototype.interpolate=function(t){var e=this.operand1Interpolator.interpolate(t),r=this.operand2Interpolator.interpolate(t);switch(this.operator){case"||":return e.or(r);case"&&":return e.and(r);case"|":return e.bitwiseOr(r);case"^":return e.bitwiseXor(r);case"&":return e.bitwiseAnd(r);case"<":return e.lt(r);case"<=":return e.le(r);case"==":return e.eq(r);case"!=":return e.ne(r);case">=":return e.ge(r);case">":return e.gt(r);case"+":return e.plus(r);case"-":return e.minus(r);case"*":return e.times(r);case"/":return e.divide(r);case"%":return e.modulo(r);default:throw new Error(this.operator)}},e.prototype.deinterpolate=function(t){return 0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.operand1Interpolator.equals(t.operand1Interpolator)&&this.operator===t.operator&&this.operand2Interpolator.equals(t.operand2Interpolator))},e}(Mr);Mr.BinaryOperator=Fr;var Lr=function(t){function e(e,r){var n=t.call(this)||this;if(n.operator=e.operator(),n.operator!==r.operator())throw new Error(r.operator());return n.operandInterpolator=Mr.between(e.operand(),r.operand()),n}return y(e,t),e.prototype.interpolate=function(t){var e=this.operandInterpolator.interpolate(t);switch(this.operator){case"!":return e.not();case"~":return e.bitwiseNot();case"-":return e.negative();default:throw new Error(this.operator)}},e.prototype.deinterpolate=function(t){return 0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.operator===t.operator&&this.operandInterpolator.equals(t.operandInterpolator))},e}(Mr);Mr.UnaryOperator=Lr;var qr=function(t){function e(e,r){var n=t.call(this)||this;return n.funcInterpolator=Mr.between(e.func(),r.func()),n.argsInterpolator=Mr.between(e.args(),r.args()),n}return y(e,t),e.prototype.interpolate=function(t){var e=this.funcInterpolator.interpolate(t),r=this.argsInterpolator.interpolate(t);return xe.literal(e).invoke(r)},e.prototype.deinterpolate=function(t){return 0},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.funcInterpolator.equals(t.funcInterpolator)&&this.argsInterpolator.equals(t.argsInterpolator))},e}(Mr);Mr.InvokeOperator=qr;var Nr,Ur={is:function(t){if("object"==typeof t&&null!==t){var e=t;return"function"==typeof e.input&&"function"==typeof e.bindInput&&"function"==typeof e.unbindInput}return!1}},Kr={is:function(t){if("object"==typeof t&&null!==t){var e=t;return"function"==typeof e.outputIterator&&"function"==typeof e.bindOutput&&"function"==typeof e.unbindOutput}return!1},MemoizeValueCombinator:void 0,MapValueCombinator:void 0,WatchValueCombinator:void 0};(Nr=t.KeyEffect||(t.KeyEffect={}))[Nr.Update=0]="Update",Nr[Nr.Remove=1]="Remove";var Wr={is:function(t){if("object"==typeof t&&null!==t){var e=t;return Ur.is(e)&&"function"==typeof e.decohereOutputKey&&"function"==typeof e.recohereOutputKey}return!1}},Hr={is:function(t){if("object"==typeof t&&null!==t){var e=t;return Kr.is(e)&&"function"==typeof e.keyIterator&&"function"==typeof e.outlet}return!1},MemoizeMapCombinator:void 0,FilterFieldsCombinator:void 0,MapFieldValuesCombinator:void 0,ReduceFieldsCombinator:void 0,WatchFieldsCombinator:void 0},jr=function(t){function e(r){var n=t.call(this,r)||this;return n.__proto__=e.prototype,n}return y(e,t),e}(Error),Gr={is:function(t){if("object"==typeof t&&null!==t){var e=t;return"function"==typeof e.streamletScope&&"function"==typeof e.streamletContext&&"function"==typeof e.outlet}return!1}},Qr=function(){function t(){this._input=null,this._version=-1}return t.prototype.input=function(){return this._input},t.prototype.bindInput=function(t){null!==this._input&&this._input.unbindOutput(this),this._input=t,null!==this._input&&this._input.bindOutput(this)},t.prototype.unbindInput=function(){null!==this._input&&this._input.unbindOutput(this),this._input=null},t.prototype.disconnectInputs=function(){var t=this._input;null!==t&&(t.unbindOutput(this),this._input=null,t.disconnectInputs())},t.prototype.disconnectOutputs=function(){},t.prototype.decohereOutput=function(){this._version>=0&&(this.willDecohereOutput(),this._version=-1,this.onDecohereOutput(),this.didDecohereOutput())},t.prototype.recohereOutput=function(t){this._version<0&&(this.willRecohereOutput(t),this._version=t,null!==this._input&&this._input.recohereInput(t),this.onRecohereOutput(t),this.didRecohereOutput(t))},t.prototype.willDecohereOutput=function(){},t.prototype.onDecohereOutput=function(){},t.prototype.didDecohereOutput=function(){},t.prototype.willRecohereOutput=function(t){},t.prototype.onRecohereOutput=function(t){},t.prototype.didRecohereOutput=function(t){},t}(),Zr=function(){function t(){this._outputs=null,this._version=-1}return t.prototype.outputIterator=function(){return null!==this._outputs?l.array(this._outputs):l.empty()},t.prototype.bindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=new Array(r+1),i=0;i<r;i+=1)n[i]=e[i];n[r]=t,this._outputs=n},t.prototype.unbindOutput=function(t){for(var e=this._outputs,r=0,n=null!==e?e.length:0;r<n;r+=1)if(e[r]===t){if(n>1){for(var i=new Array(n-1),o=0;o<r;o+=1)i[o]=e[o];for(o=r;o<n-1;o+=1)i[o]=e[o+1];this._outputs=i}else this._outputs=null;break}},t.prototype.unbindOutputs=function(){var t=this._outputs;if(null!==t){this._outputs=null;for(var e=0,r=t.length;e<r;e+=1){t[e].unbindInput()}}},t.prototype.disconnectOutputs=function(){var t=this._outputs;if(null!==t){this._outputs=null;for(var e=0,r=t.length;e<r;e+=1){var n=t[e];n.unbindInput(),n.disconnectOutputs()}}},t.prototype.disconnectInputs=function(){},t.prototype.decohereInput=function(){if(this._version>=0){this.willDecohereInput(),this._version=-1,this.onDecohereInput();for(var t=0,e=null!==this._outputs?this._outputs.length:0;t<e;t+=1)this._outputs[t].decohereOutput();this.didDecohereInput()}},t.prototype.recohereInput=function(t){if(this._version<0){this.willRecohereInput(t),this._version=t,this.onRecohereInput(t);for(var e=0,r=null!==this._outputs?this._outputs.length:0;e<r;e+=1)this._outputs[e].recohereOutput(t);this.didRecohereInput(t)}},t.prototype.willDecohereInput=function(){},t.prototype.onDecohereInput=function(){},t.prototype.didDecohereInput=function(){},t.prototype.willRecohereInput=function(t){},t.prototype.onRecohereInput=function(t){},t.prototype.didRecohereInput=function(t){},t.prototype.memoize=function(){var t=new Kr.MemoizeValueCombinator;return t.bindInput(this),t},t.prototype.map=function(t){var e=new Kr.MapValueCombinator(t);return e.bindInput(this),e},t.prototype.watch=function(t){return new Kr.WatchValueCombinator(t).bindInput(this),this},t}(),Xr=function(){function t(){this._input=null,this._outputs=null,this._version=-1}return t.prototype.input=function(){return this._input},t.prototype.bindInput=function(t){null!==this._input&&this._input.unbindOutput(this),this._input=t,null!==this._input&&this._input.bindOutput(this)},t.prototype.unbindInput=function(){null!==this._input&&this._input.unbindOutput(this),this._input=null},t.prototype.disconnectInputs=function(){if(null===this._outputs){var t=this._input;null!==t&&(t.unbindOutput(this),this._input=null,t.disconnectInputs())}},t.prototype.outputIterator=function(){return null!==this._outputs?l.array(this._outputs):l.empty()},t.prototype.bindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=new Array(r+1),i=0;i<r;i+=1)n[i]=e[i];n[r]=t,this._outputs=n},t.prototype.unbindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=0;n<r;n+=1)if(e[n]===t){if(r>1){for(var i=new Array(r-1),o=0;o<n;o+=1)i[o]=e[o];for(o=n;o<r-1;o+=1)i[o]=e[o+1];this._outputs=i}else this._outputs=null;break}},t.prototype.unbindOutputs=function(){var t=this._outputs;if(null!==t){this._outputs=null;for(var e=0,r=t.length;e<r;e+=1){t[e].unbindInput()}}},t.prototype.disconnectOutputs=function(){if(null===this._input){var t=this._outputs;if(null!==t){this._outputs=null;for(var e=0,r=t.length;e<r;e+=1){var n=t[e];n.unbindInput(),n.disconnectOutputs()}}}},t.prototype.decohereOutput=function(){this.decohere()},t.prototype.decohereInput=function(){this.decohere()},t.prototype.decohere=function(){if(this._version>=0){this.willDecohere(),this._version=-1,this.onDecohere();for(var t=null!==this._outputs?this._outputs.length:0,e=0;e<t;e+=1)this._outputs[e].decohereOutput();this.didDecohere()}},t.prototype.recohereOutput=function(t){this.recohere(t)},t.prototype.recohereInput=function(t){this.recohere(t)},t.prototype.recohere=function(t){if(this._version<0){this.willRecohere(t),this._version=t,null!==this._input&&this._input.recohereInput(t),this.onRecohere(t);for(var e=null!==this._outputs?this._outputs.length:0,r=0;r<e;r+=1)this._outputs[r].recohereOutput(t);this.didRecohere(t)}},t.prototype.willDecohere=function(){},t.prototype.onDecohere=function(){},t.prototype.didDecohere=function(){},t.prototype.willRecohere=function(t){},t.prototype.onRecohere=function(t){},t.prototype.didRecohere=function(t){},t.prototype.memoize=function(){var t=new Kr.MemoizeValueCombinator;return t.bindInput(this),t},t.prototype.map=function(t){var e=new Kr.MapValueCombinator(t);return e.bindInput(this),e},t.prototype.watch=function(t){return new Kr.WatchValueCombinator(t).bindInput(this),this},t}(),Yr=function(t){function e(e,r){var n=t.call(this)||this;return n._input=e,n._key=r,n}return y(e,t),e.prototype.input=function(){return this._input},e.prototype.key=function(){return this._key},e.prototype.get=function(){return this._input.get(this._key)},e}(Zr),$r=function(){function t(){this._input=null,this._effects=new Ft,this._version=-1}return t.prototype.input=function(){return this._input},t.prototype.bindInput=function(t){if(!Hr.is(t))throw new TypeError(""+t);null!==this._input&&this._input.unbindOutput(this),this._input=t,null!==this._input&&this._input.bindOutput(this)},t.prototype.unbindInput=function(){null!==this._input&&this._input.unbindOutput(this),this._input=null},t.prototype.disconnectInputs=function(){var t=this._input;null!==t&&(t.unbindOutput(this),this._input=null,t.disconnectInputs())},t.prototype.disconnectOutputs=function(){},t.prototype.decohereOutputKey=function(t,e){var r=this._effects;r.get(t)!==e&&(this.willDecohereOutputKey(t,e),this._effects=r.updated(t,e),this._version=-1,this.onDecohereOutputKey(t,e),this.didDecohereOutputKey(t,e))},t.prototype.decohereOutput=function(){this._version>=0&&(this.willDecohereOutput(),this._version=-1,this.onDecohereOutput(),this.didDecohereOutput())},t.prototype.recohereOutputKey=function(t,e){if(this._version<0){var r=this._effects,n=r.get(t);void 0!==n&&(this.willRecohereOutputKey(t,n,e),this._effects=r.removed(t),null!==this._input&&this._input.recohereInputKey(t,e),this.onRecohereOutputKey(t,n,e),this.didRecohereOutputKey(t,n,e))}},t.prototype.recohereOutput=function(t){this._version<0&&(this.willRecohereOutput(t),this._effects.forEach((function(e){this.recohereOutputKey(e,t)}),this),this._version=t,this.onRecohereOutput(t),this.didRecohereOutput(t))},t.prototype.willDecohereOutputKey=function(t,e){},t.prototype.onDecohereOutputKey=function(t,e){},t.prototype.didDecohereOutputKey=function(t,e){},t.prototype.willDecohereOutput=function(){},t.prototype.onDecohereOutput=function(){},t.prototype.didDecohereOutput=function(){},t.prototype.willRecohereOutputKey=function(t,e,r){},t.prototype.onRecohereOutputKey=function(t,e,r){},t.prototype.didRecohereOutputKey=function(t,e,r){},t.prototype.willRecohereOutput=function(t){},t.prototype.onRecohereOutput=function(t){},t.prototype.didRecohereOutput=function(t){},t}(),Jr=function(){function t(){this._effects=new Ft,this._outlets=new Ft,this._outputs=null,this._version=-1}return t.prototype.outlet=function(t){var e=this._outlets.get(t);return void 0===e&&(e=new Yr(this,t),this._outlets=this._outlets.updated(t,e)),e},t.prototype.outputIterator=function(){return null!==this._outputs?l.array(this._outputs):l.empty()},t.prototype.bindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=new Array(r+1),i=0;i<r;i+=1)n[i]=e[i];n[r]=t,this._outputs=n},t.prototype.unbindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=0;n<r;n+=1)if(e[n]===t){if(r>1){for(var i=new Array(r-1),o=0;o<n;o+=1)i[o]=e[o];for(o=n;o<r-1;o+=1)i[o]=e[o+1];this._outputs=i}else this._outputs=null;break}},t.prototype.unbindOutputs=function(){var t=this._outlets;t.isEmpty()&&(this._outlets=new Ft,t.forEach((function(t,e){e.unbindOutputs()}),this));var e=this._outputs;if(null!==e){this._outputs=null;for(var r=0,n=e.length;r<n;r+=1){e[r].unbindInput()}}},t.prototype.disconnectOutputs=function(){var t=this._outlets;t.isEmpty()&&(this._outlets=new Ft,t.forEach((function(t,e){e.disconnectOutputs()}),this));var e=this._outputs;if(null!==e){this._outputs=null;for(var r=0,n=e.length;r<n;r+=1){var i=e[r];i.unbindInput(),i.disconnectOutputs()}}},t.prototype.disconnectInputs=function(){},t.prototype.decohereInputKey=function(t,e){var r=this._effects;if(r.get(t)!==e){this.willDecohereInputKey(t,e),this._effects=r.updated(t,e),this._version=-1,this.onDecohereInputKey(t,e);for(var n=null!==this._outputs?this._outputs.length:0,i=0;i<n;i+=1){var o=this._outputs[i];Wr.is(o)?o.decohereOutputKey(t,e):o.decohereOutput()}var s=this._outlets.get(t);void 0!==s&&s.decohereInput(),this.didDecohereInputKey(t,e)}},t.prototype.decohereInput=function(){if(this._version>=0){this.willDecohereInput(),this._version=-1,this.onDecohereInput();for(var t=null!==this._outputs?this._outputs.length:0,e=0;e<t;e+=1)this._outputs[e].decohereOutput();this._outlets.forEach((function(t,e){e.decohereInput()}),this),this.didDecohereInput()}},t.prototype.recohereInputKey=function(t,e){if(this._version<0){var r=this._effects,n=r.get(t);if(void 0!==n){this.willRecohereInputKey(t,n,e),this._effects=r.removed(t),this.onRecohereInputKey(t,n,e);for(var i=0,o=null!==this._outputs?this._outputs.length:0;i<o;i+=1){var s=this._outputs[i];Wr.is(s)&&s.recohereOutputKey(t,e)}var u=this._outlets.get(t);void 0!==u&&u.recohereInput(e),this.didRecohereInputKey(t,n,e)}}},t.prototype.recohereInput=function(t){if(this._version<0){this.willRecohereInput(t),this._effects.forEach((function(e){this.recohereInputKey(e,t)}),this),this._version=t,this.onRecohereInput(t);for(var e=0,r=null!==this._outputs?this._outputs.length:0;e<r;e+=1)this._outputs[e].recohereOutput(t);this.didRecohereInput(t)}},t.prototype.willDecohereInputKey=function(t,e){},t.prototype.onDecohereInputKey=function(t,e){},t.prototype.didDecohereInputKey=function(t,e){},t.prototype.willDecohereInput=function(){},t.prototype.onDecohereInput=function(){},t.prototype.didDecohereInput=function(){},t.prototype.willRecohereInputKey=function(t,e,r){},t.prototype.onRecohereInputKey=function(t,e,r){},t.prototype.didRecohereInputKey=function(t,e,r){},t.prototype.willRecohereInput=function(t){},t.prototype.onRecohereInput=function(t){},t.prototype.didRecohereInput=function(t){},t.prototype.memoize=function(){var t=new Hr.MemoizeMapCombinator;return t.bindInput(this),t},t.prototype.filter=function(t){var e=new Hr.FilterFieldsCombinator(t);return e.bindInput(this),e},t.prototype.map=function(t){var e;return 1===t.length?((e=new Kr.MapValueCombinator(t)).bindInput(this),e):((e=new Hr.MapFieldValuesCombinator(t)).bindInput(this),e)},t.prototype.reduce=function(t,e,r){var n=new Hr.ReduceFieldsCombinator(t,e,r);return n.bindInput(this),n},t.prototype.watch=function(t){return 1===t.length?(new Kr.WatchValueCombinator(t).bindInput(this),this):(new Hr.WatchFieldsCombinator(t).bindInput(this),this)},t}(),tn=function(){function t(){this._input=null,this._effects=new Ft,this._outlets=new Ft,this._outputs=null,this._version=-1}return t.prototype.input=function(){return this._input},t.prototype.bindInput=function(t){if(!Hr.is(t))throw new TypeError(""+t);null!==this._input&&this._input.unbindOutput(this),this._input=t,null!==this._input&&this._input.bindOutput(this)},t.prototype.unbindInput=function(){null!==this._input&&this._input.unbindOutput(this),this._input=null},t.prototype.disconnectInputs=function(){if(null===this._outputs&&this._outlets.isEmpty()){var t=this._input;null!==t&&(t.unbindOutput(this),this._input=null,t.disconnectInputs())}},t.prototype.outlet=function(t){var e=this._outlets.get(t);return void 0===e&&(e=new Yr(this,t),this._outlets=this._outlets.updated(t,e)),e},t.prototype.outputIterator=function(){return null!==this._outputs?l.array(this._outputs):l.empty()},t.prototype.bindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=new Array(r+1),i=0;i<r;i+=1)n[i]=e[i];n[r]=t,this._outputs=n},t.prototype.unbindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=0;n<r;n+=1)if(e[n]===t){if(r>1){for(var i=new Array(r-1),o=0;o<n;o+=1)i[o]=e[o];for(o=n;o<r-1;o+=1)i[o]=e[o+1];this._outputs=i}else this._outputs=null;break}},t.prototype.unbindOutputs=function(){var t=this._outlets;t.isEmpty()&&(this._outlets=new Ft,t.forEach((function(t,e){e.unbindOutputs()}),this));var e=this._outputs;if(null!==e){this._outputs=null;for(var r=0,n=e.length;r<n;r+=1){e[r].unbindInput()}}},t.prototype.disconnectOutputs=function(){if(null===this._input){var t=this._outlets;t.isEmpty()&&(this._outlets=new Ft,t.forEach((function(t,e){e.disconnectOutputs()}),this));var e=this._outputs;if(null!==e){this._outputs=null;for(var r=0,n=e.length;r<n;r+=1){var i=e[r];i.unbindInput(),i.disconnectOutputs()}}}},t.prototype.decohereOutputKey=function(t,e){this.decohereKey(t,e)},t.prototype.decohereInputKey=function(t,e){this.decohereKey(t,e)},t.prototype.decohereKey=function(t,e){var r=this._effects;if(r.get(t)!==e){this.willDecohereKey(t,e),this._effects=r.updated(t,e),this._version=-1,this.onDecohereKey(t,e);for(var n=null!==this._outputs?this._outputs.length:0,i=0;i<n;i+=1){var o=this._outputs[i];Wr.is(o)?o.decohereOutputKey(t,e):o.decohereOutput()}var s=this._outlets.get(t);void 0!==s&&s.decohereInput(),this.didDecohereKey(t,e)}},t.prototype.decohereOutput=function(){this.decohere()},t.prototype.decohereInput=function(){this.decohere()},t.prototype.decohere=function(){if(this._version>=0){this.willDecohere(),this._version=-1,this.onDecohere();for(var t=null!==this._outputs?this._outputs.length:0,e=0;e<t;e+=1)this._outputs[e].decohereOutput();this._outlets.forEach((function(t,e){e.decohereInput()}),this),this.didDecohere()}},t.prototype.recohereOutputKey=function(t,e){this.recohereKey(t,e)},t.prototype.recohereInputKey=function(t,e){this.recohereKey(t,e)},t.prototype.recohereKey=function(t,e){if(this._version<0){var r=this._effects,n=r.get(t);if(void 0!==n){this.willRecohereKey(t,n,e),this._effects=r.removed(t),null!==this._input&&this._input.recohereInputKey(t,e),this.onRecohereKey(t,n,e);for(var i=0,o=null!==this._outputs?this._outputs.length:0;i<o;i+=1){var s=this._outputs[i];Wr.is(s)&&s.recohereOutputKey(t,e)}var u=this._outlets.get(t);void 0!==u&&u.recohereInput(e),this.didRecohereKey(t,n,e)}}},t.prototype.recohereOutput=function(t){this.recohere(t)},t.prototype.recohereInput=function(t){this.recohere(t)},t.prototype.recohere=function(t){if(this._version<0){this.willRecohere(t),this._effects.forEach((function(e){this.recohereKey(e,t)}),this),this._version=t,this.onRecohere(t);for(var e=0,r=null!==this._outputs?this._outputs.length:0;e<r;e+=1)this._outputs[e].recohereOutput(t);this.didRecohere(t)}},t.prototype.willDecohereKey=function(t,e){},t.prototype.onDecohereKey=function(t,e){},t.prototype.didDecohereKey=function(t,e){},t.prototype.willDecohere=function(){},t.prototype.onDecohere=function(){},t.prototype.didDecohere=function(){},t.prototype.willRecohereKey=function(t,e,r){},t.prototype.onRecohereKey=function(t,e,r){},t.prototype.didRecohereKey=function(t,e,r){},t.prototype.willRecohere=function(t){},t.prototype.onRecohere=function(t){},t.prototype.didRecohere=function(t){},t.prototype.memoize=function(){var t=new Hr.MemoizeMapCombinator;return t.bindInput(this),t},t.prototype.filter=function(t){var e=new Hr.FilterFieldsCombinator(t);return e.bindInput(this),e},t.prototype.map=function(t){var e;return 1===t.length?((e=new Kr.MapValueCombinator(t)).bindInput(this),e):((e=new Hr.MapFieldValuesCombinator(t)).bindInput(this),e)},t.prototype.reduce=function(t,e,r){var n=new Hr.ReduceFieldsCombinator(t,e,r);return n.bindInput(this),n},t.prototype.watch=function(t){return 1===t.length?(new Kr.WatchValueCombinator(t).bindInput(this),this):(new Hr.WatchFieldsCombinator(t).bindInput(this),this)},t}(),en=function(){function t(){this._input=null,this._effects=new Ft,this._outputs=null,this._version=-1}return t.prototype.input=function(){return this._input},t.prototype.bindInput=function(t){if(!Hr.is(t))throw new TypeError(""+t);null!==this._input&&this._input.unbindOutput(this),this._input=t,null!==this._input&&this._input.bindOutput(this)},t.prototype.unbindInput=function(){null!==this._input&&this._input.unbindOutput(this),this._input=null},t.prototype.disconnectInputs=function(){if(null===this._outputs){var t=this._input;null!==t&&(t.unbindOutput(this),this._input=null,t.disconnectInputs())}},t.prototype.outputIterator=function(){return null!==this._outputs?l.array(this._outputs):l.empty()},t.prototype.bindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=new Array(r+1),i=0;i<r;i+=1)n[i]=e[i];n[r]=t,this._outputs=n},t.prototype.unbindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=0;n<r;n+=1)if(e[n]===t){if(r>1){for(var i=new Array(r-1),o=0;o<n;o+=1)i[o]=e[o];for(o=n;o<r-1;o+=1)i[o]=e[o+1];this._outputs=i}else this._outputs=null;break}},t.prototype.unbindOutputs=function(){var t=this._outputs;if(null!==t){this._outputs=null;for(var e=0,r=t.length;e<r;e+=1){t[e].unbindInput()}}},t.prototype.disconnectOutputs=function(){if(null===this._input){var t=this._outputs;if(null!==t){this._outputs=null;for(var e=0,r=t.length;e<r;e+=1){var n=t[e];n.unbindInput(),n.disconnectOutputs()}}}},t.prototype.decohereOutputKey=function(t,e){var r=this._effects;if(r.get(t)!==e){this.willDecohereOutputKey(t,e),this._effects=r.updated(t,e),this._version=-1,this.onDecohereOutputKey(t,e);for(var n=null!==this._outputs?this._outputs.length:0,i=0;i<n;i+=1){this._outputs[i].decohereOutput()}this.didDecohereOutputKey(t,e)}},t.prototype.decohereOutput=function(){this.decohere()},t.prototype.decohereInput=function(){this.decohere()},t.prototype.decohere=function(){if(this._version>=0){this.willDecohere(),this._version=-1,this.onDecohere();for(var t=null!==this._outputs?this._outputs.length:0,e=0;e<t;e+=1)this._outputs[e].decohereOutput();this.didDecohere()}},t.prototype.recohereOutputKey=function(t,e){if(this._version<0){var r=this._effects,n=r.get(t);void 0!==n&&(this.willRecohereOutputKey(t,n,e),this._effects=r.removed(t),null!==this._input&&this._input.recohereInputKey(t,e),this.onRecohereOutputKey(t,n,e),this.didRecohereOutputKey(t,n,e))}},t.prototype.recohereOutput=function(t){this.recohere(t)},t.prototype.recohereInput=function(t){this.recohere(t)},t.prototype.recohere=function(t){if(this._version<0){this.willRecohere(t),this._effects.forEach((function(e){this.recohereOutputKey(e,t)}),this),this._version=t,this.onRecohere(t);for(var e=0,r=null!==this._outputs?this._outputs.length:0;e<r;e+=1)this._outputs[e].recohereOutput(t);this.didRecohere(t)}},t.prototype.willDecohereOutputKey=function(t,e){},t.prototype.onDecohereOutputKey=function(t,e){},t.prototype.didDecohereOutputKey=function(t,e){},t.prototype.willDecohere=function(){},t.prototype.onDecohere=function(){},t.prototype.didDecohere=function(){},t.prototype.willRecohereOutputKey=function(t,e,r){},t.prototype.onRecohereOutputKey=function(t,e,r){},t.prototype.didRecohereOutputKey=function(t,e,r){},t.prototype.willRecohere=function(t){},t.prototype.onRecohere=function(t){},t.prototype.didRecohere=function(t){},t.prototype.memoize=function(){var t=new Kr.MemoizeValueCombinator;return t.bindInput(this),t},t.prototype.map=function(t){var e=new Kr.MapValueCombinator(t);return e.bindInput(this),e},t.prototype.watch=function(t){return new Kr.WatchValueCombinator(t).bindInput(this),this},t}(),rn=function(){function t(){this._input=null,this._outputEffects=new Ft,this._inputEffects=new Ft,this._outlets=new Ft,this._outputs=null,this._version=-1}return t.prototype.input=function(){return this._input},t.prototype.bindInput=function(t){if(!Hr.is(t))throw new TypeError(""+t);null!==this._input&&this._input.unbindOutput(this),this._input=t,null!==this._input&&this._input.bindOutput(this)},t.prototype.unbindInput=function(){null!==this._input&&this._input.unbindOutput(this),this._input=null},t.prototype.disconnectInputs=function(){if(null===this._outputs&&this._outlets.isEmpty()){var t=this._input;null!==t&&(t.unbindOutput(this),this._input=null,t.disconnectInputs())}},t.prototype.outlet=function(t){var e=this._outlets.get(t);return void 0===e&&(e=new Yr(this,t),this._outlets=this._outlets.updated(t,e)),e},t.prototype.outputIterator=function(){return null!==this._outputs?l.array(this._outputs):l.empty()},t.prototype.bindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=new Array(r+1),i=0;i<r;i+=1)n[i]=e[i];n[r]=t,this._outputs=n},t.prototype.unbindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=0;n<r;n+=1)if(e[n]===t){if(r>1){for(var i=new Array(r-1),o=0;o<n;o+=1)i[o]=e[o];for(o=n;o<r-1;o+=1)i[o]=e[o+1];this._outputs=i}else this._outputs=null;break}},t.prototype.unbindOutputs=function(){var t=this._outlets;t.isEmpty()&&(this._outlets=new Ft,t.forEach((function(t,e){e.unbindOutputs()}),this));var e=this._outputs;if(null!==e){this._outputs=null;for(var r=0,n=e.length;r<n;r+=1){e[r].unbindInput()}}},t.prototype.disconnectOutputs=function(){if(null===this._input){var t=this._outlets;t.isEmpty()&&(this._outlets=new Ft,t.forEach((function(t,e){e.disconnectOutputs()}),this));var e=this._outputs;if(null!==e){this._outputs=null;for(var r=0,n=e.length;r<n;r+=1){var i=e[r];i.unbindInput(),i.disconnectOutputs()}}}},t.prototype.decohereOutputKey=function(t,e){var r=this._outputEffects;r.get(t)!==e&&(this.willDecohereOutputKey(t,e),this._outputEffects=r.updated(t,e),this._version=-1,this.onDecohereOutputKey(t,e),this.didDecohereOutputKey(t,e))},t.prototype.decohereInputKey=function(t,e){var r=this._inputEffects;if(r.get(t)!==e){this.willDecohereInputKey(t,e),this._inputEffects=r.updated(t,e),this._version=-1,this.onDecohereInputKey(t,e);for(var n=null!==this._outputs?this._outputs.length:0,i=0;i<n;i+=1){var o=this._outputs[i];Wr.is(o)?o.decohereOutputKey(t,e):o.decohereOutput()}var s=this._outlets.get(t);void 0!==s&&s.decohereInput(),this.didDecohereInputKey(t,e)}},t.prototype.decohereOutput=function(){this.decohere()},t.prototype.decohereInput=function(){this.decohere()},t.prototype.decohere=function(){if(this._version>=0){this.willDecohere(),this._version=-1,this.onDecohere();for(var t=null!==this._outputs?this._outputs.length:0,e=0;e<t;e+=1)this._outputs[e].decohereOutput();this._outlets.forEach((function(t,e){e.decohereInput()}),this),this.didDecohere()}},t.prototype.recohereOutputKey=function(t,e){if(this._version<0){var r=this._outputEffects,n=r.get(t);void 0!==n&&(this.willRecohereOutputKey(t,n,e),this._outputEffects=r.removed(t),null!==this._input&&this._input.recohereInputKey(t,e),this.onRecohereOutputKey(t,n,e),this.didRecohereOutputKey(t,n,e))}},t.prototype.recohereInputKey=function(t,e){if(this._version<0){var r=this._inputEffects,n=r.get(t);if(void 0!==n){var i=this.willRecohereInputKey(t,n,e);n!==i&&this.decohereInputKey(t,i),this._inputEffects=r.removed(t),this.onRecohereInputKey(t,i,e);for(var o=0,s=null!==this._outputs?this._outputs.length:0;o<s;o+=1){var u=this._outputs[o];Wr.is(u)&&u.recohereOutputKey(t,e)}var a=this._outlets.get(t);void 0!==a&&a.recohereInput(e),this.didRecohereInputKey(t,i,e)}}},t.prototype.recohereOutput=function(t){this.recohere(t)},t.prototype.recohereInput=function(t){this.recohere(t)},t.prototype.recohere=function(t){if(this._version<0){this.willRecohere(t),this._outputEffects.forEach((function(e){this.recohereOutputKey(e,t)}),this),this._inputEffects.forEach((function(e){this.recohereInputKey(e,t)}),this),this._version=t,this.onRecohere(t);for(var e=0,r=null!==this._outputs?this._outputs.length:0;e<r;e+=1)this._outputs[e].recohereOutput(t);this.didRecohere(t)}},t.prototype.willDecohereOutputKey=function(t,e){},t.prototype.onDecohereOutputKey=function(t,e){},t.prototype.didDecohereOutputKey=function(t,e){},t.prototype.willDecohereInputKey=function(t,e){},t.prototype.onDecohereInputKey=function(t,e){},t.prototype.didDecohereInputKey=function(t,e){},t.prototype.willDecohere=function(){},t.prototype.onDecohere=function(){},t.prototype.didDecohere=function(){},t.prototype.willRecohereOutputKey=function(t,e,r){},t.prototype.onRecohereOutputKey=function(t,e,r){},t.prototype.didRecohereOutputKey=function(t,e,r){},t.prototype.willRecohereInputKey=function(t,e,r){return e},t.prototype.onRecohereInputKey=function(t,e,r){},t.prototype.didRecohereInputKey=function(t,e,r){},t.prototype.willRecohere=function(t){},t.prototype.onRecohere=function(t){},t.prototype.didRecohere=function(t){},t.prototype.memoize=function(){var t=new Hr.MemoizeMapCombinator;return t.bindInput(this),t},t.prototype.filter=function(t){var e=new Hr.FilterFieldsCombinator(t);return e.bindInput(this),e},t.prototype.map=function(t){var e;return 1===t.length?((e=new Kr.MapValueCombinator(t)).bindInput(this),e):((e=new Hr.MapFieldValuesCombinator(t)).bindInput(this),e)},t.prototype.reduce=function(t,e,r){var n=new Hr.ReduceFieldsCombinator(t,e,r);return n.bindInput(this),n},t.prototype.watch=function(t){return 1===t.length?(new Kr.WatchValueCombinator(t).bindInput(this),this):(new Hr.WatchFieldsCombinator(t).bindInput(this),this)},t}(),nn=function(t){function e(e){var r=t.call(this)||this;return r._outlet=e,r}return y(e,t),e.prototype.outlet=function(){return this._outlet},e.prototype.onDecohereOutput=function(){this._outlet.decohereInput()},e.prototype.onRecohereOutput=function(t){this._outlet.recohereInput(t)},e}(Qr),on=function(t){function e(e){var r=t.call(this)||this;return r._outlet=e,r}return y(e,t),e.prototype.outlet=function(){return this._outlet},e.prototype.onDecohereOutputKey=function(t,e){this._outlet.decohereInput()},e.prototype.onDecohereOutput=function(){this._outlet.decohereInput()},e.prototype.onRecohereOutputKey=function(t,e,r){this._outlet.recohereInput(r)},e.prototype.onRecohereOutput=function(t){this._outlet.recohereInput(t)},e}($r),sn=function(t){function e(e){var r=t.call(this)||this;return r._state=e,r}return y(e,t),e.prototype.get=function(){return this._state},e.prototype.set=function(t){var e=this._state;return this._state=t,this.decohereInput(),e},e}(Zr),un=function(t){function e(e){var r=t.call(this)||this;return r._state=e,r}return y(e,t),e.prototype.get=function(){return this._state},e.prototype.onRecohereOutput=function(t){null!==this._input&&(this._state=this._input.get())},e}(Qr),an=function(t){function e(e){void 0===e&&(e=new Ft);var r=t.call(this)||this;return r._state=e,e.forEach((function(t){this._effects=this._effects.updated(t,0)}),r),r}return y(e,t),e.prototype.has=function(t){return this._state.has(t)},e.prototype.get=function(t){return void 0===t?this._state:this._state.get(t)},e.prototype.set=function(t,e){var r=this._state.get(t);return this._state=this._state.updated(t,e),this.decohereInputKey(t,0),r},e.prototype.delete=function(t){var e=this._state,r=e.removed(t);return e!==r&&(this._state=r,this.decohereInputKey(t,1)),this},e.prototype.keyIterator=function(){return this._state.keys()},e}(Jr),pn=function(t){function e(){var e=t.call(this)||this;return e._state=new Ft,e}return y(e,t),e.prototype.get=function(){return this._state},e.prototype.onRecohereOutputKey=function(t,e,r){if(0===e){if(null!==this._input){var n=this._input.get(t);this._state=void 0!==n?this._state.updated(t,n):this._state.removed(t)}}else 1===e&&(this._state=this._state.removed(t))},e}($r),hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.get=function(){return this._state},e.prototype.onRecohere=function(t){null!==this._input&&(this._state=this._input.get())},e.prototype.memoize=function(){return this},e}(Xr);Kr.MemoizeValueCombinator=hn;var fn=function(t){function e(){var e=t.call(this)||this;return e._cache=new Ft,e}return y(e,t),e.prototype.has=function(t){return this._cache.has(t)},e.prototype.get=function(t){return void 0===t?(void 0===this._state&&null!==this._input&&(this._state=this._input.get()),this._state):this._cache.get(t)},e.prototype.keyIterator=function(){return this._cache.keys()},e.prototype.onRecohereKey=function(t,e,r){if(0===e){if(null!==this._input){var n=this._input.get(t);this._cache=void 0!==n?this._cache.updated(t,n):this._cache.removed(t)}}else 1===e&&(this._cache=this._cache.removed(t))},e.prototype.onRecohere=function(t){this._state=void 0},e.prototype.memoize=function(){return this},e}(tn);Hr.MemoizeMapCombinator=fn;var cn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.has=function(t){if(null!==this._input){var e=this._input.get(t);return void 0!==e&&this.evaluate(t,e)}return!1},e.prototype.get=function(t){if(void 0===t){for(var e=new Ft,r=this.keyIterator();;){var n=r.next();if(n.done)break;var i=n.value;void 0!==(o=this._input.get(i))&&this.evaluate(i,o)&&e.set(i,o)}return e}var o;if(null!==this._input&&void 0!==(o=this._input.get(t))&&this.evaluate(t,o))return o},e.prototype.keyIterator=function(){return null!==this._input?this._input.keyIterator():l.empty()},e.prototype.onDecohereOutputKey=function(t,e){this.decohereInputKey(t,e)},e.prototype.onRecohereOutputKey=function(t,e,r){this.recohereInputKey(t,r)},e.prototype.willRecohereInputKey=function(t,e,r){if(0===e&&null!==this._input){var n=this._input.get(t);if(void 0===n||!this.evaluate(t,n))return 1}return e},e}(rn),ln=function(t){function e(e){var r=t.call(this)||this;return r._func=e,r}return y(e,t),e.prototype.evaluate=function(t,e){return this._func(t,e)},e}(cn);Hr.FilterFieldsCombinator=ln;var dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.get=function(){return null!==this._input?this.evaluate(this._input.get()):void 0},e}(Xr),yn=function(t){function e(e){var r=t.call(this)||this;return r._func=e,r}return y(e,t),e.prototype.evaluate=function(t){return void 0!==t?this._func(t):void 0},e}(dn);Kr.MapValueCombinator=yn;var _n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.has=function(t){return null!==this._input&&this._input.has(t)},e.prototype.get=function(t){if(void 0===t){for(var e=new Ft,r=this.keyIterator();;){var n=r.next();if(n.done)break;var i=n.value,o=this.evaluate(i,this._input.get(i));void 0!==o&&e.set(i,o)}return e}return null!==this._input?this.evaluate(t,this._input.get(t)):void 0},e.prototype.keyIterator=function(){return null!==this._input?this._input.keyIterator():l.empty()},e}(tn),vn=function(t){function e(e){var r=t.call(this)||this;return r._func=e,r}return y(e,t),e.prototype.evaluate=function(t,e){return void 0!==e?this._func(t,e):void 0},e}(_n);Hr.MapFieldValuesCombinator=vn;var mn=function(t){function e(){var e=t.call(this)||this;return e._state=new Ft,e}return y(e,t),e.prototype.get=function(){return this._state.reduced(this.identity(),this.accumulate.bind(this),this.combine.bind(this))},e.prototype.onRecohereOutputKey=function(t,e,r){if(0===e){if(null!==this._input){var n=this._input.get(t);void 0!==n?this._state.set(t,n):this._state.delete(t)}}else 1===e&&this._state.delete(t)},e}(en),wn=function(t){function e(e,r,n){var i=t.call(this)||this;return i._identity=e,i._accumulator=r,i._combiner=n,i}return y(e,t),e.prototype.get=function(){return this._state.reduced(this._identity,this._accumulator,this._combiner)},e.prototype.identity=function(){return this._identity},e.prototype.accumulate=function(t,e){return this._accumulator(t,e)},e.prototype.combine=function(t,e){return this._combiner(t,e)},e}(mn);Hr.ReduceFieldsCombinator=wn;var gn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.onRecohereOutput=function(t){null!==this._input&&this.evaluate(this._input.get())},e}(Qr),bn=function(t){function e(e){var r=t.call(this)||this;return r._func=e,r}return y(e,t),e.prototype.evaluate=function(t){if(void 0!==t)return this._func(t)},e}(gn);Kr.WatchValueCombinator=bn;var xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.onRecohereOutputKey=function(t,e,r){0===e?null!==this._input?this.evaluate(t,this._input.get(t)):this.evaluate(t,void 0):1===e&&this.evaluate(t,void 0)},e}($r),Sn=function(t){function e(e){var r=t.call(this)||this;return r._func=e,r}return y(e,t),e.prototype.evaluate=function(t,e){if(void 0!==e)return this._func(t,e)},e}(xn);Hr.WatchFieldsCombinator=Sn;var On=function(t){function e(e){var r=t.call(this)||this;return r._streamlet=e,r}return y(e,t),e.prototype.streamlet=function(){return this._streamlet},e.prototype.willDecohereOutput=function(){var t=this._streamlet;void 0!==t.willDecohereInlet&&t.willDecohereInlet(this)},e.prototype.didDecohereOutput=function(){var t=this._streamlet;void 0!==t.didDecohereInlet?t.didDecohereInlet(this):t.decohere()},e.prototype.willRecohereOutput=function(t){var e=this._streamlet;void 0!==e.willRecohereInlet&&e.willRecohereInlet(this,t)},e.prototype.didRecohereOutput=function(t){var e=this._streamlet;void 0!==e.didRecohereInlet?e.didRecohereInlet(this,t):e.recohere(t)},e}(Qr),An=function(t){function e(e){var r=t.call(this)||this;return r._streamlet=e,r}return y(e,t),e.prototype.streamlet=function(){return this._streamlet},e.prototype.get=function(){var t=this._streamlet;if(void 0!==t.getOutput)return t.getOutput(this)},e.prototype.willDecohereInput=function(){var t=this._streamlet;void 0!==t.willDecohereOutlet&&t.willDecohereOutlet(this)},e.prototype.didDecohereInput=function(){var t=this._streamlet;void 0!==t.didDecohereOutlet?t.didDecohereOutlet(this):t.decohere()},e.prototype.willRecohereInput=function(t){var e=this._streamlet;void 0!==e.willRecohereOutlet&&e.willRecohereOutlet(this,t)},e.prototype.didRecohereInput=function(t){var e=this._streamlet;void 0!==e.didRecohereOutlet&&e.didRecohereOutlet(this,t)},e}(Zr),En=function(t){function e(e){var r=t.call(this)||this;return r._streamlet=e,r}return y(e,t),e.prototype.streamlet=function(){return this._streamlet},e.prototype.get=function(){var t=this._streamlet;if(void 0!==t.getOutput){var e=t.getOutput(this);if(void 0!==e)return e}if(null!==this._input)return this._input.get()},e.prototype.willDecohere=function(){var t=this._streamlet;void 0!==t.willDecohereOutlet&&t.willDecohereOutlet(this)},e.prototype.didDecohere=function(){var t=this._streamlet;void 0!==t.didDecohereOutlet?t.didDecohereOutlet(this):t.decohere()},e.prototype.willRecohere=function(t){var e=this._streamlet;void 0!==e.willRecohereOutlet&&e.willRecohereOutlet(this,t)},e.prototype.didRecohere=function(t){var e=this._streamlet;void 0!==e.didRecohereOutlet&&e.didRecohereOutlet(this,t)},e}(Xr),Cn=function(t,e,r){this.key=t,this.name=e,this.type=r},In=function(t,e,r){this.key=t,this.name=e,this.type=r},Dn=function(t,e,r){this.key=t,this.name=e,this.type=r},kn=function(){function t(t){void 0===t&&(t=null),this.scope=t,this._version=-1}return t.prototype.streamletClass=function(){return this.__proto__},t.prototype.streamletScope=function(){return this.scope},t.prototype.setStreamletScope=function(t){this.scope=t},t.prototype.streamletContext=function(){if(null!==this.context)return this.context;var t=this.streamletScope();return null!==t?t.streamletContext():null},t.prototype.setStreamletContext=function(t){this.context=t},t.prototype.inlet=function(e){return void 0===e?new On(this):t.reflectInletKey(e,this,this.streamletClass())},t.prototype.bindInput=function(t,e){var r=this.inlet(t);if(null===r)throw new Error(""+t);r.bindInput(e)},t.prototype.unbindInput=function(t){var e=this.inlet(t);if(null===e)throw new Error(""+t);e.unbindInput()},t.prototype.outlet=function(e){return void 0===e?new An(this):"string"==typeof e?t.reflectOutletKey(e,this,this.streamletClass()):e},t.prototype.inoutlet=function(){return new En(this)},t.prototype.decohere=function(){this._version>=0&&(this.willDecohere(),this._version=-1,this.onDecohere(),this.onDecohereOutlets(),this.didDecohere())},t.prototype.recohere=function(t){this._version<0&&(this.willRecohere(t),this._version=t,this.onRecohereInlets(t),this.onRecohere(t),this.onRecohereOutlets(t),this.didRecohere(t))},t.prototype.getInput=function(t,e){var r;if("string"==typeof t&&(t=this.inlet(t)),null!==t){var n=t.input();null!==n&&(r=n.get())}return void 0===r&&(r=e),r},t.prototype.getOutput=function(t){},t.prototype.disconnectInputs=function(){t.disconnectInputs(this,this.streamletClass())},t.disconnectInputs=function(e,r){for(;null!==r;){if(r.hasOwnProperty("_inlets"))for(var n in r._inlets){var i=r._inlets[n];if(i instanceof Cn)t.reflectInletField(e,i).disconnectInputs();else if(i instanceof Dn){t.reflectInoutletField(e,i).disconnectInputs()}}r=r.__proto__}},t.prototype.disconnectOutputs=function(){t.disconnectOutputs(this,this.streamletClass())},t.disconnectOutputs=function(e,r){for(;null!==r;){if(r.hasOwnProperty("_outlets"))for(var n in r._outlets){var i=r._outlets[n];if(i instanceof In)t.reflectOutletField(e,i).disconnectOutputs();else if(i instanceof Dn){t.reflectInoutletField(e,i).disconnectOutputs()}}r=r.__proto__}},t.prototype.willDecohereInlet=function(t){},t.prototype.didDecohereInlet=function(t){this.decohere()},t.prototype.willRecohereInlet=function(t,e){},t.prototype.didRecohereInlet=function(t,e){this.recohere(e)},t.prototype.willDecohereOutlet=function(t){},t.prototype.didDecohereOutlet=function(t){},t.prototype.willRecohereOutlet=function(t,e){},t.prototype.didRecohereOutlet=function(t,e){},t.prototype.willDecohere=function(){},t.prototype.onDecohere=function(){},t.prototype.onDecohereOutlets=function(){t.decohereOutlets(this,this.streamletClass())},t.decohereOutlets=function(e,r){for(;null!==r;){if(r.hasOwnProperty("_outlets"))for(var n in r._outlets){var i=r._outlets[n];if(i instanceof In)t.reflectOutletField(e,i).decohereInput();else if(i instanceof Dn){t.reflectInoutletField(e,i).decohereInput()}}r=r.__proto__}},t.prototype.didDecohere=function(){},t.prototype.willRecohere=function(t){},t.prototype.onRecohereInlets=function(e){t.recohereInlets(e,this,this.streamletClass())},t.recohereInlets=function(e,r,n){for(;null!==n;){if(n.hasOwnProperty("_inlets"))for(var i in n._inlets){var o=n._inlets[i];if(o instanceof Cn)t.reflectInletField(r,o).recohereOutput(e);else if(o instanceof Dn){t.reflectInoutletField(r,o).recohereOutput(e)}}n=n.__proto__}},t.prototype.onRecohere=function(t){},t.prototype.onRecohereOutlets=function(e){t.recohereOutlets(e,this,this.streamletClass())},t.recohereOutlets=function(e,r,n){for(;null!==n;){if(n.hasOwnProperty("_outlets"))for(var i in n._outlets){var o=n._outlets[i];if(o instanceof In)t.reflectOutletField(r,o).recohereInput(e);else if(o instanceof Dn){t.reflectInoutletField(r,o).recohereInput(e)}}n=n.__proto__}},t.prototype.didRecohere=function(t){},t.reflectEachInlet=function(e,r,n,i){for(var o=0;null!==r;){if(r.hasOwnProperty("_inlets"))for(var s in r._inlets){var u=r._inlets[s],a=void 0;a=u instanceof Cn?t.reflectInletField(e,u):u instanceof Dn?t.reflectInoutletField(e,u):null;var p=n.call(i,a,u.name,o);if(void 0!==p)return p;o+=1}r=r.__proto__}},t.reflectEachOutlet=function(e,r,n,i){for(var o=0;null!==r;){if(r.hasOwnProperty("_outlets"))for(var s in r._outlets){var u=r._outlets[s],a=void 0;a=u instanceof In?t.reflectOutletField(e,u):u instanceof Dn?t.reflectInoutletField(e,u):null;var p=n.call(i,a,u.name,o);if(void 0!==p)return p;o+=1}r=r.__proto__}},t.reflectInletCount=function(t){for(var e=0;null!==t;){if(t.hasOwnProperty("_inlets"))for(var r in t._inlets)e+=1;t=t.__proto__}return e},t.reflectOutletCount=function(t){for(var e=0;null!==t;){if(t.hasOwnProperty("_outlets"))for(var r in t._outlets)e+=1;t=t.__proto__}return e},t.reflectInletIndex=function(e,r,n){for(;null!==n;){if(n.hasOwnProperty("_inlets"))for(var i in n._inlets){if(0===e){var o=n._inlets[i];return o instanceof Cn?[o.name,t.reflectInletField(r,o)]:o instanceof Dn?[o.name,t.reflectInoutletField(r,o)]:null}e-=1}n=n.__proto__}return null},t.reflectOutletIndex=function(e,r,n){for(;null!==n;){if(n.hasOwnProperty("_outlets"))for(var i in n._outlets){if(0===e){var o=n._outlets[i];return o instanceof In?[o.name,t.reflectOutletField(r,o)]:o instanceof Dn?[o.name,t.reflectInoutletField(r,o)]:null}e-=1}n=n.__proto__}return null},t.reflectInletKey=function(e,r,n){for(;null!==n;){if(n.hasOwnProperty("_inlets")){var i=n._inlets[e];if(void 0!==i)return i instanceof Cn?t.reflectInletField(r,i):i instanceof Dn?t.reflectInoutletField(r,i):null}n=n.__proto__}return null},t.reflectOutletKey=function(e,r,n){for(;null!==n;){if(n.hasOwnProperty("_outlets")){var i=n._outlets[e];if(void 0!==i)return i instanceof In?t.reflectOutletField(r,i):i instanceof Dn?t.reflectInoutletField(r,i):null}n=n.__proto__}return null},t.reflectInletField=function(e,r){if("value"===r.type)return t.reflectValueInletField(e,r.key);if("map"===r.type)return t.reflectMapInletField(e,r.key);throw new TypeError(r.type)},t.reflectValueInletField=function(e,r){var n=e[r];return void 0===n&&(n=e instanceof t?e.inlet():new On(e),e[r]=n),n},t.reflectMapInletField=function(t,e){return null},t.reflectOutletField=function(e,r){if("value"===r.type)return t.reflectValueOutletField(e,r.key);if("map"===r.type)return t.reflectMapOutletField(e,r.key);throw new TypeError(r.type)},t.reflectValueOutletField=function(e,r){var n=e[r];return void 0===n&&(n=e instanceof t?e.outlet():new An(e),e[r]=n),n},t.reflectMapOutletField=function(t,e){return null},t.reflectInoutletField=function(e,r){if("value"===r.type)return t.reflectValueInoutletField(e,r.key);if("map"===r.type)return t.reflectMapInoutletField(e,r.key);throw new TypeError(r.type)},t.reflectValueInoutletField=function(e,r){var n=e[r];return void 0===n&&(n=e instanceof t?e.inoutlet():new En(e),e[r]=n),n},t.reflectMapInoutletField=function(t,e){return null},t.init=function(t){t.hasOwnProperty("_inlets")||(t._inlets={}),t.hasOwnProperty("_outlets")||(t._outlets={}),t.hasOwnProperty("_inoutlets")||(t._inoutlets={})},t.decorateInlet=function(e,r,n){t.init(r);var i=void 0!==e.name?e.name:n,o=void 0!==e.type?e.type:"value",s=new Cn(n,i,o);r._inlets[i]=s},t.decorateOutlet=function(e,r,n){t.init(r);var i=void 0!==e.name?e.name:n,o=void 0!==e.type?e.type:"value",s=new In(n,i,o);r._outlets[i]=s},t.decorateInoutlet=function(e,r,n){t.init(r);var i=void 0!==e.name?e.name:n,o=void 0!==e.type?e.type:"value",s=new Dn(n,i,o);r._inlets[i]=s,r._outlets[i]=s,r._inoutlets[i]=s},t}();var Mn={is:function(t){if("object"==typeof t&&null!==t){var e=t;return Hr.is(e)&&Gr.is(e)}return!1},Streamlet:void 0,Model:void 0,Scope:void 0,Dataflow:void 0},Pn=function(t){function e(){var e=t.call(this)||this;return e._effects=new Ft,e._outlets=new Ft,e._outputs=null,e._version=-1,e}return y(e,t),e.prototype.streamletScope=function(){return null},e.prototype.streamletContext=function(){var t=this.streamletScope();return null!==t?t.streamletContext():null},e.prototype.hasOwn=function(t){return this.has(t)},e.prototype.get=function(e){return void 0===e?this:t.prototype.get.call(this,e)},e.prototype.outlet=function(t){if("string"==typeof t&&(t=ve.from(t)),!this.hasOwn(t)){var e=this.streamletScope();if(Mn.is(e)&&e.has(t))return e.outlet(t)}var r=this._outlets.get(t);return void 0===r&&(r=new Yr(this,t),this._outlets=this._outlets.updated(t,r),this.decohereInputKey(t,0)),r},e.prototype.outputIterator=function(){return null!==this._outputs?l.array(this._outputs):l.empty()},e.prototype.bindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=new Array(r+1),i=0;i<r;i+=1)n[i]=e[i];n[r]=t,this._outputs=n},e.prototype.unbindOutput=function(t){for(var e=this._outputs,r=null!==e?e.length:0,n=0;n<r;n+=1)if(e[n]===t){if(r>1){for(var i=new Array(r-1),o=0;o<n;o+=1)i[o]=e[o];for(o=n;o<r-1;o+=1)i[o]=e[o+1];this._outputs=i}else this._outputs=null;break}},e.prototype.unbindOutputs=function(){var t=this._outlets;t.isEmpty()&&(this._outlets=new Ft,t.forEach((function(t,e){e.unbindOutputs()}),this));var e=this._outputs;if(null!==e){this._outputs=null;for(var r=0,n=e.length;r<n;r+=1)e[r].unbindInput()}},e.prototype.disconnectOutputs=function(){var t=this._outlets;t.isEmpty()&&(this._outlets=new Ft,t.forEach((function(t,e){e.disconnectOutputs()}),this));var r=this._outputs;if(null!==r){this._outputs=null;for(var n=0,i=r.length;n<i;n+=1){var o=r[n];o.unbindInput(),o.disconnectOutputs()}}this.forEach((function(t){t instanceof re&&(t=t.toValue()),(t instanceof e||t instanceof Mn.Streamlet||Mn.is(t))&&t.disconnectOutputs()}),this)},e.prototype.disconnectInputs=function(){},e.prototype.decohereInputKey=function(t,e){var r=this._effects;if(r.get(t)!==e){this.willDecohereInputKey(t,e),this._effects=r.updated(t,e),this._version=-1,this.onDecohereInputKey(t,e);for(var n=null!==this._outputs?this._outputs.length:0,i=0;i<n;i+=1){var o=this._outputs[i];Wr.is(o)?o.decohereOutputKey(t,e):o.decohereOutput()}var s=this._outlets.get(t);void 0!==s&&s.decohereInput(),this.didDecohereInputKey(t,e)}},e.prototype.decohereInput=function(){if(this._version>=0){this.willDecohereInput(),this._version=-1,this.onDecohereInput();for(var t=null!==this._outputs?this._outputs.length:0,e=0;e<t;e+=1)this._outputs[e].decohereOutput();this._outlets.forEach((function(t,e){e.decohereInput()}),this),this.didDecohereInput()}},e.prototype.recohereInputKey=function(t,e){if(this._version<0){var r=this._effects,n=r.get(t);if(void 0!==n){this.willRecohereInputKey(t,n,e),this._effects=r.removed(t),this.onRecohereInputKey(t,n,e);for(var i=0,o=null!==this._outputs?this._outputs.length:0;i<o;i+=1){var s=this._outputs[i];Wr.is(s)&&s.recohereOutputKey(t,e)}var u=this._outlets.get(t);void 0!==u&&u.recohereInput(e),this.didRecohereInputKey(t,n,e)}}},e.prototype.recohereInput=function(t){if(this._version<0){this.willRecohereInput(t),this._effects.forEach((function(e){this.recohereInputKey(e,t)}),this),this._version=t,this.onRecohereInput(t);for(var r=0,n=null!==this._outputs?this._outputs.length:0;r<n;r+=1)this._outputs[r].recohereOutput(t);this.forEach((function(r){r instanceof re&&(r=r.toValue()),r instanceof e?r.recohereInput(t):r instanceof Mn.Streamlet?r.recohere(t):Mn.is(r)&&r.recohereInput(t)}),this),this.didRecohereInput(t)}},e.prototype.willDecohereInputKey=function(t,e){},e.prototype.onDecohereInputKey=function(t,e){},e.prototype.didDecohereInputKey=function(t,e){},e.prototype.willDecohereInput=function(){},e.prototype.onDecohereInput=function(){},e.prototype.didDecohereInput=function(){},e.prototype.willRecohereInputKey=function(t,e,r){},e.prototype.onRecohereInputKey=function(t,e,r){},e.prototype.didRecohereInputKey=function(t,e,r){},e.prototype.willRecohereInput=function(t){},e.prototype.onRecohereInput=function(t){},e.prototype.didRecohereInput=function(t){},e.prototype.memoize=function(){var t=new fn;return t.bindInput(this),t},e.prototype.filter=function(e){if("function"!=typeof e)return t.prototype.filter.call(this,e);var r=new ln(e);return r.bindInput(this),r},e.prototype.map=function(t){var e;return 1===t.length?((e=new yn(t)).bindInput(this),e):((e=new vn(t)).bindInput(this),e)},e.prototype.reduce=function(t,e,r){var n=new wn(t,e,r);return n.bindInput(this),n},e.prototype.watch=function(t){return 1===t.length?(new bn(t).bindInput(this),this):(new Sn(t).bindInput(this),this)},e}(fe),Tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.isConstant=function(){return!1},e.prototype.streamletClass=function(){return this.__proto__},e.prototype.compile=function(){kn.reflectEachInlet(this,this.streamletClass(),(function(t,e){null===t.input()&&this.compileInlet(t,e)}),this)},e.prototype.compileInlet=function(t,e){var r=this.streamletScope();if(null!==r){var n=r.outlet(e);null!==n&&t.bindInput(n)}},e}(fe);Mn.Streamlet=Tn;var Vn=function(t){function e(e){void 0===e&&(e=null);var r=t.call(this)||this;return r.scope=e,r.context=null,r._version=-1,r}return y(e,t),e.prototype.streamletScope=function(){return this.scope},e.prototype.setStreamletScope=function(t){this.scope=t},e.prototype.streamletContext=function(){if(null!==this.context)return this.context;var t=this.streamletScope();return null!==t?t.streamletContext():null},e.prototype.setStreamletContext=function(t){this.context=t},e.prototype.isEmpty=function(){return 0!==this.length},Object.defineProperty(e.prototype,"length",{get:function(){return kn.reflectOutletCount(this.streamletClass())},enumerable:!1,configurable:!0}),e.prototype.has=function(t){if(t instanceof ve)t=t.value;else if("string"!=typeof t)return!1;return null!==this.outlet(t)},e.prototype.get=function(t){if(t instanceof ve)t=t.value;else if("string"!=typeof t)return pe.absent();var e=this.outlet(t);if(null!==e){var r=e.get();if(void 0!==r)return r}return pe.absent()},e.prototype.getAttr=function(t){return pe.absent()},e.prototype.getSlot=function(t){return this.get(t)},e.prototype.getField=function(t){if("string"==typeof t)t=ve.from(t);else if(!(t instanceof ve))return;var e=this.get(t);if(e.isDefined())return ue.of(t,e)},e.prototype.getItem=function(t){t instanceof me&&(t=t.value);var e=kn.reflectOutletIndex(t,this,this.streamletClass());if(null!==e){var r=e[0],n=e[1].get();return void 0===n&&(n=pe.extant()),ue.of(r,n)}return ee.absent()},e.prototype.set=function(t,e){throw new Error("unsupported")},e.prototype.setAttr=function(t,e){throw new Error("unsupported")},e.prototype.setSlot=function(t,e){throw new Error("unsupported")},e.prototype.setItem=function(t,e){throw new Error("unsupported")},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("unsupported")},e.prototype.splice=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];throw new Error("unsupported")},e.prototype.delete=function(t){throw new Error("unsupported")},e.prototype.clear=function(){throw new Error("unsupported")},e.prototype.forEach=function(t,e){return kn.reflectEachOutlet(this,this.streamletClass(),(function(r,n,i){var o=r.get();if(void 0!==o){var s=t.call(e,o,i);if(void 0!==s)return s}}),this)},e.prototype.inlet=function(t){return void 0===t?new On(this):kn.reflectInletKey(t,this,this.streamletClass())},e.prototype.bindInput=function(t,e){var r=this.inlet(t);if(null===r)throw new Error(""+t);r.bindInput(e)},e.prototype.unbindInput=function(t){var e=this.inlet(t);if(null===e)throw new Error(""+t);e.unbindInput()},e.prototype.outlet=function(t){return void 0===t?new An(this):"string"==typeof t?kn.reflectOutletKey(t,this,this.streamletClass()):t},e.prototype.inoutlet=function(){return new En(this)},e.prototype.decohere=function(){this._version>=0&&(this.willDecohere(),this._version=-1,this.onDecohere(),this.onDecohereOutlets(),this.didDecohere())},e.prototype.recohere=function(t){this._version<0&&(this.willRecohere(t),this._version=t,this.onRecohereInlets(t),this.onRecohere(t),this.onRecohereOutlets(t),this.didRecohere(t))},e.prototype.getInput=function(t,e){var r;if("string"==typeof t&&(t=this.inlet(t)),null!==t){var n=t.input();null!==n&&(r=n.get())}return void 0===r&&(r=e),r},e.prototype.castInput=function(t,e,r){var n,i=this.getInput(t);return void 0!==i&&(n=e.cast(i)),void 0===n&&(n=r),n},e.prototype.coerceInput=function(t,e,r){var n,i=this.getInput(t);return void 0!==i&&(n=e.cast(i)),void 0===n&&(n=e.unit()),void 0===n&&(n=r),n},e.prototype.getOutput=function(t){},e.prototype.disconnectInputs=function(){kn.disconnectInputs(this,this.streamletClass())},e.prototype.disconnectOutputs=function(){kn.disconnectOutputs(this,this.streamletClass())},e.prototype.willDecohereInlet=function(t){},e.prototype.didDecohereInlet=function(t){this.decohere()},e.prototype.willRecohereInlet=function(t,e){},e.prototype.didRecohereInlet=function(t,e){this.recohere(e)},e.prototype.willDecohereOutlet=function(t){},e.prototype.didDecohereOutlet=function(t){},e.prototype.willRecohereOutlet=function(t,e){},e.prototype.didRecohereOutlet=function(t,e){},e.prototype.willDecohere=function(){},e.prototype.onDecohere=function(){},e.prototype.didDecohere=function(){},e.prototype.onDecohereOutlets=function(){kn.decohereOutlets(this,this.streamletClass())},e.prototype.willRecohere=function(t){},e.prototype.onRecohereInlets=function(t){kn.recohereInlets(t,this,this.streamletClass())},e.prototype.onRecohere=function(t){},e.prototype.onRecohereOutlets=function(t){kn.recohereOutlets(t,this,this.streamletClass())},e.prototype.didRecohere=function(t){},e}(Tn),zn=function(t){function e(e,r){var n=t.call(this)||this;return n._record=e,n._key=r,n}return y(e,t),e.prototype.onDecohereOutput=function(){Mn.is(this._record)&&this._record.decohereInputKey(this._key,0)},e.prototype.onRecohereOutput=function(t){if(null!==this._input){var e=this._input.get();void 0!==e?this._record.set(this._key,e):this._record.delete(this._key)}},e}(Qr),Bn=function(){function t(){}return t.system=function(){return null},t}(),Rn=function(t){function e(e){void 0===e&&(e=fe.create());var r=t.call(this)||this;return r._state=e,r._fieldUpdaters=new Ft,r}return y(e,t),e.prototype.isEmpty=function(){return this._state.isEmpty()},e.prototype.isArray=function(){return this._state.isArray()},e.prototype.isObject=function(){return this._state.isObject()},Object.defineProperty(e.prototype,"length",{get:function(){return this._state.length},enumerable:!1,configurable:!0}),e.prototype.fieldCount=function(){return this._state.fieldCount()},e.prototype.valueCount=function(){return this._state.valueCount()},e.prototype.has=function(t){if(this._state.has(t))return!0;var e=this.streamletScope();return e instanceof fe&&e.has(t)},e.prototype.hasOwn=function(t){return this._state.has(t)},e.prototype.indexOf=function(t,e){return this._state.indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){return void 0===e&&(e=0),this._state.lastIndexOf(t,e)},e.prototype.get=function(t){if(void 0===t)return this;t=pe.fromAny(t);var e=this._state.get(t);if(!e.isDefined()){var r=this.streamletScope();r instanceof fe&&(e=r.get(t))}return e},e.prototype.getAttr=function(t){t=ve.fromAny(t);var e=this._state.getAttr(t);if(!e.isDefined()){var r=this.streamletScope();r instanceof fe&&(e=r.getAttr(t))}return e},e.prototype.getSlot=function(t){t=pe.fromAny(t);var e=this._state.getSlot(t);if(!e.isDefined()){var r=this.streamletScope();r instanceof fe&&(e=r.getSlot(t))}return e},e.prototype.getField=function(t){t=pe.fromAny(t);var e=this._state.getField(t);if(void 0===e){var r=this.streamletScope();r instanceof fe&&(e=r.getField(t))}return e},e.prototype.getItem=function(t){return this._state.getItem(t)},e.prototype.bindValue=function(t,e){var r=new zn(this,t),n=Mn.Dataflow.compile(e,this);r.bindInput(n),this._fieldUpdaters=this._fieldUpdaters.updated(t,r)},e.prototype.set=function(t,e){if(t=pe.fromAny(t),this._state.has(t))this._state.set(t,e);else{var r=this.streamletScope();r instanceof fe&&r.has(t)?r.set(t,e):this._state.set(t,e)}return this.decohereInputKey(t,0),this},e.prototype.setAttr=function(t,e){if(t=ve.fromAny(t),this._state.has(t))this._state.setAttr(t,e);else{var r=this.streamletScope();r instanceof fe&&r.has(t)?r.setAttr(t,e):this._state.setAttr(t,e)}return this.decohereInputKey(t,0),this},e.prototype.setSlot=function(t,e){if(t=pe.fromAny(t),this._state.has(t))this._state.setSlot(t,e);else{var r=this.streamletScope();r instanceof fe&&r.has(t)?r.setSlot(t,e):this._state.setSlot(t,e)}return this.decohereInputKey(t,0),this},e.prototype.setItem=function(t,e){var r=this._state.getItem(t);return e=ee.fromAny(e),this._state.setItem(t,e),r instanceof re&&e instanceof re?r.key.equals(e.key)?this.decohereInputKey(r.key,0):(this.decohereInputKey(r.key,1),this.decohereInputKey(e.key,0)):r instanceof re?this.decohereInputKey(r.key,1):e instanceof re?this.decohereInputKey(e.key,0):this.decohereInput(),this},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this._state.length,n=this._state.push.apply(this._state,arguments);r<n;){var i=this._state.get(r);i instanceof re&&this.decohereInputKey(i.key,0),r+=1}return n},e.prototype.splice=function(t,e){void 0===e&&(e=0);for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=this._state.length;t<0&&(t=i+t),t=Math.max(0,t),e=Math.max(0,e);for(var o=this._state.splice.apply(this._state,arguments),s=0;s<o.length;s+=1){var u=o[s];u instanceof re&&this.decohereInputKey(u.key,1)}for(s=t;s<t+r.length;s+=1){var a=this._state.get(s);a instanceof re&&this.decohereInputKey(a.key,0)}return o},e.prototype.delete=function(t){var e=this._state.delete(t);return e instanceof re&&this.decohereInputKey(e.key,1),e},e.prototype.clear=function(){var t=this._state.branch();this._state.clear(),t.forEach((function(t){t instanceof re&&this.decohereInputKey(t.key,1)}),this)},e.prototype.forEach=function(t,e){return this._state.forEach(t,e)},e.prototype.keyIterator=function(){throw new Error},e.prototype.disconnectInputs=function(){var t=this._fieldUpdaters;t.isEmpty()||(this._fieldUpdaters=new Ft,t.forEach((function(t,e){e.disconnectInputs()}),this))},e.prototype.memoize=function(){return this},e.prototype.materialize=function(t){t.forEach((function(t){this.materializeItem(t)}),this)},e.prototype.materializeItem=function(t){t instanceof re?this.materializeField(t):this.materializeValue(t)},e.prototype.materializeField=function(t){var e=t.value;if(e instanceof Tn)e.setStreamletScope(this),this._state.push(t);else if(e instanceof fe){var r=new Mn.Scope(this);r.materialize(e),this._state.push(t.updatedValue(r))}else this._state.push(t)},e.prototype.materializeValue=function(t){if(t instanceof Tn)t.setStreamletScope(this),this._state.push(t);else if(t instanceof fe){var e=new Mn.Scope(this);e.materialize(t),this._state.push(e)}else this._state.push(t)},e.prototype.compile=function(t){t.forEach((function(t,e){this.compileItem(t,e)}),this)},e.prototype.compileItem=function(t,e){t instanceof re?this.compileField(t,e):this.compileValue(t,e)},e.prototype.compileField=function(t,e){var r=t.key,n=t.value;r.isConstant()&&(n.isConstant()?this.decohereInputKey(r,0):n instanceof Tn?(n.compile(),this.decohereInputKey(r,0)):n instanceof fe?(this._state.getItem(e).toValue().compile(n),this.decohereInputKey(r,0)):(t.setValue(pe.extant()),this.bindValue(r,n)))},e.prototype.compileValue=function(t,e){t instanceof Tn?t.compile():t instanceof fe?this._state.getItem(e).compile(t):t.isConstant()},e.prototype.reify=function(t){void 0===t&&(t=Bn.system()),this.forEach((function(e,r){var n=this.reifyItem(e,t);e!==n&&this.setItem(r,n)}),this)},e.prototype.reifyItem=function(t,r){var n=this.streamletScope();return n instanceof e?n.reifyItem(t,r):t},e.from=function(t){var r=new e;return r.materialize(t),r.compile(t),r},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.from(fe.of.apply(void 0,arguments))},e.globalScope=function(){var t=new e;return t.materializeField(ue.of("math",hr.scope().branch())),t},e}(Pn);Mn.Model=Rn;var Fn=function(t){function e(e,r){var n=t.call(this,r)||this;return n.scope=e,n}return y(e,t),e.prototype.streamletScope=function(){return this.scope},e.from=function(t){var r=new e(e.globalScope());return r.materialize(t),r.compile(t),r},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.from(fe.of.apply(void 0,arguments))},e}(Rn);Mn.Scope=Fn;var Ln=function(t){function e(){var e=t.call(this)||this;return e._keyInlet=new nn(e),e._mapInlet=new on(e),e}return y(e,t),e.prototype.keyInlet=function(){return this._keyInlet},e.prototype.mapInlet=function(){return this._mapInlet},e.prototype.get=function(){var t=this._keyInlet.input();if(null!==t){var e=t.get();if(void 0!==e){var r=this._mapInlet.input();if(null!==r){var n=r.get(e);if(void 0!==n)return n}}}return pe.absent()},e}(Zr),qn=function(t){function e(){var e=t.call(this)||this;return e._operand1Inlet=new nn(e),e._operand2Inlet=new nn(e),e}return y(e,t),e.prototype.operand1Inlet=function(){return this._operand1Inlet},e.prototype.operand2Inlet=function(){return this._operand2Inlet},e.prototype.get=function(){var t=this._operand1Inlet.input(),e=this._operand2Inlet.input();if(null!==t&&null!==e){var r=t.get(),n=e.get();if(void 0!==r&&void 0!==n)return this.evaluate(r,n).toValue()}return pe.absent()},e}(Zr),Nn=function(t){function e(){var e=t.call(this)||this;return e._operandInlet=new nn(e),e}return y(e,t),e.prototype.operandInlet=function(){return this._operandInlet},e.prototype.get=function(){var t=this._operandInlet.input();if(null!==t){var e=t.get();if(void 0!==e)return this.evaluate(e).toValue()}return pe.absent()},e}(Zr),Un=function(t){function e(){var e=t.call(this)||this;return e._ifInlet=new nn(e),e._thenInlet=new nn(e),e._elseInlet=new nn(e),e}return y(e,t),e.prototype.ifInlet=function(){return this._ifInlet},e.prototype.thenInlet=function(){return this._thenInlet},e.prototype.elseInlet=function(){return this._elseInlet},e.prototype.get=function(){var t=this._ifInlet.input();if(null!==t){var e=t.get();if(void 0!==e)if(e.booleanValue(!1)){var r=this._thenInlet.input();if(null!==r){var n=r.get();if(void 0!==n)return n}}else{var i=this._elseInlet.input();if(null!==i){var o=i.get();if(void 0!==o)return o}}}return pe.absent()},e}(Zr),Kn=function(t){function e(){var e=t.call(this)||this;return e._operand1Inlet=new nn(e),e._operand2Inlet=new nn(e),e}return y(e,t),e.prototype.operand1Inlet=function(){return this._operand1Inlet},e.prototype.operand2Inlet=function(){return this._operand2Inlet},e.prototype.get=function(){var t=this._operand1Inlet.input(),e=null!==t?t.get():void 0;if(void 0!==e&&e.booleanValue(!1))return e;var r=this._operand2Inlet.input(),n=null!==r?r.get():void 0;return void 0!==n?n:pe.absent()},e}(Zr),Wn=function(t){function e(){var e=t.call(this)||this;return e._operand1Inlet=new nn(e),e._operand2Inlet=new nn(e),e}return y(e,t),e.prototype.operand1Inlet=function(){return this._operand1Inlet},e.prototype.operand2Inlet=function(){return this._operand2Inlet},e.prototype.get=function(){var t=this._operand1Inlet.input(),e=null!==t?t.get():void 0;if(void 0!==e){if(e.booleanValue(!1)){var r=this._operand2Inlet.input(),n=null!==r?r.get():void 0;if(void 0!==n)return n}return e}return pe.absent()},e}(Zr),Hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.bitwiseOr(e)},e}(qn),jn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.bitwiseXor(e)},e}(qn),Gn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.bitwiseAnd(e)},e}(qn),Qn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.lt(e)},e}(qn),Zn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.le(e)},e}(qn),Xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.eq(e)},e}(qn),Yn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.ne(e)},e}(qn),$n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.ge(e)},e}(qn),Jn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.gt(e)},e}(qn),ti=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.plus(e)},e}(qn),ei=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.minus(e)},e}(qn),ri=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.times(e)},e}(qn),ni=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.divide(e)},e}(qn),ii=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t,e){return t.modulo(e)},e}(qn),oi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t){return t.not()},e}(Nn),si=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t){return t.bitwiseNot()},e}(Nn),ui=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t){return t.negative()},e}(Nn),ai=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.evaluate=function(t){return t.positive()},e}(Nn),pi=function(t){function e(e){var r=t.call(this)||this;return r._scope=e,r._funcInlet=new nn(r),r._argsInlet=new nn(r),r}return y(e,t),e.prototype.funcInlet=function(){return this._funcInlet},e.prototype.argsInlet=function(){return this._argsInlet},e.prototype.get=function(){var t=this._funcInlet.input(),e=this._argsInlet.input();if(null!==t&&null!==e){var r=t.get();if(r instanceof Se){var n=e.get();if(void 0!==n){var i=new oe;return i.pushScope(this._scope),r.invoke(n,i,void 0).toValue()}}}return pe.absent()},e}(Zr),hi=function(){function t(){}return t.compile=function(e,r){if(r instanceof Yr){var n=r.get();Kr.is(n)&&(r=n)}if(e.isConstant())return new sn(e);if(e instanceof xe)return t.compileSelector(e,r);if(e instanceof be)return t.compileOperator(e,r);throw new TypeError(""+e)},t.compileSelector=function(e,r){if(e instanceof $e)return t.compileIdentitySelector(r);if(e instanceof Je)return t.compileGetSelector(e,r);if(e instanceof tr)return t.compileGetAttrSelector(e,r);if(e instanceof er)return t.compileGetItemSelector(e,r);if(e instanceof rr)return t.compileKeysSelector(r);if(e instanceof nr)return t.compileValuesSelector(r);if(e instanceof ir)return t.compileChildrenSelector(r);if(e instanceof or)return t.compileDescendantsSelector(r);if(e instanceof sr)return t.compileFilterSelector(e,r);throw new TypeError(""+e)},t.compileIdentitySelector=function(t){return t},t.compileGetSelector=function(e,r){var n=e.accessor();if(!n.isConstant()){var i=new Ln;o=t.compile(n,r);return i.keyInlet().bindInput(o),i.mapInlet().bindInput(r),i}if(Mn.is(r)){if(null!==(o=r.outlet(n)))return t.compile(e.then(),o)}else if(Gr.is(r)){var o,s=n.stringValue(void 0);if(void 0!==s)if(null!==(o=r.outlet(s)))return t.compile(e.then(),o)}return null},t.compileGetAttrSelector=function(t,e){throw new Error},t.compileGetItemSelector=function(t,e){throw new Error},t.compileKeysSelector=function(t){throw new Error},t.compileValuesSelector=function(t){throw new Error},t.compileChildrenSelector=function(t){throw new Error},t.compileDescendantsSelector=function(t){throw new Error},t.compileFilterSelector=function(t,e){throw new Error},t.compileOperator=function(e,r){if(e instanceof ke)return t.compileConditionalOperator(e,r);if(e instanceof Ie)return t.compileBinaryOperator(e,r);if(e instanceof De)return t.compileUnaryOperator(e,r);if(e instanceof Ye)return t.compileInvokeOperator(e,r);throw new TypeError(""+e)},t.compileConditionalOperator=function(e,r){var n=new Un,i=e.ifTerm().toValue(),o=e.thenTerm().toValue(),s=e.elseTerm().toValue(),u=t.compile(i,r),a=t.compile(o,r),p=t.compile(s,r);return n.ifInlet().bindInput(u),n.thenInlet().bindInput(a),n.elseInlet().bindInput(p),n},t.compileBinaryOperator=function(e,r){if(e instanceof Me)return t.compileOrOperator(e,r);if(e instanceof Pe)return t.compileAndOperator(e,r);if(e instanceof Te)return t.compileBitwiseOrOperator(e,r);if(e instanceof Ve)return t.compileBitwiseXorOperator(e,r);if(e instanceof ze)return t.compileBitwiseAndOperator(e,r);if(e instanceof Be)return t.compileLtOperator(e,r);if(e instanceof Re)return t.compileLeOperator(e,r);if(e instanceof Fe)return t.compileEqOperator(e,r);if(e instanceof Le)return t.compileNeOperator(e,r);if(e instanceof qe)return t.compileGeOperator(e,r);if(e instanceof Ne)return t.compileGtOperator(e,r);if(e instanceof Ue)return t.compilePlusOperator(e,r);if(e instanceof Ke)return t.compileMinusOperator(e,r);if(e instanceof We)return t.compileTimesOperator(e,r);if(e instanceof He)return t.compileDivideOperator(e,r);if(e instanceof je)return t.compileModuloOperator(e,r);throw new TypeError(""+e)},t.compileBinaryOutlet=function(e,r,n){var i=e.operand1().toValue(),o=e.operand2().toValue(),s=t.compile(i,n),u=t.compile(o,n);return r.operand1Inlet().bindInput(s),r.operand2Inlet().bindInput(u),r},t.compileOrOperator=function(e,r){var n=new Kn,i=e.operand1().toValue(),o=e.operand2().toValue(),s=t.compile(i,r),u=t.compile(o,r);return n.operand1Inlet().bindInput(s),n.operand2Inlet().bindInput(u),n},t.compileAndOperator=function(e,r){var n=new Wn,i=e.operand1().toValue(),o=e.operand2().toValue(),s=t.compile(i,r),u=t.compile(o,r);return n.operand1Inlet().bindInput(s),n.operand2Inlet().bindInput(u),n},t.compileBitwiseOrOperator=function(e,r){return t.compileBinaryOutlet(e,new Hn,r)},t.compileBitwiseXorOperator=function(e,r){return t.compileBinaryOutlet(e,new jn,r)},t.compileBitwiseAndOperator=function(e,r){return t.compileBinaryOutlet(e,new Gn,r)},t.compileLtOperator=function(e,r){return t.compileBinaryOutlet(e,new Qn,r)},t.compileLeOperator=function(e,r){return t.compileBinaryOutlet(e,new Zn,r)},t.compileEqOperator=function(e,r){return t.compileBinaryOutlet(e,new Xn,r)},t.compileNeOperator=function(e,r){return t.compileBinaryOutlet(e,new Yn,r)},t.compileGeOperator=function(e,r){return t.compileBinaryOutlet(e,new $n,r)},t.compileGtOperator=function(e,r){return t.compileBinaryOutlet(e,new Jn,r)},t.compilePlusOperator=function(e,r){return t.compileBinaryOutlet(e,new ti,r)},t.compileMinusOperator=function(e,r){return t.compileBinaryOutlet(e,new ei,r)},t.compileTimesOperator=function(e,r){return t.compileBinaryOutlet(e,new ri,r)},t.compileDivideOperator=function(e,r){return t.compileBinaryOutlet(e,new ni,r)},t.compileModuloOperator=function(e,r){return t.compileBinaryOutlet(e,new ii,r)},t.compileUnaryOperator=function(e,r){if(e instanceof Ge)return t.compileNotOperator(e,r);if(e instanceof Qe)return t.compileBitwiseNotOperator(e,r);if(e instanceof Ze)return t.compileNegativeOperator(e,r);if(e instanceof Xe)return t.compilePositiveOperator(e,r);throw new TypeError(""+e)},t.compileUnaryOutlet=function(e,r,n){var i=e.operand().toValue(),o=t.compile(i,n);return r.operandInlet().bindInput(o),r},t.compileNotOperator=function(e,r){return t.compileUnaryOutlet(e,new oi,r)},t.compileBitwiseNotOperator=function(e,r){return t.compileUnaryOutlet(e,new si,r)},t.compileNegativeOperator=function(e,r){return t.compileUnaryOutlet(e,new ui,r)},t.compilePositiveOperator=function(e,r){return t.compileUnaryOutlet(e,new ai,r)},t.compileInvokeOperator=function(e,r){var n=e.func(),i=e.args(),o=new pi(r),s=t.compile(n,r),u=t.compile(i,r);return o.funcInlet().bindInput(s),o.argsInlet().bindInput(u),o},t}();Mn.Dataflow=hi;var fi=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._keyParser=n,s._valueParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._keyParser,this._valueParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);var u=0;t:for(;;){if(1===s){for(;t.isCont()&&(u=t.head(),fo.isWhitespace(u));)t=t.step();if(t.isCont())if(33===u||34===u||36===u||37===u||39===u||40===u||43===u||45===u||u>=48&&u<=57||64===u||91===u||123===u||126===u||fo.isIdentStartChar(u))n=n||r.valueBuilder(),s=2;else{if(35!==u)return void 0!==n?ht.done(n.bind()):ht.done(r.absent());t=t.step(),s=7}else if(t.isDone())return void 0!==n?ht.done(n.bind()):ht.done(r.absent())}if(2===s){for(void 0===i&&(i=r.parseBlockExpression(t));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())s=3;else if(i.isError())return i}if(3===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont())58===u?(t=t.step(),s=4):(n.push(r.item(i.bind())),i=void 0,s=6);else if(t.isDone())return n.push(r.item(i.bind())),ht.done(n.bind())}if(4===s){for(;t.isCont()&&fo.isSpace(t.head());)t=t.step();if(t.isCont())s=5;else if(t.isDone())return n.push(r.slot(i.bind())),ht.done(n.bind())}if(5===s){for(void 0===o&&(o=r.parseBlockExpression(t));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())n.push(r.slot(i.bind(),o.bind())),i=void 0,o=void 0,s=6;else if(o.isError())return o}if(6===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()){if(44===u||59===u||fo.isNewline(u)){t=t.step(),s=1;continue}if(35!==u)return ht.done(n.bind());t=t.step(),s=7}else if(t.isDone())return ht.done(n.bind())}if(7===s){for(;t.isCont();){if(u=t.head(),fo.isNewline(u)){s=1;continue t}t=t.step()}if(t.isDone()){s=1;continue}}break}return new e(r,n,i,o,s)},e}(ht),ci=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._recon=e,o._keyParser=r,o._valueParser=n,o._step=i,o}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._keyParser,this._valueParser,this._step)},e.parse=function(t,r,n,i,o){void 0===o&&(o=1);var s=0;if(1===o)if(t.isCont()){if(64!==(s=t.head()))return ht.error(at.expected(64,t));t=t.step(),o=2}else if(t.isDone())return ht.error(at.expected(64,t));if(2===o){if(void 0===n){if(t.isCont())if(34===(s=t.head())||39===s)n=r.parseString(t);else{if(!fo.isIdentStartChar(s))return ht.error(at.expected("attribute name",t));n=r.parseIdent(t)}else if(t.isDone())return ht.error(at.expected("attribute name",t))}else n=n.feed(t);if(void 0!==n)if(n.isDone())o=3;else if(n.isError())return n.asError()}if(3===o)if(t.isCont()&&40===t.head())t=t.step(),o=4;else if(!t.isEmpty())return ht.done(r.attr(n.bind()));if(4===o){for(;t.isCont()&&(s=t.head(),fo.isWhitespace(s));)t=t.step();if(t.isCont()){if(41===s)return t=t.step(),ht.done(r.attr(n.bind()));o=5}else if(t.isDone())return ht.error(at.expected(")",t))}if(5===o){for(void 0===i&&(i=r.parseBlock(t));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())o=6;else if(i.isError())return i.asError()}if(6===o){for(;t.isCont()&&(s=t.head(),fo.isWhitespace(s));)t=t.step();if(t.isCont())return 41===s?(t=t.step(),ht.done(r.attr(n.bind(),i.bind()))):ht.error(at.expected(")",t));if(t.isDone())return ht.error(at.expected(")",t))}return new e(r,n,i,o)},e}(ht),li=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._fieldParser=n,s._valueParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._fieldParser,this._valueParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);for(var u=0;;){if(1===s)if(t.isCont())if(64===(u=t.head()))i=r.parseAttr(t),s=2;else if(123===u)n=n||r.recordBuilder(),o=r.parseRecord(t,n),s=5;else if(91===u)n=n||r.recordBuilder(),o=r.parseMarkup(t,n),s=5;else if(fo.isIdentStartChar(u))o=r.parseIdent(t),s=4;else if(34===u||39===u)o=r.parseString(t),s=4;else if(45===u||u>=48&&u<=57)o=r.parseNumber(t),s=4;else if(37===u)o=r.parseData(t),s=4;else{if(36!==u)return void 0===n?ht.done(r.extant()):ht.done(n.bind());o=r.parseSelector(t),s=4}else if(t.isDone())return void 0===n?ht.done(r.extant()):ht.done(n.bind());if(2===s){for(;i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())(n=n||r.valueBuilder()).push(i.bind()),i=void 0,s=3;else if(i.isError())return i.asError()}if(3===s){for(;t.isCont()&&fo.isSpace(t.head());)t=t.step();if(t.isCont()){s=1;continue}if(t.isDone())return ht.done(n.bind())}if(4===s){for(;o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())(n=n||r.valueBuilder()).push(r.item(o.bind())),o=void 0,s=6;else if(o.isError())return o}if(5===s){for(;o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())o=void 0,s=6;else if(o.isError())return o}if(6===s){for(;t.isCont()&&fo.isSpace(t.head());)t=t.step();if(t.isCont()){if(64!==t.head())return ht.done(n.bind());s=1}else if(t.isDone())return ht.done(n.bind())}break}return new e(r,n,i,o,s)},e}(ht),di=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._fieldParser=n,s._valueParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._fieldParser,this._valueParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);var u=0;if(1===s)if(t.isCont())if(64===(u=t.head()))i=r.parseAttr(t),s=2;else if(123===u)void 0!==n?(o=r.parseRecord(t,n),s=5):(o=r.parseRecord(t),s=4);else{if(91!==u)return void 0===n?ht.done(r.extant()):ht.done(n.bind());void 0!==n?(o=r.parseMarkup(t,n),s=5):(o=r.parseMarkup(t),s=4)}else if(t.isDone())return void 0===n?ht.done(r.extant()):ht.done(n.bind());if(2===s){for(;i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())(n=n||r.valueBuilder()).push(i.bind()),i=void 0,s=3;else if(i.isError())return i.asError()}if(3===s)if(t.isCont())if(123===(u=t.head()))o=r.parseRecord(t,n),s=5;else{if(91!==u)return ht.done(n.bind());o=r.parseMarkup(t,n),s=5}else if(t.isDone())return ht.done(n.bind());if(4===s){for(;o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())return(n=n||r.valueBuilder()).push(r.item(o.bind())),ht.done(n.bind());if(o.isError())return o}if(5===s){for(;o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())return ht.done(n.bind());if(o.isError())return o}return new e(r,n,i,o,s)},e}(ht),yi=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._keyParser=n,s._valueParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._keyParser,this._valueParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);var u=0;if(1===s)if(t.isCont()){if(123!==(u=t.head()))return ht.error(at.expected(123,t));t=t.step(),s=2}else if(t.isDone())return ht.error(at.expected(123,t));t:for(;;){if(2===s){for(;t.isCont()&&(u=t.head(),fo.isWhitespace(u));)t=t.step();if(t.isCont()){if(n=n||r.recordBuilder(),125===u)return t=t.step(),ht.done(n.bind());35===u?(t=t.step(),s=8):s=3}else if(t.isDone())return ht.error(at.expected(125,t))}if(3===s){for(void 0===i&&(i=r.parseBlockExpression(t));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())s=4;else if(i.isError())return i}if(4===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont())58===u?(t=t.step(),s=5):(n.push(r.item(i.bind())),i=void 0,s=7);else if(t.isDone())return ht.error(at.expected(125,t))}if(5===s){for(;t.isCont()&&fo.isSpace(t.head());)t=t.step();if(t.isCont())s=6;else if(t.isDone())return n.push(r.slot(i.bind())),ht.done(n.bind())}if(6===s){for(void 0===o&&(o=r.parseBlockExpression(t));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())n.push(r.slot(i.bind(),o.bind())),i=void 0,o=void 0,s=7;else if(o.isError())return o}if(7===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()){if(44===u||59===u||fo.isNewline(u)){t=t.step(),s=2;continue}if(35!==u)return 125===u?(t=t.step(),ht.done(n.bind())):ht.error(at.expected("'}', ';', ',', or newline",t));t=t.step(),s=8}else if(t.isDone())return ht.error(at.expected(125,t))}if(8===s){for(;t.isCont();){if(u=t.head(),fo.isNewline(u)){s=2;continue t}t=t.step()}if(t.isDone()){s=2;continue}}break}return new e(r,n,i,o,s)},e}(ht),_i=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._textOutput=n,s._valueParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._textOutput,this._valueParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);var u=0;if(1===s)if(t.isCont()){if(91!==(u=t.head()))return ht.error(at.expected(91,t));t=t.step(),s=2}else if(t.isDone())return ht.error(at.expected(91,t));for(;;){if(2===s){for(;t.isCont()&&64!==(u=t.head())&&91!==u&&92!==u&&93!==u&&123!==u&&125!==u;)t=t.step(),(i=i||r.textOutput()).write(u);if(t.isCont()){if(93===u)return t=t.step(),n=n||r.recordBuilder(),void 0!==i&&n.push(r.item(i.bind())),ht.done(n.bind());if(64===u)n=n||r.recordBuilder(),void 0!==i&&(n.push(r.item(i.bind())),i=void 0),o=r.parseInlineItem(t),s=3;else if(123===u)n=n||r.recordBuilder(),void 0!==i&&(n.push(r.item(i.bind())),i=void 0),o=r.parseRecord(t,n),s=4;else if(91===u)n=n||r.recordBuilder(),void 0!==i&&(n.push(r.item(i.bind())),i=void 0),o=r.parseMarkup(t,n),s=4;else{if(92!==u)return ht.error(at.unexpected(t));t=t.step(),s=5}}else if(t.isDone())return ht.error(at.unexpected(t))}if(3===s){for(;o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone()){n.push(r.item(o.bind())),o=void 0,s=2;continue}if(o.isError())return o}if(4===s){for(;o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone()){o=void 0,s=2;continue}if(o.isError())return o}if(5===s){if(t.isCont()){if(u=t.head(),i=i||r.textOutput(),34===u||36===u||39===u||47===u||64===u||91===u||92===u||93===u||123===u||125===u)t=t.step(),i.write(u),s=2;else if(98===u)t=t.step(),i.write(8),s=2;else if(102===u)t=t.step(),i.write(12),s=2;else if(110===u)t=t.step(),i.write(10),s=2;else if(114===u)t=t.step(),i.write(13),s=2;else{if(116!==u)return ht.error(at.expected("escape character",t));t=t.step(),i.write(9),s=2}continue}if(t.isDone())return ht.error(at.expected("escape character",t))}break}return new e(r,n,i,o,s)},e}(ht),vi=function(t){function e(e,r,n){var i=t.call(this)||this;return i._recon=e,i._base64Parser=r,i._step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._base64Parser,this._step)},e.parse=function(t,r,n,i){void 0===i&&(i=1);if(1===i)if(t.isCont()){if(37!==t.head())return ht.error(at.expected(37,t));t=t.step(),i=2}else if(t.isDone())return ht.error(at.expected(37,t));if(2===i){for(void 0===n&&(n=Dt.standard().parse(t,r.dataOutput()));n.isCont()&&!t.isEmpty();)n=n.feed(t);if(n.isDone())return n;if(n.isError())return n}return new e(r,n,i)},e}(ht),mi=function(t){function e(e,r,n){var i=t.call(this)||this;return i._recon=e,i._output=r,i._step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._output,this._step)},e.parse=function(t,r,n,i){void 0===i&&(i=1);var o=0;if(1===i)if(t.isCont()){if(o=t.head(),!fo.isIdentStartChar(o))return ht.error(at.expected("identifier",t));t=t.step(),n=(n=n||r.textOutput()).write(o),i=2}else if(t.isDone())return ht.error(at.expected("identifier",t));if(2===i){for(;t.isCont()&&(o=t.head(),fo.isIdentChar(o));)t=t.step(),n.write(o);if(!t.isEmpty())return ht.done(r.ident(n.bind()))}return new e(r,n,i)},e}(ht),wi=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._output=r,s._quote=n,s._code=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._output,this._quote,this._code,this._step)},e.parse=function(t,r,n,i,o,s){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=1);var u=0;if(1===s){for(;t.isCont()&&(u=t.head(),fo.isWhitespace(u));)t=t.step();if(t.isCont()){if(34!==u&&(39!==u||i!==u&&0!==i))return ht.error(at.expected("string",t));t=t.step(),n=n||r.textOutput(),i=u,s=2}else if(t.isDone())return ht.error(at.expected("string",t))}t:for(;;){if(2===s){for(;t.isCont()&&(u=t.head())>=32&&u!==i&&92!==u;)t=t.step(),n.write(u);if(t.isCont()){if(u===i)return t=t.step(),ht.done(n.bind());if(92!==u)return ht.error(at.expected(i,t));t=t.step(),s=3}else if(t.isDone())return ht.error(at.expected(i,t))}if(3===s)if(t.isCont()){if(34===(u=t.head())||36===u||39===u||47===u||64===u||91===u||92===u||93===u||123===u||125===u){t=t.step(),n.write(u),s=2;continue}if(98===u){t=t.step(),n.write(8),s=2;continue}if(102===u){t=t.step(),n.write(12),s=2;continue}if(110===u){t=t.step(),n.write(10),s=2;continue}if(114===u){t=t.step(),n.write(13),s=2;continue}if(116===u){t=t.step(),n.write(9),s=2;continue}if(117!==u)return ht.error(at.expected("escape character",t));t=t.step(),s=4}else if(t.isDone())return ht.error(at.expected("escape character",t));if(s>=4)for(;;){if(t.isCont()){if(u=t.head(),wt.isDigit(u)){if(t=t.step(),o=16*o+wt.decodeDigit(u),s<=6){s+=1;continue}n.write(o),o=0,s=2;continue t}return ht.error(at.expected("hex digit",t))}if(t.isDone())return ht.error(at.expected("hex digit",t));break}break}return new e(r,n,i,o,s)},e}(ht),gi=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._sign=r,s._value=n,s._mode=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._sign,this._value,this._mode,this._step)},e.parse=function(t,r,n,i,o,s){void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=2),void 0===s&&(s=1);var u=0;if(1===s){for(;t.isCont()&&(u=t.head(),fo.isWhitespace(u));)t=t.step();if(t.isCont())45===u&&(t=t.step(),n=-1),s=2;else if(t.isDone())return ht.error(at.expected("number",t))}if(2===s)if(t.isCont())if(48===(u=t.head()))t=t.step(),s=4;else{if(!(u>=49&&u<=57))return ht.error(at.expected("digit",t));t=t.step(),i=n*(u-48),s=3}else if(t.isDone())return ht.error(at.expected("digit",t));if(3===s){for(;t.isCont()&&(u=t.head())>=48&&u<=57;){var a=10*i+n*(u-48);if(!(-9007199254740991<=a&&a<=9007199254740992))return ht.error(at.message("integer overflow",t));i=a,t=t.step()}if(t.isCont())s=4;else if(t.isDone())return ht.done(r.num(i))}if(4===s){if(t.isCont()){if(u=t.head(),o>0&&46===u||o>1&&(69===u||101===u)){var p=Z.stringOutput();return p=n<0&&0===i?p.write(45).write(48):p.write(""+i),bi.parse(t,r,p,o)}return 120===u&&n>0&&0===i?(t=t.step(),xi.parse(t,r)):ht.done(r.num(i))}if(t.isDone())return ht.done(r.num(i))}return new e(r,n,i,o,s)},e.parseInteger=function(t,r){return e.parse(t,r,void 0,void 0,0)},e.parseDecimal=function(t,r){return e.parse(t,r,void 0,void 0,1)},e}(ht),bi=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._recon=e,o._output=r,o._mode=n,o._step=i,o}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._output,this._mode,this._step)},e.parse=function(t,r,n,i,o){void 0===i&&(i=2),void 0===o&&(o=1);var s=0;if(1===o)if(t.isCont())if(46===(s=t.head()))t=t.step(),n=n.write(s),o=2;else{if(!(i>1)||69!==s&&101!==s)return ht.error(at.expected("decimal or exponent",t));t=t.step(),n=n.write(s),o=5}else if(t.isDone())return ht.error(at.expected("decimal or exponent",t));if(2===o)if(t.isCont()){if(!((s=t.head())>=48&&s<=57))return ht.error(at.expected("digit",t));t=t.step(),n=n.write(s),o=3}else if(t.isDone())return ht.error(at.expected("digit",t));if(3===o){for(;t.isCont()&&(s=t.head())>=48&&s<=57;)t=t.step(),n=n.write(s);if(t.isCont()){if(!(i>1))return ht.done(r.num(n.bind()));o=4}else if(t.isDone())return ht.done(r.num(n.bind()))}if(4===o){if(69!==(s=t.head())&&101!==s)return ht.done(r.num(n.bind()));t=t.step(),n=n.write(s),o=5}if(5===o)if(t.isCont())43!==(s=t.head())&&45!==s||(t=t.step(),n=n.write(s)),o=6;else if(t.isDone())return ht.error(at.unexpected(t));if(6===o)if(t.isCont()){if(!((s=t.head())>=48&&s<=57))return ht.error(at.expected("digit",t));t=t.step(),n=n.write(s),o=7}else if(t.isDone())return ht.error(at.expected("digit",t));if(7===o){for(;t.isCont()&&(s=t.head())>=48&&s<=57;)t=t.step(),n=n.write(s);if(!t.isEmpty())return ht.done(r.num(n.bind()))}return new e(r,n,i,o)},e}(ht),xi=function(t){function e(e,r,n){var i=t.call(this)||this;return i._recon=e,i._value=r,i._size=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._value,this._size)},e.parse=function(t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=0);for(var o=0;t.isCont()&&(o=t.head(),wt.isDigit(o));)t=t.step(),n=16*n+wt.decodeDigit(o),i+=1;return t.isEmpty()?new e(r,n,i):i>0?i<=8?ht.done(r.uint32(n)):ht.done(r.uint64(n)):ht.error(at.expected("hex digit",t))},e}(ht),Si=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._bindingsParser=n,s._templateParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._bindingsParser,this._templateParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);if(1===s){for(void 0===i&&(i=r.parseConditionalOperator(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())s=2;else if(i.isError())return i.asError()}if(2===s)if(t.isCont()){if(62!==t.head())return i;t=t.step(),s=3}else if(t.isDone())return i;if(3===s){for(void 0===o&&(o=r.parseConditionalOperator(t));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone()){var u=i.bind(),a=o.bind();return ht.done(r.lambda(u,a))}if(o.isError())return o.asError()}return new e(r,n,i,o,s)},e}(ht),Oi=function(t){function e(e,r,n,i,o,s){var u=t.call(this)||this;return u._recon=e,u._builder=r,u._ifParser=n,u._thenParser=i,u._elseParser=o,u._step=s,u}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._ifParser,this._thenParser,this._elseParser,this._step)},e.parse=function(t,r,n,i,o,s,u){void 0===u&&(u=1);var a=0;if(1===u){for(void 0===i&&(i=r.parseOrOperator(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())u=2;else if(i.isError())return i.asError()}if(2===u){for(;t.isCont()&&(a=t.head(),fo.isSpace(a));)t=t.step();if(t.isCont()){if(63!==a)return i;t=t.step(),u=3}else if(t.isDone())return i}if(3===u){for(void 0===o&&(o=r.parseConditionalOperator(t,n));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())u=4;else if(o.isError())return o.asError()}if(4===u){for(;t.isCont()&&(a=t.head(),fo.isSpace(a));)t=t.step();if(t.isCont()){if(58!==a)return ht.error(at.expected(58,t));t=t.step(),u=5}else if(t.isDone())return ht.error(at.expected(58,t))}if(5===u){for(void 0===s&&(s=r.parseConditionalOperator(t,n));s.isCont()&&!t.isEmpty();)s=s.feed(t);if(s.isDone()){var p=i.bind(),h=o.bind(),f=s.bind();return ht.done(r.conditional(p,h,f))}if(s.isError())return s.asError()}return new e(r,n,i,o,s,u)},e}(ht),Ai=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._lhsParser=n,s._rhsParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);for(;;){if(1===s){for(void 0===i&&(i=r.parseAndOperator(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())s=2;else if(i.isError())return i.asError()}if(2===s)if(t.isCont()){if(124!==t.head())return i;t=t.step(),s=3}else if(t.isDone())return i;if(3===s){for(void 0===o&&(o=r.parseAndOperator(t,n));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone()){var u=i.bind(),a=o.bind();i=ht.done(r.or(u,a)),o=void 0,s=2;continue}if(o.isError())return o.asError()}break}return new e(r,n,i,o,s)},e}(ht),Ei=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._lhsParser=n,s._rhsParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);for(;;){if(1===s){for(void 0===i&&(i=r.parseBitwiseOrOperator(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())s=2;else if(i.isError())return i.asError()}if(2===s)if(t.isCont()){if(38!==t.head())return i;t=t.step(),s=3}else if(t.isDone())return i;if(3===s){for(void 0===o&&(o=r.parseBitwiseOrOperator(t,n));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone()){var u=i.bind(),a=o.bind();i=ht.done(r.and(u,a)),o=void 0,s=2;continue}if(o.isError())return o.asError()}break}return new e(r,n,i,o,s)},e}(ht),Ci=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._lhsParser=n,s._rhsParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);for(var u=0;;){if(1===s){for(void 0===i&&(i=r.parseBitwiseXorOperator(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())s=2;else if(i.isError())return i.asError()}if(2===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()){if(124!==u)return i;t=t.step(),s=3}else if(t.isDone())return i}if(3===s)if(t.isCont()){if(124===(u=t.head()))return i;s=4}else if(t.isDone())return ht.error(at.unexpected(t));if(4===s){for(void 0===o&&(o=r.parseBitwiseXorOperator(t,n));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone()){var a=i.bind(),p=o.bind();i=ht.done(r.bitwiseOr(a,p)),o=void 0,s=2;continue}if(o.isError())return o.asError()}break}return new e(r,n,i,o,s)},e}(ht),Ii=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._lhsParser=n,s._rhsParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);for(var u=0;;){if(1===s){for(void 0===i&&(i=r.parseBitwiseAndOperator(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())s=2;else if(i.isError())return i.asError()}if(2===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()){if(94!==u)return i;t=t.step(),s=3}else if(t.isDone())return i}if(3===s){for(void 0===o&&(o=r.parseBitwiseAndOperator(t,n));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone()){var a=i.bind(),p=o.bind();i=ht.done(r.bitwiseXor(a,p)),o=void 0,s=2;continue}if(o.isError())return o.asError()}break}return new e(r,n,i,o,s)},e}(ht),Di=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._lhsParser=n,s._rhsParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._lhsParser,this._rhsParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);for(var u=0;;){if(1===s){for(void 0===i&&(i=r.parseComparisonOperator(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())s=2;else if(i.isError())return i.asError()}if(2===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()){if(38!==u)return i;t=t.step(),s=3}else if(t.isDone())return i}if(3===s)if(t.isCont()){if(38===(u=t.head()))return i;s=4}else if(t.isDone())return ht.error(at.unexpected(t));if(4===s){for(void 0===o&&(o=r.parseComparisonOperator(t,n));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone()){var a=i.bind(),p=o.bind();i=ht.done(r.bitwiseAnd(a,p)),o=void 0,s=2;continue}if(o.isError())return o.asError()}break}return new e(r,n,i,o,s)},e}(ht),ki=function(t){function e(e,r,n,i,o,s){var u=t.call(this)||this;return u._recon=e,u._builder=r,u._lhsParser=n,u._operator=i,u._rhsParser=o,u._step=s,u}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._lhsParser,this._operator,this._rhsParser,this._step)},e.parse=function(t,r,n,i,o,s,u){void 0===u&&(u=1);var a=0;if(1===u){for(void 0===i&&(i=r.parseAttrExpression(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())u=2;else if(i.isError())return i.asError()}if(2===u){for(;t.isCont()&&(a=t.head(),fo.isSpace(a));)t=t.step();if(t.isCont())if(33===a)t=t.step(),u=3;else if(60===a)t=t.step(),u=4;else if(62===a)t=t.step(),u=5;else{if(61!==a)return i;t=t.step(),u=6}else if(t.isDone())return i}if(3===u)if(t.isCont())61===(a=t.head())?(t=t.step(),o="!=",u=7):(o="!",u=7);else if(t.isDone())return ht.error(at.unexpected(t));if(4===u)if(t.isCont())61===(a=t.head())?(t=t.step(),o="<=",u=7):(o="<",u=7);else if(t.isDone())return ht.error(at.unexpected(t));if(5===u)if(t.isCont())61===(a=t.head())?(t=t.step(),o=">=",u=7):(o=">",u=7);else if(t.isDone())return ht.error(at.unexpected(t));if(6===u)if(t.isCont())if(61===(a=t.head()))t=t.step(),o="==",u=7;else{if(62===a)return i;o="=",u=7}else if(t.isDone())return ht.error(at.unexpected(t));if(7===u){for(void 0===s&&(s=r.parseAttrExpression(t,n));s.isCont()&&!t.isEmpty();)s=s.feed(t);if(s.isDone()){var p=i.bind(),h=s.bind();return"<"===o?ht.done(r.lt(p,h)):"<="===o?ht.done(r.le(p,h)):"=="===o?ht.done(r.eq(p,h)):"!="===o?ht.done(r.ne(p,h)):">="===o?ht.done(r.ge(p,h)):">"===o?ht.done(r.gt(p,h)):ht.error(at.message(o,t))}if(s.isError())return s.asError()}return new e(r,n,i,o,s,u)},e}(ht),Mi=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._fieldParser=n,s._valueParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._fieldParser,this._valueParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);for(var u=0;;){if(1===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont())if(64===u)s=2;else if(123===u||91===u)n=n||r.recordBuilder(),s=5;else if(40===u)s=4;else{if(!(33===u||34===u||36===u||37===u||39===u||43===u||45===u||u>=48&&u<=57||126===u||fo.isIdentStartChar(u)))return void 0===n?ht.done(r.extant()):ht.done(n.bind());s=3}else if(t.isDone())return void 0===n?ht.done(r.extant()):ht.done(n.bind())}if(2===s){for(void 0===i&&(i=r.parseAttr(t));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone()){(n=n||r.recordBuilder()).push(i.bind()),i=void 0,s=1;continue}if(i.isError())return i.asError()}if(3===s){for(void 0===o&&(o=r.parseAdditiveOperator(t));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())(n=n||r.valueBuilder()).push(r.item(o.bind())),o=void 0,s=6;else if(o.isError())return o.asError()}if(4===s){for(void 0===o&&(o=r.parseAdditiveOperator(t,n));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())void 0===n&&(n=r.valueBuilder()).push(r.item(o.bind())),o=void 0,s=6;else if(o.isError())return o.asError()}if(5===s){for(void 0===o&&(o=r.parseAdditiveOperator(t,n));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())o=void 0,s=6;else if(o.isError())return o.asError()}if(6===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()){if(64===u){s=1;continue}return ht.done(n.bind())}if(t.isDone())return ht.done(n.bind())}break}return new e(r,n,i,o,s)},e}(ht),Pi=function(t){function e(e,r,n,i,o,s){var u=t.call(this)||this;return u._recon=e,u._builder=r,u._lhsParser=n,u._operator=i,u._rhsParser=o,u._step=s,u}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._lhsParser,this._operator,this._rhsParser,this._step)},e.parse=function(t,r,n,i,o,s,u){void 0===u&&(u=1);for(var a=0;;){if(1===u){for(void 0===i&&(i=r.parseMultiplicativeOperator(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())u=2;else if(i.isError())return i.asError()}if(2===u){for(;t.isCont()&&(a=t.head(),fo.isSpace(a));)t=t.step();if(t.isCont())if(43===a)t=t.step(),o="+",u=3;else{if(45!==a)return i;t=t.step(),o="-",u=3}else if(t.isDone())return i}if(3===u){for(void 0===s&&(s=r.parseMultiplicativeOperator(t,n));s.isCont()&&!t.isEmpty();)s=s.feed(t);if(s.isDone()){var p=i.bind(),h=s.bind();if("+"===o)i=ht.done(r.plus(p,h));else{if("-"!==o)return ht.error(at.message(o,t));i=ht.done(r.minus(p,h))}s=void 0,o=void 0,u=2;continue}if(s.isError())return s.asError()}break}return new e(r,n,i,o,s,u)},e}(ht),Ti=function(t){function e(e,r,n,i,o,s){var u=t.call(this)||this;return u._recon=e,u._builder=r,u._lhsParser=n,u._operator=i,u._rhsParser=o,u._step=s,u}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._lhsParser,this._operator,this._rhsParser,this._step)},e.parse=function(t,r,n,i,o,s,u){void 0===u&&(u=1);for(var a=0;;){if(1===u){for(void 0===i&&(i=r.parsePrefixOperator(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())u=2;else if(i.isError())return i.asError()}if(2===u){for(;t.isCont()&&(a=t.head(),fo.isSpace(a));)t=t.step();if(t.isCont())if(42===a)t=t.step(),o="*",u=3;else if(47===a)t=t.step(),o="/",u=3;else{if(37!==a)return i;t=t.step(),o="%",u=3}else if(t.isDone())return i}if(3===u){for(void 0===s&&(s=r.parsePrefixOperator(t,n));s.isCont()&&!t.isEmpty();)s=s.feed(t);if(s.isDone()){var p=i.bind(),h=s.bind();if("*"===o)i=ht.done(r.times(p,h));else if("/"===o)i=ht.done(r.divide(p,h));else{if("%"!==o)return ht.error(at.message(o,t));i=ht.done(r.modulo(p,h))}s=void 0,o=void 0,u=2;continue}if(s.isError())return s.asError()}break}return new e(r,n,i,o,s,u)},e}(ht),Vi=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._operator=n,s._operandParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._operator,this._operandParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);var u=0;if(1===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()){if(33===u)t=t.step(),i="!";else if(126===u)t=t.step(),i="~";else if(45===u)t=t.step(),i="-";else{if(43!==u)return r.parseInvokeOperator(t,n);t=t.step(),i="+"}s=2}else if(t.isDone())return r.parseInvokeOperator(t,n)}if(2===s){for(void 0===o&&(o=r.parsePrefixOperator(t,n));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone()){var a=o.bind();return r.isDistinct(a)?"!"===i?ht.done(r.not(a)):"~"===i?ht.done(r.bitwiseNot(a)):"-"===i?ht.done(r.negative(a)):"+"===i?ht.done(r.positive(a)):ht.error(at.message(i,t)):ht.error(at.expected("value",t))}if(o.isError())return o.asError()}return new e(r,n,i,o,s)},e}(ht),zi=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._exprParser=n,s._argsParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._exprParser,this._argsParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);var u=0;if(1===s){for(void 0===i&&(i=r.parsePrimary(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())s=2;else if(i.isError())return i.asError()}for(;;){if(2===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()){if(40!==u)return i;t=t.step(),s=3}else if(t.isDone())return i}if(3===s){for(;t.isCont()&&(u=t.head(),fo.isWhitespace(u));)t=t.step();if(t.isCont()){if(41===u){t=t.step();var a=i.bind();i=ht.done(r.invoke(a,r.extant())),s=2;continue}s=4}else if(t.isDone())return ht.error(at.expected(41,t))}if(4===s){for(void 0===o&&(o=r.parseBlock(t));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())s=5;else if(o.isError())return o.asError()}if(5===s){for(;t.isCont()&&(u=t.head(),fo.isWhitespace(u));)t=t.step();if(t.isCont()){if(41===u){t=t.step();a=i.bind();var p=o.bind();i=ht.done(r.invoke(a,p)),o=void 0,s=2;continue}return ht.error(at.expected(41,t))}if(t.isDone())return ht.error(at.expected(41,t))}break}return new e(r,n,i,o,s)},e}(ht),Bi=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._recon=e,o._builder=r,o._exprParser=n,o._step=i,o}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._exprParser,this._step)},e.parse=function(t,r,n,i,o){void 0===o&&(o=1);var s=0;if(1===o){for(;t.isCont()&&(s=t.head(),fo.isSpace(s));)t=t.step();t.isCont()?40===s?(t=t.step(),o=3):o=2:t.isDone()&&(o=2)}if(2===o){for(void 0===i&&(i=r.parseLiteral(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())return i;if(i.isError())return i.asError()}if(3===o){for(void 0===i&&(i=r.parseBlockExpression(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())o=4;else if(i.isError())return i.asError()}for(;;){if(4===o){for(;t.isCont()&&(s=t.head(),fo.isSpace(s));)t=t.step();if(t.isCont()){if(44!==s)return 41===s?(t=t.step(),void 0!==i?i:ht.done(n.bind())):ht.error(at.expected(41,t));t=t.step(),void 0!==i&&(void 0===n&&(n=r.recordBuilder()).push(r.item(i.bind())),i=void 0),o=5}else if(t.isDone())return ht.error(at.expected(41,t))}if(5===o){for(void 0===i&&(i=r.parseBlockExpression(t,n));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone()){i=void 0,o=4;continue}if(i.isError())return i.asError()}break}return new e(r,n,i,o)},e}(ht),Ri=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._recon=e,o._builder=r,o._valueParser=n,o._step=i,o}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._valueParser,this._step)},e.parse=function(t,r,n,i,o){void 0===o&&(o=1);var s=0;if(1===o){for(;t.isCont()&&(s=t.head(),fo.isSpace(s));)t=t.step();if(t.isCont())if(40===s)t=t.step(),o=4;else if(123===s)n=n||r.recordBuilder(),i=r.parseRecord(t,n),o=3;else if(91===s)n=n||r.recordBuilder(),i=r.parseMarkup(t,n),o=3;else if(fo.isIdentStartChar(s))i=r.parseIdent(t),o=2;else if(34===s||39===s)i=r.parseString(t),o=2;else if(45===s||s>=48&&s<=57)i=r.parseNumber(t),o=2;else if(37===s)i=r.parseData(t),o=2;else{if(36!==s)return void 0===n?ht.done(r.extant()):ht.done(n.bind());i=r.parseSelector(t),o=2}else if(t.isDone())return void 0===n?ht.done(r.extant()):ht.done(n.bind())}if(2===o){for(;i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())return(n=n||r.valueBuilder()).push(r.item(i.bind())),ht.done(n.bind());if(i.isError())return i.asError()}if(3===o){for(;i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())return ht.done(n.bind());if(i.isError())return i.asError()}if(4===o){for(void 0===i&&(i=r.parseBlockExpression(t));i.isCont()&&!t.isEmpty();)i=i.feed(t);if(i.isDone())o=5;else if(i.isError())return i.asError()}if(5===o){for(;t.isCont()&&(s=t.head(),fo.isWhitespace(s));)t=t.step();if(t.isCont())return 41===s?(t=t.step(),(n=n||r.valueBuilder()).push(r.item(i.bind())),ht.done(n.bind())):ht.error(at.expected(41,t));if(t.isDone())return ht.error(at.expected(41,t))}return new e(r,n,i,o)},e}(ht),Fi=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._builder=r,s._selector=n,s._valueParser=i,s._step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this._recon,this._builder,this._selector,this._valueParser,this._step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);var u=0;if(1===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()&&36===u)t=t.step(),i=i||r.selector(),s=2;else if(t.isDone())return ht.error(at.expected(36,t))}if(2===s)if(t.isCont())91===(u=t.head())?(t=t.step(),s=8):64===u?(t=t.step(),s=7):58===u?(t=t.step(),s=6):42===u?(t=t.step(),s=5):35===u?(t=t.step(),s=4):s=3;else if(t.isDone())return ht.error(at.unexpected(t));for(;;){if(3===s){for(void 0===o&&(o=r.parseLiteral(t,r.valueBuilder()));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())i=r.get(i,o.bind()),o=void 0,s=10;else if(o.isError())return o.asError()}if(4===s){for(void 0===o&&(o=r.parseInteger(t));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())i=r.value(r.getItem(i,o.bind())),o=void 0,s=10;else if(o.isError())return o.asError()}if(5===s&&(t.isCont()?58===(u=t.head())?(t=t.step(),i=r.keys(i),s=10):42===u?(t=t.step(),i=r.descendants(i),s=10):(i=r.children(i),s=10):t.isDone()&&(i=r.children(i),s=10)),6===s)if(t.isCont()){if(42!==(u=t.head()))return ht.error(at.expected(42,t));t=t.step(),i=r.values(i),s=10}else if(t.isDone())return ht.error(at.expected(42,t));if(7===s){for(void 0===o&&(o=r.parseIdent(t));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())i=r.getAttr(i,o.bind()),o=void 0,s=10;else if(o.isError())return o.asError()}if(8===s){for(void 0===o&&(o=r.parseBlockExpression(t));o.isCont()&&!t.isEmpty();)o=o.feed(t);if(o.isDone())s=9;else if(o.isError())return o.asError()}if(9===s){for(;t.isCont()&&(u=t.head(),fo.isSpace(u));)t=t.step();if(t.isCont()){if(93!==u)return ht.error(at.expected(93,t));t=t.step(),i=r.filter(i,o.bind()),o=void 0,s=10}else if(t.isDone())return ht.error(at.expected(93,t))}if(10===s)if(t.isCont()){if(91===(u=t.head())){t=t.step(),s=8;continue}if(35===u){t=t.step(),s=4;continue}if(46!==u)return void 0!==n?(n.push(r.item(i)),ht.done(n.bind())):ht.done(i);t=t.step(),s=11}else if(t.isDone())return void 0!==n?(n.push(r.item(i)),ht.done(n.bind())):ht.done(i);if(11===s){if(t.isCont()){if(64===(u=t.head())){t=t.step(),s=7;continue}if(58===u){t=t.step(),s=6;continue}if(42===u){t=t.step(),s=5;continue}s=3;continue}if(t.isDone())return ht.error(at.unexpected(t))}break}return new e(r,n,i,o,s)},e}(ht),Li=function(){function t(){}return t.prototype.parseBlock=function(t){return fi.parse(t,this)},t.prototype.parseAttr=function(t){return ci.parse(t,this)},t.prototype.parseBlockItem=function(t){return li.parse(t,this)},t.prototype.parseInlineItem=function(t){return di.parse(t,this)},t.prototype.parseRecord=function(t,e){return yi.parse(t,this,e)},t.prototype.parseMarkup=function(t,e){return _i.parse(t,this,e)},t.prototype.parseData=function(t){return vi.parse(t,this)},t.prototype.parseIdent=function(t){return mi.parse(t,this)},t.prototype.parseString=function(t){return wi.parse(t,this)},t.prototype.parseNumber=function(t){return gi.parse(t,this)},t.prototype.parseInteger=function(t){return gi.parseInteger(t,this)},t.prototype.parseBlockExpression=function(t,e){return this.parseLambdaFunc(t,e)},t.prototype.parseLambdaFunc=function(t,e){return Si.parse(t,this,e)},t.prototype.parseConditionalOperator=function(t,e){return Oi.parse(t,this,e)},t.prototype.parseOrOperator=function(t,e){return Ai.parse(t,this,e)},t.prototype.parseAndOperator=function(t,e){return Ei.parse(t,this,e)},t.prototype.parseBitwiseOrOperator=function(t,e){return Ci.parse(t,this,e)},t.prototype.parseBitwiseXorOperator=function(t,e){return Ii.parse(t,this,e)},t.prototype.parseBitwiseAndOperator=function(t,e){return Di.parse(t,this,e)},t.prototype.parseComparisonOperator=function(t,e){return ki.parse(t,this,e)},t.prototype.parseAttrExpression=function(t,e){return Mi.parse(t,this,e)},t.prototype.parseAdditiveOperator=function(t,e){return Pi.parse(t,this,e)},t.prototype.parseMultiplicativeOperator=function(t,e){return Ti.parse(t,this,e)},t.prototype.parsePrefixOperator=function(t,e){return Vi.parse(t,this,e)},t.prototype.parseInvokeOperator=function(t,e){return zi.parse(t,this,e)},t.prototype.parsePrimary=function(t,e){return Bi.parse(t,this,e)},t.prototype.parseLiteral=function(t,e){return Ri.parse(t,this,e)},t.prototype.parseSelector=function(t,e){return Fi.parse(t,this,e)},t.prototype.blockParser=function(){return new fi(this)},t.prototype.parseBlockString=function(t){for(var e=Z.stringInput(t);e.isCont()&&fo.isWhitespace(e.head());)e=e.step();var r=this.parseBlock(e);if(r.isDone())for(;e.isCont()&&fo.isWhitespace(e.head());)e=e.step();return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t.prototype.parseNumberString=function(t){for(var e=Z.stringInput(t);e.isCont()&&fo.isWhitespace(e.head());)e=e.step();var r=this.parseNumber(e);if(r.isDone())for(;e.isCont()&&fo.isWhitespace(e.head());)e=e.step();return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t}(),qi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.isDistinct=function(t){return t.isDistinct()},e.prototype.item=function(t){return t},e.prototype.value=function(t){return t.toValue()},e.prototype.attr=function(t,e){return se.of.apply(se,arguments)},e.prototype.slot=function(t,e){return ue.of.apply(ue,arguments)},e.prototype.valueBuilder=function(){return pe.builder()},e.prototype.recordBuilder=function(){return fe.create()},e.prototype.dataOutput=function(){return ye.output()},e.prototype.textOutput=function(){return ve.output()},e.prototype.ident=function(t){if(t instanceof ve){var e=t.stringValue();if("true"===e)return we.from(!0);if("false"===e)return we.from(!1)}return t},e.prototype.num=function(t){if("number"==typeof t)return me.from(t);if("string"==typeof t)return me.from(+t);throw new TypeError(""+t)},e.prototype.uint32=function(t){return me.uint32(t)},e.prototype.uint64=function(t){return me.uint64(t)},e.prototype.bool=function(t){return we.from(t)},e.prototype.selector=function(){return xe.identity()},e.prototype.extant=function(){return pe.extant()},e.prototype.absent=function(){return pe.absent()},e.prototype.conditional=function(t,e,r){return t.conditional(e,r)},e.prototype.or=function(t,e){return new Me(t,e)},e.prototype.and=function(t,e){return new Pe(t,e)},e.prototype.bitwiseOr=function(t,e){return new Te(t,e)},e.prototype.bitwiseXor=function(t,e){return new Ve(t,e)},e.prototype.bitwiseAnd=function(t,e){return new ze(t,e)},e.prototype.lt=function(t,e){return new Be(t,e)},e.prototype.le=function(t,e){return new Re(t,e)},e.prototype.eq=function(t,e){return new Fe(t,e)},e.prototype.ne=function(t,e){return new Le(t,e)},e.prototype.ge=function(t,e){return new qe(t,e)},e.prototype.gt=function(t,e){return new Ne(t,e)},e.prototype.plus=function(t,e){return new Ue(t,e)},e.prototype.minus=function(t,e){return new Ke(t,e)},e.prototype.times=function(t,e){return new We(t,e)},e.prototype.divide=function(t,e){return new He(t,e)},e.prototype.modulo=function(t,e){return new je(t,e)},e.prototype.not=function(t){return new Ge(t)},e.prototype.bitwiseNot=function(t){return new Qe(t)},e.prototype.negative=function(t){return t instanceof me?t.negative():new Ze(t)},e.prototype.positive=function(t){return new Xe(t)},e.prototype.invoke=function(t,e){return new Ye(t,e)},e.prototype.lambda=function(t,e){return t.lambda(e)},e.prototype.get=function(t,e){return t.get(e)},e.prototype.getAttr=function(t,e){return t.getAttr(e)},e.prototype.getItem=function(t,e){return t.getItem(e)},e.prototype.children=function(t){return xe.literal(t).children()},e.prototype.descendants=function(t){return xe.literal(t).descendants()},e.prototype.keys=function(t){return xe.literal(t).keys()},e.prototype.values=function(t){return xe.literal(t).values()},e.prototype.filter=function(t,e){return t.filter(e)},e}(Li),Ni=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._key=r,s._value=n,s._part=i,s._step=o,s}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._key,this._value,this._part,this._step)},e.sizeOf=function(t,e,r){var n=0;return n+=1,n+=t.sizeOfValue(e),t.isExtant(t.item(r))||(n+=1,n+=t.sizeOfBlockValue(r),n+=1),n},e.write=function(t,r,n,i,o,s){if(void 0===s&&(s=1),1===s&&t.isCont()&&(t=t.write(64),s=2),2===s)if((o=void 0===o?r.writeValue(n,t):o.pull(t)).isDone()){if(o=void 0,r.isExtant(r.item(i)))return W.done();s=3}else if(o.isError())return o.asError();if(3===s&&t.isCont()&&(t=t.write(40),s=4),4===s)if((o=void 0===o?r.writeBlockValue(i,t):o.pull(t)).isDone())o=void 0,s=5;else if(o.isError())return o.asError();return 5===s&&t.isCont()?(t=t.write(41),W.done()):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e}(W),Ui=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._key=r,s._value=n,s._part=i,s._step=o,s}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._key,this._value,this._part,this._step)},e.sizeOf=function(t,e,r){var n=0;return n+=t.sizeOfValue(e),n+=1,t.isExtant(t.item(r))||(n+=t.sizeOfValue(r)),n},e.write=function(t,r,n,i,o,s){if(void 0===s&&(s=1),1===s)if((o=void 0===o?r.writeValue(n,t):o.pull(t)).isDone())o=void 0,s=2;else if(o.isError())return o.asError();if(2===s&&t.isCont()){if(t=t.write(58),r.isExtant(r.item(i)))return W.done();s=3}if(3===s){if((o=void 0===o?r.writeValue(i,t):o.pull(t)).isDone())return W.done();if(o.isError())return o.asError()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e}(W),Ki=function(t){function e(e,r,n,i,o,s,u,a,p,h,f,c){var l=t.call(this)||this;return l._recon=e,l._items=r,l._inBlock=n,l._inMarkup=i,l._inBraces=o,l._inBrackets=s,l._first=u,l._markupSafe=a,l._item=p,l._next=h,l._part=f,l._step=c,l}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._items,this._inBlock,this._inMarkup,this._inBraces,this._inBrackets,this._first,this._markupSafe,this._item,this._next,this._part,this._step)},e.sizeOf=function(t,r,n,i){for(var o,s=0,u=!1,a=!1,p=!0,h=!0;void 0!==o||r.hasNext();){var f=void 0;void 0===o?f=r.next().value:(f=o,o=void 0),r.hasNext()&&(o=r.next().value),t.isExpression(f)&&(h=!1),a&&t.isAttr(f)&&(u&&(s+=1,u=!1),s+=1,a=!1),t.isAttr(f)?(u?(s+=1,u=!1):a&&(s+=1,a=!1),s+=t.sizeOfItem(f),p=!1):a&&t.isText(f)?(u&&(s+=1,u=!1),s+=t.sizeOfMarkupText(f)):u?(p?p=!1:s+=1,s+=e.sizeOfBlockItem(t,f)):a?t.isRecord(f)&&t.isMarkupSafe(t.items(f))?(s+=t.sizeOfBlock(t.items(f),!1,!0),void 0!==o&&t.isText(o)?(s+=t.sizeOfMarkupText(o),o=void 0):void 0===o||t.isAttr(o)?(s+=1,a=!1):(s+=1,u=!0,p=!0)):(s+=1,s+=t.sizeOfItem(f),u=!0,p=!1):!h||!t.isText(f)||void 0===o||t.isField(o)||t.isText(o)||t.isBool(o)?n&&!u?(p?p=!1:s+=1,s+=e.sizeOfBlockItem(t,f)):i&&t.isText(f)&&void 0===o?(s+=1,s+=t.sizeOfMarkupText(f),s+=1):!i&&t.isValue(f)&&!t.isRecord(f)&&(!p&&void 0===o||void 0!==o&&t.isAttr(o))?(!p&&(t.isText(f)&&t.isIdent(f)||t.isNum(f)||t.isBool(f))&&(s+=1),s+=t.sizeOfItem(f)):(s+=1,s+=t.sizeOfItem(f),u=!0,p=!1):(s+=1,s+=t.sizeOfMarkupText(f),a=!0)}return u&&(s+=1),a&&(s+=1),s},e.sizeOfBlockItem=function(t,e){var r=0;return t.isField(e)?r+=t.sizeOfSlot(t.key(e),t.value(e)):r+=t.sizeOfItem(e),r},e.write=function(t,r,n,i,o,s,u,a,p,h,f,c,l){for(void 0===s&&(s=!1),void 0===u&&(u=!1),void 0===a&&(a=!0),void 0===p&&(p=!0),void 0===l&&(l=1);;){if(1===l){if(void 0===f&&!n.hasNext()){l=10;break}void 0===f?h=n.next().value:(h=f,f=void 0),n.hasNext()&&(f=n.next().value),r.isExpression(h)&&(p=!1),l=2}if(2===l&&t.isCont()&&(u&&r.isAttr(h)?(s&&(t=t.write(125),s=!1),l=3):l=4),3===l&&t.isCont()&&(t=t.write(93),u=!1,l=4),4===l&&t.isCont()&&(r.isAttr(h)?(s?(t=t.write(125),s=!1):u&&(t=t.write(93),u=!1),c=r.writeItem(h,t),a=!1,l=7):u&&r.isText(h)?(s&&(t=t.write(125),s=!1),c=r.writeMarkupText(h,t),l=7):s?(a?a=!1:t=t.write(44),c=e.writeBlockItem(t,r,h),l=7):u?r.isRecord(h)&&r.isMarkupSafe(r.items(h))?(c=r.writeBlock(r.items(h),t,!1,!0),l=5):(t=t.write(123),c=r.writeItem(h,t),s=!0,a=!1,l=7):!p||!r.isText(h)||void 0===f||r.isField(f)||r.isText(f)||r.isBool(f)?i&&!s?(a?a=!1:t=t.write(44),c=e.writeBlockItem(t,r,h),l=7):o&&r.isText(h)&&void 0===f?(t=t.write(91),c=r.writeMarkupText(h,t),l=8):!o&&r.isValue(h)&&!r.isRecord(h)&&(!a&&void 0===f||void 0!==f&&r.isAttr(f))?(!a&&(r.isText(h)&&r.isIdent(h)||r.isNum(h)||r.isBool(h))&&(t=t.write(32)),c=r.writeItem(h,t),l=7):(t=t.write(123),c=r.writeItem(h,t),s=!0,a=!1,l=7):(t=t.write(91),c=r.writeMarkupText(h,t),u=!0,l=7)),5===l)if((c=c.pull(t)).isDone())c=void 0,l=6;else if(c.isError())return c.asError();if(6===l&&t.isCont()){if(void 0===f||!r.isText(f)){if(void 0===f||r.isAttr(f)){t=t.write(93),u=!1,l=1;continue}t=t.write(123),s=!0,a=!0,l=1;continue}c=r.writeMarkupText(f,t),f=void 0,l=7}if(7===l){if((c=c.pull(t)).isDone()){c=void 0,l=1;continue}if(c.isError())return c.asError()}if(8===l)if((c=c.pull(t)).isDone())c=void 0,l=9;else if(c.isError())return c.asError();if(9!==l||!t.isCont())break;t=t.write(93),l=1}if(10===l&&(s?t.isCont()&&(t=t.write(125),l=11):l=11),11===l){if(!u)return W.done();if(t.isCont())return t=t.write(93),W.done()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s,u,a,p,h,f,c,l)},e.writeBlockItem=function(t,e,r){return e.isField(r)?e.writeSlot(e.key(r),e.value(r),t):e.writeItem(r,t)},e}(W),Wi=function(t){function e(e,r,n,i,o,s,u,a){var p=t.call(this)||this;return p._recon=e,p._items=r,p._inParens=n,p._first=i,p._item=o,p._next=s,p._part=u,p._step=a,p}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._items,this._inParens,this._first,this._item,this._next,this._part,this._step)},e.sizeOf=function(t,e){for(var r,n=0,i=!1,o=!0;void 0!==r||e.hasNext();){var s=void 0;void 0===r?s=e.next().value:(s=r,r=void 0),e.hasNext()&&(r=e.next().value),i||o||(n+=1),t.isAttr(s)?(i&&(n+=1,i=!1),n+=t.sizeOfItem(s),o=!1):i?(o?o=!1:n+=1,n+=t.sizeOfBlockItem(s)):t.isValue(s)&&!t.isRecord(s)&&(!o&&void 0===r||void 0!==r&&t.isAttr(r))?n+=t.sizeOfItem(s):(n+=1,n+=t.sizeOfItem(s),i=!0,o=!1)}return i&&(n+=1),n},e.write=function(t,r,n,i,o,s,u,a,p){for(void 0===i&&(i=!1),void 0===o&&(o=!0),void 0===p&&(p=1);;){if(1===p){if(void 0===u&&!n.hasNext()){p=5;break}void 0===u?s=n.next().value:(s=u,u=void 0),n.hasNext()&&(u=n.next().value),p=2}if(2===p&&t.isCont()&&(i||o||(t=t.write(32)),p=3),3===p&&t.isCont()&&(r.isAttr(s)?(i&&(t=t.write(41),i=!1),a=r.writeItem(s,t),o=!1,p=4):i?(o?o=!1:t=t.write(44),a=r.writeBlockItem(s,t),p=4):r.isValue(s)&&!r.isRecord(s)&&(!o&&void 0===u||void 0!==u&&r.isAttr(u))?(a=r.writeItem(s,t),p=4):(t=t.write(40),a=r.writeItem(s,t),i=!0,o=!1,p=4)),4===p){if((a=a.pull(t)).isDone()){a=void 0,p=1;continue}if(a.isError())return a.asError()}break}if(5===p){if(!i)return W.done();if(t.isCont())return t=t.write(41),W.done()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s,u,a,p)},e}(W),Hi=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._text=e,o._index=r,o._escape=n,o._step=i,o}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._text,this._index,this._escape,this._step)},e.sizeOf=function(t){for(var e=0,r=0,n=t.length;r<n;r=t.offsetByCodePoints(r,1)){var i=t.codePointAt(r);void 0===i&&(i=t.charCodeAt(r)),e+=36===i||64===i||91===i||92===i||93===i||123===i||125===i||8===i||12===i||10===i||13===i||9===i?2:i<32?6:xt.sizeOf(i)}return e},e.write=function(t,r,n,i,o){void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=1);for(var s=r.length;t.isCont();)if(1===o){if(!(n<s))return W.done();var u=r.codePointAt(n);void 0===u&&(u=r.charCodeAt(n)),n=r.offsetByCodePoints(n,1),36===u||64===u||91===u||92===u||93===u||123===u||125===u?(t=t.write(92),i=u,o=2):8===u?(t=t.write(92),i=98,o=2):12===u?(t=t.write(92),i=102,o=2):10===u?(t=t.write(92),i=110,o=2):13===u?(t=t.write(92),i=114,o=2):9===u?(t=t.write(92),i=116,o=2):u<32?(t=t.write(92),i=u,o=3):t=t.write(u)}else 2===o?(t=t.write(i),i=0,o=1):3===o?(t=t.write(117),o=4):4===o?(t=t.write(wt.uppercase().encodeDigit(i>>>12&15)),o=5):5===o?(t=t.write(wt.uppercase().encodeDigit(i>>>8&15)),o=6):6===o?(t=t.write(wt.uppercase().encodeDigit(i>>>4&15)),o=7):7===o&&(t=t.write(wt.uppercase().encodeDigit(15&i)),i=0,o=1);return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o)},e}(W),ji=function(t){function e(e,r,n){var i=t.call(this)||this;return i._array=e,i._part=r,i._step=n,i}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._array,this._part,this._step)},e.sizeOf=function(t){return 1+(Math.floor(4*t/3)+3&-4)},e.write=function(t,r,n,i){if(void 0===i&&(i=1),1===i&&t.isCont()&&(t=t.write(37),i=2),2===i){if((n=void 0===n?Dt.standard().writeUint8Array(r,t):n.pull(t)).isDone())return n=void 0,W.done();if(n.isError())return n.asError()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i)},e}(W),Gi=function(t){function e(e,r){var n=t.call(this)||this;return n._ident=e,n._index=r,n}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._ident,this._index)},e.sizeOf=function(t){return xt.sizeOf(t)},e.write=function(t,r,n){var i;void 0===n&&(n=0);var o=r.length;if(0===o)return W.error(new K("empty identifier"));for(0===n&&t.isCont()&&(void 0===(i=r.codePointAt(0))&&(i=r.charCodeAt(0)),fo.isIdentStartChar(i)&&(t=t.write(i),n=r.offsetByCodePoints(0,1)));n<o&&t.isCont();){if(void 0===(i=r.codePointAt(n))&&(i=r.charCodeAt(n)),!fo.isIdentChar(i))return W.error(new K("invalid identifier"));t=t.write(i),n=r.offsetByCodePoints(n,1)}return n>=o?W.done():t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n)},e}(W),Qi=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._string=e,o._index=r,o._escape=n,o._step=i,o}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._string,this._index,this._escape,this._step)},e.sizeOf=function(t){var e=0;e+=1;for(var r=0,n=t.length;r<n;r=t.offsetByCodePoints(r,1)){var i=t.codePointAt(r);void 0===i&&(i=t.charCodeAt(r)),e+=34===i||92===i||8===i||12===i||10===i||13===i||9===i?2:i<32?6:xt.sizeOf(i)}return e+=1},e.write=function(t,r,n,i,o){void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=1),1===o&&t.isCont()&&(t=t.write(34),o=2);for(var s=r.length;o>=2&&o<=8&&t.isCont();)if(2===o){if(!(n<s)){o=9;break}var u=r.codePointAt(n);void 0===u&&(u=r.charCodeAt(n)),n=r.offsetByCodePoints(n,1),34===u||92===u?(t=t.write(92),i=u,o=3):8===u?(t=t.write(92),i=98,o=3):12===u?(t=t.write(92),i=102,o=3):10===u?(t=t.write(92),i=110,o=3):13===u?(t=t.write(92),i=114,o=3):9===u?(t=t.write(92),i=116,o=3):u<32?(t=t.write("\\"),i=u,o=4):t=t.write(u)}else 3===o?(t=t.write(i),i=0,o=2):4===o?(t=t.write(117),o=5):5===o?(t=t.write(wt.uppercase().encodeDigit(i>>>12&15)),o=6):6===o?(t=t.write(wt.uppercase().encodeDigit(i>>>8&15)),o=7):7===o?(t=t.write(wt.uppercase().encodeDigit(i>>>4&15)),o=8):8===o&&(t=t.write(wt.uppercase().encodeDigit(15&i)),i=0,o=2);return 9===o&&t.isCont()?(t=t.write(34),W.done()):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o)},e}(W),Zi=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._bindings=r,s._template=n,s._part=i,s._step=o,s}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._bindings,this._template,this._part,this._step)},e.sizeOf=function(t,e,r){var n=0;return n+=t.sizeOfPrimary(e),n+=4,n+=t.sizeOfValue(r)},e.write=function(t,r,n,i,o,s){if(void 0===s&&(s=1),1===s)if((o=void 0===o?r.writePrimary(n,t):o.pull(t)).isDone())o=void 0,s=2;else if(o.isError())return o.asError();if(2===s&&t.isCont()&&(t=t.write(32),s=3),3===s&&t.isCont()&&(t=t.write(61),s=4),4===s&&t.isCont()&&(t=t.write(62),s=5),5===s&&t.isCont()&&(t=t.write(32),s=6),6===s){if((o=void 0===o?r.writeValue(i,t):o.pull(t)).isDone())return W.done();if(o.isError())return o.asError()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e}(W),Xi=function(t){function e(e,r,n,i,o,s,u){var a=t.call(this)||this;return a._recon=e,a._ifTerm=r,a._thenTerm=n,a._elseTerm=i,a._precedence=o,a._part=s,a._step=u,a}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._ifTerm,this._thenTerm,this._elseTerm,this._precedence,this._part,this._step)},e.sizeOf=function(t,e,r,n,i){var o=0;return t.precedence(e)>0&&t.precedence(e)<=i?(o+=1,o+=t.sizeOfItem(e),o+=1):o+=t.sizeOfItem(e),o+=3,o+=t.sizeOfItem(r),o+=3,o+=t.sizeOfItem(n)},e.write=function(t,r,n,i,o,s,u,a){if(void 0===a&&(a=1),1===a&&(r.precedence(n)>0&&r.precedence(n)<=s?t.isCont()&&(t=t.write(40),a=2):a=2),2===a)if((u=void 0===u?r.writeItem(n,t):u.pull(t)).isDone())u=void 0,a=3;else if(u.isError())return u.asError();if(3===a&&(r.precedence(n)>0&&r.precedence(n)<=s?t.isCont()&&(t=t.write(41),a=4):a=4),4===a&&t.isCont()&&(t=t.write(32),a=5),5===a&&t.isCont()&&(t=t.write(63),a=6),6===a&&t.isCont()&&(t=t.write(32),a=7),7===a)if((u=void 0===u?r.writeItem(i,t):u.pull(t)).isDone())u=void 0,a=8;else if(u.isError())return u.asError();if(8===a&&t.isCont()&&(t=t.write(32),a=9),9===a&&t.isCont()&&(t=t.write(58),a=10),10===a&&t.isCont()&&(t=t.write(32),a=11),11===a){if((u=void 0===u?r.writeItem(o,t):u.pull(t)).isDone())return W.done();if(u.isError())return u.asError()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s,u,a)},e}(W),Yi=function(t){function e(e,r,n,i,o,s,u){var a=t.call(this)||this;return a._recon=e,a._lhs=r,a._operator=n,a._rhs=i,a._precedence=o,a._part=s,a._step=u,a}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._lhs,this._operator,this._rhs,this._precedence,this._part,this._step)},e.sizeOf=function(t,e,r,n,i){var o=0;return t.precedence(e)<i?(o+=1,o+=t.sizeOfItem(e),o+=1):o+=t.sizeOfItem(e),o+=1,o+=xt.sizeOf(r),o+=1,t.precedence(n)<i?(o+=1,o+=t.sizeOfItem(n),o+=1):o+=t.sizeOfItem(n),o},e.write=function(t,r,n,i,o,s,u,a){if(void 0===a&&(a=1),1===a&&(r.precedence(n)<s?t.isCont()&&(t=t.write(40),a=2):a=2),2===a)if((u=void 0===u?r.writeItem(n,t):u.pull(t)).isDone())u=void 0,a=3;else if(u.isError())return u.asError();if(3===a&&(r.precedence(n)<s?t.isCont()&&(t=t.write(41),a=4):a=4),4===a&&t.isCont()&&(t=t.write(32),a=5),5===a)if((u=void 0===u?Z.writeString(i,t):u.pull(t)).isDone())u=void 0,a=6;else if(u.isError())return u.asError();if(6===a&&t.isCont()&&(t=t.write(32),a=7),7===a&&(r.precedence(o)<s?t.isCont()&&(t=t.write(40),a=8):a=8),8===a)if((u=void 0===u?r.writeItem(o,t):u.pull(t)).isDone())u=void 0,a=9;else if(u.isError())return u.asError();if(9===a){if(!(r.precedence(o)<s))return W.done();if(t.isCont())return t=t.write(41),W.done()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s,u,a)},e}(W),$i=function(t){function e(e,r,n,i,o,s){var u=t.call(this)||this;return u._recon=e,u._operator=r,u._rhs=n,u._precedence=i,u._part=o,u._step=s,u}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._operator,this._rhs,this._precedence,this._part,this._step)},e.sizeOf=function(t,e,r,n){var i=0;return i+=xt.sizeOf(e),t.precedence(r)<n?(i+=1,i+=t.sizeOfItem(r),i+=1):i+=t.sizeOfItem(r),i},e.write=function(t,r,n,i,o,s,u){if(void 0===u&&(u=1),1===u)if((s=void 0===s?Z.writeString(n,t):s.pull(t)).isDone())s=void 0,u=2;else if(s.isError())return s.asError();if(2===u&&(r.precedence(i)<o?t.isCont()&&(t=t.write(40),u=3):u=3),3===u)if((s=void 0===s?r.writeItem(i,t):s.pull(t)).isDone())s=void 0,u=4;else if(s.isError())return s.asError();if(4===u){if(!(r.precedence(i)<o))return W.done();if(t.isCont())return t=t.write(41),W.done()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s,u)},e}(W),Ji=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._func=r,s._args=n,s._part=i,s._step=o,s}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._func,this._args,this._part,this._step)},e.sizeOf=function(t,e,r){var n=0;return n+=t.sizeOfValue(e),n+=1,n+=t.sizeOfBlockValue(r),n+=1},e.write=function(t,r,n,i,o,s){if(void 0===s&&(s=1),1===s)if((o=void 0===o?r.writeValue(n,t):o.pull(t)).isDone())o=void 0,s=2;else if(o.isError())return o.asError();if(2===s&&t.isCont()&&(t=t.write(40),s=3),3===s)if((o=void 0===o?r.writeBlockValue(i,t):o.pull(t)).isDone())o=void 0,s=4;else if(o.isError())return o.asError();return 4===s&&t.isCont()?(t=t.write(41),W.done()):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e}(W),to=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._item=r,s._then=n,s._part=i,s._step=o,s}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._item,this._then,this._part,this._step)},e.sizeOf=function(t,e,r){var n=0;return t.precedence(e)<t.precedence(t.item(r))?(n+=1,n+=t.sizeOfItem(e),n+=1):n+=t.sizeOfItem(e),n+=t.sizeOfThen(r)},e.write=function(t,r,n,i,o,s){if(void 0===s&&(s=1),1===s&&(r.precedence(n)<r.precedence(r.item(i))?t.isCont()&&(t=t.write(40),s=2):s=2),2===s)if((o=void 0===o?r.writeItem(n,t):o.pull(t)).isDone())o=void 0,s=3;else if(o.isError())return o.asError();return 3===s&&(r.precedence(n)<r.precedence(r.item(i))?t.isCont()&&(t=t.write(41),s=4):s=4),4===s?r.writeThen(i,t):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e}(W),eo=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._key=r,s._then=n,s._part=i,s._step=o,s}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._key,this._then,this._part,this._step)},e.sizeOf=function(t,e,r){var n=1;return t.isRecord(t.item(e))?(n+=1,n+=t.sizeOfBlockValue(e),n+=1):n+=t.sizeOfValue(e),n+=t.sizeOfThen(r)},e.write=function(t,r,n,i,o,s){if(void 0===s&&(s=1),1===s&&t.isCont()?(t=t.write(36),s=3):2===s&&t.isCont()&&(t=t.write(46),s=3),3===s&&(r.isRecord(r.item(n))?t.isCont()&&(t=t.write(123),s=4):s=4),4===s)if((o=void 0===o?r.isRecord(r.item(n))?r.writeBlockValue(n,t):r.writeValue(n,t):o.pull(t)).isDone())o=void 0,s=5;else if(o.isError())return o.asError();return 5===s&&(r.isRecord(r.item(n))?t.isCont()&&(t=t.write(125),s=6):s=6),6===s?r.writeThen(i,t):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e.writeThen=function(t,r,n,i){return e.write(t,r,n,i,void 0,2)},e}(W),ro=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._key=r,s._then=n,s._part=i,s._step=o,s}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._key,this._then,this._part,this._step)},e.sizeOf=function(t,e,r){var n=2;return n+=t.sizeOfValue(e),n+=t.sizeOfThen(r)},e.write=function(t,r,n,i,o,s){if(void 0===s&&(s=1),1===s&&t.isCont()?(t=t.write(36),s=3):2===s&&t.isCont()&&(t=t.write(46),s=3),3===s&&t.isCont()&&(t=t.write(64),s=4),4===s){if((o=void 0===o?r.writeValue(n,t):o.pull(t)).isDone())return r.writeThen(i,t);if(o.isError())return o.asError()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e.writeThen=function(t,r,n,i){return e.write(t,r,n,i,void 0,2)},e}(W),no=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._index=r,s._then=n,s._part=i,s._step=o,s}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._index,this._then,this._part,this._step)},e.sizeOf=function(t,e,r){var n=2;return n+=t.sizeOfValue(e),n+=t.sizeOfThen(r)},e.sizeOfThen=function(t,e,r){var n=1;return n+=t.sizeOfValue(e),n+=t.sizeOfThen(r)},e.write=function(t,r,n,i,o,s){if(void 0===s&&(s=1),1===s&&t.isCont()&&(t=t.write(36),s=2),2===s&&t.isCont()&&(t=t.write(35),s=3),3===s){if((o=void 0===o?r.writeValue(n,t):o.pull(t)).isDone())return r.writeThen(i,t);if(o.isError())return o.asError()}return t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e.writeThen=function(t,r,n,i){return e.write(t,r,n,i,void 0,2)},e}(W),io=function(t){function e(e,r,n){var i=t.call(this)||this;return i._recon=e,i._then=r,i._step=n,i}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._then,this._step)},e.sizeOf=function(t,e){var r=3;return r+=t.sizeOfThen(e)},e.write=function(t,r,n,i){return void 0===i&&(i=1),1===i&&t.isCont()?(t=t.write(36),i=3):2===i&&t.isCont()&&(t=t.write(46),i=3),3===i&&t.isCont()&&(t=t.write(42),i=4),4===i&&t.isCont()?(t=t.write(58),r.writeThen(n,t)):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i)},e.writeThen=function(t,r,n){return e.write(t,r,n,2)},e}(W),oo=function(t){function e(e,r,n){var i=t.call(this)||this;return i._recon=e,i._then=r,i._step=n,i}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._then,this._step)},e.sizeOf=function(t,e){var r=3;return r+=t.sizeOfThen(e)},e.write=function(t,r,n,i){return void 0===i&&(i=1),1===i&&t.isCont()?(t=t.write(36),i=3):2===i&&t.isCont()&&(t=t.write(46),i=3),3===i&&t.isCont()&&(t=t.write(58),i=4),4===i&&t.isCont()?(t=t.write(42),r.writeThen(n,t)):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i)},e.writeThen=function(t,r,n){return e.write(t,r,n,2)},e}(W),so=function(t){function e(e,r,n){var i=t.call(this)||this;return i._recon=e,i._then=r,i._step=n,i}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._then,this._step)},e.sizeOf=function(t,e){var r=2;return r+=t.sizeOfThen(e)},e.write=function(t,r,n,i){return void 0===i&&(i=1),1===i&&t.isCont()?(t=t.write(36),i=3):2===i&&t.isCont()&&(t=t.write(46),i=3),3===i&&t.isCont()?(t=t.write(42),r.writeThen(n,t)):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i)},e.writeThen=function(t,r,n){return e.write(t,r,n,2)},e}(W),uo=function(t){function e(e,r,n){var i=t.call(this)||this;return i._recon=e,i._then=r,i._step=n,i}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._then,this._step)},e.sizeOf=function(t,e){var r=3;return r+=t.sizeOfThen(e)},e.write=function(t,r,n,i){return void 0===i&&(i=1),1===i&&t.isCont()?(t=t.write(36),i=3):2===i&&t.isCont()&&(t=t.write(46),i=3),3===i&&t.isCont()&&(t=t.write(42),i=4),4===i&&t.isCont()?(t=t.write(42),r.writeThen(n,t)):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i)},e.writeThen=function(t,r,n){return e.write(t,r,n,2)},e}(W),ao=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s._recon=e,s._predicate=r,s._then=n,s._part=i,s._step=o,s}return y(e,t),e.prototype.pull=function(t){return e.write(t,this._recon,this._predicate,this._then,this._part,this._step)},e.sizeOf=function(t,e,r){var n=2;return n+=t.sizeOfValue(e),n+=1,n+=t.sizeOfThen(r)},e.sizeOfThen=function(t,e,r){var n=1;return n+=t.sizeOfValue(e),n+=1,n+=t.sizeOfThen(r)},e.write=function(t,r,n,i,o,s){if(void 0===s&&(s=1),1===s&&t.isCont()&&(t=t.write(36),s=2),2===s&&t.isCont()&&(t=t.write(91),s=3),3===s)if((o=void 0===o?r.writeValue(n,t):o.pull(t)).isDone())o=void 0,s=4;else if(o.isError())return o.asError();return 4===s&&t.isCont()?(t=t.write(93),r.writeThen(i,t)):t.isDone()?W.error(new K("truncated")):t.isError()?W.error(t.trap()):new e(r,n,i,o,s)},e.writeThen=function(t,r,n,i){return e.write(t,r,n,i,void 0,2)},e}(W),po=function(){function t(){}return t.prototype.sizeOfAttr=function(t,e){return Ni.sizeOf(this,t,e)},t.prototype.writeAttr=function(t,e,r){return Ni.write(r,this,t,e)},t.prototype.sizeOfSlot=function(t,e){return Ui.sizeOf(this,t,e)},t.prototype.writeSlot=function(t,e,r){return Ui.write(r,this,t,e)},t.prototype.sizeOfBlock=function(t,e,r){if(3===arguments.length)return Ki.sizeOf(this,t,e,r);var n=this.items(t);return n.hasNext()?Ki.sizeOf(this,n,this.isBlockSafe(this.items(t)),!1):2},t.prototype.writeBlock=function(t,e,r,n){if(4===arguments.length)return Ki.write(e,this,t,r,n);var i=this.items(t);return i.hasNext()?Ki.write(e,this,i,this.isBlockSafe(this.items(t)),!1):Z.writeString("{}",e)},t.prototype.sizeOfRecord=function(t){var e=this.items(t);return e.hasNext()?Ki.sizeOf(this,e,!1,!1):2},t.prototype.writeRecord=function(t,e){var r=this.items(t);return r.hasNext()?Ki.write(e,this,r,!1,!1):Z.writeString("{}",e)},t.prototype.sizeOfPrimary=function(t){if(this.isRecord(this.item(t))){var e=this.items(this.item(t));if(e.hasNext())return Wi.sizeOf(this,e)}else if(!this.isExtant(this.item(t)))return this.sizeOfValue(t);return 2},t.prototype.writePrimary=function(t,e){if(this.isRecord(this.item(t))){var r=this.items(this.item(t));if(r.hasNext())return Wi.write(e,this,r)}else if(!this.isExtant(this.item(t)))return this.writeValue(t,e);return Z.writeString("()",e)},t.prototype.isBlockSafe=function(t){for(;t.hasNext();)if(this.isAttr(t.next().value))return!1;return!0},t.prototype.isMarkupSafe=function(t){if(!t.hasNext()||!this.isAttr(t.next().value))return!1;for(;t.hasNext();)if(this.isAttr(t.next().value))return!1;return!0},t.prototype.sizeOfMarkupText=function(t){return"string"!=typeof t&&(t=this.string(t)),Hi.sizeOf(t)},t.prototype.writeMarkupText=function(t,e){return"string"!=typeof t&&(t=this.string(t)),Hi.write(e,t)},t.prototype.sizeOfData=function(t){return ji.sizeOf(t)},t.prototype.writeData=function(t,e){return void 0!==t?ji.write(e,t):Z.writeString("%",e)},t.prototype.isIdent=function(t){"string"!=typeof t&&(t=this.string(t));var e,r=t.length;if(0===r||void 0!==(e=t.codePointAt(0))&&!fo.isIdentStartChar(e))return!1;for(var n=t.offsetByCodePoints(0,1);n<r;n=t.offsetByCodePoints(n,1))if(void 0===(e=t.codePointAt(n))||!fo.isIdentChar(e))return!1;return!0},t.prototype.sizeOfText=function(t){return this.isIdent(t)?Gi.sizeOf(t):Qi.sizeOf(t)},t.prototype.writeText=function(t,e){return this.isIdent(t)?Gi.write(e,t):Qi.write(e,t)},t.prototype.sizeOfNum=function(t){if(isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<2147483648){var e=ut.countDigits(t);return t<0&&(e+=1),e}return(""+t).length},t.prototype.writeNum=function(t,e){return isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<2147483648?ut.writeInteger(t,e):Z.writeString(""+t,e)},t.prototype.sizeOfUint32=function(t){return 10},t.prototype.writeUint32=function(t,e){return wt.lowercase().writeIntegerLiteral(t,e,8)},t.prototype.sizeOfUint64=function(t){return 18},t.prototype.writeUint64=function(t,e){return wt.lowercase().writeIntegerLiteral(t,e,16)},t.prototype.sizeOfBool=function(t){return t?4:5},t.prototype.writeBool=function(t,e){return Z.writeString(t?"true":"false",e)},t.prototype.sizeOfLambdaFunc=function(t,e){return Zi.sizeOf(this,t,e)},t.prototype.writeLambdaFunc=function(t,e,r){return Zi.write(r,this,t,e)},t.prototype.sizeOfConditionalOperator=function(t,e,r,n){return Xi.sizeOf(this,t,e,r,n)},t.prototype.writeConditionalOperator=function(t,e,r,n,i){return Xi.write(i,this,t,e,r,n)},t.prototype.sizeOfInfixOperator=function(t,e,r,n){return Yi.sizeOf(this,t,e,r,n)},t.prototype.writeInfixOperator=function(t,e,r,n,i){return Yi.write(i,this,t,e,r,n)},t.prototype.sizeOfPrefixOperator=function(t,e,r){return $i.sizeOf(this,t,e,r)},t.prototype.writePrefixOperator=function(t,e,r,n){return $i.write(n,this,t,e,r)},t.prototype.sizeOfInvokeOperator=function(t,e){return Ji.sizeOf(this,t,e)},t.prototype.writeInvokeOperator=function(t,e,r){return Ji.write(r,this,t,e)},t.prototype.sizeOfIdentitySelector=function(){return 0},t.prototype.writeIdentitySelector=function(t){return W.done()},t.prototype.sizeOfThenIdentitySelector=function(){return 0},t.prototype.writeThenIdentitySelector=function(t){return W.done()},t.prototype.sizeOfLiteralSelector=function(t,e){return to.sizeOf(this,t,e)},t.prototype.writeLiteralSelector=function(t,e,r){return to.write(r,this,t,e)},t.prototype.sizeOfThenLiteralSelector=function(t,e){return 0},t.prototype.writeThenLiteralSelector=function(t,e,r){return W.done()},t.prototype.sizeOfGetSelector=function(t,e){return eo.sizeOf(this,t,e)},t.prototype.writeGetSelector=function(t,e,r){return eo.write(r,this,t,e)},t.prototype.sizeOfThenGetSelector=function(t,e){return eo.sizeOf(this,t,e)},t.prototype.writeThenGetSelector=function(t,e,r){return eo.writeThen(r,this,t,e)},t.prototype.sizeOfGetAttrSelector=function(t,e){return ro.sizeOf(this,t,e)},t.prototype.writeGetAttrSelector=function(t,e,r){return ro.write(r,this,t,e)},t.prototype.sizeOfThenGetAttrSelector=function(t,e){return ro.sizeOf(this,t,e)},t.prototype.writeThenGetAttrSelector=function(t,e,r){return ro.writeThen(r,this,t,e)},t.prototype.sizeOfGetItemSelector=function(t,e){return no.sizeOf(this,t,e)},t.prototype.writeGetItemSelector=function(t,e,r){return no.write(r,this,t,e)},t.prototype.sizeOfThenGetItemSelector=function(t,e){return no.sizeOfThen(this,t,e)},t.prototype.writeThenGetItemSelector=function(t,e,r){return no.writeThen(r,this,t,e)},t.prototype.sizeOfKeysSelector=function(t){return io.sizeOf(this,t)},t.prototype.writeKeysSelector=function(t,e){return io.write(e,this,t)},t.prototype.sizeOfThenKeysSelector=function(t){return io.sizeOf(this,t)},t.prototype.writeThenKeysSelector=function(t,e){return io.writeThen(e,this,t)},t.prototype.sizeOfValuesSelector=function(t){return oo.sizeOf(this,t)},t.prototype.writeValuesSelector=function(t,e){return oo.write(e,this,t)},t.prototype.sizeOfThenValuesSelector=function(t){return oo.sizeOf(this,t)},t.prototype.writeThenValuesSelector=function(t,e){return oo.writeThen(e,this,t)},t.prototype.sizeOfChildrenSelector=function(t){return so.sizeOf(this,t)},t.prototype.writeChildrenSelector=function(t,e){return so.write(e,this,t)},t.prototype.sizeOfThenChildrenSelector=function(t){return so.sizeOf(this,t)},t.prototype.writeThenChildrenSelector=function(t,e){return so.writeThen(e,this,t)},t.prototype.sizeOfDescendantsSelector=function(t){return uo.sizeOf(this,t)},t.prototype.writeDescendantsSelector=function(t,e){return uo.write(e,this,t)},t.prototype.sizeOfThenDescendantsSelector=function(t){return uo.sizeOf(this,t)},t.prototype.writeThenDescendantsSelector=function(t,e){return uo.writeThen(e,this,t)},t.prototype.sizeOfFilterSelector=function(t,e){return ao.sizeOf(this,t,e)},t.prototype.writeFilterSelector=function(t,e,r){return ao.write(r,this,t,e)},t.prototype.sizeOfThenFilterSelector=function(t,e){return ao.sizeOfThen(this,t,e)},t.prototype.writeThenFilterSelector=function(t,e,r){return ao.writeThen(r,this,t,e)},t.prototype.sizeOfExtant=function(){return 0},t.prototype.writeExtant=function(t){return W.done()},t.prototype.sizeOfAbsent=function(){return 0},t.prototype.writeAbsent=function(t){return W.done()},t}(),ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.isField=function(t){return t instanceof re},e.prototype.isAttr=function(t){return t instanceof se},e.prototype.isSlot=function(t){return t instanceof ue},e.prototype.isValue=function(t){return t instanceof pe},e.prototype.isRecord=function(t){return t instanceof fe},e.prototype.isText=function(t){return t instanceof ve},e.prototype.isNum=function(t){return t instanceof me},e.prototype.isBool=function(t){return t instanceof we},e.prototype.isExpression=function(t){return t instanceof ge},e.prototype.isExtant=function(t){return t instanceof Oe},e.prototype.items=function(t){return t.iterator()},e.prototype.item=function(t){return t},e.prototype.key=function(t){return t.key},e.prototype.value=function(t){return t.toValue()},e.prototype.string=function(t){return t.stringValue("")},e.prototype.precedence=function(t){return t.precedence()},e.prototype.sizeOfItem=function(t){if(t instanceof re){if(t instanceof se)return this.sizeOfAttr(t.key,t.value);if(t instanceof ue)return this.sizeOfSlot(t.key,t.value)}else if(t instanceof pe)return this.sizeOfValue(t);throw new K("No Recon serialization for "+t)},e.prototype.writeItem=function(t,e){if(t instanceof re){if(t instanceof se)return this.writeAttr(t.key,t.value,e);if(t instanceof ue)return this.writeSlot(t.key,t.value,e)}else if(t instanceof pe)return this.writeValue(t,e);return W.error(new K("No Recon serialization for "+t))},e.prototype.sizeOfValue=function(t){if(t instanceof fe)return this.sizeOfRecord(t);if(t instanceof ye)return this.sizeOfData(t.size);if(t instanceof ve)return this.sizeOfText(t.value);if(t instanceof me)return t.isUint32()?this.sizeOfUint32(t.value):t.isUint64()?this.sizeOfUint64(t.value):this.sizeOfNum(t.value);if(t instanceof we)return this.sizeOfBool(t.value);if(t instanceof xe)return this.sizeOfSelector(t);if(t instanceof be)return this.sizeOfOperator(t);if(t instanceof Se)return this.sizeOfFunc(t);if(t instanceof Oe)return this.sizeOfExtant();if(t instanceof Ae)return this.sizeOfAbsent();throw new K("No Recon serialization for "+t)},e.prototype.writeValue=function(t,e){return t instanceof fe?this.writeRecord(t,e):t instanceof ye?this.writeData(t.asUint8Array(),e):t instanceof ve?this.writeText(t.value,e):t instanceof me?t.isUint32()?this.writeUint32(t.value,e):t.isUint64()?this.writeUint64(t.value,e):this.writeNum(t.value,e):t instanceof we?this.writeBool(t.value,e):t instanceof xe?this.writeSelector(t,e):t instanceof be?this.writeOperator(t,e):t instanceof Se?this.writeFunc(t,e):t instanceof Oe?this.writeExtant(e):t instanceof Ae?this.writeAbsent(e):W.error(new K("No Recon serialization for "+t))},e.prototype.sizeOfSelector=function(t){if(t instanceof $e)return this.sizeOfIdentitySelector();if(t instanceof ur)return this.sizeOfLiteralSelector(t.item(),t.then());if(t instanceof Je)return this.sizeOfGetSelector(t.accessor(),t.then());if(t instanceof tr)return this.sizeOfGetAttrSelector(t.accessor(),t.then());if(t instanceof er)return this.sizeOfGetItemSelector(t.accessor(),t.then());if(t instanceof rr)return this.sizeOfKeysSelector(t.then());if(t instanceof nr)return this.sizeOfValuesSelector(t.then());if(t instanceof ir)return this.sizeOfChildrenSelector(t.then());if(t instanceof or)return this.sizeOfDescendantsSelector(t.then());if(t instanceof sr)return this.sizeOfFilterSelector(t.predicate(),t.then());throw new K("No Recon serialization for "+t)},e.prototype.writeSelector=function(t,e){return t instanceof $e?this.writeIdentitySelector(e):t instanceof ur?this.writeLiteralSelector(t.item(),t.then(),e):t instanceof Je?this.writeGetSelector(t.accessor(),t.then(),e):t instanceof tr?this.writeGetAttrSelector(t.accessor(),t.then(),e):t instanceof er?this.writeGetItemSelector(t.accessor(),t.then(),e):t instanceof rr?this.writeKeysSelector(t.then(),e):t instanceof nr?this.writeValuesSelector(t.then(),e):t instanceof ir?this.writeChildrenSelector(t.then(),e):t instanceof or?this.writeDescendantsSelector(t.then(),e):t instanceof sr?this.writeFilterSelector(t.predicate(),t.then(),e):W.error(new K("No Recon serialization for "+t))},e.prototype.sizeOfOperator=function(t){if(t instanceof Ie)return this.sizeOfInfixOperator(t.operand1(),t.operator(),t.operand2(),t.precedence());if(t instanceof De)return this.sizeOfPrefixOperator(t.operator(),t.operand(),t.precedence());if(t instanceof Ye)return this.sizeOfInvokeOperator(t.func(),t.args());if(t instanceof ke)return this.sizeOfConditionalOperator(t.ifTerm(),t.thenTerm(),t.elseTerm(),t.precedence());throw new K("No Recon serialization for "+t)},e.prototype.writeOperator=function(t,e){return t instanceof Ie?this.writeInfixOperator(t.operand1(),t.operator(),t.operand2(),t.precedence(),e):t instanceof De?this.writePrefixOperator(t.operator(),t.operand(),t.precedence(),e):t instanceof Ye?this.writeInvokeOperator(t.func(),t.args(),e):t instanceof ke?this.writeConditionalOperator(t.ifTerm(),t.thenTerm(),t.elseTerm(),t.precedence(),e):W.error(new K("No Recon serialization for "+t))},e.prototype.sizeOfFunc=function(t){if(t instanceof ar)return this.sizeOfLambdaFunc(t.bindings(),t.template());if(t instanceof pr)return 0;throw new K("No Recon serialization for "+t)},e.prototype.writeFunc=function(t,e){return t instanceof ar?this.writeLambdaFunc(t.bindings(),t.template(),e):t instanceof pr?W.done():W.error(new K("No Recon serialization for "+t))},e.prototype.sizeOfBlockItem=function(t){if(t instanceof re)return this.sizeOfItem(t);if(t instanceof pe)return this.sizeOfBlockValue(t);throw new K("No Recon serialization for "+t)},e.prototype.writeBlockItem=function(t,e){return t instanceof re?this.writeItem(t,e):t instanceof pe?this.writeBlockValue(t,e):W.error(new K("No Recon serialization for "+t))},e.prototype.sizeOfBlockValue=function(t){return t instanceof fe?this.sizeOfBlock(t):this.sizeOfValue(t)},e.prototype.writeBlockValue=function(t,e){return t instanceof fe?this.writeBlock(t,e):this.writeValue(t,e)},e.prototype.sizeOfThen=function(t){if(t instanceof xe){if(t instanceof $e)return this.sizeOfThenIdentitySelector();if(t instanceof ur)return this.sizeOfThenLiteralSelector(t.item(),t.then());if(t instanceof Je)return this.sizeOfThenGetSelector(t.accessor(),t.then());if(t instanceof tr)return this.sizeOfThenGetAttrSelector(t.accessor(),t.then());if(t instanceof er)return this.sizeOfThenGetItemSelector(t.accessor(),t.then());if(t instanceof rr)return this.sizeOfThenKeysSelector(t.then());if(t instanceof nr)return this.sizeOfThenValuesSelector(t.then());if(t instanceof ir)return this.sizeOfThenChildrenSelector(t.then());if(t instanceof or)return this.sizeOfThenDescendantsSelector(t.then());if(t instanceof sr)return this.sizeOfThenFilterSelector(t.predicate(),t.then())}throw new K("No Recon serialization for "+t)},e.prototype.writeThen=function(t,e){if(t instanceof xe){if(t instanceof $e)return this.writeThenIdentitySelector(e);if(t instanceof ur)return this.writeThenLiteralSelector(t.item(),t.then(),e);if(t instanceof Je)return this.writeThenGetSelector(t.accessor(),t.then(),e);if(t instanceof tr)return this.writeThenGetAttrSelector(t.accessor(),t.then(),e);if(t instanceof er)return this.writeThenGetItemSelector(t.accessor(),t.then(),e);if(t instanceof rr)return this.writeThenKeysSelector(t.then(),e);if(t instanceof nr)return this.writeThenValuesSelector(t.then(),e);if(t instanceof ir)return this.writeThenChildrenSelector(t.then(),e);if(t instanceof or)return this.writeThenDescendantsSelector(t.then(),e);if(t instanceof sr)return this.writeThenFilterSelector(t.predicate(),t.then(),e)}return W.error(new K("No Recon serialization for "+t))},e}(po),fo=function(){function t(){}return t.isSpace=function(t){return 32===t||9===t},t.isNewline=function(t){return 10===t||13===t},t.isWhitespace=function(e){return t.isSpace(e)||t.isNewline(e)},t.isIdentStartChar=function(t){return t>=65&&t<=90||95===t||t>=97&&t<=122||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=767||t>=880&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039},t.isIdentChar=function(t){return 45===t||t>=48&&t<=57||t>=65&&t<=90||95===t||t>=97&&t<=122||183===t||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039},t.structureParser=function(){return void 0===t._structureParser&&(t._structureParser=new qi),t._structureParser},t.structureWriter=function(){return void 0===t._structureWriter&&(t._structureWriter=new ho),t._structureWriter},t.parse=function(e){return t.structureParser().parseBlockString(e)},t.parser=function(){return t.structureParser().blockParser()},t.sizeOf=function(e){return t.structureWriter().sizeOfItem(e)},t.sizeOfBlock=function(e){return t.structureWriter().sizeOfBlockItem(e)},t.write=function(e,r){return t.structureWriter().writeItem(e,r)},t.writeBlock=function(e,r){return t.structureWriter().writeBlockItem(e,r)},t.toString=function(e){var r=Z.stringOutput();return t.write(e,r),r.bind()},t.toBlockString=function(e){var r=Z.stringOutput();return t.writeBlock(e,r),r.bind()},t.toData=function(e){var r=xt.encodedOutput(ye.output());return t.write(e,r),r.bind()},t.toBlockData=function(e){var r=xt.encodedOutput(ye.output());return t.writeBlock(e,r),r.bind()},t}();ee.prototype.toRecon=function(){return fo.toString(this)},ee.prototype.toReconBlock=function(){return fo.toBlockString(this)},pe.parseRecon=function(t){return fo.parse(t)};var co={fromAny:function(t){return co.R2.fromAny(t)},isAny:function(t){return co.R2.isAny(t)},is:function(t){if("object"==typeof t&&null!==t){var e=t;return"function"==typeof e.contains&&"function"==typeof e.intersects}return!1},R2:void 0},lo=function(){function t(){}return t.prototype.union=function(e){return e=t.fromAny(e),new t.Box(Math.min(this.xMin,e.xMin),Math.min(this.yMin,e.yMin),Math.max(this.xMax,e.xMax),Math.max(this.yMax,e.yMax))},t.prototype.boundingBox=function(){return new t.Box(this.xMin,this.yMin,this.xMax,this.yMax)},t.fromAny=function(e){if(e instanceof t)return e;if(t.Point.isInit(e))return t.Point.fromInit(e);if(t.Point.isTuple(e))return t.Point.fromTuple(e);if(t.Segment.isInit(e))return t.Segment.fromInit(e);if(t.Box.isInit(e))return t.Box.fromInit(e);if(t.Circle.isInit(e))return t.Circle.fromInit(e);throw new TypeError(""+e)},t.isAny=function(e){return e instanceof t||t.Point.isInit(e)||t.Point.isTuple(e)||t.Segment.isInit(e)||t.Box.isInit(e)||t.Circle.isInit(e)},t}();co.R2=lo;var yo=function(){function t(t,e){this._x=t,this._y=e}return t.prototype.isDefined=function(){return 0!==this._x||0!==this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),t.prototype.plus=function(e){return new t(this._x+e.x,this._y+e.y)},t.prototype.opposite=function(){return new t(-this._x,-this._y)},t.prototype.minus=function(e){return new t(this._x-e.x,this._y-e.y)},t.prototype.times=function(e){return new t(this._x*e,this._y*e)},t.prototype.toAny=function(){return{x:this._x,y:this._y}},t.prototype.canEqual=function(t){return!0},t.prototype.equals=function(e){return this===e||e instanceof t&&(e.canEqual(this)&&this._x===e._x&&this._y===e._y)},t.prototype.hashCode=function(){return void 0===t._hashSeed&&(t._hashSeed=f.seed(t)),f.mash(f.mix(f.mix(t._hashSeed,f.hash(this._x)),f.hash(this._y)))},t.prototype.debug=function(t){t.write("VectorR2").write(46).write("of").write(40).debug(this._x).write(", ").debug(this._y).write(41)},t.prototype.toString=function(){return X.debug(this)},t.zero=function(){return void 0===t._zero&&(t._zero=new t(0,0)),t._zero},t.of=function(e,r){return new t(e,r)},t.fromInit=function(e){return new t(e.x,e.y)},t.fromAny=function(e){if(e instanceof t)return e;if(t.isInit(e))return t.fromInit(e);throw new TypeError(""+e)},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.x&&"number"==typeof e.y}return!1},t.isAny=function(e){return e instanceof t||t.isInit(e)},t}(),_o=function(t){function e(e,r){var n=t.call(this)||this;return n._x=e,n._y=r,n}return y(e,t),e.prototype.isDefined=function(){return 0!==this._x||0!==this._y},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xMin",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yMin",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xMax",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yMax",{get:function(){return this._y},enumerable:!1,configurable:!0}),e.prototype.plus=function(t){return new e(this._x+t.x,this._y+t.y)},e.prototype.minus=function(t){var r=this._x-t._x,n=this._y-t._y;return t instanceof yo?new e(r,n):new yo(r,n)},e.prototype.contains=function(t,r){return"number"==typeof t?this._x===t&&this._y===r:(t=co.fromAny(t))instanceof e?this._x===t._x&&this._y===t._y:t instanceof lo&&(this._x<=t.xMin&&t.xMax<=this._x&&this._y<=t.yMin&&t.yMax<=this._y)},e.prototype.intersects=function(t){return(t=co.fromAny(t)).intersects(this)},e.prototype.transform=function(t){return new e(t.transformX(this.x,this.y),t.transformY(this.x,this.y))},e.prototype.toAny=function(){return{x:this._x,y:this._y}},e.prototype.canEqual=function(t){return!0},e.prototype.equals=function(t){return this===t||t instanceof e&&(t.canEqual(this)&&this._x===t._x&&this._y===t._y)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(e._hashSeed,f.hash(this._x)),f.hash(this._y)))},e.prototype.debug=function(t){t.write("PointR2").write(46).write("of").write(40).debug(this._x).write(", ").debug(this._y).write(41)},e.prototype.toString=function(){return X.debug(this)},e.origin=function(){return void 0===e._origin&&(e._origin=new e(0,0)),e._origin},e.of=function(t,r){return new e(t,r)},e.fromInit=function(t){return new e(t.x,t.y)},e.fromTuple=function(t){return new e(t[0],t[1])},e.fromAny=function(t){if(t instanceof e)return t;if(e.isInit(t))return e.fromInit(t);if(e.isTuple(t))return e.fromTuple(t);throw new TypeError(""+t)},e.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.x&&"number"==typeof e.y}return!1},e.isTuple=function(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]},e.isAny=function(t){return t instanceof e||e.isInit(t)||e.isTuple(t)},e}(lo);lo.Point=_o;var vo=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._x0=e,o._y0=r,o._x1=n,o._y1=i,o}return y(e,t),e.prototype.isDefined=function(){return 0!==this._x0||0!==this._y0||0!==this._x1||0!==this._y1},Object.defineProperty(e.prototype,"x0",{get:function(){return this._x0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y0",{get:function(){return this._y0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x1",{get:function(){return this._x1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this._y1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xMin",{get:function(){return Math.min(this._x0,this._x1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yMin",{get:function(){return Math.min(this._y0,this._y1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xMax",{get:function(){return Math.max(this._x0,this._x1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yMax",{get:function(){return Math.max(this._y0,this._y1)},enumerable:!1,configurable:!0}),e.prototype.contains=function(t,r){if("number"==typeof t)return e.contains(this._x0,this._y0,this._x1,this._y1,t,r);if((t=co.fromAny(t))instanceof lo){if(t instanceof _o)return this.containsPoint(t);if(t instanceof e)return this.containsSegment(t)}return!1},e.prototype.containsPoint=function(t){return e.contains(this._x0,this._y0,this._x1,this._y1,t._x,t._y)},e.prototype.containsSegment=function(t){return e.contains(this._x0,this._y0,this._x1,this._y1,t._x0,t._y0)&&e.contains(this._x0,this._y0,this._x1,this._y1,t._x1,t._y1)},e.prototype.intersects=function(t){return(t=co.fromAny(t))instanceof lo&&(t instanceof _o?this.intersectsPoint(t):t instanceof e?this.intersectsSegment(t):t.intersects(this))},e.prototype.intersectsPoint=function(t){return e.contains(this._x0,this._y0,this._x1,this._y1,t._x,t._y)},e.prototype.intersectsSegment=function(t){return e.intersects(this._x0,this._y0,this._x1-this._x0,this._y1-this._y0,t._x0,t._y0,t._x1-t._x0,t._y1-t._y0)},e.prototype.transform=function(t){return new e(t.transformX(this.x0,this.y0),t.transformY(this.x0,this.y0),t.transformX(this.x1,this.y1),t.transformY(this.x1,this.y1))},e.contains=function(t,e,r,n,i,o){return(t<=i&&i<=r||r<=i&&i<=t)&&(e<=o&&o<=n||n<=o&&o<=e)&&(r-t)*(o-e)==(i-t)*(n-e)},e.intersects=function(t,e,r,n,i,o,s,u){var a=i-t,p=o-e,h=a*n-p*r,f=r*u-n*s;if(0===h&&0===f){var c=r*r+n*n,l=s*r+u*n,d=(a*r+p*n)/c,y=d+l/c;return l>=0?0<y&&d<1:0<d&&y<1}if(0===f)return!1;var _=(a*u-p*s)/f,v=h/f;return 0<=_&&_<=1&&0<=v&&v<=1},e.prototype.toAny=function(){return{x0:this._x0,y0:this._y0,x1:this._x1,y1:this._y1}},e.prototype.canEqual=function(t){return!0},e.prototype.equals=function(t){return this===t||t instanceof e&&(t.canEqual(this)&&this._x0===t._x0&&this._y0===t._y0&&this._x1===t._x1&&this._y1===t._y1)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(f.mix(f.mix(e._hashSeed,f.hash(this._x0)),f.hash(this._y0)),f.hash(this._x1)),f.hash(this._y1)))},e.prototype.debug=function(t){t.write("SegmentR2").write(46).write("of").write(40).debug(this._x0).write(", ").debug(this._y0).write(", ").debug(this._x1).write(", ").debug(this._y1).write(41)},e.prototype.toString=function(){return X.debug(this)},e.of=function(t,r,n,i){return new e(t,r,n,i)},e.fromInit=function(t){return new e(t.x0,t.y0,t.x1,t.y1)},e.fromAny=function(t){if(t instanceof e)return t;if(e.isInit(t))return e.fromInit(t);throw new TypeError(""+t)},e.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.x0&&"number"==typeof e.y0&&"number"==typeof e.x1&&"number"==typeof e.y1}return!1},e.isAny=function(t){return t instanceof e||e.isInit(t)},e}(lo);lo.Segment=vo;var mo=function(t){function e(e,r,n){var i=t.call(this)||this;return i._cx=e,i._cy=r,i._r=n,i}return y(e,t),e.prototype.isDefined=function(){return 0!==this._cx||0!==this._cy||0!==this._r},Object.defineProperty(e.prototype,"cx",{get:function(){return this._cx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this._cy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r",{get:function(){return this._r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xMin",{get:function(){return this._cx-this._r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yMin",{get:function(){return this._cy-this._r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xMax",{get:function(){return this._cx+this._r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yMax",{get:function(){return this._cy+this._r},enumerable:!1,configurable:!0}),e.prototype.contains=function(t,r){if("number"==typeof t){var n=t-this._cx,i=r-this._cy;return n*n+i*i<=this._r*this._r}if((t=co.fromAny(t))instanceof lo){if(t instanceof _o)return this.containsPoint(t);if(t instanceof vo)return this.containsSegment(t);if(t instanceof wo)return this.containsBox(t);if(t instanceof e)return this.containsCircle(t)}return!1},e.prototype.containsPoint=function(t){var e=t._x-this._cx,r=t._y-this._cy;return e*e+r*r<=this._r*this._r},e.prototype.containsSegment=function(t){var e=t._x0-this._cx,r=t._y0-this._cy,n=t._x1-this._cx,i=t._y1-this._cy,o=this._r*this._r;return e*e+r*r<=o&&n*n+i*i<=o},e.prototype.containsBox=function(t){var e=t._xMin-this._cx,r=t._yMin-this._cy,n=t._xMax-this._cx,i=t._yMax-this._cy,o=this._r*this._r;return e*e+r*r<=o&&e*e+i*i<=o&&n*n+r*r<=o&&n*n+i*i<=o},e.prototype.containsCircle=function(t){var e=t._cx-this._cx,r=t._cy-this._cy;return e*e+r*r+t._r*t._r<=this._r*this._r},e.prototype.intersects=function(t){return(t=co.fromAny(t))instanceof lo&&(t instanceof _o?this.intersectsPoint(t):t instanceof vo?this.intersectsSegment(t):t instanceof wo?this.intersectsBox(t):t instanceof e?this.intersectsCircle(t):t.intersects(this))},e.prototype.intersectsPoint=function(t){var e=t._x-this._cx,r=t._y-this._cy;return e*e+r*r<=this._r*this._r},e.prototype.intersectsSegment=function(t){var e=this._cx,r=this._cy,n=this._r,i=t._x0,o=t._y0,s=t._x1,u=t._y1,a=s-i,p=u-o,h=Math.sqrt(a*a+p*p),f=a/h,c=p/h,l=(e-i)*c-(r-o)*f;if(l<-n||n<l)return!1;var d=i-e,y=o-r,_=s-e,v=u-r,m=n*n;if(d*d+y*y<=m||_*_+v*v<=m)return!0;var w=f*e+c*r,g=f*i+c*o,b=f*s+c*u;return g<w&&w<=b||b<w&&w<=g},e.prototype.intersectsBox=function(t){var e=(this._cx<t._xMin?t._xMin:t._xMax<this._cx?t._xMax:this._cx)-this._cx,r=(this._cy<t._yMin?t._yMin:t._yMax<this._cy?t._yMax:this._cy)-this._cy;return e*e+r*r<=this._r*this._r},e.prototype.intersectsCircle=function(t){var e=t._cx-this._cx,r=t._cy-this._cy,n=this._r+t._r;return e*e+r*r<=n*n},e.prototype.transform=function(t){var r=t.transformX(this.cx,this.cy),n=t.transformY(this.cx,this.cy),i=t.transformX(this.cx+this.r,this.cy)-r,o=t.transformY(this.cx+this.r,this.cy)-n;return new e(r,n,Math.sqrt(i*i+o*o))},e.prototype.toAny=function(){return{cx:this._cx,cy:this._cy,r:this._r}},e.prototype.canEqual=function(t){return!0},e.prototype.equals=function(t){return this===t||t instanceof e&&(t.canEqual(this)&&this._cx===t._cx&&this._cy===t._cy&&this._r===t._r)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(f.mix(e._hashSeed,f.hash(this._cx)),f.hash(this._cy)),f.hash(this._r)))},e.prototype.debug=function(t){t.write("CircleR2").write(46).write("of").write(40).debug(this._cx).write(", ").debug(this._cy).write(", ").debug(this._r).write(41)},e.prototype.toString=function(){return X.debug(this)},e.of=function(t,r,n){return new e(t,r,n)},e.fromInit=function(t){return new e(t.cx,t.cy,t.r)},e.fromAny=function(t){if(t instanceof e)return t;if(e.isInit(t))return e.fromInit(t);throw new TypeError(""+t)},e.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.cx&&"number"==typeof e.cy&&"number"==typeof e.r}return!1},e.isAny=function(t){return t instanceof e||e.isInit(t)},e}(lo);lo.Circle=mo;var wo=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o._xMin=e<=n?e:n,o._yMin=r<=i?r:i,o._xMax=e<=n?n:e,o._yMax=r<=i?i:r,o}return y(e,t),e.prototype.isDefined=function(){return 0!==this._xMin||0!==this._yMin||0!==this._xMax||0!==this._yMax},Object.defineProperty(e.prototype,"xMin",{get:function(){return this._xMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yMin",{get:function(){return this._yMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xMax",{get:function(){return this._xMax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yMax",{get:function(){return this._yMax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._xMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._yMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._xMax-this._xMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._yMax-this._yMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._yMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._xMax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._yMax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._xMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return new _o((this._xMin+this._xMax)/2,(this._yMin+this._yMax)/2)},enumerable:!1,configurable:!0}),e.prototype.contains=function(t,r){return"number"==typeof t?this._xMin<=t&&t<=this._xMax&&this._yMin<=r&&r<=this._yMax:(t=co.fromAny(t))instanceof lo&&(t instanceof _o?this.containsPoint(t):t instanceof vo?this.containsSegment(t):t instanceof e?this.containsBox(t):t instanceof mo?this.containsCircle(t):this._xMin<=t.xMin&&t.xMax<=this._xMax&&this._yMin<=t.yMin&&t.yMax<=this._yMax)},e.prototype.containsPoint=function(t){return this._xMin<=t._x&&t._x<=this._xMax&&this._yMin<=t._y&&t._y<=this._yMax},e.prototype.containsSegment=function(t){return this._xMin<=t._x0&&t._x0<=this._xMax&&this._yMin<=t._y0&&t._y0<=this._yMax&&this._xMin<=t._x1&&t._x1<=this._xMax&&this._yMin<=t._y1&&t._y1<=this._yMax},e.prototype.containsBox=function(t){return this._xMin<=t._xMin&&t._xMax<=this._xMax&&this._yMin<=t._yMin&&t._yMax<=this._yMax},e.prototype.containsCircle=function(t){return this._xMin<=t._cx-t._r&&t._cx+t._r<=this._xMax&&this._yMin<=t._cy-t._r&&t._cy+t._r<=this._yMax},e.prototype.intersects=function(t){return(t=co.fromAny(t))instanceof lo&&(t instanceof _o?this.intersectsPoint(t):t instanceof vo?this.intersectsSegment(t):t instanceof e?this.intersectsBox(t):t instanceof mo?this.intersectsCircle(t):t.intersects(this))},e.prototype.intersectsPoint=function(t){return this._xMin<=t._x&&t._x<=this._xMax&&this._yMin<=t._y&&t._y<=this._yMax},e.prototype.intersectsSegment=function(t){var r=this._xMin,n=this._yMin,i=this._xMax,o=this._yMax,s=t._x0,u=t._y0,a=t._x1,p=t._y1;return!(s<r&&a<r||s>i&&a>i||u<n&&p<n||u>o&&p>o)&&(s>r&&s<i&&u>n&&u<o||!!(e.intersectsSegment(s-r,a-r,s,u,a,p)&&e._hitY>n&&e._hitY<o||e.intersectsSegment(u-n,p-n,s,u,a,p)&&e._hitX>r&&e._hitX<i||e.intersectsSegment(s-i,a-i,s,u,a,p)&&e._hitY>n&&e._hitY<o||e.intersectsSegment(u-o,p-o,s,u,a,p)&&e._hitX>r&&e._hitX<i))},e.intersectsSegment=function(t,r,n,i,o,s){if(t!==r||t*r<0){var u=-t/(r-t);return e._hitX=n+(o-n)*u,e._hitY=i+(s-i)*u,!0}return!1},e.prototype.intersectsBox=function(t){return this._xMin<=t._xMax&&t._xMin<=this._xMax&&this._yMin<=t._yMax&&t._yMin<=this._yMax},e.prototype.intersectsCircle=function(t){var e=(t._cx<this._xMin?this._xMin:this._xMax<t._cx?this._xMax:t._cx)-t._cx,r=(t._cy<this._yMin?this._yMin:this._yMax<t._cy?this._yMax:t._cy)-t._cy;return e*e+r*r<=t._r*t._r},e.prototype.union=function(e){return t.prototype.union.call(this,e)},e.prototype.transform=function(t){return new e(t.transformX(this.xMin,this.yMin),t.transformY(this.xMin,this.yMin),t.transformX(this.xMax,this.yMax),t.transformY(this.xMax,this.yMax))},e.prototype.boundingBox=function(){return this},e.prototype.toAny=function(){return{xMin:this._xMin,yMin:this._yMin,xMax:this._xMax,yMax:this._yMax}},e.prototype.canEqual=function(t){return!0},e.prototype.equals=function(t){return this===t||t instanceof e&&(t.canEqual(this)&&this._xMin===t._xMin&&this._yMin===t._yMin&&this._xMax===t._xMax&&this._yMax===t._yMax)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=f.seed(e)),f.mash(f.mix(f.mix(f.mix(f.mix(e._hashSeed,f.hash(this.xMin)),f.hash(this.yMin)),f.hash(this.xMax)),f.hash(this.yMax)))},e.prototype.debug=function(t){t.write("BoxR2").write(46).write("of").write(40).debug(this.xMin).write(", ").debug(this.yMin).write(", ").debug(this.xMax).write(", ").debug(this.yMax).write(41)},e.prototype.toString=function(){return X.debug(this)},e.empty=function(){return void 0===e._empty&&(e._empty=new e(0,0,0,0)),e._empty},e.from=function(t,r,n,i){return void 0===n&&(n=t),void 0===i&&(i=r),new e(t,r,n,i)},e.fromInit=function(t){return new e(t.xMin,t.yMin,t.xMax,t.yMax)},e.fromAny=function(t){if(t instanceof e)return t;if(e.isInit(t))return e.fromInit(t);throw new TypeError(""+t)},e.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return"number"==typeof e.xMin&&"number"==typeof e.yMin&&"number"==typeof e.xMax&&"number"==typeof e.yMax}return!1},e.isAny=function(t){return t instanceof e||e.isInit(t)},e._hitX=0,e._hitY=0,e}(lo);lo.Box=wo;var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.between=function(t,r){return t instanceof _o&&r instanceof _o?new e.PointR2(t,r):t instanceof vo&&r instanceof vo?new e.SegmentR2(t,r):t instanceof wo&&r instanceof wo?new e.BoxR2(t,r):t instanceof mo&&r instanceof mo?new e.CircleR2(t,r):t instanceof lo&&r instanceof lo?new e.BoxR2(t.boundingBox(),r.boundingBox()):_o.isAny(t)&&_o.isAny(r)?new e.PointR2(_o.fromAny(t),_o.fromAny(r)):vo.isAny(t)&&vo.isAny(r)?new e.SegmentR2(vo.fromAny(t),vo.fromAny(r)):wo.isAny(t)&&wo.isAny(r)?new e.BoxR2(wo.fromAny(t),wo.fromAny(r)):mo.isAny(t)&&mo.isAny(r)?new e.CircleR2(mo.fromAny(t),mo.fromAny(r)):lo.isAny(t)&&lo.isAny(r)?new e.BoxR2(lo.fromAny(t).boundingBox(),lo.fromAny(r).boundingBox()):Zt.between(t,r)},e.tryBetween=function(t,r){return t instanceof _o&&r instanceof _o?new e.PointR2(t,r):t instanceof vo&&r instanceof vo?new e.SegmentR2(t,r):t instanceof wo&&r instanceof wo?new e.BoxR2(t,r):t instanceof mo&&r instanceof mo?new e.CircleR2(t,r):null},e.tryBetweenAny=function(t,r){return(t instanceof _o||_o.isInit(t))&&(r instanceof _o||_o.isInit(r))?new e.PointR2(_o.fromAny(t),_o.fromAny(r)):vo.isAny(t)&&vo.isAny(r)?new e.SegmentR2(vo.fromAny(t),vo.fromAny(r)):wo.isAny(t)&&wo.isAny(r)?new e.BoxR2(wo.fromAny(t),wo.fromAny(r)):mo.isAny(t)&&mo.isAny(r)?new e.CircleR2(mo.fromAny(t),mo.fromAny(r)):lo.isAny(t)&&lo.isAny(r)?new e.BoxR2(lo.fromAny(t).boundingBox(),lo.fromAny(r).boundingBox()):null},e}(Zt);Zt.registerFactory(go);var bo=function(t){function e(e,r){var n=t.call(this)||this;return n.x=e.x,n.dx=r.x-n.x,n.y=e.y,n.dy=r.y-n.y,n}return y(e,t),e.prototype.interpolate=function(t){var e=this.x+this.dx*t,r=this.y+this.dy*t;return new _o(e,r)},e.prototype.deinterpolate=function(t){var e=(t=_o.fromAny(t)).x-this.x,r=t.y-this.y,n=e*this.dx+r*this.dy,i=Math.sqrt(e*e+r*r);return 0!==i?n/i:i},e.prototype.range=function(t,r){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===r?(t=t,e.between(t[0],t[1])):e.between(t,r)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.x===t.x&&this.dx===t.dx&&this.y===t.y&&this.dy===t.dy)},e.between=function(t,r){return t instanceof _o&&r instanceof _o?new e(t,r):_o.isAny(t)&&_o.isAny(r)?new e(_o.fromAny(t),_o.fromAny(r)):go.between(t,r)},e}(go);go.PointR2=bo;var xo=function(t){function e(e,r){var n=t.call(this)||this;return n.x0=e.x0,n.dx0=r.x0-n.x0,n.y0=e.y0,n.dy0=r.y0-n.y0,n.x1=e.x1,n.dx1=r.x1-n.x1,n.y1=e.y1,n.dy1=r.y1-n.y1,n}return y(e,t),e.prototype.interpolate=function(t){var e=this.x0+this.dx0*t,r=this.y0+this.dy0*t,n=this.x1+this.dx1*t,i=this.y1+this.dy1*t;return new vo(e,r,n,i)},e.prototype.deinterpolate=function(t){return 0},e.prototype.range=function(t,r){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===r?(t=t,e.between(t[0],t[1])):e.between(t,r)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.x0===t.x0&&this.dx0===t.dx0&&this.y0===t.y0&&this.dy0===t.dy0&&this.x1===t.x1&&this.dx1===t.dx1&&this.y1===t.y1&&this.dy1===t.dy1)},e.between=function(t,r){return t instanceof vo&&r instanceof vo?new e(t,r):vo.isAny(t)&&vo.isAny(r)?new e(vo.fromAny(t),vo.fromAny(r)):go.between(t,r)},e}(go);go.SegmentR2=xo;var So=function(t){function e(e,r){var n=t.call(this)||this;return n.xMin=e.xMin,n.dxMin=r.xMin-n.xMin,n.yMin=e.yMin,n.dyMin=r.yMin-n.yMin,n.xMax=e.xMax,n.dxMax=r.xMax-n.xMax,n.yMax=e.yMax,n.dyMax=r.yMax-n.yMax,n}return y(e,t),e.prototype.interpolate=function(t){var e=this.xMin+this.dxMin*t,r=this.yMin+this.dyMin*t,n=this.xMax+this.dxMax*t,i=this.yMax+this.dyMax*t;return new wo(e,r,n,i)},e.prototype.deinterpolate=function(t){return 0},e.prototype.range=function(t,r){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===r?(t=t,e.between(t[0],t[1])):e.between(t,r)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.xMin===t.xMin&&this.dxMin===t.dxMin&&this.yMin===t.yMin&&this.dyMin===t.dyMin&&this.xMax===t.xMax&&this.dxMax===t.dxMax&&this.yMax===t.yMax&&this.dyMax===t.dyMax)},e.between=function(t,r){return t instanceof wo&&r instanceof wo?new e(t,r):wo.isAny(t)&&wo.isAny(r)?new e(wo.fromAny(t),wo.fromAny(r)):go.between(t,r)},e}(go);go.BoxR2=So;var Oo=function(t){function e(e,r){var n=t.call(this)||this;return n.cx=e.cx,n.dcx=r.cx-n.cx,n.cy=e.cy,n.dcy=r.cy-n.cy,n.r=e.r,n.dr=r.r-n.r,n}return y(e,t),e.prototype.interpolate=function(t){var e=this.cx+this.dcx*t,r=this.cy+this.dcy*t,n=this.r+this.dr*t;return new mo(e,r,n)},e.prototype.deinterpolate=function(t){return 0},e.prototype.range=function(t,r){return void 0===t?[this.interpolate(0),this.interpolate(1)]:void 0===r?(t=t,e.between(t[0],t[1])):e.between(t,r)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.cx===t.cx&&this.dcx===t.dcx&&this.cy===t.cy&&this.dcy===t.dcy&&this.r===t.r&&this.dr===t.dr)},e.between=function(t,r){return t instanceof mo&&r instanceof mo?new e(t,r):mo.isAny(t)&&mo.isAny(r)?new e(mo.fromAny(t),mo.fromAny(r)):go.between(t,r)},e}(go);go.CircleR2=Oo;var Ao=function(){function t(t,e){this._name=t,this._offset=e}return t.prototype.isUTC=function(){return 0===this._offset},t.prototype.isLocal=function(){return this._offset===-(new Date).getTimezoneOffset()},t.prototype.name=function(){return this._name},t.prototype.offset=function(){return this._offset},t.prototype.equals=function(e){return this===e||e instanceof t&&this._offset===e._offset},t.prototype.hashCode=function(){return void 0===t._hashSeed&&(t._hashSeed=f.seed(t)),f.mash(f.mix(t._hashSeed,f.hash(this._offset)))},t.prototype.debug=function(t){t=t.write("TimeZone").write(46),t="UTC"===this._name&&0===this._offset?t.write("utc").write(40).write(41):void 0===this._name?t.write("forOffset").write(40).debug(this._offset).write(41):t.write("from").write(40).debug(this._name).write(", ").debug(this._offset).write(41)},t.prototype.toString=function(){return X.debug(this)},t.utc=function(){return void 0===t._utc&&(t._utc=new t("UTC",0)),t._utc},t.local=function(){return void 0===t._local&&(t._local=t.forOffset(-(new Date).getTimezoneOffset())),t._local},t.forName=function(e){switch(e){case"UTC":return t.utc();default:return}},t.forOffset=function(e){switch(e){case 0:return t.utc();default:return new t(void 0,e)}},t.from=function(e,r){return"UTC"===e&&0===r?t.utc():new t(e,r)},t.fromAny=function(e){if(e instanceof t)return e;if("string"==typeof e){var r=t.forName(e);if(void 0!==r)return r}else if("number"==typeof e)return t.forOffset(e);throw new TypeError(""+e)},t.fromValue=function(e){var r=e.stringValue(void 0);if(void 0!==r)return t.forName(r);var n=e.numberValue(void 0);return void 0!==n?t.forOffset(n):void 0},t.isAny=function(e){return e instanceof t||"string"==typeof e||"number"==typeof e},t.form=function(e){return void 0!==e&&(e=t.fromAny(e)),e!==t.utc()?new t.Form(e):(void 0===t._form&&(t._form=new t.Form(t.utc())),t._form)},t}(),Eo=function(t){function e(e){var r=t.call(this)||this;return r._unit=e,r}return y(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t){var e=(t=Ao.fromAny(t)).name();return void 0!==e?ve.from(e):me.from(t._offset)},e.prototype.cast=function(t){var e=t.toValue();return Ao.fromValue(e)},e}(Ce);Ao.Form=Eo;var Co=function(){function t(e,r,n,i,o){void 0===e&&(e=t.Periods),void 0===r&&(r=t.Weekdays),void 0===n&&(n=t.ShortWeekdays),void 0===i&&(i=t.Months),void 0===o&&(o=t.ShortMonths),this.periods=e,this.weekdays=r,this.shortWeekdays=n,this.months=i,this.shortMonths=o}return t.standard=function(){return void 0===t._standard&&(t._standard=new t),t._standard},t.Periods=["AM","PM"],t.Weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.ShortWeekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],t.ShortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t}(),Io=function(){function t(t,e){void 0===e&&(e=Ao.utc()),this._time=t,this._zone=e}return t.prototype.time=function(e){return void 0===e?this._time:new t(e,this._zone)},t.prototype.zone=function(e){return void 0===e?this._zone:new t(this._time,e)},t.prototype.year=function(e,r,n,i,o,s,u){var a=this.toUTCLocalDate();return void 0===e?a.getUTCFullYear():(a.setUTCFullYear(e),void 0!==r&&a.setUTCMonth(r),void 0!==n&&a.setUTCDate(n),void 0!==i&&a.setUTCHours(i),void 0!==o&&a.setUTCMinutes(o),void 0!==s&&a.setUTCSeconds(s),void 0!==u&&a.setUTCMilliseconds(u),t.fromUTCLocalDate(a,this._zone))},t.prototype.month=function(e,r,n,i,o,s){var u=this.toUTCLocalDate();return void 0===e?u.getUTCMonth():(u.setUTCMonth(e),void 0!==r&&u.setUTCDate(r),void 0!==n&&u.setUTCHours(n),void 0!==i&&u.setUTCMinutes(i),void 0!==o&&u.setUTCSeconds(o),void 0!==s&&u.setUTCMilliseconds(s),t.fromUTCLocalDate(u,this._zone))},t.prototype.day=function(e,r,n,i,o){var s=this.toUTCLocalDate();return void 0===e?s.getUTCDate():(s.setUTCDate(e),void 0!==r&&s.setUTCHours(r),void 0!==n&&s.setUTCMinutes(n),void 0!==i&&s.setUTCSeconds(i),void 0!==o&&s.setUTCMilliseconds(o),t.fromUTCLocalDate(s,this._zone))},t.prototype.hour=function(e,r,n,i){var o=this.toUTCLocalDate();return void 0===e?o.getUTCHours():(o.setUTCHours(e),void 0!==r&&o.setUTCMinutes(r),void 0!==n&&o.setUTCSeconds(n),void 0!==i&&o.setUTCMilliseconds(i),t.fromUTCLocalDate(o,this._zone))},t.prototype.minute=function(e,r,n){var i=this.toUTCLocalDate();return void 0===e?i.getUTCMinutes():(i.setUTCMinutes(e),void 0!==r&&i.setUTCSeconds(r),void 0!==n&&i.setUTCMilliseconds(n),t.fromUTCLocalDate(i,this._zone))},t.prototype.second=function(e,r){var n=this.toUTCLocalDate();return void 0===e?n.getUTCSeconds():(n.setUTCSeconds(e),void 0!==r&&n.setUTCMilliseconds(r),t.fromUTCLocalDate(n,this._zone))},t.prototype.millisecond=function(e){var r=this.toUTCLocalDate();return void 0===e?r.getUTCMilliseconds():(r.setUTCMilliseconds(e),t.fromUTCLocalDate(r,this._zone))},t.prototype.weekday=function(){return this.toUTCLocalDate().getUTCDay()},t.prototype.toUTCLocalDate=function(){return new Date(this._time+6e4*this._zone._offset)},t.prototype.toDate=function(){return new Date(this._time)},t.prototype.valueOf=function(){return this._time},t.prototype.compareTo=function(e){var r=this._time,n=t.time(e);return r<n?-1:r>n?1:r===n?0:NaN},t.prototype.equals=function(e){return this===e||e instanceof t&&(this._time===e._time&&this._zone.equals(e._zone))},t.prototype.hashCode=function(){return void 0===t._hashSeed&&(t._hashSeed=f.seed(t)),f.mash(f.mix(f.mix(t._hashSeed,f.hash(this._time)),this._zone.hashCode()))},t.prototype.display=function(e,r){void 0===r&&(r=t.Format.iso8601()),r.writeDate(this,e)},t.prototype.toString=function(e){return void 0===e&&(e=t.Format.iso8601()),e.format(this)},t.current=function(e){return e=void 0!==e?Ao.fromAny(e):Ao.local(),new t(Date.now(),e)},t.fromUTCLocalDate=function(e,r){return new t(e.getTime()-6e4*r._offset,r)},t.fromInit=function(e,r){var n=Date.UTC(void 0!==e.year?e.year:1970,void 0!==e.month?e.month:0,void 0!==e.day?e.day:1,void 0!==e.hour?e.hour:0,void 0!==e.minute?e.minute:0,void 0!==e.second?e.second:0,void 0!==e.millisecond?e.millisecond:0);return void 0!==e.zone&&(r=Ao.fromAny(e.zone)),void 0!==r?n+=6e4*(r=Ao.fromAny(r))._offset:r=Ao.utc(),new t(n,r)},t.fromAny=function(e,r){if(e instanceof t)return e;if(e instanceof Date)return r=void 0!==r?Ao.fromAny(r):Ao.utc(),new t(e.getTime(),r);if("number"==typeof e)return new t(e,r=void 0!==r?Ao.fromAny(r):Ao.utc());if("string"==typeof e)return t.parse(e,r);if(t.isInit(e))return t.fromInit(e,r);throw new TypeError(""+e)},t.fromValue=function(e){var r,n=e.header("date");n.isDefined()?(e=n,r=!0):r=!1;var i={};if(e.forEach((function(t,e){var n=t.key.stringValue(void 0);void 0!==n?"year"===n?i.year=t.toValue().numberValue(i.year):"month"===n?i.month=t.toValue().numberValue(i.month):"day"===n?i.day=t.toValue().numberValue(i.day):"hour"===n?i.hour=t.toValue().numberValue(i.hour):"minute"===n?i.minute=t.toValue().numberValue(i.minute):"second"===n?i.second=t.toValue().numberValue(i.second):"millisecond"===n?i.millisecond=t.toValue().numberValue(i.millisecond):"zone"===n&&(i.zone=t.toValue().cast(Ao.form(),i.zone)):t instanceof pe&&r&&(0===e?i.year=t.numberValue(i.year):1===e?i.month=t.numberValue(i.month):2===e?i.day=t.numberValue(i.day):3===e?i.hour=t.numberValue(i.hour):4===e?i.minute=t.numberValue(i.minute):5===e?i.second=t.numberValue(i.second):6===e?i.millisecond=t.numberValue(i.millisecond):7===e&&(i.zone=t.cast(Ao.form(),i.zone)))})),t.isInit(i))return t.fromInit(i)},t.parse=function(e,r){return t.Format.iso8601().parse(e)},t.time=function(e){if(e instanceof t)return e._time;if(e instanceof Date)return e.getTime();if("number"==typeof e)return e;if("string"==typeof e)return t.parse(e).time();if(t.isInit(e))return t.fromInit(e).time();throw new TypeError(""+e)},t.zone=function(e){return e instanceof t?e._zone:Ao.utc()},t.isInit=function(t){if("object"==typeof t&&null!==t){var e=t;return(void 0===e.year||"number"==typeof e.year)&&(void 0===e.month||"number"==typeof e.month)&&(void 0===e.day||"number"==typeof e.day)&&(void 0===e.hour||"number"==typeof e.hour)&&(void 0===e.minute||"number"==typeof e.minute)&&(void 0===e.second||"number"==typeof e.second)&&(void 0===e.millisecond||"number"==typeof e.millisecond)&&(void 0===e.zone||Ao.isAny(e.zone))&&("number"==typeof e.year||"number"==typeof e.month||"number"==typeof e.day||"number"==typeof e.hour||"number"==typeof e.minute||"number"==typeof e.second||"number"==typeof e.millisecond)}return!1},t.isAny=function(e){return e instanceof t||e instanceof Date||"number"==typeof e||"string"==typeof e||t.isInit(e)},t.form=function(e){return void 0!==e&&(e=t.fromAny(e)),void 0!==e?new t.Form(e):(void 0===t._form&&(t._form=new t.Form),t._form)},t}(),Do=function(t){function e(e){var r=t.call(this)||this;return r.dateParser=e,r}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.dateParser)},e.parse=function(t,r){return(r=r.feed(t)).isDone()?ht.done(Io.fromAny(r.bind())):r.isError()?r.asError():new e(r)},e}(ht);Io.Parser=Do;var ko=function(t){function e(e,r,n){var i=t.call(this)||this;return i.t0=e,i.dt=r-i.t0,i.zone=n,i}return y(e,t),e.prototype.interpolate=function(t){return new Io(this.t0+this.dt*t,this.zone)},e.prototype.deinterpolate=function(t){return t=Io.time(t),0!==this.dt?(t-this.t0)/this.dt:this.dt},e.prototype.range=function(t,r){return void 0===t?[new Io(this.t0,this.zone),new Io(this.t0+this.dt,this.zone)]:void 0===r?(t=t,e.between(t[0],t[1],this.zone)):e.between(t,r,this.zone)},e.prototype.equals=function(t){return this===t||t instanceof e&&(this.t0===t.t0&&this.dt===t.dt)},e.between=function(t,r,n){return Io.isAny(t)&&Io.isAny(r)?(n=void 0===n?t instanceof Io?t.zone():r instanceof Io?r.zone():Ao.utc():Ao.fromAny(n),new e(Io.time(t),Io.time(r),n)):Zt.between(t,r)},e.tryBetween=function(t,r){return t instanceof Io&&r instanceof Io?new e(t.time(),r.time(),t.zone()):null},e.tryBetweenAny=function(t,r){if((t instanceof Io||t instanceof Date||Io.isInit(t))&&(r instanceof Io||r instanceof Date||Io.isInit(r))){var n=void 0;return n=t instanceof Io?t.zone():r instanceof Io?r.zone():Ao.utc(),new e(Io.time(t),Io.time(r),n)}return null},e}(Zt);Zt.registerFactory(ko);var Mo=function(t){function e(e){var r=t.call(this)||this;return r._unit=e,r}return y(e,t),e.prototype.unit=function(t){return 0===arguments.length?void 0!==this._unit?this._unit:new Io(0):new e(t)},e.prototype.mold=function(t){return t=Io.fromAny(t),ve.from(t.toString())},e.prototype.cast=function(t){var e;try{if(void 0===(e=Io.fromValue(t))){var r=t.numberValue(void 0);if(void 0!==r)e=new Io(r);else{var n=t.stringValue(void 0);void 0!==n&&(e=Io.parse(n))}}}catch(t){}return e},e}(Ce);Io.Form=Mo;var Po={_standard:void 0,standard:function(t){var e;return void 0===t&&(t=Co.standard()),t===Co.standard()&&(e=Po._standard),void 0===e&&(e={Y:To.year(),m:To.monthOfYear(),B:To.month(t),b:To.shortMonth(t),d:To.dayOfMonth(),A:To.weekday(t),a:To.shortWeekday(t),H:To.hour24(),I:To.hour12(),p:To.period(t),M:To.minute(),S:To.second(),L:To.millisecond()},t===Co.standard()&&(Po._standard=e)),e}},To=function(){function t(){}return t.prototype.format=function(t){t=Io.fromAny(t);var e=Z.stringOutput();return this.writeDate(t,e),e.bind()},t.prototype.parse=function(t){for("string"==typeof t&&(t=Z.stringInput(t));t.isCont()&&Z.isSpace(t.head());)t=t.step();var e=this.parseDate(t,{});if(e.isDone())for(;t.isCont()&&Z.isSpace(t.head());)t=t.step();return t.isCont()&&!e.isError()&&(e=ht.error(at.unexpected(t))),e.bind()},t.prototype.parseDate=function(t,e){var r=this.parseDateTime(t,e);return r.isDone()?ht.done(Io.fromAny(r.bind())):r.isError()?r.asError():new Io.Parser(r)},t.year=function(){return void 0===t._year&&(t._year=new t.Year),t._year},t.monthOfYear=function(){return void 0===t._monthOfYear&&(t._monthOfYear=new t.MonthOfYear),t._monthOfYear},t.month=function(e){return void 0===e&&(e=Co.standard()),e!==Co.standard()?new t.Month(e):(void 0===t._month&&(t._month=new t.Month(e)),t._month)},t.shortMonth=function(e){return void 0===e&&(e=Co.standard()),e!==Co.standard()?new t.ShortMonth(e):(void 0===t._shortMonth&&(t._shortMonth=new t.ShortMonth(e)),t._shortMonth)},t.dayOfMonth=function(){return void 0===t._dayOfMonth&&(t._dayOfMonth=new t.DayOfMonth),t._dayOfMonth},t.weekday=function(e){return void 0===e&&(e=Co.standard()),e!==Co.standard()?new t.Weekday(e):(void 0===t._weekday&&(t._weekday=new t.Weekday(e)),t._weekday)},t.shortWeekday=function(e){return void 0===e&&(e=Co.standard()),e!==Co.standard()?new t.ShortWeekday(e):(void 0===t._shortWeekday&&(t._shortWeekday=new t.ShortWeekday(e)),t._shortWeekday)},t.hour24=function(){return void 0===t._hour24&&(t._hour24=new t.Hour24),t._hour24},t.hour12=function(){return void 0===t._hour12&&(t._hour12=new t.Hour12),t._hour12},t.period=function(e){return void 0===e&&(e=Co.standard()),e!==Co.standard()?new t.Period(e):(void 0===t._period&&(t._period=new t.Period(e)),t._period)},t.minute=function(){return void 0===t._minute&&(t._minute=new t.Minute),t._minute},t.second=function(){return void 0===t._second&&(t._second=new t.Second),t._second},t.millisecond=function(){return void 0===t._millisecond&&(t._millisecond=new t.Millisecond),t._millisecond},t.pattern=function(e,r){return(void 0===r||r instanceof Co)&&(r=Po.standard(r)),new t.Pattern(e,r)},t.iso8601=function(){return void 0===t._iso8601&&(t._iso8601=new t.Pattern("%Y-%m-%dT%H:%M:%S.%LZ",Po.standard())),t._iso8601},t.parseDateNumber=function(t,e,r,n,i,o,s,u){void 0===s&&(s=0),void 0===u&&(u=0);for(var a=0;u<i&&t.isCont()&&(a=t.head(),ut.isDigit(a));)t.step(),s=10*s+ut.decodeDigit(a),u+=1;return t.isEmpty()?e.cont(void 0!==o?o:{},s,u,t):u>=n?e.bind(s,o||{},t):ht.error(at.expected(r,t))},t.parseDateString=function(t,e,r,n,i){var o=0;for(i=i||Z.stringOutput();;){if(!t.isCont()||(o=t.head(),!Z.isAlpha(o))){if(!t.isEmpty())return e.bind(r,i.bind(),n||{},t);break}t.step(),i.write(o)}return e.cont(r,n||{},i,t)},t.writeDateNumber2=function(t,e){var r=48+t%10,n=48+(t/=10)%10;e=e.write(n).write(r)},t.writeDateNumber3=function(t,e){var r=48+t%10,n=48+(t/=10)%10,i=48+(t/=10)%10;e=e.write(i).write(n).write(r)},t.writeDateNumber4=function(t,e){var r=48+t%10,n=48+(t/=10)%10,i=48+(t/=10)%10,o=48+(t/=10)%10;e=e.write(o).write(i).write(n).write(r)},t}();Io.Format=To;var Vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.writeDate=function(t,e){To.writeDateNumber4(t.year(),e)},e.prototype.parseDateTime=function(t,e){return To.YearParser.parse(t,e)},e}(To);To.Year=Vo;var zo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.writeDate=function(t,e){To.writeDateNumber2(t.month()+1,e)},e.prototype.parseDateTime=function(t,e){return To.MonthOfYearParser.parse(t,e)},e}(To);To.MonthOfYear=zo;var Bo=function(t){function e(e){var r=t.call(this)||this;return r.locale=e,r}return y(e,t),e.prototype.writeDate=function(t,e){e.write(this.locale.months[t.month()])},e.prototype.parseDateTime=function(t,e){return To.MonthParser.parse(t,this.locale,e)},e}(To);To.Month=Bo;var Ro=function(t){function e(e){var r=t.call(this)||this;return r.locale=e,r}return y(e,t),e.prototype.writeDate=function(t,e){e.write(this.locale.shortMonths[t.month()])},e.prototype.parseDateTime=function(t,e){return To.ShortMonthParser.parse(t,this.locale,e)},e}(To);To.ShortMonth=Ro;var Fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.writeDate=function(t,e){To.writeDateNumber2(t.day(),e)},e.prototype.parseDateTime=function(t,e){return To.DayOfMonthParser.parse(t,e)},e}(To);To.DayOfMonth=Fo;var Lo=function(t){function e(e){var r=t.call(this)||this;return r.locale=e,r}return y(e,t),e.prototype.writeDate=function(t,e){e.write(this.locale.weekdays[t.weekday()])},e.prototype.parseDateTime=function(t,e){return To.WeekdayParser.parse(t,this.locale,e)},e}(To);To.Weekday=Lo;var qo=function(t){function e(e){var r=t.call(this)||this;return r.locale=e,r}return y(e,t),e.prototype.writeDate=function(t,e){e.write(this.locale.shortWeekdays[t.weekday()])},e.prototype.parseDateTime=function(t,e){return To.ShortWeekdayParser.parse(t,this.locale,e)},e}(To);To.ShortWeekday=qo;var No=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.writeDate=function(t,e){To.writeDateNumber2(t.hour(),e)},e.prototype.parseDateTime=function(t,e){return To.Hour24Parser.parse(t,e)},e}(To);To.Hour24=No;var Uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.writeDate=function(t,e){To.writeDateNumber2(t.hour()%12||12,e)},e.prototype.parseDateTime=function(t,e){return To.Hour12Parser.parse(t,e)},e}(To);To.Hour12=Uo;var Ko=function(t){function e(e){var r=t.call(this)||this;return r.locale=e,r}return y(e,t),e.prototype.writeDate=function(t,e){e.write(this.locale.periods[+(t.hour()>=12)])},e.prototype.parseDateTime=function(t,e){return To.PeriodParser.parse(t,this.locale,e)},e}(To);To.Period=Ko;var Wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.writeDate=function(t,e){To.writeDateNumber2(t.minute(),e)},e.prototype.parseDateTime=function(t,e){return To.MinuteParser.parse(t,e)},e}(To);To.Minute=Wo;var Ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.writeDate=function(t,e){To.writeDateNumber2(t.second(),e)},e.prototype.parseDateTime=function(t,e){return To.SecondParser.parse(t,e)},e}(To);To.Second=Ho;var jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.writeDate=function(t,e){To.writeDateNumber3(t.millisecond(),e)},e.prototype.parseDateTime=function(t,e){return To.MillisecondParser.parse(t,e)},e}(To);To.Millisecond=jo;var Go=function(t){function e(e,r){var n=t.call(this)||this;return n.pattern=e,n.specifiers=r,n}return y(e,t),e.prototype.writeDate=function(t,e){for(var r=this.pattern,n=this.specifiers,i=0,o=0,s=r.length;o<s;)if(37===r.charCodeAt(o)){i!==o&&e.write(r.slice(i,o));var u=n[r.charAt(o+1)];void 0!==u&&u.writeDate(t,e),i=o+=2}else o+=1;i!==o&&e.write(r.slice(i,o))},e.prototype.parseDateTime=function(t,e){return To.PatternParser.parse(t,this.pattern,this.specifiers,e)},e}(To);To.Pattern=Go;var Qo=function(t){function e(e,r,n){var i=t.call(this)||this;return i.date=e,i.year=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.date,this.year,this.step)},e.parse=function(t,r,n,i){return To.parseDateNumber(t,e,"full year",4,4,r,n,i)},e.bind=function(t,e){return e.year=t,ht.done(e)},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.YearParser=Qo;var Zo=function(t){function e(e,r,n){var i=t.call(this)||this;return i.date=e,i.month=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.date,this.month,this.step)},e.parse=function(t,r,n,i){return To.parseDateNumber(t,e,"month number",2,2,r,n,i)},e.bind=function(t,e){return e.month=t-1,ht.done(e)},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.MonthOfYearParser=Zo;var Xo=function(t){function e(e,r,n){var i=t.call(this)||this;return i.locale=e,i.date=r,i.output=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.locale,this.date,this.output)},e.parse=function(t,r,n,i){return To.parseDateString(t,e,r,n,i)},e.bind=function(t,e,r,n){var i=t.months.indexOf(e);return i>=0?(r.month=i,ht.done(r)):ht.error(at.message("expected month, but found "+e,n))},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.MonthParser=Xo;var Yo=function(t){function e(e,r,n){var i=t.call(this)||this;return i.locale=e,i.date=r,i.output=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.locale,this.date,this.output)},e.parse=function(t,r,n,i){return To.parseDateString(t,e,r,n,i)},e.bind=function(t,e,r,n){var i=t.shortMonths.indexOf(e);return i>=0?(r.month=i,ht.done(r)):ht.error(at.message("expected short month, but found "+e,n))},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.ShortMonthParser=Yo;var $o=function(t){function e(e,r,n){var i=t.call(this)||this;return i.date=e,i.day=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.date,this.day,this.step)},e.parse=function(t,r,n,i){return To.parseDateNumber(t,e,"day of month",2,2,r,n,i)},e.bind=function(t,e){return e.day=t,ht.done(e)},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.DayOfMonthParser=$o;var Jo=function(t){function e(e,r,n){var i=t.call(this)||this;return i.locale=e,i.date=r,i.output=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.locale,this.date,this.output)},e.parse=function(t,r,n,i){return To.parseDateString(t,e,r,n,i)},e.bind=function(t,e,r,n){return t.weekdays.indexOf(e)>=0?ht.done(r):ht.error(at.message("expected weekday, but found "+e,n))},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.WeekdayParser=Jo;var ts=function(t){function e(e,r,n){var i=t.call(this)||this;return i.locale=e,i.date=r,i.output=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.locale,this.date,this.output)},e.parse=function(t,r,n,i){return To.parseDateString(t,e,r,n,i)},e.bind=function(t,e,r,n){return t.shortWeekdays.indexOf(e)>=0?ht.done(r):ht.error(at.message("expected short weekday, but found "+e,n))},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.ShortWeekdayParser=ts;var es=function(t){function e(e,r,n){var i=t.call(this)||this;return i.date=e,i.hour=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.date,this.hour,this.step)},e.parse=function(t,r,n,i){return To.parseDateNumber(t,e,"hour (24)",2,2,r,n,i)},e.bind=function(t,e){return e.hour=t,ht.done(e)},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.Hour24Parser=es;var rs=function(t){function e(e,r,n){var i=t.call(this)||this;return i.date=e,i.hour=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.date,this.hour,this.step)},e.parse=function(t,r,n,i){return To.parseDateNumber(t,e,"hour (12)",2,2,r,n,i)},e.bind=function(t,e){return e.hour=(e.hour||0)+t,ht.done(e)},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.Hour12Parser=rs;var ns=function(t){function e(e,r,n){var i=t.call(this)||this;return i.locale=e,i.date=r,i.output=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.locale,this.date,this.output)},e.parse=function(t,r,n,i){return To.parseDateString(t,e,r,n,i)},e.bind=function(t,e,r,n){var i=t.months.indexOf(e);return i>=0?(r.hour=(r.hour||0)+12*i,ht.done(r)):ht.error(at.message("expected period of day, but found "+e,n))},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.PeriodParser=ns;var is=function(t){function e(e,r,n){var i=t.call(this)||this;return i.date=e,i.minute=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.date,this.minute,this.step)},e.parse=function(t,r,n,i){return To.parseDateNumber(t,e,"minute",2,2,r,n,i)},e.bind=function(t,e){return e.minute=t,ht.done(e)},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.MinuteParser=is;var os=function(t){function e(e,r,n){var i=t.call(this)||this;return i.date=e,i.second=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.date,this.second,this.step)},e.parse=function(t,r,n,i){return To.parseDateNumber(t,e,"second",2,2,r,n,i)},e.bind=function(t,e){return e.second=t,ht.done(e)},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.SecondParser=os;var ss=function(t){function e(e,r,n){var i=t.call(this)||this;return i.date=e,i.millisecond=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.date,this.millisecond,this.step)},e.parse=function(t,r,n,i){return To.parseDateNumber(t,e,"millisecond",1,3,r,n,i)},e.bind=function(t,e){return e.millisecond=t,ht.done(e)},e.cont=function(t,r,n){return new e(t,r,n)},e}(ht);To.MillisecondParser=ss;var us=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s.pattern=e,s.specifiers=r,s.date=n,s.dateParser=i,s.step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.pattern,this.specifiers,this.date,this.dateParser,this.step)},e.parse=function(t,r,n,i,o,s){void 0===i&&(i={}),void 0===s&&(s=0);for(var u=r.length;s<u;){var a=r.charCodeAt(s);if(37===a){if(void 0===o){var p=r.charAt(s+1),h=n[p];if(void 0===h)return ht.error(at.message("unknown format specifier: "+p,t));o=h.parseDateTime(t,i)}else o=o.feed(t);if(o.isDone()){i=o.bind(),o=void 0,s+=2;continue}if(o.isError())return o.asError()}else{if(t.isCont()){if(t.head()===a){t.step(),s+=1;continue}return ht.error(at.expected(a,t))}if(!t.isEmpty())return ht.error(at.unexpected(t))}break}return s===u?ht.done(i):new e(r,n,i,o,s)},e}(ht);To.PatternParser=us;var as=function(){function t(){}return t.prototype.next=function(t,e){return this.floor(this.offset(t,e))},t.prototype.ceil=function(t){return t=t instanceof Io?t.time(t.time()-1):Io.time(t)-1,this.next(this.floor(t),1)},t.prototype.round=function(t){t=Io.fromAny(t);var e=this.floor(t),r=this.ceil(t);return t.time()-e.time()<r.time()-t.time()?e:r},t.prototype.range=function(t,e,r){t=this.ceil(t),e=Io.time(e);var n=[];if((r="number"==typeof r?Math.floor(r):1)>0)for(;t.time()<e;)n.push(t),t=this.next(t,r);return n},t.prototype.filter=function(e){return new t.Filter(this,e)},t.year=function(e){return void 0===t._year&&(t._year=new t.Year),void 0===e?t._year:t._year.every(e)},t.month=function(e){return void 0===t._month&&(t._month=new t.Month),void 0===e?t._month:t._month.every(e)},t.week=function(){return void 0===t._week&&(t._week=new t.Week),t._week},t.day=function(e){return void 0===t._day&&(t._day=new t.Day),void 0===e?t._day:t._day.every(e)},t.hour=function(e){return void 0===t._hour&&(t._hour=new t.Hour),void 0===e?t._hour:t._hour.every(e)},t.minute=function(e){return void 0===t._minute&&(t._minute=new t.Minute),void 0===e?t._minute:t._minute.every(e)},t.second=function(e){return void 0===t._second&&(t._second=new t.Second),void 0===e?t._second:t._second.every(e)},t.millisecond=function(e){return void 0===t._millisecond&&(t._millisecond=new t.Millisecond),void 0===e?t._millisecond:t._millisecond.every(e)},t.years=function(e,r,n){return t.year().range(e,r,n)},t.months=function(e,r,n){return t.month().range(e,r,n)},t.weeks=function(e,r,n){return t.week().range(e,r,n)},t.days=function(e,r,n){return t.day().range(e,r,n)},t.hours=function(e,r,n){return t.hour().range(e,r,n)},t.minutes=function(e,r,n){return t.minute().range(e,r,n)},t.seconds=function(e,r,n){return t.second().range(e,r,n)},t.milliseconds=function(e,r,n){return t.millisecond().range(e,r,n)},t}(),ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e}(as),hs=function(t){function e(e,r){var n=t.call(this)||this;return n.unit=e,n.predicate=r,n}return y(e,t),e.prototype.offset=function(t,e){for(t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1);e<0;){do{t=this.unit.offset(t,-1)}while(!this.predicate(t));e+=1}for(;e>0;){do{t=this.unit.offset(t,1)}while(!this.predicate(t));e-=1}return t},e.prototype.floor=function(t){for(t=Io.fromAny(t);t=this.unit.floor(t),!this.predicate(t);)t=t.time(t.time()-1);return t},e}(as);as.Filter=hs;var fs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.offset=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),t=t.year(t.year()+e)},e.prototype.next=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),t.year(t.year()+e).month(0,1).hour(0,0,0,0)},e.prototype.floor=function(t){return(t=Io.fromAny(t)).month(0,1).hour(0,0,0,0)},e.prototype.ceil=function(t){return(t=(t=(t=(t=Io.fromAny(t)).time(t.time()-1)).month(0,1).hour(0,0,0,0)).year(t.year()+1)).month(0,1).hour(0,0,0,0)},e.prototype.every=function(t){if(1===t)return this;if(isFinite(t)&&t>=1)return new as.Years(t);throw new Error(""+t)},e}(ps);as.Year=fs;var cs=function(t){function e(e){var r=t.call(this)||this;return r.stride=e||1,r}return y(e,t),e.prototype.offset=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),t.year(t.year()+e*this.stride)},e.prototype.next=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),(t=t.year(Math.floor((t.year()+e*this.stride)/this.stride)*this.stride)).month(0,1).hour(0,0,0,0)},e.prototype.floor=function(t){return(t=(t=Io.fromAny(t)).year(Math.floor(t.year()/this.stride)*this.stride)).month(0,1).hour(0,0,0,0)},e.prototype.ceil=function(t){return(t=(t=(t=(t=(t=Io.fromAny(t)).time(t.time()-1)).year(Math.floor(t.year()/this.stride)*this.stride)).month(0,1).hour(0,0,0,0)).year(Math.floor((t.year()+this.stride)/this.stride)*this.stride)).month(0,1).hour(0,0,0,0)},e}(as);as.Years=cs;var ls=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.offset=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),t.month(t.month()+e)},e.prototype.next=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),(t=t.month(t.month()+e)).day(1).hour(0,0,0,0)},e.prototype.floor=function(t){return(t=Io.fromAny(t)).day(1).hour(0,0,0,0)},e.prototype.ceil=function(t){return(t=(t=(t=(t=Io.fromAny(t)).time(t.time()-1)).day(1).hour(0,0,0,0)).month(t.month()+1)).day(1).hour(0,0,0,0)},e.prototype.every=function(t){if(1===t)return this;if(isFinite(t)&&t>=1)return new as.Filter(this,e.modulo.bind(void 0,t));throw new Error(""+t)},e.modulo=function(t,e){return e.month()%t==0},e}(ps);as.Month=ls;var ds=function(t){function e(e){void 0===e&&(e=0);var r=t.call(this)||this;return r.day=e,r}return y(e,t),e.prototype.offset=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),t.day(t.day()+7*e)},e.prototype.next=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),(t=(t=t.day(t.day()+7*e)).day(t.day()-(t.weekday()+7-this.day)%7)).hour(0,0,0,0)},e.prototype.floor=function(t){return(t=(t=Io.fromAny(t)).day(t.day()-(t.weekday()+7-this.day)%7)).hour(0,0,0,0)},e.prototype.ceil=function(t){return(t=(t=(t=(t=(t=Io.fromAny(t)).time(t.time()-1)).day(t.day()-(t.weekday()+7-this.day)%7)).hour(0,0,0,0)).day(t.day()+7)).hour(0,0,0,0)},e}(as);as.Week=ds;var ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.offset=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),t.day(t.day()+e)},e.prototype.next=function(t,e){return t=Io.fromAny(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),(t=t.day(t.day()+e)).hour(0,0,0,0)},e.prototype.floor=function(t){return(t=Io.fromAny(t)).hour(0,0,0,0)},e.prototype.ceil=function(t){return(t=(t=(t=(t=Io.fromAny(t)).time(t.time()-1)).hour(0,0,0,0)).day(t.day()+1)).hour(0,0,0,0)},e.prototype.every=function(t){if(1===t)return this;if(isFinite(t)&&t>=1)return new as.Filter(this,e.modulo.bind(void 0,t));throw new Error(""+t)},e.modulo=function(t,e){return e.day()%t==0},e}(ps);as.Day=ys;var _s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.offset=function(t,e){var r=Io.zone(t);return t=Io.time(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),new Io(t+=36e5*e,r)},e.prototype.next=function(t,e){var r=Io.zone(t);t=Io.time(t),t+=36e5*(e=Math.max(1,"number"==typeof e?Math.floor(e):1));var n=6e4*r.offset()%36e5;return n<0&&(n+=36e5),t=36e5*Math.floor((t-n)/36e5)+n,new Io(t,r)},e.prototype.floor=function(t){var e=Io.zone(t);t=Io.time(t);var r=6e4*e.offset()%36e5;return r<0&&(r+=36e5),t=36e5*Math.floor((t-r)/36e5)+r,new Io(t,e)},e.prototype.ceil=function(t){var e=Io.zone(t);t=Io.time(t),t-=1;var r=6e4*e.offset()%36e5;return r<0&&(r+=36e5),t=36e5*Math.floor((t-r)/36e5)+r+36e5,t=36e5*Math.floor((t-r)/36e5)+r,new Io(t,e)},e.prototype.every=function(t){if(1===t)return this;if(isFinite(t)&&t>=1)return new as.Filter(this,e.modulo.bind(void 0,t));throw new Error(""+t)},e.modulo=function(t,e){return e.hour()%t==0},e}(ps);as.Hour=_s;var vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.offset=function(t,e){var r=Io.zone(t);return t=Io.time(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),new Io(t+=6e4*e,r)},e.prototype.next=function(t,e){var r=Io.zone(t);return t=Io.time(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),t=6e4*Math.floor((t+6e4*e)/6e4),new Io(t,r)},e.prototype.floor=function(t){var e=Io.zone(t);return t=Io.time(t),t=6e4*Math.floor(t/6e4),new Io(t,e)},e.prototype.ceil=function(t){var e=Io.zone(t);return t=Io.time(t),t=6e4*Math.floor((6e4*Math.floor((t-1)/6e4)+6e4)/6e4),new Io(t,e)},e.prototype.every=function(t){if(1===t)return this;if(isFinite(t)&&t>=1)return new as.Filter(this,e.modulo.bind(void 0,t));throw new Error(""+t)},e.modulo=function(t,e){return e.minute()%t==0},e}(ps);as.Minute=vs;var ms=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.offset=function(t,e){var r=Io.zone(t);return t=Io.time(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),new Io(t+=1e3*e,r)},e.prototype.next=function(t,e){var r=Io.zone(t);return t=Io.time(t),t+=1e3*(e=Math.max(1,"number"==typeof e?Math.floor(e):1)),t=1e3*Math.floor(t/1e3),new Io(t,r)},e.prototype.floor=function(t){var e=Io.zone(t);return t=Io.time(t),t=1e3*Math.floor(t/1e3),new Io(t,e)},e.prototype.ceil=function(t){var e=Io.zone(t);return t=Io.time(t),t=1e3*Math.floor((1e3*Math.floor((t-1)/1e3)+1e3)/1e3),new Io(t,e)},e.prototype.every=function(t){if(1===t)return this;if(isFinite(t)&&t>=1)return new as.Filter(this,e.modulo.bind(void 0,t));throw new Error(""+t)},e.modulo=function(t,e){return e.second()%t==0},e}(ps);as.Second=ms;var ws=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.offset=function(t,e){var r=Io.zone(t);return t=Io.time(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),new Io(t+=e,r)},e.prototype.next=function(t,e){var r=Io.zone(t);return t=Io.time(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1),new Io(t+=e,r)},e.prototype.floor=function(t){return Io.fromAny(t)},e.prototype.ceil=function(t){return Io.fromAny(t)},e.prototype.every=function(t){if(1===t)return this;if(isFinite(t)&&t>=1)return new as.Milliseconds(t);throw new Error(""+t)},e}(ps);as.Millisecond=ws;var gs=function(t){function e(e){var r=t.call(this)||this;return"number"==typeof e&&isFinite(e)&&!isNaN(e)||(e=1),r.stride=e,r}return y(e,t),e.prototype.offset=function(t,e){var r=Io.zone(t);return t=Io.time(t),t+=(e=Math.max(1,"number"==typeof e?Math.floor(e):1))*this.stride,new Io(t,r)},e.prototype.next=function(t,e){var r=Io.zone(t);t=Io.time(t),e=Math.max(1,"number"==typeof e?Math.floor(e):1);var n=this.stride;return t=Math.floor((t+e*n)/n)*n,new Io(t,r)},e.prototype.floor=function(t){var e=Io.zone(t);t=Io.time(t);var r=this.stride;return t=Math.floor(t/r)*r,new Io(t,e)},e.prototype.ceil=function(t){var e=Io.zone(t);t=Io.time(t);var r=this.stride;return t=Math.floor((Math.floor((t-1)/r)*r+r)/r)*r,new Io(t,e)},e}(as);as.Milliseconds=gs;var bs=function(t){function e(r){var n=t.call(this,r instanceof at?r.message()||void 0:r)||this;return r instanceof at&&(n.diagnostic=r),n.__proto__=e.prototype,n}return y(e,t),e.prototype.toString=function(){return void 0!==this.diagnostic?this.diagnostic.toString():t.prototype.toString.call(this)},e}(Error),xs=function(){function t(t,e,r,n,i){this._scheme=t,this._authority=e,this._path=r,this._query=n,this._fragment=i}return t.prototype.isDefined=function(){return this._scheme.isDefined()||this._authority.isDefined()||this._path.isDefined()||this._query.isDefined()||this._fragment.isDefined()},t.prototype.isEmpty=function(){return!this._scheme.isDefined()&&!this._authority.isDefined()&&this._path.isEmpty()&&!this._query.isDefined()&&!this._fragment.isDefined()},t.prototype.scheme=function(e){return void 0===e?this._scheme:(e=t.Scheme.fromAny(e))!==this._scheme?this.copy(e,this._authority,this._path,this._query,this._fragment):this},t.prototype.schemePart=function(e){return void 0===e?this._scheme.toString():this.scheme(t.Scheme.parse(e))},t.prototype.schemeName=function(e){return void 0===e?this._scheme.name():this.scheme(t.Scheme.from(e))},t.prototype.authority=function(e){return void 0===e?this._authority:(e=t.Authority.fromAny(e))!==this._authority?this.copy(this._scheme,e,this._path,this._query,this._fragment):this},t.prototype.authorityPart=function(e){return void 0===e?this._authority.toString():this.authority(t.Authority.parse(e))},t.prototype.user=function(t){return void 0===t?this._authority.user():this.authority(this._authority.user(t))},t.prototype.userPart=function(t){return void 0===t?this._authority.userPart():this.authority(this._authority.userPart(t))},t.prototype.username=function(t,e){return void 0===t?this._authority.username():this.authority(this._authority.username(t,e))},t.prototype.password=function(t){return void 0===t?this._authority.password():this.authority(this._authority.password(t))},t.prototype.host=function(t){return void 0===t?this._authority.host():this.authority(this._authority.host(t))},t.prototype.hostPart=function(t){return void 0===t?this._authority.hostPart():this.authority(this._authority.hostPart(t))},t.prototype.hostAddress=function(){return this._authority.hostAddress()},t.prototype.hostName=function(t){return void 0===t?this._authority.hostName():this.authority(this._authority.hostName(t))},t.prototype.hostIPv4=function(t){return void 0===t?this._authority.hostIPv4():this.authority(this._authority.hostIPv4(t))},t.prototype.hostIPv6=function(t){return void 0===t?this._authority.hostIPv6():this.authority(this._authority.hostIPv6(t))},t.prototype.port=function(t){return void 0===t?this._authority.port():this.authority(this._authority.port(t))},t.prototype.portPart=function(t){return void 0===t?this._authority.portPart():this.authority(this._authority.portPart(t))},t.prototype.portNumber=function(t){return void 0===t?this._authority.portNumber():this.authority(this._authority.portNumber(t))},t.prototype.path=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(0===arguments.length)return this._path;var n=t.Path.from.apply(void 0,e);return n!==this._path?this.copy(this._scheme,this._authority,n,this._query,this._fragment):this},t.prototype.pathPart=function(e){return void 0===e?this._path.toString():this.path(t.Path.parse(e))},t.prototype.pathName=function(t){return void 0===t?this._path.name():this.path(this._path.name(t))},t.prototype.parentPath=function(){return this._path.parent()},t.prototype.basePath=function(){return this._path.base()},t.prototype.parent=function(){return t.from(this._scheme,this._authority,this._path.parent())},t.prototype.base=function(){return t.from(this._scheme,this._authority,this._path.base())},t.prototype.appendedPath=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.path(this._path.appended.apply(this._path,arguments))},t.prototype.appendedSlash=function(){return this.path(this._path.appendedSlash())},t.prototype.appendedSegment=function(t){return this.path(this._path.appendedSegment(t))},t.prototype.prependedPath=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.path(this._path.prepended.apply(this._path,arguments))},t.prototype.prependedSlash=function(){return this.path(this._path.prependedSlash())},t.prototype.prependedSegment=function(t){return this.path(this._path.prependedSegment(t))},t.prototype.query=function(e){return void 0===e?this._query:(e=t.Query.fromAny(e))!==this._query?this.copy(this._scheme,this._authority,this._path,e,this._fragment):this},t.prototype.queryPart=function(e){return void 0===e?this._query.toString():this.query(t.Query.parse(e))},t.prototype.updatedQuery=function(t,e){return this.query(this._query.updated(t,e))},t.prototype.removedQuery=function(t){return this.query(this._query.removed(t))},t.prototype.appendedQuery=function(t,e){return this.query(this._query.appended(t,e))},t.prototype.prependedQuery=function(t,e){return this.query(this._query.prepended(t,e))},t.prototype.fragment=function(e){return void 0===e?this._fragment:(e=t.Fragment.fromAny(e))!==this._fragment?t.from(this._scheme,this._authority,this._path,this._query,e):this},t.prototype.fragmentPart=function(e){return void 0===e?this._fragment.toString():this.fragment(t.Fragment.parse(e))},t.prototype.fragmentIdentifier=function(e){return void 0===e?this._fragment.identifier():this.fragment(t.Fragment.from(e))},t.prototype.endpoint=function(){return this._path.isDefined()||this._query.isDefined()||this._fragment.isDefined()?t.from(this._scheme,this._authority):this},t.prototype.resolve=function(e){return(e=t.fromAny(e))._scheme.isDefined()?this.copy(e._scheme,e._authority,e._path.removeDotSegments(),e._query,e._fragment):e._authority.isDefined()?this.copy(this._scheme,e._authority,e._path.removeDotSegments(),e._query,e._fragment):e._path.isEmpty()?this.copy(this._scheme,this._authority,this._path,e._query.isDefined()?e._query:this._query,e._fragment):e._path.isAbsolute()?this.copy(this._scheme,this._authority,e._path.removeDotSegments(),e._query,e._fragment):this.copy(this._scheme,this._authority,this.merge(e._path).removeDotSegments(),e._query,e._fragment)},t.prototype.merge=function(t){return this._authority.isDefined()&&this._path.isEmpty()?t.prependedSlash():this._path.isEmpty()?t:this._path.merge(t)},t.prototype.unresolve=function(e){return e=t.fromAny(e),this._scheme.equals(e._scheme)&&this._authority.equals(e._authority)?t.from(t.Scheme.undefined(),t.Authority.undefined(),this._path.unmerge(e._path),e._query,e._fragment):e},t.prototype.copy=function(e,r,n,i,o){return t.from(e,r,n,i,o)},t.prototype.toAny=function(){var t={};return t.scheme=this._scheme.toAny(),this._authority.toAny(t),t.path=this._path.toAny(),t.query=this._query.toAny(),t.fragment=this._fragment.toAny(),t},t.prototype.compareTo=function(t){var e=this.toString().localeCompare(t.toString());return e<0?-1:e>0?1:0},t.prototype.equals=function(e){return this===e||e instanceof t&&this.toString()===e.toString()},t.prototype.hashCode=function(){return void 0===this._hashCode&&(this._hashCode=f.hash(this.toString())),this._hashCode},t.prototype.debug=function(t){t=t.write("Uri").write(46),t=this.isDefined()?t.write("parse").write(40).write(34).display(this).write(34).write(41):t.write("empty").write(40).write(41)},t.prototype.display=function(t){void 0!==this._string?t=t.write(this._string):(this._scheme.isDefined()&&t.display(this._scheme).write(58),this._authority.isDefined()&&(t=t.write(47).write(47).display(this._authority)),t.display(this._path),this._query.isDefined()&&(t=t.write(63).display(this._query)),this._fragment.isDefined()&&(t=t.write(35).display(this._fragment)))},t.prototype.toString=function(){return void 0===this._string&&(this._string=X.display(this)),this._string},t.empty=function(){return void 0===t._empty&&(t._empty=new t(t.Scheme.undefined(),t.Authority.undefined(),t.Path.empty(),t.Query.undefined(),t.Fragment.undefined())),t._empty},t.from=function(e,r,n,i,o){return void 0===e&&(e=t.Scheme.undefined()),void 0===r&&(r=t.Authority.undefined()),void 0===n&&(n=t.Path.empty()),void 0===i&&(i=t.Query.undefined()),void 0===o&&(o=t.Fragment.undefined()),e.isDefined()||r.isDefined()||n.isDefined()||i.isDefined()||o.isDefined()?new t(e,r,n,i,o):t.empty()},t.fromAny=function(e){if(null==e)return t.empty();if(e instanceof t)return e;if("object"==typeof e){var r=t.Scheme.fromAny(e.scheme),n=t.Authority.fromAny(e.authority||e),i=t.Path.fromAny(e.path),o=t.Query.fromAny(e.query),s=t.Fragment.fromAny(e.fragment);return r.isDefined()||n.isDefined()||i.isDefined()||o.isDefined()||s.isDefined()?new t(r,n,i,o,s):t.empty()}if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.scheme=function(e){return e=t.Scheme.fromAny(e),t.from(e,void 0,void 0,void 0,void 0)},t.schemePart=function(e){var r=t.Scheme.parse(e);return t.from(r,void 0,void 0,void 0,void 0)},t.schemeName=function(e){var r=t.Scheme.from(e);return t.from(r,void 0,void 0,void 0,void 0)},t.authority=function(e){return e=t.Authority.fromAny(e),t.from(void 0,e,void 0,void 0,void 0)},t.authorityPart=function(e){var r=t.Authority.parse(e);return t.from(void 0,r,void 0,void 0,void 0)},t.user=function(e){var r=t.Authority.user(e);return t.from(void 0,r,void 0,void 0,void 0)},t.userPart=function(e){var r=t.Authority.userPart(e);return t.from(void 0,r,void 0,void 0,void 0)},t.username=function(e,r){var n=t.Authority.username(e,r);return t.from(void 0,n,void 0,void 0,void 0)},t.password=function(e){var r=t.Authority.password(e);return t.from(void 0,r,void 0,void 0,void 0)},t.host=function(e){var r=t.Authority.host(e);return t.from(void 0,r,void 0,void 0,void 0)},t.hostPart=function(e){var r=t.Authority.hostPart(e);return t.from(void 0,r,void 0,void 0,void 0)},t.hostName=function(e){var r=t.Authority.hostName(e);return t.from(void 0,r,void 0,void 0,void 0)},t.hostIPv4=function(e){var r=t.Authority.hostIPv4(e);return t.from(void 0,r,void 0,void 0,void 0)},t.hostIPv6=function(e){var r=t.Authority.hostIPv6(e);return t.from(void 0,r,void 0,void 0,void 0)},t.port=function(e){var r=t.Authority.port(e);return t.from(void 0,r,void 0,void 0,void 0)},t.portPart=function(e){var r=t.Authority.portPart(e);return t.from(void 0,r,void 0,void 0,void 0)},t.portNumber=function(e){var r=t.Authority.portNumber(e);return t.from(void 0,r,void 0,void 0,void 0)},t.path=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.Path.from.apply(void 0,e);return t.from(void 0,void 0,n,void 0,void 0)},t.pathPart=function(e){var r=t.Path.parse(e);return t.from(void 0,void 0,r,void 0,void 0)},t.query=function(e){return e=t.Query.fromAny(e),t.from(void 0,void 0,void 0,e,void 0)},t.queryPart=function(e){var r=t.Query.parse(e);return t.from(void 0,void 0,void 0,r,void 0)},t.fragment=function(e){return e=t.Fragment.fromAny(e),t.from(void 0,void 0,void 0,void 0,e)},t.fragmentPart=function(e){var r=t.Fragment.parse(e);return t.from(void 0,void 0,void 0,void 0,r)},t.fragmentIdentifier=function(e){var r=t.Fragment.from(e);return t.from(void 0,void 0,void 0,void 0,r)},t.standardParser=function(){return void 0===this._standardParser&&(this._standardParser=new t.Parser),this._standardParser},t.parse=function(e){return t.standardParser().parseAbsoluteString(e)},t.isUnreservedChar=function(t){return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||45===t||46===t||95===t||126===t},t.isSubDelimChar=function(t){return 33===t||36===t||38===t||40===t||41===t||42===t||43===t||44===t||59===t||61===t||39===t},t.isSchemeChar=function(t){return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||43===t||45===t||46===t},t.isUserInfoChar=function(e){return t.isUnreservedChar(e)||t.isSubDelimChar(e)||58===e},t.isUserChar=function(e){return t.isUnreservedChar(e)||t.isSubDelimChar(e)},t.isHostChar=function(e){return t.isUnreservedChar(e)||t.isSubDelimChar(e)},t.isPathChar=function(e){return t.isUnreservedChar(e)||t.isSubDelimChar(e)||58===e||64===e},t.isQueryChar=function(e){return t.isUnreservedChar(e)||t.isSubDelimChar(e)||47===e||58===e||63===e||64===e},t.isParamChar=function(e){return t.isUnreservedChar(e)||33===e||36===e||40===e||41===e||42===e||43===e||44===e||47===e||58===e||59===e||63===e||64===e||39===e},t.isFragmentChar=function(e){return t.isUnreservedChar(e)||t.isSubDelimChar(e)||47===e||58===e||63===e||64===e},t.isAlpha=function(t){return t>=65&&t<=90||t>=97&&t<=122},t.toLowerCase=function(t){return t>=65&&t<=90?t+32:t},t.writeScheme=function(e,r){for(var n=0,i=e.length;n<i;n+=1){var o=e.charCodeAt(n);if(!(n>0&&t.isSchemeChar(o)||0===n&&t.isAlpha(o)))throw new bs("Invalid scheme: "+e);r=r.write(o)}},t.writeUserInfo=function(e,r){for(var n=0,i=e.length;n<i;n+=1){var o=e.charCodeAt(n);t.isUserInfoChar(o)?r=r.write(o):t.writeEncoded(o,r)}},t.writeUser=function(e,r){for(var n=0,i=e.length;n<i;n+=1){var o=e.charCodeAt(n);t.isUserChar(o)?r=r.write(o):t.writeEncoded(o,r)}},t.writeHost=function(e,r){for(var n=0,i=e.length;n<i;n+=1){var o=e.charCodeAt(n);t.isHostChar(o)?r=r.write(o):t.writeEncoded(o,r)}},t.writeHostLiteral=function(e,r){for(var n=0,i=e.length;n<i;n+=1){var o=e.charCodeAt(n);t.isHostChar(o)||58===o?r=r.write(o):t.writeEncoded(o,r)}},t.writePathSegment=function(e,r){for(var n=0,i=e.length;n<i;n+=1){var o=e.charCodeAt(n);t.isPathChar(o)?r=r.write(o):t.writeEncoded(o,r)}},t.writeQuery=function(e,r){for(var n=0,i=e.length;n<i;n+=1){var o=e.charCodeAt(n);t.isQueryChar(o)?r=r.write(o):t.writeEncoded(o,r)}},t.writeParam=function(e,r){for(var n=0,i=e.length;n<i;n+=1){var o=e.charCodeAt(n);t.isParamChar(o)?r=r.write(o):t.writeEncoded(o,r)}},t.writeFragment=function(e,r){for(var n=0,i=e.length;n<i;n+=1){var o=e.charCodeAt(n);t.isFragmentChar(o)?r=r.write(o):t.writeEncoded(o,r)}},t.writeEncoded=function(e,r){0===e?(t.writePctEncoded(192,r),t.writePctEncoded(128,r)):e>=0&&e<=127?t.writePctEncoded(e,r):e>=128&&e<=2047?(t.writePctEncoded(192|e>>>6,r),t.writePctEncoded(128|63&e,r)):e>=2048&&e<=65535||e>=57344&&e<=65535?(t.writePctEncoded(224|e>>>12,r),t.writePctEncoded(128|e>>>6&63,r),t.writePctEncoded(128|63&e,r)):e>=65536&&e<=1114111?(t.writePctEncoded(240|e>>>18,r),t.writePctEncoded(128|e>>>12&63,r),t.writePctEncoded(128|e>>>6&63,r),t.writePctEncoded(128|63&e,r)):(t.writePctEncoded(239,r),t.writePctEncoded(191,r),t.writePctEncoded(189,r))},t.writePctEncoded=function(t,e){e=e.write(37).write(wt.lowercase().encodeDigit(t>>>4&15)).write(wt.lowercase().encodeDigit(15&t))},t.form=function(){return void 0===t._form&&(t._form=new t.Form(t.empty())),t._form},t}(),Ss=function(){function t(t){this._name=t}return t.prototype.isDefined=function(){return 0!==this._name.length},t.prototype.name=function(){return this._name},t.prototype.toAny=function(){return 0!==this._name.length?this._name:void 0},t.prototype.compareTo=function(t){var e=this._name.localeCompare(t._name);return e<0?-1:e>0?1:0},t.prototype.equals=function(e){return this===e||e instanceof t&&this._name===e._name},t.prototype.hashCode=function(){return f.hash(this._name)},t.prototype.debug=function(t){t=t.write("UriScheme").write(46),t=this.isDefined()?t.write("parse").write(40).write(34).display(this).write(34).write(41):t.write("undefined").write(40).write(41)},t.prototype.display=function(t){xs.writeScheme(this._name,t)},t.prototype.toString=function(){return this._name},t.undefined=function(){return void 0===t._undefined&&(t._undefined=new t("")),t._undefined},t.from=function(e){var r=t.cache(),n=r.get(e);return void 0!==n?n:r.put(e,new t(e))},t.fromAny=function(e){if(null==e)return t.undefined();if(e instanceof t)return e;if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){return xs.standardParser().parseSchemeString(t)},t.cache=function(){if(void 0===t._cache){t._cache=new S(4)}return t._cache},t}();xs.Scheme=Ss;var Os=function(){function t(t,e,r){this._user=t,this._host=e,this._port=r}return t.prototype.isDefined=function(){return this._user.isDefined()||this._host.isDefined()||this._port.isDefined()},t.prototype.user=function(t){return void 0===t?this._user:(t=xs.User.fromAny(t))!==this._user?this.copy(t,this._host,this._port):this},t.prototype.userPart=function(t){return void 0===t?this._user.toString():this.user(xs.User.parse(t))},t.prototype.username=function(t,e){return void 0===t?this._user._username||"":void 0===e?this.user(this._user.username(t)):this.user(xs.User.from(t,e))},t.prototype.password=function(t){return void 0===t?this._user.password():this.user(this._user.password(t))},t.prototype.host=function(t){return void 0===t?this._host:(t=xs.Host.fromAny(t))!==this._host?this.copy(this._user,t,this._port):this},t.prototype.hostPart=function(t){return void 0===t?this._host.toString():this.host(xs.Host.parse(t))},t.prototype.hostAddress=function(){return this._host.address()},t.prototype.hostName=function(t){return void 0===t?this._host.name():this.host(xs.Host.from(t))},t.prototype.hostIPv4=function(t){return void 0===t?this._host.ipv4():this.host(xs.Host.ipv4(t))},t.prototype.hostIPv6=function(t){return void 0===t?this._host.ipv6():this.host(xs.Host.ipv6(t))},t.prototype.port=function(t){return void 0===t?this._port:(t=xs.Port.fromAny(t))!==this._port?this.copy(this._user,this._host,t):this},t.prototype.portPart=function(t){return void 0===t?this._port.toString():this.port(xs.Port.parse(t))},t.prototype.portNumber=function(t){return void 0===t?this._port.number():this.port(xs.Port.from(t))},t.prototype.copy=function(e,r,n){return t.from(e,r,n)},t.prototype.toAny=function(t){return this.isDefined()&&(t=t||{},this._user.toAny(t),this._host.isDefined()&&(t.host=this._host.toAny()),this._port.isDefined()&&(t.port=this._port.toAny())),t},t.prototype.compareTo=function(t){var e=this.toString().localeCompare(t.toString());return e<0?-1:e>0?1:0},t.prototype.equals=function(e){return this===e||e instanceof t&&this.toString()===e.toString()},t.prototype.hashCode=function(){return void 0===this._hashCode&&(this._hashCode=f.hash(this.toString())),this._hashCode},t.prototype.debug=function(t){t=t.write("UriAuthority").write(46),t=this.isDefined()?t.write("parse").write(40).write(34).display(this).write(34).write(41):t.write("undefined").write(40).write(41)},t.prototype.display=function(t){void 0!==this._string?t=t.write(this._string):(this._user.isDefined()&&t.display(this._user).write(64),t.display(this._host),this._port.isDefined()&&(t=t.write(58).display(this._port)))},t.prototype.toString=function(){return void 0===this._string&&(this._string=X.display(this)),this._string},t.undefined=function(){return void 0===t._undefined&&(t._undefined=new t(xs.User.undefined(),xs.Host.undefined(),xs.Port.undefined())),t._undefined},t.from=function(e,r,n){return void 0===e&&(e=xs.User.undefined()),void 0===r&&(r=xs.Host.undefined()),void 0===n&&(n=xs.Port.undefined()),e.isDefined()||r.isDefined()||n.isDefined()?new t(e,r,n):t.undefined()},t.fromAny=function(e){if(null==e)return t.undefined();if(e instanceof t)return e;if("object"==typeof e){var r=xs.User.fromAny(e.user||e),n=xs.Host.fromAny(e.host),i=xs.Port.fromAny(e.port);return t.from(r,n,i)}if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.user=function(e){return e=xs.User.fromAny(e),t.from(e,void 0,void 0)},t.userPart=function(e){var r=xs.User.parse(e);return t.from(r,void 0,void 0)},t.username=function(e,r){var n=xs.User.from(e,r);return t.from(n,void 0,void 0)},t.password=function(e){var r=xs.User.from("",e);return t.from(r,void 0,void 0)},t.host=function(e){return e=xs.Host.fromAny(e),t.from(void 0,e,void 0)},t.hostPart=function(e){var r=xs.Host.parse(e);return t.from(void 0,r,void 0)},t.hostName=function(e){var r=xs.Host.from(e);return t.from(void 0,r,void 0)},t.hostIPv4=function(e){var r=xs.Host.ipv4(e);return t.from(void 0,r,void 0)},t.hostIPv6=function(e){var r=xs.Host.ipv6(e);return t.from(void 0,r,void 0)},t.port=function(e){return e=xs.Port.fromAny(e),t.from(void 0,void 0,e)},t.portPart=function(e){var r=xs.Port.parse(e);return t.from(void 0,void 0,r)},t.portNumber=function(e){var r=xs.Port.from(e);return t.from(void 0,void 0,r)},t.parse=function(t){return xs.standardParser().parseAuthorityString(t)},t}();xs.Authority=Os;var As=function(){function t(t,e){this._username=t,this._password=e}return t.prototype.isDefined=function(){return null!==this._username},t.prototype.username=function(t){return void 0===t?this._username||"":t!==this._username?this.copy(t,this._password):this},t.prototype.password=function(t){return void 0===t?this._password:t!==this._password?this.copy(this._username,t):this},t.prototype.copy=function(e,r){return t.from(e,r)},t.prototype.toAny=function(t){return null!==this._username&&((t=t||{}).username=this._username,null!==this._password&&(t.password=this._password)),t},t.prototype.equals=function(e){return this===e||e instanceof t&&(this._username===e._username&&this._password===e._password)},t.prototype.hashCode=function(){return void 0===t._hashSeed&&(t._hashSeed=f.seed(t)),f.mash(f.mix(f.mix(t._hashSeed,f.hash(this._username)),f.hash(this._password)))},t.prototype.debug=function(t){t=t.write("UriUser").write(46),t=this.isDefined()?t.write("parse").write(40).write(34).display(this).write(34).write(41):t.write("undefined").write(40).write(41)},t.prototype.display=function(t){null!==this._username&&(xs.writeUser(this._username,t),null!==this._password&&(t=t.write(58),xs.writeUser(this._password,t)))},t.prototype.toString=function(){return X.display(this)},t.undefined=function(){return void 0===t._undefined&&(t._undefined=new t(null,null)),t._undefined},t.from=function(e,r){return void 0===r&&(r=null),null!==e||null!==r?new t(e||"",r):t.undefined()},t.fromAny=function(e){if(null==e)return t.undefined();if(e instanceof t)return e;if("object"==typeof e){var r="string"==typeof e.username?e.username:null,n="string"==typeof e.password?e.password:null;return t.from(r,n)}if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){return xs.standardParser().parseUserString(t)},t}();xs.User=As;var Es=function(){function t(){}return t.prototype.isDefined=function(){return!0},t.prototype.name=function(){return null},t.prototype.ipv4=function(){return null},t.prototype.ipv6=function(){return null},t.prototype.toAny=function(){return this.toString()},t.prototype.compareTo=function(t){var e=this.toString().localeCompare(t.toString());return e<0?-1:e>0?1:0},t.prototype.equals=function(e){return this===e||e instanceof t&&this.toString()===e.toString()},t.prototype.hashCode=function(){return void 0===this._hashCode&&(this._hashCode=f.hash(this.toString())),this._hashCode},t.undefined=function(){return void 0===t._undefined&&(t._undefined=new xs.HostUndefined),t._undefined},t.from=function(e){var r=t.cache(),n=r.get(e);return n instanceof xs.HostName?n:r.put(e,new xs.HostName(e))},t.ipv4=function(e){var r=t.cache(),n=r.get(e);return n instanceof xs.HostIPv4?n:r.put(e,new xs.HostIPv4(e))},t.ipv6=function(e){var r=t.cache(),n=r.get(e);return n instanceof xs.HostIPv6?n:r.put(e,new xs.HostIPv6(e))},t.fromAny=function(e){if(null==e)return t.undefined();if(e instanceof t)return e;if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){return xs.standardParser().parseHostString(t)},t.cache=function(){if(void 0===t._cache){t._cache=new S(16)}return t._cache},t}();xs.Host=Es;var Cs=function(t){function e(e){var r=t.call(this)||this;return r._address=e,r}return y(e,t),e.prototype.address=function(){return this._address},e.prototype.name=function(){return this._address},e.prototype.debug=function(t){t=t.write("UriHost").write(46).write("from").write(40).debug(this._address).write(41)},e.prototype.display=function(t){xs.writeHost(this._address,t)},e.prototype.toString=function(){return this._address},e}(Es);xs.HostName=Cs;var Is=function(t){function e(e){var r=t.call(this)||this;return r._address=e,r}return y(e,t),e.prototype.address=function(){return this._address},e.prototype.ipv4=function(){return this._address},e.prototype.debug=function(t){t=t.write("UriHost").write(46).write("ipv4").write(40).debug(this._address).write(41)},e.prototype.display=function(t){xs.writeHost(this._address,t)},e.prototype.toString=function(){return this._address},e}(Es);xs.HostIPv4=Is;var Ds=function(t){function e(e){var r=t.call(this)||this;return r._address=e,r}return y(e,t),e.prototype.address=function(){return this._address},e.prototype.ipv6=function(){return this._address},e.prototype.debug=function(t){t=t.write("UriHost").write(46).write("ipv6").write(40).debug(this._address).write(41)},e.prototype.display=function(t){void 0!==this._string?t=t.write(this._string):(t=t.write(91),xs.writeHostLiteral(this._address,t),t=t.write(93))},e.prototype.toString=function(){return void 0===this._string&&(this._string="["+this.address+"]"),this._string},e}(Es);xs.HostIPv6=Ds;var ks=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.isDefined=function(){return!1},e.prototype.address=function(){return""},e.prototype.debug=function(t){t=t.write("UriHost").write(46).write("undefined").write(40).write(41)},e.prototype.display=function(t){},e.prototype.toString=function(){return""},e}(Es);xs.HostUndefined=ks;var Ms=function(){function t(t){this._number=t}return t.prototype.isDefined=function(){return 0!==this._number},t.prototype.number=function(){return this._number},t.prototype.valueOf=function(){return this._number},t.prototype.toAny=function(){return this._number},t.prototype.compareTo=function(t){return this._number<t._number?-1:this._number>t._number?1:0},t.prototype.equals=function(e){return this===e||e instanceof t&&this._number===e._number},t.prototype.hashCode=function(){return void 0===t._hashSeed&&(t._hashSeed=f.seed(t)),f.mash(f.mix(t._hashSeed,this._number))},t.prototype.debug=function(t){t=t.write("UriPort").write(46),this.isDefined()?(t=t.write("from").write(40),X.displayNumber(this._number,t),t=t.write(41)):t=t.write("undefined").write(40).write(41)},t.prototype.display=function(t){X.displayNumber(this._number,t)},t.prototype.toString=function(){return""+this._number},t.undefined=function(){return void 0===t._undefined&&(t._undefined=new t(0)),t._undefined},t.from=function(e){if(e>0){var r=t.cache(),n=r.get(e);return void 0!==n?n:r.put(e,new t(e))}if(0===e)return t.undefined();throw new TypeError(""+e)},t.fromAny=function(e){if(null==e)return t.undefined();if(e instanceof t)return e;if("number"==typeof e)return t.from(e);if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){return xs.standardParser().parsePortString(t)},t.cache=function(){if(void 0===t._cache){t._cache=new S(4)}return t._cache},t}();xs.Port=Ms;var Ps=function(){function t(){}return Object.defineProperty(t.prototype,"length",{get:function(){for(var t=0,e=this;!e.isEmpty();)t+=1,e=e.tail();return t},enumerable:!1,configurable:!0}),t.prototype.get=function(t){for(var e=0,r=this;!r.isEmpty();){if(!(e<t))return r.head();e+=1,r=r.tail()}},t.prototype.name=function(t){if(void 0!==t){var e=new xs.PathBuilder;return e.addPath(this.base()),e.addSegment(t),e.bind()}if(this.isEmpty())return"";for(var r=this;;){var n=r.tail();if(n.isEmpty())return r.isRelative()?r.head():"";r=n}},t.prototype.foot=function(){if(this.isEmpty())return this;for(var t=this;;){var e=t.tail();if(e.isEmpty())return t;t=e}},t.prototype.isSubpathOf=function(e){e=t.fromAny(e);for(var r=this;!r.isEmpty()&&!e.isEmpty();){if(r.head()!==e.head())return!1;r=r.tail(),e=e.tail()}return e.isEmpty()},t.prototype.appended=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(arguments.length>0){var r=new xs.PathBuilder;return r.addPath(this),r.push.apply(r,arguments),r.bind()}return this},t.prototype.appendedSlash=function(){var t=new xs.PathBuilder;return t.addPath(this),t.addSlash(),t.bind()},t.prototype.appendedSegment=function(t){var e=new xs.PathBuilder;return e.addPath(this),e.addSegment(t),e.bind()},t.prototype.prepended=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(arguments.length>0){var r=new xs.PathBuilder;return r.push.apply(r,arguments),r.addPath(this),r.bind()}return this},t.prototype.prependedSlash=function(){return t.slash(this)},t.prototype.prependedSegment=function(e){return this.isEmpty()||this.isAbsolute()?t.segment(e,this):t.segment(e,t.slash(this))},t.prototype.resolve=function(t){return t.isEmpty()?this:t.isAbsolute()||this.isEmpty()?t.removeDotSegments():this.merge(t).removeDotSegments()},t.prototype.removeDotSegments=function(){for(var e=this,r=new xs.PathBuilder;!e.isEmpty();){var n=e.head();if("."===n||".."===n)(e=e.tail()).isEmpty()||(e=e.tail());else if(e.isAbsolute()){var i=e.tail();if(i.isEmpty())r.push(e.head()),e=e.tail();else{var o=i.head();"."===o?(e=i.tail()).isEmpty()&&(e=t.slash()):".."===o?((e=i.tail()).isEmpty()&&(e=t.slash()),r.isEmpty()||r.pop().isAbsolute()||r.isEmpty()||r.pop()):(r.push(n,o),e=i.tail())}}else r.push(e.head()),e=e.tail()}return r.bind()},t.prototype.merge=function(t){if(this.isEmpty())return t;for(var e=new xs.PathBuilder,r=this;;){var n=r.tail();if(n.isEmpty()){r.isAbsolute()&&e.addSlash();break}r.isAbsolute()?e.addSlash():e.addSegment(r.head()),r=n}return e.addPath(t),e.bind()},t.prototype.unmerge=function(e,r){void 0===r&&(r=e);for(var n=this;;){if(n.isEmpty())return e.isEmpty()||e.tail().isEmpty()?e:e.tail();if(n.isRelative())return e;if(e.isRelative())return t.slash(e);var i=n.tail(),o=e.tail();if(!i.isEmpty()&&o.isEmpty())return t.slash();if(i.isEmpty()||o.isEmpty()||i.head()!==o.head())return o;if(i=i.tail(),o=o.tail(),!i.isEmpty()&&o.isEmpty())return r;n=i,e=o}},t.prototype.toAny=function(){for(var t=[],e=this;!e.isEmpty();)t.push(e.head()),e=e.tail();return t},t.prototype.compareTo=function(t){var e=this.toString().localeCompare(t.toString());return e<0?-1:e>0?1:0},t.prototype.equals=function(e){return this===e||e instanceof t&&this.toString()===e.toString()},t.prototype.hashCode=function(){return void 0===this._hashCode&&(this._hashCode=f.hash(this.toString())),this._hashCode},t.prototype.display=function(t){for(var e=this;!e.isEmpty();)e.isAbsolute()?t=t.write(47):xs.writePathSegment(e.head(),t),e=e.tail()},t.builder=function(){return new xs.PathBuilder},t.empty=function(){return void 0===t._empty&&(t._empty=new xs.PathEmpty),t._empty},t.slash=function(e){return void 0===e&&(e=t.empty()),e===t.empty()?(void 0===t._slash&&(t._slash=new xs.PathSlash(e)),t._slash):new xs.PathSlash(e)},t.segment=function(e,r){return void 0===r&&(r=t.empty()),e=this.cacheSegment(e),new xs.PathSegment(e,r)},t.from=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new xs.PathBuilder;return r.push.apply(r,arguments),r.bind()},t.fromAny=function(e){if(null==e)return t.empty();if(e instanceof t)return e;if(Array.isArray(e))return t.from.apply(void 0,arguments);if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){return xs.standardParser().parsePathString(t)},t.segmentCache=function(){if(void 0===t._segmentCache){t._segmentCache=new A(64)}return t._segmentCache},t.cacheSegment=function(t){return t.length<=32?this.segmentCache().put(t):t},t.pathForm=function(){return void 0===t._pathForm&&(t._pathForm=new xs.PathForm(t.empty())),t._pathForm},t}();xs.Path=Ps;var Ts=function(t){function e(e,r){var n=t.call(this)||this;return n._head=e,n._tail=r,n}return y(e,t),e.prototype.isDefined=function(){return!0},e.prototype.isAbsolute=function(){return!1},e.prototype.isRelative=function(){return!0},e.prototype.isEmpty=function(){return!1},e.prototype.head=function(){return this._head},e.prototype.tail=function(){return this._tail},e.prototype.setTail=function(t){t.isAbsolute()?this._tail=t:this._tail=Ps.slash(t)},e.prototype.dealias=function(){return new e(this._head,this._tail)},e.prototype.parent=function(){var t=this._tail;return t.isEmpty()||t.tail().isEmpty()?Ps.empty():new e(this._head,t.parent())},e.prototype.base=function(){var t=this._tail;return t.isEmpty()?Ps.empty():new e(this._head,t.base())},e.prototype.prependedSegment=function(t){return Ps.segment(t,Ps.slash(this))},e.prototype.debug=function(t){t=t.write("UriPath").write(46).write("parse").write(40).write(34).display(this).write(34).write(41)},e.prototype.display=function(e){void 0!==this._string?e=e.write(this._string):t.prototype.display.call(this,e)},e.prototype.toString=function(){return void 0===this._string&&(this._string=X.display(this)),this._string},e}(Ps);xs.PathSegment=Ts;var Vs=function(t){function e(e){var r=t.call(this)||this;return r._tail=e,r}return y(e,t),e.prototype.isDefined=function(){return!0},e.prototype.isAbsolute=function(){return!0},e.prototype.isRelative=function(){return!1},e.prototype.isEmpty=function(){return!1},e.prototype.head=function(){return"/"},e.prototype.tail=function(){return this._tail},e.prototype.setTail=function(t){this._tail=t},e.prototype.dealias=function(){return new e(this._tail)},e.prototype.parent=function(){var t=this._tail;return t.isEmpty()?Ps.empty():t.tail().isEmpty()?Ps.slash():new e(t.parent())},e.prototype.base=function(){var t=this._tail;return t.isEmpty()?this:new e(t.base())},e.prototype.prependedSegment=function(t){return Ps.segment(t,this)},e.prototype.debug=function(t){t=t.write("UriPath").write(46).write("parse").write(40).write(34).display(this).write(34).write(41)},e.prototype.display=function(e){void 0!==this._string?e=e.write(this._string):t.prototype.display.call(this,e)},e.prototype.toString=function(){return void 0===this._string&&(this._string=X.display(this)),this._string},e}(Ps);xs.PathSlash=Vs;var zs=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.isDefined=function(){return!1},e.prototype.isAbsolute=function(){return!1},e.prototype.isRelative=function(){return!0},e.prototype.isEmpty=function(){return!0},e.prototype.head=function(){throw new Error("Empty UriPath")},e.prototype.tail=function(){throw new Error("Empty UriPath")},e.prototype.setTail=function(t){throw new Error("Empty UriPath")},e.prototype.dealias=function(){return this},e.prototype.parent=function(){return this},e.prototype.base=function(){return this},e.prototype.appended=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ps.from.apply(void 0,arguments)},e.prototype.appendedSlash=function(){return Ps.slash()},e.prototype.appendedSegment=function(t){return Ps.segment(t)},e.prototype.prepended=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ps.from.apply(void 0,arguments)},e.prototype.prependedSlash=function(){return Ps.slash()},e.prototype.prependedSegment=function(t){return Ps.segment(t)},e.prototype.merge=function(t){return t},e.prototype.debug=function(t){t=t.write("UriPath").write(46).write("empty").write(40).write(41)},e.prototype.display=function(t){},e.prototype.toString=function(){return""},e}(Ps);xs.PathEmpty=zs;var Bs=function(){function t(){this._first=xs.Path.empty(),this._last=null,this._size=0,this._aliased=0}return t.prototype.isEmpty=function(){return 0===this._size},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0;r<t.length;r+=1){var n=t[r];n instanceof xs.Path?this.addPath(n):Array.isArray(n)?this.push.apply(this,n):"/"===n?this.addSlash():this.addSegment(n)}},t.prototype.bind=function(){return this._aliased=0,this._first},t.prototype.addSlash=function(){var t=xs.Path.slash().dealias(),e=this._size;0===e?this._first=t:this.dealias(e-1).setTail(t),this._last=t,this._size=e+1,this._aliased+=1},t.prototype.addSegment=function(t){var e=xs.Path.segment(t,xs.Path.empty()),r=this._size;0===r?this._first=e:this.dealias(r-1).setTail(e),this._last=e,this._size=r+1,this._aliased+=1},t.prototype.addPath=function(t){if(!t.isEmpty()){var e=this._size;for(0===e?this._first=t:this.dealias(e-1).setTail(t),e+=1;;){var r=t.tail();if(r.isEmpty())break;t=r,e+=1}this._last=t,this._size=e}},t.prototype.pop=function(){var t=this._size,e=this._aliased;if(0===t)throw new Error("Empty UriPath");if(1===t){var r=this._first;return this._first=r.tail(),r.tail().isEmpty()&&(this._last=null),this._size=t-1,e>0&&(this._aliased=e-1),r}var n=this.dealias(t-2);return n.setTail(xs.Path.empty()),this._last=n,this._size=t-1,this._aliased=e-1,n.tail()},t.prototype.dealias=function(t){var e=0,r=null,n=this._first;if(this._aliased<=t){for(;e<this._aliased;)r=n,n=n.tail(),e+=1;for(;e<=t;){var i=n.dealias();0===e?this._first=i:r.setTail(i),r=i,n=n.tail(),e+=1}e===this._size&&(this._last=r),this._aliased=e}else if(0===t)r=this._first;else if(t===this._size-1)r=this._last;else for(;e<=t;)r=n,n=n.tail(),e+=1;return r},t}();xs.PathBuilder=Bs;var Rs=function(){function t(){}return Object.defineProperty(t.prototype,"length",{get:function(){for(var t=0,e=this;!e.isEmpty();)t+=1,e=e.tail();return t},enumerable:!1,configurable:!0}),t.prototype.has=function(t){for(var e=this;!e.isEmpty();){if(t===e.key())return!0;e=e.tail()}return!1},t.prototype.get=function(t){for(var e=this;!e.isEmpty();){if(t===e.key())return e.value();e=e.tail()}},t.prototype.updated=function(t,e){for(var r=this,n=new xs.QueryBuilder,i=!1;!r.isEmpty();)t===r.key()?(n.addParam(t,e),i=!0):n.addParam(r.key(),r.value()),r=r.tail();return i||n.addParam(t,e),n.bind()},t.prototype.removed=function(t){for(var e=this,r=new xs.QueryBuilder,n=!1;!e.isEmpty();)t===e.key()?n=!0:r.addParam(e.key(),e.value()),e=e.tail();return n?r.bind():this},t.prototype.appended=function(t,e){var r=new xs.QueryBuilder;return r.addQuery(this),r.add(t,e),r.bind()},t.prototype.prepended=function(t,e){var r=new xs.QueryBuilder;return r.add(t,e),r.addQuery(this),r.bind()},t.prototype.toAny=function(t){if(this.isDefined()){t=t||{};for(var e=this,r=0;!e.isEmpty();){var n=e.key();null!==n?t[n]=e.value():t["$"+r]=e.value(),e=e.tail(),r+=1}}return t},t.prototype.compareTo=function(t){var e=this.toString().localeCompare(t.toString());return e<0?-1:e>0?1:0},t.prototype.equals=function(e){return this===e||e instanceof t&&this.toString()===e.toString()},t.prototype.hashCode=function(){return void 0===this._hashCode&&(this._hashCode=f.hash(this.toString())),this._hashCode},t.prototype.display=function(t){for(var e=this,r=!0;!e.isEmpty();){r?r=!1:t=t.write(38);var n=e.key();null!==n&&(xs.writeParam(n,t),t=t.write(61)),xs.writeQuery(e.value(),t),e=e.tail()}},t.builder=function(){return new xs.QueryBuilder},t.undefined=function(){return void 0===t._undefined&&(t._undefined=new xs.QueryUndefined),t._undefined},t.param=function(e,r,n){return void 0===n?(n=r,r=e,e=null):null!==e&&(e=this.cacheKey(e)),void 0===n&&(n=t.undefined()),new xs.QueryParam(e,r,n)},t.from=function(t,e){var r=new xs.QueryBuilder;return r.add(t,e),r.bind()},t.fromAny=function(e){if(null==e)return t.undefined();if(e instanceof t)return e;if("object"==typeof e){var r=new xs.QueryBuilder;return r.add(e),r.bind()}if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){return xs.standardParser().parseQueryString(t)},t.keyCache=function(){if(void 0===t._keyCache){t._keyCache=new A(64)}return t._keyCache},t.cacheKey=function(e){return e.length<=32?t.keyCache().put(e):e},t}();xs.Query=Rs;var Fs=function(t){function e(e,r,n){var i=t.call(this)||this;return i._key=e,i._value=r,i._tail=n,i}return y(e,t),e.prototype.isDefined=function(){return!0},e.prototype.isEmpty=function(){return!1},e.prototype.head=function(){return[this._key,this._value]},e.prototype.key=function(){return this._key},e.prototype.value=function(){return this._value},e.prototype.tail=function(){return this._tail},e.prototype.setTail=function(t){this._tail=t},e.prototype.dealias=function(){return new e(this._key,this._value,this._tail)},e.prototype.debug=function(t){t=t.write("UriQuery").write(46).write("parse").write(40).write(34).display(this).write(34).write(41)},e.prototype.display=function(e){void 0!==this._string?e=e.write(this._string):t.prototype.display.call(this,e)},e.prototype.toString=function(){return void 0===this._string&&(this._string=X.display(this)),this._string},e}(Rs);xs.QueryParam=Fs;var Ls=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.isDefined=function(){return!1},e.prototype.isEmpty=function(){return!0},e.prototype.head=function(){throw new Error("Undefined Query")},e.prototype.key=function(){throw new Error("Undefined Query")},e.prototype.value=function(){throw new Error("Undefined Query")},e.prototype.tail=function(){throw new Error("Undefined Query")},e.prototype.setTail=function(t){throw new Error("Undefined Query")},e.prototype.dealias=function(){return this},e.prototype.updated=function(t,e){return Rs.param(t,e,this)},e.prototype.removed=function(t){return this},e.prototype.appended=function(t,e){return Rs.from(t,e)},e.prototype.prepended=function(t,e){return Rs.from(t,e)},e.prototype.debug=function(t){t=t.write("UriQuery").write(46).write("undefined").write(40).write(41)},e.prototype.display=function(t){},e.prototype.toString=function(){return""},e}(Rs);xs.QueryUndefined=Ls;var qs=function(){function t(){this._first=xs.Query.undefined(),this._last=null,this._size=0,this._aliased=0}return t.prototype.isEmpty=function(){return 0===this._size},t.prototype.add=function(t,e){if(void 0!==e)this.addParam(t,e);else if("string"==typeof t)this.addParam(null,t);else if(t instanceof xs.Query)this.addQuery(t);else{var r=t;for(var n in r){var i=n,o=r[n];36===n.charCodeAt(0)&&(i=null),this.addParam(i,o)}}},t.prototype.bind=function(){return this._aliased=0,this._first},t.prototype.addParam=function(t,e){void 0===e&&(e=t,t=null);var r=xs.Query.param(t,e,xs.Query.undefined()),n=this._size;0===n?this._first=r:this.dealias(n-1).setTail(r),this._last=r,this._size=n+1,this._aliased+=1},t.prototype.addQuery=function(t){if(!t.isEmpty()){var e=this._size;for(0===e?this._first=t:this.dealias(e-1).setTail(t),e+=1;;){var r=t.tail();if(r.isEmpty())break;t=r,e+=1}this._last=t,this._size=e}},t.prototype.dealias=function(t){var e=0,r=null,n=this._first;if(this._aliased<=t){for(;e<this._aliased;)r=n,n=n.tail(),e+=1;for(;e<=t;){var i=n.dealias();0===e?this._first=i:r.setTail(i),r=i,n=n.tail(),e+=1}e===this._size&&(this._last=r),this._aliased=e}else if(0===t)r=this._first;else if(t===this._size-1)r=this._last;else for(;e<=t;)r=n,n=n.tail(),e+=1;return r},t}();xs.QueryBuilder=qs;var Ns=function(){function t(t){this._identifier=t}return t.prototype.isDefined=function(){return null!==this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.toAny=function(){return null!==this._identifier?this._identifier:void 0},t.prototype.compareTo=function(t){var e=this.toString().localeCompare(t.toString());return e<0?-1:e>0?1:0},t.prototype.equals=function(e){return this===e||e instanceof t&&this._identifier===e._identifier},t.prototype.hashCode=function(){return f.hash(this._identifier)},t.prototype.debug=function(t){t=t.write("UriFragment").write(46),t=this.isDefined()?t.write("parse").write(40).write(34).display(this).write(34).write(41):t.write("undefined").write(40).write(41)},t.prototype.display=function(t){void 0!==this._string?t=t.write(this._string):null!==this._identifier&&xs.writeFragment(this._identifier,t)},t.prototype.toString=function(){return void 0===this._string&&(this._string=X.display(this)),this._string},t.undefined=function(){return void 0===t._undefined&&(t._undefined=new t(null)),t._undefined},t.from=function(e){if(null!==e){var r=t.cache(),n=r.get(e);return void 0!==n?n:r.put(e,new t(e))}return t.undefined()},t.fromAny=function(e){if(null==e)return t.undefined();if(e instanceof t)return e;if("string"==typeof e)return t.parse(e);throw new TypeError(""+e)},t.parse=function(t){return xs.standardParser().parseFragmentString(t)},t.cache=function(){if(void 0===t._cache){t._cache=new S(32)}return t._cache},t}();xs.Fragment=Ns;var Us=function(){function t(){}return t.prototype.absolute=function(t,e,r,n,i){return xs.from(t,e,r,n,i)},t.prototype.scheme=function(t){return xs.Scheme.from(t)},t.prototype.authority=function(t,e,r){return xs.Authority.from(t,e,r)},t.prototype.user=function(t,e){return xs.User.from(t,e)},t.prototype.hostName=function(t){return xs.Host.from(t)},t.prototype.hostIPv4=function(t){return xs.Host.ipv4(t)},t.prototype.hostIPv6=function(t){return xs.Host.ipv6(t)},t.prototype.port=function(t){return xs.Port.from(t)},t.prototype.pathEmpty=function(){return xs.Path.empty()},t.prototype.pathBuilder=function(){return new xs.PathBuilder},t.prototype.queryBuilder=function(){return new xs.QueryBuilder},t.prototype.fragment=function(t){return xs.Fragment.from(t)},t.prototype.absoluteParser=function(){return new t.AbsoluteParser(this)},t.prototype.parseAbsolute=function(e){return t.AbsoluteParser.parse(e,this)},t.prototype.parseAbsoluteString=function(t){var e=Z.stringInput(t),r=this.parseAbsolute(e);return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t.prototype.schemeParser=function(){return new t.SchemeParser(this)},t.prototype.parseScheme=function(e){return t.SchemeParser.parse(e,this)},t.prototype.parseSchemeString=function(t){var e=Z.stringInput(t),r=this.parseScheme(e);return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t.prototype.authorityParser=function(){return new t.AuthorityParser(this)},t.prototype.parseAuthority=function(e){return t.AuthorityParser.parse(e,this)},t.prototype.parseAuthorityString=function(t){var e=Z.stringInput(t),r=this.parseAuthority(e);return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t.prototype.userParser=function(){return new t.UserParser(this)},t.prototype.parseUser=function(e){return t.UserParser.parse(e,this)},t.prototype.parseUserString=function(t){var e=Z.stringInput(t),r=this.parseUser(e);return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t.prototype.hostParser=function(){return new t.HostParser(this)},t.prototype.parseHost=function(e){return t.HostParser.parse(e,this)},t.prototype.parseHostString=function(t){var e=Z.stringInput(t),r=this.parseHost(e);return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t.prototype.hostAddressParser=function(){return new t.HostAddressParser(this)},t.prototype.parseHostAddress=function(e){return t.HostAddressParser.parse(e,this)},t.prototype.hostLiteralParser=function(){return new t.HostLiteralParser(this)},t.prototype.parseHostLiteral=function(e){return t.HostLiteralParser.parse(e,this)},t.prototype.portParser=function(){return new t.PortParser(this)},t.prototype.parsePort=function(e){return t.PortParser.parse(e,this)},t.prototype.parsePortString=function(t){var e=Z.stringInput(t),r=this.parsePort(e);return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t.prototype.pathParser=function(e){return new t.PathParser(this,e)},t.prototype.parsePath=function(e,r){return t.PathParser.parse(e,this,r)},t.prototype.parsePathString=function(t){var e=Z.stringInput(t),r=this.parsePath(e);return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t.prototype.queryParser=function(e){return new t.QueryParser(this,e)},t.prototype.parseQuery=function(e,r){return t.QueryParser.parse(e,this,r)},t.prototype.parseQueryString=function(t){var e=Z.stringInput(t),r=this.parseQuery(e);return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t.prototype.fragmentParser=function(){return new t.FragmentParser(this)},t.prototype.parseFragment=function(e){return t.FragmentParser.parse(e,this)},t.prototype.parseFragmentString=function(t){var e=Z.stringInput(t),r=this.parseFragment(e);return e.isCont()&&!r.isError()&&(r=ht.error(at.unexpected(e))),r.bind()},t}();xs.Parser=Us;var Ks=function(t){function e(e,r,n,i,o,s,u){var a=t.call(this)||this;return a.uri=e,a.schemeParser=r,a.authorityParser=n,a.pathParser=i,a.queryParser=o,a.fragmentParser=s,a.step=u,a}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.schemeParser,this.authorityParser,this.pathParser,this.queryParser,this.fragmentParser,this.step)},e.parse=function(t,r,n,i,o,s,u,a){void 0===a&&(a=1);var p=0;if(1===a)if(t.isCont()){for(var h=t.clone();h.isCont()&&(p=h.head(),xs.isSchemeChar(p));)h.step();a=h.isCont()&&58===p?2:3}else t.isDone()&&(a=3);if(2===a)if((n=void 0===n?r.parseScheme(t):n.feed(t)).isDone()){if(t.isCont()&&58===t.head())t=t.step(),a=3;else if(!t.isEmpty())return ht.error(at.expected(58,t))}else if(n.isError())return n.asError();if(3===a)if(t.isCont())47===(p=t.head())?(t=t.step(),a=4):63===p?(t=t.step(),a=7):35===p?(t=t.step(),a=8):a=6;else if(t.isDone())return ht.done(r.absolute(void 0!==n?n.bind():void 0));if(4===a)if(t.isCont()&&47===t.head())t=t.step(),a=5;else if(t.isCont()){var f=r.pathBuilder();f.addSlash(),o=r.parsePath(t,f),a=6}else if(t.isDone())return ht.done(r.absolute(void 0!==n?n.bind():void 0,void 0,xs.Path.slash()));if(5===a)if((i=void 0===i?r.parseAuthority(t):i.feed(t)).isDone()){if(t.isCont())63===(p=t.head())?(t=t.step(),a=7):35===p?(t=t.step(),a=8):a=6;else if(t.isDone())return ht.done(r.absolute(void 0!==n?n.bind():void 0,void 0!==i?i.bind():void 0))}else if(i.isError())return i.asError();if(6===a)if((o=void 0===o?r.parsePath(t):o.feed(t)).isDone()){if(t.isCont()&&63===t.head())t=t.step(),a=7;else if(t.isCont()&&35===t.head())t=t.step(),a=8;else if(!t.isEmpty())return ht.done(r.absolute(void 0!==n?n.bind():void 0,void 0!==i?i.bind():void 0,o.bind()))}else if(o.isError())return o.asError();if(7===a)if((s=void 0===s?r.parseQuery(t):s.feed(t)).isDone()){if(t.isCont()&&35===t.head())t=t.step(),a=8;else if(!t.isEmpty())return ht.done(r.absolute(void 0!==n?n.bind():void 0,void 0!==i?i.bind():void 0,void 0!==o?o.bind():void 0,s.bind()))}else if(s.isError())return s.asError();if(8===a){if((u=void 0===u?r.parseFragment(t):u.feed(t)).isDone())return ht.done(r.absolute(void 0!==n?n.bind():void 0,void 0!==i?i.bind():void 0,void 0!==o?o.bind():void 0,void 0!==s?s.bind():void 0,u.bind()));if(u.isError())return u.asError()}return new e(r,n,i,o,s,u,a)},e}(ht);Us.AbsoluteParser=Ks;var Ws=function(t){function e(e,r,n){var i=t.call(this)||this;return i.uri=e,i.output=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.output,this.step)},e.parse=function(t,r,n,i){void 0===i&&(i=1);var o=0;if(1===i)if(t.isCont()&&(o=t.head(),xs.isAlpha(o)))t=t.step(),n=(n=n||xt.decodedString()).write(xs.toLowerCase(o)),i=2;else if(!t.isEmpty())return ht.error(at.expected("scheme",t));if(2===i){for(;t.isCont()&&(o=t.head(),xs.isSchemeChar(o));)t=t.step(),n.write(xs.toLowerCase(o));if(!t.isEmpty())return ht.done(r.scheme(n.bind()))}return new e(r,n,i)},e}(ht);Us.SchemeParser=Ws;var Hs=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s.uri=e,s.userParser=r,s.hostParser=n,s.portParser=i,s.step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.userParser,this.hostParser,this.portParser,this.step)},e.parse=function(t,r,n,i,o,s){void 0===s&&(s=1);var u=0;if(1===s)if(t.isCont()){for(var a=t.clone();a.isCont()&&(64!==(u=a.head())&&47!==u);)a.step();s=a.isCont()&&64===u?2:3}else t.isDone()&&(s=3);if(2===s)if((n=void 0===n?r.parseUser(t):n.feed(t)).isDone()){if(t.isCont()&&64===t.head())t=t.step(),s=3;else if(!t.isEmpty())return ht.error(at.expected(64,t))}else if(n.isError())return n.asError();if(3===s)if((i=void 0===i?r.parseHost(t):i.feed(t)).isDone()){if(t.isCont()&&58===t.head())t=t.step(),s=4;else if(!t.isEmpty())return ht.done(r.authority(void 0!==n?n.bind():void 0,i.bind()))}else if(i.isError())return i.asError();if(4===s){if((o=void 0===o?r.parsePort(t):o.feed(t)).isDone())return ht.done(r.authority(void 0!==n?n.bind():void 0,i.bind(),o.bind()));if(o.isError())return o.asError()}return new e(r,n,i,o,s)},e}(ht);Us.AuthorityParser=Hs;var js=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s.uri=e,s.usernameOutput=r,s.passwordOutput=n,s.c1=i,s.step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.usernameOutput,this.passwordOutput,this.c1,this.step)},e.parse=function(t,r,n,i,o,s){void 0===o&&(o=0),void 0===s&&(s=1);for(var u=0;;){if(1===s){for(n=n||xt.decodedString();t.isCont()&&(u=t.head(),xs.isUserChar(u));)t=t.step(),n.write(u);if(t.isCont()&&58===u)t=t.step(),s=4;else if(t.isCont()&&37===u)t=t.step(),s=2;else if(!t.isEmpty())return ht.done(r.user(n.bind()))}if(2===s)if(t.isCont()&&(u=t.head(),wt.isDigit(u)))t=t.step(),o=u,s=3;else if(!t.isEmpty())return ht.error(at.expected("hex digit",t));if(3===s){if(t.isCont()&&(u=t.head(),wt.isDigit(u))){t=t.step(),n.write(wt.decodeDigit(o)<<4|wt.decodeDigit(u)),o=0,s=1;continue}if(!t.isEmpty())return ht.error(at.expected("hex digit",t))}if(4===s){for(i=i||xt.decodedString();t.isCont()&&(u=t.head(),xs.isUserInfoChar(u));)t=t.step(),i.write(u);if(t.isCont()&&37===u)t=t.step(),s=5;else if(!t.isEmpty())return ht.done(r.user(n.bind(),i.bind()))}if(5===s)if(t.isCont()&&(u=t.head(),wt.isDigit(u)))t=t.step(),o=u,s=6;else if(!t.isEmpty())return ht.error(at.expected("hex digit",t));if(6===s){if(t.isCont()&&(u=t.head(),wt.isDigit(u))){t=t.step(),i.write(wt.decodeDigit(o)<<4|wt.decodeDigit(u)),o=0,s=4;continue}if(!t.isEmpty())return ht.error(at.expected("hex digit",t))}break}return new e(r,n,i,o,s)},e}(ht);Us.UserParser=js;var Gs=function(t){function e(e){var r=t.call(this)||this;return r.uri=e,r}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri)},e.parse=function(t,r){return t.isCont()?91===t.head()?r.parseHostLiteral(t):r.parseHostAddress(t):t.isDone()?ht.done(r.hostName("")):new e(r)},e}(ht);Us.HostParser=Gs;var Qs=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s.uri=e,s.output=r,s.c1=n,s.x=i,s.step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.output,this.c1,this.x,this.step)},e.parse=function(t,r,n,i,o,s){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=1);var u=0;for(n=n||xt.decodedString();s<=4;){for(;t.isCont()&&(u=t.head(),ut.isDigit(u));)t=t.step(),n=n.write(u),o=10*o+ut.decodeDigit(u);if(!t.isCont()){if(t.isEmpty())break;return 4===s&&o<=255?ht.done(r.hostIPv4(n.bind())):ht.done(r.hostName(n.bind()))}if(!(46===u&&s<4&&o<=255)){if(!xs.isHostChar(u)&&37!==u&&4===s&&o<=255)return ht.done(r.hostIPv4(n.bind()));o=0,s=5;break}t=t.step(),n=n.write(u),o=0,s+=1}for(;;){if(5===s){for(;t.isCont()&&(u=t.head(),xs.isHostChar(u));)t=t.step(),n.write(xs.toLowerCase(u));if(t.isCont()&&37===u)t=t.step(),s=6;else if(!t.isEmpty())return ht.done(r.hostName(n.bind()))}if(6===s)if(t.isCont()&&(u=t.head(),wt.isDigit(u)))t=t.step(),i=u,s=7;else if(!t.isEmpty())return ht.error(at.expected("hex digit",t));if(7===s){if(t.isCont()&&(u=t.head(),wt.isDigit(u))){t=t.step(),n.write(wt.decodeDigit(i)<<4|wt.decodeDigit(u)),i=0,s=5;continue}if(!t.isEmpty())return ht.error(at.expected("hex digit",t))}break}return new e(r,n,i,o,s)},e}(ht);Us.HostAddressParser=Qs;var Zs=function(t){function e(e,r,n){var i=t.call(this)||this;return i.uri=e,i.output=r,i.step=n,i}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.output,this.step)},e.parse=function(t,r,n,i){void 0===i&&(i=1);var o=0;if(1===i)if(t.isCont()&&91===t.head())t=t.step(),i=2;else if(!t.isEmpty())return ht.error(at.expected(91,t));if(2===i){for(n=n||xt.decodedString();t.isCont()&&(o=t.head(),xs.isHostChar(o)||58===o);)t=t.step(),n=n.write(xs.toLowerCase(o));if(t.isCont()&&93===o)return t=t.step(),ht.done(r.hostIPv6(n.bind()));if(!t.isEmpty())return ht.error(at.expected(93,t))}return new e(r,n,i)},e}(ht);Us.HostLiteralParser=Zs;var Xs=function(t){function e(e,r){var n=t.call(this)||this;return n.uri=e,n.number=r,n}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.number)},e.parse=function(t,r,n){void 0===n&&(n=0);for(var i=0;t.isCont()&&(i=t.head(),ut.isDigit(i));)t=t.step(),n=10*n+ut.decodeDigit(i);return t.isEmpty()?new e(r,n):ht.done(r.port(n))},e}(ht);Us.PortParser=Xs;var Ys=function(t){function e(e,r,n,i,o){var s=t.call(this)||this;return s.uri=e,s.builder=r,s.output=n,s.c1=i,s.step=o,s}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.builder,this.output,this.c1,this.step)},e.parse=function(t,r,n,i,o,s){void 0===o&&(o=0),void 0===s&&(s=1);for(var u=0;;){if(1===s){for(;t.isCont()&&(u=t.head(),xs.isPathChar(u));)i=i||xt.decodedString(),t=t.step(),i=i.write(u);if(t.isCont()&&47===u){t=t.step(),n=n||r.pathBuilder(),void 0!==i&&(n.addSegment(i.bind()),i=void 0),n.addSlash();continue}if(t.isCont()&&37===u)t=t.step(),s=2;else if(!t.isEmpty())return void 0!==i&&(n=n||r.pathBuilder()).addSegment(i.bind()),void 0!==n?ht.done(n.bind()):ht.done(r.pathEmpty())}if(2===s)if(t.isCont()&&(u=t.head(),wt.isDigit(u)))t=t.step(),o=u,s=3;else if(!t.isEmpty())return ht.error(at.expected("hex digit",t));if(3===s){if(t.isCont()&&(u=t.head(),wt.isDigit(u))){i=i||xt.decodedString(),t=t.step(),i=i.write(wt.decodeDigit(o)<<4|wt.decodeDigit(u)),o=0,s=1;continue}if(!t.isEmpty())return ht.error(at.expected("hex digit",t))}break}return new e(r,n,i,o,s)},e}(ht);Us.PathParser=Ys;var $s=function(t){function e(e,r,n,i,o,s){var u=t.call(this)||this;return u.uri=e,u.builder=r,u.keyOutput=n,u.valueOutput=i,u.c1=o,u.step=s,u}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.builder,this.keyOutput,this.valueOutput,this.c1,this.step)},e.parse=function(t,r,n,i,o,s,u){void 0===s&&(s=0),void 0===u&&(u=1);for(var a=0;;){if(1===u){for(i=i||xt.decodedString();t.isCont()&&(a=t.head(),xs.isParamChar(a));)t=t.step(),i.write(a);if(t.isCont()&&61===a)t=t.step(),u=4;else{if(t.isCont()&&38===a){t=t.step(),(n=n||r.queryBuilder()).addParam(i.bind()),i=void 0;continue}if(t.isCont()&&37===a)t=t.step(),u=2;else if(!t.isEmpty())return(n=n||r.queryBuilder()).addParam(i.bind()),ht.done(n.bind())}}if(2===u)if(t.isCont()&&(a=t.head(),wt.isDigit(a)))t=t.step(),s=a,u=3;else if(!t.isEmpty())return ht.error(at.expected("hex digit",t));if(3===u){if(t.isCont()&&(a=t.head(),wt.isDigit(a))){t=t.step(),i.write(wt.decodeDigit(s)<<4|wt.decodeDigit(a)),s=0,u=1;continue}if(!t.isEmpty())return ht.error(at.expected("hex digit",t))}if(4===u){for(o=o||xt.decodedString();t.isCont()&&(a=t.head(),xs.isParamChar(a)||61===a);)t=t.step(),o.write(a);if(t.isCont()&&38===a){t=t.step(),(n=n||r.queryBuilder()).addParam(i.bind(),o.bind()),i=void 0,o=void 0,u=1;continue}if(t.isCont()&&38===a)t=t.step(),u=5;else if(!t.isEmpty())return(n=n||r.queryBuilder()).addParam(i.bind(),o.bind()),ht.done(n.bind())}if(5===u)if(t.isCont()&&(a=t.head(),wt.isDigit(a)))t=t.step(),s=a,u=6;else if(!t.isEmpty())return ht.error(at.expected("hex digit",t));if(6===u){if(t.isCont()&&(a=t.head(),wt.isDigit(a))){t=t.step(),o.write(wt.decodeDigit(s)<<4|wt.decodeDigit(a)),s=0,u=4;continue}if(!t.isEmpty())return ht.error(at.expected("hex digit",t))}break}return new e(r,n,i,o,s,u)},e}(ht);Us.QueryParser=$s;var Js=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.uri=e,o.output=r,o.c1=n,o.step=i,o}return y(e,t),e.prototype.feed=function(t){return e.parse(t,this.uri,this.output,this.c1,this.step)},e.parse=function(t,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=1);var s=0;for(n=n||xt.decodedString();;){if(1===o){for(;t.isCont()&&(s=t.head(),xs.isFragmentChar(s));)t=t.step(),n=n.write(s);if(t.isCont()&&37===s)t=t.step(),o=2;else if(!t.isEmpty())return ht.done(r.fragment(n.bind()))}if(2===o)if(t.isCont()&&(s=t.head(),wt.isDigit(s)))t=t.step(),i=s,o=3;else if(!t.isEmpty())return ht.error(at.expected("hex digit",t));if(3===o){if(t.isCont()&&(s=t.head(),wt.isDigit(s))){t=t.step(),n=n.write(wt.decodeDigit(i)<<4|wt.decodeDigit(s)),i=0,o=1;continue}if(!t.isEmpty())return ht.error(at.expected("hex digit",t))}break}return new e(r,n,i,o)},e}(ht);Us.FragmentParser=Js;var tu=function(t){function e(e){var r=t.call(this)||this;return r._unit=e,r}return y(e,t),e.prototype.unit=function(t){return 0===arguments.length?this._unit:new e(t)},e.prototype.mold=function(t,e){return void 0===e?ve.from(t.toString()):e.concat(ve.from(t.toString()))},e.prototype.cast=function(t,e){var r=t.target();try{var n=r.stringValue();if("string"==typeof n)return xs.parse(n)}catch(t){}},e}(Ce);xs.Form=tu;var eu=function(){function t(t,e){void 0===e&&(e=32),this._base=t,this._resolveCache=new S(e),this._unresolveCache=new S(e)}return t.prototype.resolve=function(t){t=xs.fromAny(t);var e=this._resolveCache.get(t);return void 0===e&&(e=this._base.resolve(t),this._resolveCache.put(t,e)),e},t.prototype.unresolve=function(t){t=xs.fromAny(t);var e=this._unresolveCache.get(t);return void 0===e&&(e=this._base.unresolve(t),this._unresolveCache.put(t,e)),e},t}();t.Absent=Ae,t.AbstractInlet=Qr,t.AbstractInoutlet=Xr,t.AbstractMapInlet=$r,t.AbstractMapInletMapOutlet=rn,t.AbstractMapInletOutlet=en,t.AbstractMapInoutlet=tn,t.AbstractMapOutlet=Jr,t.AbstractOutlet=Zr,t.AbstractRecordOutlet=Pn,t.AbstractRecordStreamlet=Vn,t.AbstractStreamlet=kn,t.AndOperator=Pe,t.AndOutlet=Wn,t.AnyForm=Er,t.ArrayInterpolator=$t,t.AssertException=g,t.Attr=se,t.AttrInterpolator=Pr,t.BTree=Ft,t.BTreeContext=Rt,t.BTreeLeaf=qt,t.BTreeNode=Nt,t.BTreeNodeCursor=Ut,t.BTreePage=Lt,t.Base10=ut,t.Base10IntegerWriter=At,t.Base10NumberParser=St,t.Base16=wt,t.Base16IntegerWriter=It,t.Base16Parser=Et,t.Base16Writer=Ct,t.Base64=Dt,t.Base64Parser=Pt,t.Base64Writer=Tt,t.Binary=mt,t.BinaryOperator=Ie,t.BinaryOperatorInterpolator=Fr,t.BinaryOutlet=qn,t.BitwiseAndOperator=ze,t.BitwiseAndOutlet=Gn,t.BitwiseNotOperator=Qe,t.BitwiseNotOutlet=si,t.BitwiseOrOperator=Te,t.BitwiseOrOutlet=Hn,t.BitwiseXorOperator=Ve,t.BitwiseXorOutlet=jn,t.Bool=we,t.BooleanForm=Ar,t.BoxR2=wo,t.BoxR2Interpolator=So,t.BridgeFunc=pr,t.ChildrenSelector=ir,t.CircleR2=mo,t.CircleR2Interpolator=Oo,t.ConditionalOperator=ke,t.ConditionalOperatorInterpolator=Rr,t.ConditionalOutlet=Un,t.Cursor=l,t.CursorArray=w,t.CursorEmpty=v,t.CursorUnary=m,t.Data=ye,t.Dataflow=hi,t.DateTime=Io,t.DateTimeForm=Mo,t.DateTimeFormat=To,t.DateTimeInterpolator=ko,t.DateTimeLocale=Co,t.DateTimeParser=Do,t.DateTimeSpecifiers=Po,t.DayInterval=ys,t.DayOfMonthFormat=Fo,t.DayOfMonthParser=$o,t.DescendantsSelector=or,t.Diagnostic=at,t.DivideOperator=He,t.DivideOutlet=ni,t.EqOperator=Fe,t.EqOutlet=Xn,t.Expression=ge,t.Extant=Oe,t.Field=re,t.FilterFieldsCombinator=ln,t.FilterFieldsOperator=cn,t.FilterInterval=hs,t.FilterSelector=sr,t.Form=Ce,t.FormException=Ee,t.Format=X,t.FromAny={is:function(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&"function"==typeof t.fromAny}},t.Func=Se,t.GeOperator=qe,t.GeOutlet=$n,t.GetAttrSelector=tr,t.GetItemSelector=er,t.GetOutlet=Ln,t.GetSelector=Je,t.GtOperator=Ne,t.GtOutlet=Jn,t.HashGenCacheMap=S,t.HashGenCacheSet=A,t.Hour12Format=Uo,t.Hour12Parser=rs,t.Hour24Format=No,t.Hour24Parser=es,t.HourInterval=_s,t.IdentitySelector=$e,t.In=function(t,e){if(1===arguments.length)return"string"==typeof t&&(t={name:t}),kn.decorateInlet.bind(void 0,t);kn.decorateInlet({},t,e)},t.Inlet=Ur,t.InletDescriptor=Cn,t.Inout=function(t,e){if(1===arguments.length)return"string"==typeof t&&(t={name:t}),kn.decorateInoutlet.bind(void 0,t);kn.decorateInoutlet({},t,e)},t.Input=R,t.InputBuffer=$,t.InputException=k,t.InputSettings=Y,t.Interpolator=Zt,t.InterpolatorInterpolator=Jt,t.InterpolatorMap=te,t.Interpreter=oe,t.InterpreterException=ne,t.InterpreterSettings=ie,t.InvokeOperator=Ye,t.InvokeOperatorInterpolator=qr,t.InvokeOutlet=pi,t.Item=ee,t.ItemForm=Cr,t.ItemInterpolator=Mr,t.KeyOutlet=Yr,t.KeysCursor=Vt,t.KeysSelector=rr,t.LambdaFunc=ar,t.LeOperator=Re,t.LeOutlet=Zn,t.LiteralSelector=ur,t.LtOperator=Be,t.LtOutlet=Qn,t.MapFieldValuesCombinator=vn,t.MapFieldValuesOperator=_n,t.MapInlet=Wr,t.MapInput=an,t.MapOutlet=Hr,t.MapOutput=pn,t.MapValueCombinator=yn,t.MapValueOperator=dn,t.Mark=I,t.MathModule=hr,t.MemoizeMapCombinator=fn,t.MemoizeValueCombinator=hn,t.MillisecondFormat=jo,t.MillisecondInterval=ws,t.MillisecondParser=ss,t.MillisecondsInterval=gs,t.MinusOperator=Ke,t.MinusOutlet=ei,t.MinuteFormat=Wo,t.MinuteInterval=vs,t.MinuteParser=is,t.ModuloOperator=je,t.ModuloOutlet=ii,t.MonthFormat=Bo,t.MonthInterval=ls,t.MonthOfYearFormat=zo,t.MonthOfYearParser=Zo,t.MonthParser=Xo,t.Murmur3=f,t.NativeOrder=r,t.NeOperator=Le,t.NeOutlet=Yn,t.NegativeOperator=Ze,t.NegativeOutlet=ui,t.NodeCursor=Bt,t.NotOperator=Ge,t.NotOutlet=oi,t.Num=me,t.NumInterpolator=Br,t.NumberForm=Or,t.NumberInterpolator=Xt,t.Objects=c,t.Operator=be,t.OrOperator=Me,t.OrOutlet=Kn,t.Out=function(t,e){if(1===arguments.length)return"string"==typeof t&&(t={name:t}),kn.decorateOutlet.bind(void 0,t);kn.decorateOutlet({},t,e)},t.Outlet=Kr,t.OutletDescriptor=In,t.OutletInlet=nn,t.OutletMapInlet=on,t.Output=T,t.OutputBuffer=rt,t.OutputException=P,t.OutputSettings=M,t.OutputStyle=st,t.Parser=ht,t.ParserException=pt,t.PatternFormat=Go,t.PatternParser=us,t.PeriodFormat=Ko,t.PeriodParser=ns,t.PlusOperator=Ue,t.PlusOutlet=ti,t.PointR2=_o,t.PointR2Interpolator=bo,t.PositiveOperator=Xe,t.PositiveOutlet=ai,t.R2Shape=lo,t.R2ShapeInterpolator=go,t.Random=s,t.Recon=fo,t.ReconParser=Li,t.ReconStructureParser=qi,t.ReconStructureWriter=ho,t.ReconWriter=po,t.Record=fe,t.RecordFieldUpdater=zn,t.RecordInterpolator=zr,t.RecordMap=ce,t.RecordMapView=le,t.RecordModel=Rn,t.RecordOutlet=Mn,t.RecordScope=Fn,t.RecordStreamlet=Tn,t.ReduceFieldsCombinator=wn,t.ReduceFieldsOperator=mn,t.Reifier=Bn,t.STree=Wt,t.STreeContext=Kt,t.STreeLeaf=jt,t.STreeNode=Gt,t.STreeNodeCursor=Qt,t.STreePage=Ht,t.SecondFormat=Ho,t.SecondInterval=ms,t.SecondParser=os,t.SegmentR2=vo,t.SegmentR2Interpolator=xo,t.Selector=xe,t.Severity=x,t.Shape=co,t.ShortMonthFormat=Ro,t.ShortMonthParser=Yo,t.ShortWeekdayFormat=qo,t.ShortWeekdayParser=ts,t.Slot=ue,t.SlotInterpolator=Tr,t.Span=D,t.StepInterpolator=Yt,t.Streamlet={is:function(t){if("object"==typeof t&&null!==t){var e=t;return"function"==typeof e.streamletScope&&"function"==typeof e.setStreamletScope&&"function"==typeof e.streamletContext&&"function"==typeof e.setStreamletContext}return!1}},t.StreamletException=jr,t.StreamletInlet=On,t.StreamletInoutlet=En,t.StreamletOutlet=An,t.StreamletScope=Gr,t.StringForm=Sr,t.Tag=C,t.TagForm=br,t.Text=ve,t.TimeInterval=as,t.TimeZone=Ao,t.TimeZoneForm=Eo,t.TimesOperator=We,t.TimesOutlet=ri,t.ToAny={is:function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.toAny}},t.UnaryOperator=De,t.UnaryOperatorInterpolator=Lr,t.UnaryOutlet=Nn,t.Unicode=Z,t.UnitForm=xr,t.UnitTimeInterval=ps,t.Uri=xs,t.UriAbsoluteParser=Ks,t.UriAuthority=Os,t.UriAuthorityParser=Hs,t.UriCache=eu,t.UriException=bs,t.UriForm=tu,t.UriFragment=Ns,t.UriFragmentParser=Js,t.UriHost=Es,t.UriHostAddressParser=Qs,t.UriHostIPv4=Is,t.UriHostIPv6=Ds,t.UriHostLiteralParser=Zs,t.UriHostName=Cs,t.UriHostParser=Gs,t.UriHostUndefined=ks,t.UriParser=Us,t.UriPath=Ps,t.UriPathBuilder=Bs,t.UriPathEmpty=zs,t.UriPathParser=Ys,t.UriPathSegment=Ts,t.UriPathSlash=Vs,t.UriPort=Ms,t.UriPortParser=Xs,t.UriQuery=Rs,t.UriQueryBuilder=qs,t.UriQueryParam=Fs,t.UriQueryParser=$s,t.UriQueryUndefined=Ls,t.UriScheme=Ss,t.UriSchemeParser=Ws,t.UriUser=As,t.UriUserParser=js,t.Utf8=xt,t.UtfErrorMode=lt,t.Value=pe,t.ValueBuilder=ae,t.ValueCursor=Dr,t.ValueEntryCursor=kr,t.ValueForm=Ir,t.ValueInput=sn,t.ValueInterpolator=Vr,t.ValueOutput=un,t.ValuesCursor=zt,t.ValuesSelector=nr,t.VectorR2=yo,t.WatchFieldsCombinator=Sn,t.WatchFieldsOperator=xn,t.WatchValueCombinator=bn,t.WatchValueOperator=gn,t.WeekInterval=ds,t.WeekdayFormat=Lo,t.WeekdayParser=Jo,t.Writer=W,t.WriterException=K,t.YearFormat=Vo,t.YearInterval=fs,t.YearParser=Qo,t.YearsInterval=cs,t.assert=b,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=swim-core.min.js.map