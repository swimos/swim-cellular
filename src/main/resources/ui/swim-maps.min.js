// swim-maps-3.11.0-dev.20200517; copyright 2015-2022 Swim.inc
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@swim/util"),require("@swim/codec"),require("@swim/interpolate"),require("@swim/math"),require("@swim/view"),require("@swim/color"),require("@swim/transform"),require("@swim/render"),require("@swim/length"),require("@swim/font"),require("@swim/typeset"),require("@swim/angle"),require("@swim/shape"),require("mapbox-gl")):"function"==typeof define&&define.amd?define(["exports","@swim/util","@swim/codec","@swim/interpolate","@swim/math","@swim/view","@swim/color","@swim/transform","@swim/render","@swim/length","@swim/font","@swim/typeset","@swim/angle","@swim/shape","mapbox-gl"],t):t((e=e||self).swim=e.swim||{},e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.swim,e.mapboxgl)}(this,(function(e,t,i,o,n,r,s,a,l,h,u,p,d,c,v){"use strict";var f=function(){function e(e,t){this._lng=e,this._lat=t}return Object.defineProperty(e.prototype,"lng",{get:function(){return this._lng},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lat",{get:function(){return this._lat},enumerable:!1,configurable:!0}),e.prototype.project=function(e){return e.project(this)},e.prototype.toAny=function(){return{lng:this._lng,lat:this._lat}},e.prototype.equals=function(t){return this===t||t instanceof e&&(this._lng===t._lng&&this._lat===t._lat)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=t.Murmur3.seed(e)),t.Murmur3.mash(t.Murmur3.mix(t.Murmur3.mix(e._hashSeed,t.Murmur3.hash(this._lng)),t.Murmur3.hash(this._lat)))},e.prototype.debug=function(e){e=e.write("GeoPoint").write(46).write("from").write(40).debug(this._lng).write(", ").debug(this._lat).write(41)},e.prototype.toString=function(){return i.Format.debug(this)},e.origin=function(){return void 0===e._origin&&(e._origin=new e(0,0)),e._origin},e.from=function(t,i){return new e(t,i)},e.fromInit=function(t){return new e(t.lng,t.lat)},e.fromTuple=function(t){return new e(t[0],t[1])},e.fromAny=function(t){if(t instanceof e)return t;if(e.isInit(t))return e.fromInit(t);if(e.isTuple(t))return e.fromTuple(t);throw new TypeError(""+t)},e.isInit=function(e){if("object"==typeof e&&null!==e){var t=e;return"number"==typeof t.lng&&"number"==typeof t.lat}return!1},e.isTuple=function(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]},e.isAny=function(t){return t instanceof e||e.isInit(t)||e.isTuple(t)},e}(),g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function w(e,t){function i(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function m(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}var y=function(e){function t(t,i){var o=e.call(this)||this;return o.x=t.lng,o.dx=i.lng-o.x,o.y=t.lat,o.dy=i.lat-o.y,o}return w(t,e),t.prototype.interpolate=function(e){var t=this.x+this.dx*e,i=this.y+this.dy*e;return new f(t,i)},t.prototype.deinterpolate=function(e){var t=(e=f.fromAny(e)).lng-this.x,i=e.lat-this.y,o=t*this.dx+i*this.dy,n=Math.sqrt(t*t+i*i);return 0!==n?o/n:n},t.prototype.range=function(e,i){return void 0===e?[this.interpolate(0),this.interpolate(1)]:void 0===i?(e=e,t.between(e[0],e[1])):t.between(e,i)},t.prototype.equals=function(e){return this===e||e instanceof t&&(this.x===e.x&&this.dx===e.dx&&this.y===e.y&&this.dy===e.dy)},t.between=function(e,i){return e instanceof f&&i instanceof f?new t(e,i):f.isAny(e)&&f.isAny(i)?new t(f.fromAny(e),f.fromAny(i)):o.Interpolator.between(e,i)},t.tryBetween=function(e,i){return e instanceof f&&i instanceof f?new t(e,i):null},t.tryBetweenAny=function(e,i){return(e instanceof f||f.isInit(e))&&(i instanceof f||f.isInit(i))?new t(f.fromAny(e),f.fromAny(i)):null},t}(o.Interpolator);o.Interpolator.registerFactory(y);var _=function(){function e(e,t,i,o){this._lngMin=e<=i?e:i,this._latMin=t<=o?t:o,this._lngMax=e<=i?i:e,this._latMax=t<=o?o:t}return Object.defineProperty(e.prototype,"lngMin",{get:function(){return this._lngMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"latMin",{get:function(){return this._latMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lngMax",{get:function(){return this._lngMax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"latMax",{get:function(){return this._latMax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"west",{get:function(){return this._lngMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"north",{get:function(){return this._latMin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"east",{get:function(){return this._lngMax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"south",{get:function(){return this._latMax},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"northWest",{get:function(){return new f(this._lngMin,this._latMin)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"northEast",{get:function(){return new f(this._lngMax,this._latMin)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"southEast",{get:function(){return new f(this._lngMax,this._latMax)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"southWest",{get:function(){return new f(this._lngMin,this._latMax)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return new f((this._lngMin+this._lngMax)/2,(this._latMin+this._latMax)/2)},enumerable:!1,configurable:!0}),e.prototype.contains=function(t,i){if("number"==typeof t)return this._lngMin<=t&&t<=this._lngMax&&this._latMin<=i&&i<=this._latMax;if(f.isAny(t))return this.containsPoint(f.fromAny(t));if(e.isAny(t))return this.containsBox(e.fromAny(t));throw new TypeError(""+t)},e.prototype.containsPoint=function(e){return this._lngMin<=e._lng&&e._lng<=this._lngMax&&this._latMin<=e._lat&&e._lat<=this._latMax},e.prototype.containsBox=function(e){return this._lngMin<=e._lngMin&&e._lngMax<=this._lngMax&&this._latMin<=e._latMin&&e._latMax<=this._latMax},e.prototype.intersects=function(t){if(f.isAny(t))return this.intersectsPoint(f.fromAny(t));if(e.isAny(t))return this.intersectsBox(e.fromAny(t));throw new TypeError(""+t)},e.prototype.intersectsPoint=function(e){return this._lngMin<=e._lng&&e._lng<=this._lngMax&&this._latMin<=e._lat&&e._lat<=this._latMax},e.prototype.intersectsBox=function(e){return this._lngMin<=e._lngMax&&e._lngMin<=this._lngMax&&this._latMin<=e._latMax&&e._latMin<=this._latMax},e.prototype.union=function(t){if(f.isAny(t))return this.unionPoint(f.fromAny(t));if(e.isAny(t))return this.unionBox(e.fromAny(t));throw new TypeError(""+t)},e.prototype.unionPoint=function(t){return new e(Math.min(this._lngMin,t._lng),Math.min(this._latMin,t._lat),Math.max(this._lngMax,t._lng),Math.max(this._latMax,t._lat))},e.prototype.unionBox=function(t){return new e(Math.min(this._lngMin,t._lngMin),Math.min(this._latMin,t._latMin),Math.max(this._lngMax,t._lngMax),Math.max(this._latMax,t._latMax))},e.prototype.project=function(e){var t=e.project(this._lngMin,this._latMin),i=e.project(this._lngMax,this._latMax),o=t._x,r=t._y,s=i._x,a=i._y;if(o>s){var l=o;o=s,s=l}if(r>a){var h=r;r=a,a=h}return isFinite(o)||(o=-1/0),isFinite(r)||(r=-1/0),isFinite(s)||(s=1/0),isFinite(a)||(a=1/0),new n.BoxR2(o,r,s,a)},e.prototype.toAny=function(){return{lngMin:this._lngMin,latMin:this._latMin,lngMax:this._lngMax,latMax:this._latMax}},e.prototype.canEqual=function(e){return!0},e.prototype.equals=function(t){return this===t||t instanceof e&&(t.canEqual(this)&&this._lngMin===t._lngMin&&this._latMin===t._latMin&&this._lngMax===t._lngMax&&this._latMax===t._latMax)},e.prototype.hashCode=function(){return void 0===e._hashSeed&&(e._hashSeed=t.Murmur3.seed(e)),t.Murmur3.mash(t.Murmur3.mix(t.Murmur3.mix(t.Murmur3.mix(t.Murmur3.mix(e._hashSeed,t.Murmur3.hash(this._lngMin)),t.Murmur3.hash(this._latMin)),t.Murmur3.hash(this._lngMax)),t.Murmur3.hash(this._latMax)))},e.prototype.debug=function(e){e.write("GeoBox").write(46).write("of").write(40).debug(this._lngMin).write(", ").debug(this._latMin).write(", ").debug(this._lngMax).write(", ").debug(this._latMax).write(41)},e.prototype.toString=function(){return i.Format.debug(this)},e.empty=function(){return void 0===e._empty&&(e._empty=new e(0,0,0,0)),e._empty},e.globe=function(){return void 0===e._globe&&(e._globe=new e(-180,-90,180,90)),e._globe},e.from=function(t,i,o,n){return void 0===o&&(o=t),void 0===n&&(n=i),new e(t,i,o,n)},e.fromInit=function(t){return new e(t.lngMin,t.latMin,t.lngMax,t.latMax)},e.fromAny=function(t){if(t instanceof e)return t;if(e.isInit(t))return e.fromInit(t);throw new TypeError(""+t)},e.isInit=function(e){if("object"==typeof e&&null!==e){var t=e;return"number"==typeof t.lngMin&&"number"==typeof t.latMin&&"number"==typeof t.lngMax&&"number"==typeof t.latMax}return!1},e.isAny=function(t){return t instanceof e||e.isInit(t)},e}(),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoProjection",{get:function(){var e=this.parentView;return M.is(e)?e.geoProjection:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapZoom",{get:function(){var e=this.parentView;return M.is(e)?e.mapZoom:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapHeading",{get:function(){var e=this.parentView;return M.is(e)?e.mapHeading:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapTilt",{get:function(){var e=this.parentView;return M.is(e)?e.mapTilt:0},enumerable:!1,configurable:!0}),t.prototype.onMount=function(){e.prototype.onMount.call(this),this.requireUpdate(r.View.NeedsProject)},t.prototype.modifyUpdate=function(t){var i=0;return 0!=(t&r.View.NeedsProject)&&(i|=r.View.NeedsLayout),i|=e.prototype.modifyUpdate.call(this,t|i)},t.prototype.needsProcess=function(e,t){return 0==(this._viewFlags&r.View.NeedsAnimate)&&(e&=~r.View.NeedsAnimate),e},t.prototype.doProcess=function(e,t){var i=e;this._viewFlags&=~(r.View.NeedsProcess|r.View.NeedsResize),this.willProcess(t),this._viewFlags|=r.View.ProcessingFlag;try{0!=((this._viewFlags|e)&r.View.NeedsScroll)&&(i|=r.View.NeedsScroll,this._viewFlags&=~r.View.NeedsScroll,this.willScroll(t)),0!=((this._viewFlags|e)&r.View.NeedsDerive)&&(i|=r.View.NeedsDerive,this._viewFlags&=~r.View.NeedsDerive,this.willDerive(t)),0!=((this._viewFlags|e)&r.View.NeedsAnimate)&&(i|=r.View.NeedsAnimate,this._viewFlags&=~r.View.NeedsAnimate,this.willAnimate(t)),0!=((this._viewFlags|e)&r.View.NeedsProject)&&(i|=r.View.NeedsProject,this._viewFlags&=~r.View.NeedsProject,this.willProject(t)),this.onProcess(t),0!=(i&r.View.NeedsScroll)&&this.onScroll(t),0!=(i&r.View.NeedsDerive)&&this.onDerive(t),0!=(i&r.View.NeedsAnimate)&&this.onAnimate(t),0!=(i&r.View.NeedsProject)&&this.onProject(t),this.doProcessChildViews(i,t),0!=(i&r.View.NeedsProject)&&this.didProject(t),0!=(i&r.View.NeedsAnimate)&&this.didAnimate(t),0!=(i&r.View.NeedsDerive)&&this.didDerive(t),0!=(i&r.View.NeedsScroll)&&this.didScroll(t)}finally{this._viewFlags&=~r.View.ProcessingFlag,this.didProcess(t)}},t.prototype.willProject=function(e){this.willObserve((function(t){void 0!==t.viewWillProject&&t.viewWillProject(e,this)}))},t.prototype.onProject=function(e){},t.prototype.didProject=function(e){this.didObserve((function(t){void 0!==t.viewDidProject&&t.viewDidProject(e,this)}))},t.prototype.onSetHidden=function(e){this.requireUpdate(r.View.NeedsProject)},t.prototype.onSetCulled=function(e){e||this.requireUpdate(r.View.NeedsProject)},t.prototype.cullGeoFrame=function(e){void 0===e&&(e=this.geoFrame),this.setCulled(!e.intersects(this.geoBounds))},Object.defineProperty(t.prototype,"geoFrame",{get:function(){var e=this.parentView;return M.is(e)?e.geoFrame:_.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){return this.geoFrame},enumerable:!1,configurable:!0}),t.prototype.deriveGeoBounds=function(){for(var e,t=this._childViews,i=0,o=t.length;i<o;i+=1){var n=t[i];if(M.is(n)&&!n.isHidden()){var r=n.geoBounds;e=void 0===e?r:e.union(r)}}return void 0===e&&(e=this.geoFrame),e},t.prototype.didSetGeoBounds=function(e,t){var i=this._parentView;M.is(i)&&i.childViewDidSetGeoBounds(this,e,t)},t.prototype.childViewDidSetGeoBounds=function(e,t,i){},t}(r.GraphicsView),P=function(){function e(e,t,i,o,n,r,s,a,l,h,u){this._depth=e,this._maxDepth=t,this._geoFrame=i,this._geoBounds=o,this._geoCenter=n,this._southWest=r,this._northWest=s,this._southEast=a,this._northEast=l,this._views=h,this._size=u}return Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDepth",{get:function(){return this._maxDepth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geoFrame",{get:function(){return this._geoFrame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geoBounds",{get:function(){return this._geoBounds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geoCenter",{get:function(){return this._geoCenter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"southWest",{get:function(){return this._southWest},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"northWest",{get:function(){return this._northWest},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"southEast",{get:function(){return this._southEast},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"northEast",{get:function(){return this._northEast},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._size},e.prototype.contains=function(e){return this._geoFrame.contains(e)},e.prototype.intersects=function(e){return this._geoFrame.intersects(e)},e.prototype.getTile=function(e){if(this._depth<this._maxDepth){var t=this._geoCenter,i=e.lngMin<=t.lng,o=e.latMin<=t.lat,n=e.lngMax>t.lng,r=e.latMax>t.lat;if(i!==n&&o!==r)if(o&&i){var s=this._southWest;if(null!==s)return s.getTile(e)}else if(r&&i){var a=this._northWest;if(null!==a)return a.getTile(e)}else if(o&&n){var l=this._southEast;if(null!==l)return l.getTile(e)}else if(r&&n){var h=this._northEast;if(null!==h)return h.getTile(e)}}return this},e.prototype.inserted=function(e,t){if(this._depth<this._maxDepth){var i=this._geoCenter,o=t.lngMin<=i.lng,n=t.latMin<=i.lat,r=t.lngMax>i.lng,s=t.latMax>i.lat;if(o!==r&&n!==s){if(n&&o){var a=this._southWest,l=a;return null===l&&(l=this.createTile(this._depth+1,this._maxDepth,new _(this._geoFrame._lngMin,this._geoFrame._latMin,this._geoCenter._lng,this._geoCenter._lat))),a!==(l=l.inserted(e,t))?this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,l,this._northWest,this._southEast,this._northEast,this._views,this._size+1):this}if(s&&o){var h=this._northWest,u=h;return null===u&&(u=this.createTile(this._depth+1,this._maxDepth,new _(this._geoFrame._lngMin,this._geoCenter._lat,this._geoCenter._lng,this._geoFrame._latMax))),h!==(u=u.inserted(e,t))?this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,u,this._southEast,this._northEast,this._views,this._size+1):this}if(n&&r){var p=this._southEast,d=p;return null===d&&(d=this.createTile(this._depth+1,this._maxDepth,new _(this._geoCenter._lng,this._geoFrame._latMin,this._geoFrame._lngMax,this._geoCenter._lat))),p!==(d=d.inserted(e,t))?this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,this._northWest,d,this._northEast,this._views,this._size+1):this}if(s&&r){var c=this._northEast,v=c;return null===v&&(v=this.createTile(this._depth+1,this._maxDepth,new _(this._geoCenter._lng,this._geoCenter._lat,this._geoFrame._lngMax,this._geoFrame._latMax))),c!==(v=v.inserted(e,t))?this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,this._northWest,this._southEast,v,this._views,this._size+1):this}}}var f=this._views;if(f.indexOf(e)<0){var g=f.slice(0);return g.push(e),this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,this._northWest,this._southEast,this._northEast,g,this._size+1)}return this},e.prototype.removed=function(e,t){if(this._depth<this._maxDepth){var i=this._geoCenter,o=t.lngMin<=i.lng,n=t.latMin<=i.lat,r=t.lngMax>i.lng,s=t.latMax>i.lat;if(o!==r&&n!==s){if(n&&o){var a=this._southWest;if(null!==a){var l=a.removed(e,t);return l.isEmpty()&&(l=null),this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,l,this._northWest,this._southEast,this._northEast,this._views,this._size-1)}return this}if(s&&o){var h=this._northWest;if(null!==h){var u=h.removed(e,t);return u.isEmpty()&&(u=null),this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,u,this._southEast,this._northEast,this._views,this._size-1)}return this}if(n&&r){var p=this._southEast;if(null!==p){var d=p.removed(e,t);return d.isEmpty()&&(d=null),this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,this._northWest,d,this._northEast,this._views,this._size-1)}return this}if(s&&r){var c=this._northEast;if(null!==c){var v=c.removed(e,t);return v.isEmpty()&&(v=null),this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,this._northWest,this._southEast,v,this._views,this._size-1)}return this}}}var f=this._views,g=f.indexOf(e);if(g>=0){var w=f.slice(0);return w.splice(g,1),this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,this._northWest,this._southEast,this._northEast,w,this._size-1)}return this},e.prototype.moved=function(e,t,i){if(this._depth<this._maxDepth){var o=this._geoCenter,n=t.lngMin<=o.lng,r=t.latMin<=o.lat,s=t.lngMax>o.lng,a=t.latMax>o.lat,l=i.lngMin<=o.lng,h=i.latMin<=o.lat,u=i.lngMax>o.lng,p=i.latMax>o.lat;if(n!==l||r!==h||s!==u||a!==p)return this.removed(e,i).inserted(e,t);if(n!==s&&r!==a){if(r&&n){var d=this._southWest,c=d.moved(e,t,i);return d!==c?this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,c,this._northWest,this._southEast,this._northEast,this._views,this._size):this}if(a&&n){var v=this._northWest,f=v.moved(e,t,i);return v!==f?this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,f,this._southEast,this._northEast,this._views,this._size):this}if(r&&s){var g=this._southEast,w=g.moved(e,t,i);return g!==w?this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,this._northWest,w,this._northEast,this._views,this._size):this}if(a&&s){var m=this._northEast,y=m.moved(e,t,i);return m!==y?this.createTile(this._depth,this._maxDepth,this._geoFrame,void 0,this._geoCenter,this._southWest,this._northWest,this._southEast,y,this._views,this._size):this}}}return this},e.prototype.forEach=function(e,t){if(null!==this._southWest&&void 0!==(n=this._southWest.forEach(e,t)))return n;if(null!==this._northWest&&void 0!==(n=this._northWest.forEach(e,t)))return n;if(null!==this._southEast&&void 0!==(n=this._southEast.forEach(e,t)))return n;if(null!==this._northEast&&void 0!==(n=this._northEast.forEach(e,t)))return n;for(var i=this._views,o=0;o<i.length;o+=1){var n;if(void 0!==(n=e.call(t,i[o])))return n}},e.prototype.forEachIntersecting=function(e,t,i){if(this._geoFrame.intersects(e)){if(null!==this._southWest)if(void 0!==(r=this._southWest.forEachIntersecting(e,t,i)))return r;if(null!==this._northWest)if(void 0!==(r=this._northWest.forEachIntersecting(e,t,i)))return r;if(null!==this._southEast)if(void 0!==(r=this._southEast.forEachIntersecting(e,t,i)))return r;if(null!==this._northEast)if(void 0!==(r=this._northEast.forEachIntersecting(e,t,i)))return r;for(var o=this._views,n=0;n<o.length;n+=1){var r;if(void 0!==(r=t.call(i,o[n])))return r}}},e.prototype.forEachNonIntersecting=function(e,t,i){if(!this._geoFrame.intersects(e)){if(null!==this._southWest)if(void 0!==(r=this._southWest.forEachNonIntersecting(e,t,i)))return r;if(null!==this._northWest)if(void 0!==(r=this._northWest.forEachNonIntersecting(e,t,i)))return r;if(null!==this._southEast)if(void 0!==(r=this._southEast.forEachNonIntersecting(e,t,i)))return r;if(null!==this._northEast)if(void 0!==(r=this._northEast.forEachNonIntersecting(e,t,i)))return r;for(var o=this._views,n=0;n<o.length;n+=1){var r;if(void 0!==(r=t.call(i,o[n])))return r}}},e.prototype.createTile=function(t,i,o,n,r,s,a,l,h,u,p){if(void 0===s&&(s=null),void 0===a&&(a=null),void 0===l&&(l=null),void 0===h&&(h=null),void 0===u&&(u=[]),void 0===p&&(p=0),void 0===r&&(r=o.center),void 0===n){null!==s&&(n=s._geoBounds),null!==a&&(n=void 0!==n?n.union(a._geoBounds):a._geoBounds),null!==l&&(n=void 0!==n?n.union(l._geoBounds):l._geoBounds),null!==h&&(n=void 0!==n?n.union(h._geoBounds):h._geoBounds);for(var d=0;d<u.length;d+=1){var c=u[d];n=void 0!==n?n.union(c.geoBounds):c.geoBounds}void 0===n&&(n=o)}return new e(t,i,o,n,r,s,a,l,h,u,p)},e.empty=function(t,i,o){return void 0===t&&(t=_.globe()),void 0===i&&(i=0),void 0===o&&(o=10),new e(i,o=Math.max(i,o),t,t,t.center,null,null,null,null,[],0)},e}(),V=function(e){function t(t,i,o){var n=e.call(this)||this;return n._parentView=null,n._childViews=P.empty(t,i,o),n._viewController=null,n._viewFlags=0,n}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.setViewController=function(e){var t=this._viewController;t!==e&&(this.willSetViewController(e),null!==t&&t.setView(null),this._viewController=e,null!==e&&e.setView(this),this.onSetViewController(e),this.didSetViewController(e))},Object.defineProperty(t.prototype,"viewObservers",{get:function(){var e=this._viewObservers;return void 0===e&&(e=[],this._viewObservers=e),e},enumerable:!1,configurable:!0}),t.prototype.addViewObserver=function(e){var t,i=this._viewObservers;void 0===i?(i=[],this._viewObservers=i,t=-1):t=i.indexOf(e),t<0&&(this.willAddViewObserver(e),i.push(e),this.onAddViewObserver(e),this.didAddViewObserver(e))},t.prototype.removeViewObserver=function(e){var t=this._viewObservers;if(void 0!==t){var i=t.indexOf(e);i>=0&&(this.willRemoveViewObserver(e),t.splice(i,1),this.onRemoveViewObserver(e),this.didRemoveViewObserver(e))}},Object.defineProperty(t.prototype,"geoProjection",{get:function(){var e=this.parentView;return M.is(e)?e.geoProjection:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapZoom",{get:function(){var e=this.parentView;return M.is(e)?e.mapZoom:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapHeading",{get:function(){var e=this.parentView;return M.is(e)?e.mapHeading:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapTilt",{get:function(){var e=this.parentView;return M.is(e)?e.mapTilt:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasView",{get:function(){var e=this._parentView;return r.RenderedView.is(e)?e.canvasView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){var e=this._key;return void 0!==e?e:null},enumerable:!1,configurable:!0}),t.prototype.setKey=function(e){null!==e?this._key=e:void 0!==this._key&&(this._key=void 0)},Object.defineProperty(t.prototype,"parentView",{get:function(){return this._parentView},enumerable:!1,configurable:!0}),t.prototype.setParentView=function(e,t){this.willSetParentView(e,t),this._parentView=e,this.onSetParentView(e,t),this.didSetParentView(e,t)},Object.defineProperty(t.prototype,"childViews",{get:function(){var e=[];return this._childViews.forEach((function(t){e.push(t)}),this),e},enumerable:!1,configurable:!0}),t.prototype.getChildView=function(e){var t=this._childViewMap;if(void 0!==t){var i=t[e];if(void 0!==i)return i}return null},t.prototype.setChildView=function(e,t){if(null!==t){if(!M.is(t))throw new TypeError(""+t);t.remove()}var i=null;if(void 0!==this._childViewMap){var o=this._childViewMap[e];if(void 0!==o){var n=(i=o).geoBounds;this.willRemoveChildView(o),o.setParentView(null,this),this.removeChildViewMap(o);var r=this._childViews._geoBounds;this._childViews=this._childViews.removed(i,n),(a=this._childViews._geoBounds).equals(r)||this.didSetGeoBounds(a,r),this.onRemoveChildView(o),this.didRemoveChildView(o),o.setKey(null)}}if(null!==t){var s=t.geoBounds;t.setKey(e);var a;r=this._childViews._geoBounds;this._childViews=this._childViews.inserted(t,s),(a=this._childViews._geoBounds).equals(r)||this.didSetGeoBounds(a,r),this.insertChildViewMap(t),t.setParentView(this,null),this.onInsertChildView(t,null),this.didInsertChildView(t,null)}return i},t.prototype.insertChildViewMap=function(e){var t=e.key;if(null!==t){var i=this._childViewMap;void 0===i&&(i={},this._childViewMap=i),i[t]=e}},t.prototype.removeChildViewMap=function(e){var t=this._childViewMap;if(void 0!==t){var i=e.key;null!==i&&delete t[i]}},t.prototype.append=function(e,t){return"function"==typeof e&&(e=r.RenderedView.create(e)),this.appendChildView(e,t),e},t.prototype.appendChildView=function(e,t){if(!M.is(e))throw new TypeError(""+e);e.remove(),void 0!==t&&(this.removeChildView(t),e.setKey(t));var i=e.geoBounds;this.willInsertChildView(e,null);var o=this._childViews._geoBounds;this._childViews=this._childViews.inserted(e,i);var n=this._childViews._geoBounds;n.equals(o)||this.didSetGeoBounds(n,o),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,null),this.didInsertChildView(e,null)},t.prototype.prepend=function(e,t){return"function"==typeof e&&(e=r.RenderedView.create(e)),this.prependChildView(e,t),e},t.prototype.prependChildView=function(e,t){if(!M.is(e))throw new TypeError(""+e);e.remove(),void 0!==t&&(this.removeChildView(t),e.setKey(t));var i=e.geoBounds;this.willInsertChildView(e,null);var o=this._childViews._geoBounds;this._childViews=this._childViews.inserted(e,i);var n=this._childViews._geoBounds;n.equals(o)||this.didSetGeoBounds(n,o),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,null),this.didInsertChildView(e,null)},t.prototype.insert=function(e,t,i){return"function"==typeof e&&(e=r.RenderedView.create(e)),this.insertChildView(e,t,i),e},t.prototype.insertChildView=function(e,t,i){if(!M.is(e))throw new TypeError(""+e);if(null!==t&&!r.RenderedView.is(e))throw new TypeError(""+t);if(null!==t&&t.parentView!==this)throw new TypeError(""+t);e.remove(),void 0!==i&&(this.removeChildView(i),e.setKey(i));var o=e.geoBounds;this.willInsertChildView(e,t);var n=this._childViews._geoBounds;this._childViews=this._childViews.inserted(e,o);var s=this._childViews._geoBounds;s.equals(n)||this.didSetGeoBounds(s,n),this.insertChildViewMap(e),e.setParentView(this,null),this.onInsertChildView(e,t),this.didInsertChildView(e,t)},t.prototype.removeChildView=function(e){var t;if("string"==typeof e){if(null===(t=this.getChildView(e)))return null}else t=e;if(!M.is(t))throw new TypeError(""+t);if(t.parentView!==this)throw new Error("not a child view");var i=t.geoBounds;this.willRemoveChildView(t),t.setParentView(null,this),this.removeChildViewMap(t);var o=this._childViews._geoBounds;this._childViews=this._childViews.removed(t,i);var n=this._childViews._geoBounds;if(n.equals(o)||this.didSetGeoBounds(n,o),this.onRemoveChildView(t),this.didRemoveChildView(t),t.setKey(null),"string"==typeof e)return t},t.prototype.removeAll=function(){this._childViews.forEach((function(e){this.removeChildView(e)}),this)},t.prototype.remove=function(){var e=this._parentView;null!==e&&(0==(this._viewFlags&r.View.UpdatingMask)?e.removeChildView(this):this._viewFlags|=r.View.RemovingFlag)},Object.defineProperty(t.prototype,"viewFlags",{get:function(){return this._viewFlags},enumerable:!1,configurable:!0}),t.prototype.setViewFlags=function(e){this._viewFlags=e},t.prototype.cascadeMount=function(){if(0!=(this._viewFlags&r.View.MountedFlag))throw new Error("already mounted");this._viewFlags|=r.View.MountedFlag,this.willMount(),this.onMount(),this.doMountChildViews(),this.didMount()},t.prototype.doMountChildViews=function(){this._childViews.forEach((function(e){e.cascadeMount()}),this)},t.prototype.cascadeUnmount=function(){if(0==(this._viewFlags&r.View.MountedFlag))throw new Error("already unmounted");this._viewFlags&=~r.View.MountedFlag,this.willUnmount(),this.doUnmountChildViews(),this.onUnmount(),this.didUnmount()},t.prototype.doUnmountChildViews=function(){this._childViews.forEach((function(e){e.cascadeUnmount()}),this)},t.prototype.onMount=function(){e.prototype.onMount.call(this),this.requireUpdate(r.View.NeedsProject)},t.prototype.onUnmount=function(){this.cancelAnimators(),this._viewFlags=0},t.prototype.cascadePower=function(){if(0!=(this._viewFlags&r.View.PoweredFlag))throw new Error("already powered");this._viewFlags|=r.View.PoweredFlag,this.willPower(),this.onPower(),this.doPowerChildViews(),this.didPower()},t.prototype.doPowerChildViews=function(){this._childViews.forEach((function(e){e.cascadePower()}),this)},t.prototype.cascadeUnpower=function(){if(0==(this._viewFlags&r.View.PoweredFlag))throw new Error("already unpowered");this._viewFlags&=~r.View.PoweredFlag,this.willUnpower(),this.doUnpowerChildViews(),this.onUnpower(),this.didUnpower()},t.prototype.doUnpowerChildViews=function(){this._childViews.forEach((function(e){e.cascadeUnpower()}),this)},Object.defineProperty(t.prototype,"renderer",{get:function(){var e=this._parentView;return r.RenderedView.is(e)?e.renderer:null},enumerable:!1,configurable:!0}),t.prototype.modifyUpdate=function(t){var i=0;return 0!=(t&r.View.NeedsProject)&&(i|=r.View.NeedsLayout),i|=e.prototype.modifyUpdate.call(this,t|i)},t.prototype.needsProcess=function(e,t){return 0==(this._viewFlags&r.View.NeedsAnimate)&&(e&=~r.View.NeedsAnimate),e},t.prototype.cascadeProcess=function(e,t){e=this._viewFlags|e,e=this.needsProcess(e,t),this.doProcess(e,t)},t.prototype.doProcess=function(e,t){var i=e;this._viewFlags&=~(r.View.NeedsProcess|r.View.NeedsResize|r.View.NeedsProject),this.willProcess(t),this._viewFlags|=r.View.ProcessingFlag;try{0!=((this._viewFlags|e)&r.View.NeedsScroll)&&(i|=r.View.NeedsScroll,this._viewFlags&=~r.View.NeedsScroll,this.willScroll(t)),0!=((this._viewFlags|e)&r.View.NeedsDerive)&&(i|=r.View.NeedsDerive,this._viewFlags&=~r.View.NeedsDerive,this.willDerive(t)),0!=((this._viewFlags|e)&r.View.NeedsAnimate)&&(i|=r.View.NeedsAnimate,this._viewFlags&=~r.View.NeedsAnimate,this.willAnimate(t)),0!=((this._viewFlags|e)&r.View.NeedsProject)&&(i|=r.View.NeedsProject,this._viewFlags&=~r.View.NeedsProject,this.willProject(t)),this.onProcess(t),0!=(i&r.View.NeedsScroll)&&this.onScroll(t),0!=(i&r.View.NeedsDerive)&&this.onDerive(t),0!=(i&r.View.NeedsAnimate)&&this.onAnimate(t),0!=(i&r.View.NeedsProject)&&this.onProject(t),this.doProcessChildViews(i,t),0!=(i&r.View.NeedsProject)&&this.didProject(t),0!=(i&r.View.NeedsAnimate)&&this.didAnimate(t),0!=(i&r.View.NeedsDerive)&&this.didDerive(t),0!=(i&r.View.NeedsScroll)&&this.didScroll(t)}finally{this._viewFlags&=~r.View.ProcessingFlag,this.didProcess(t)}},t.prototype.willAnimate=function(e){this.willObserve((function(t){void 0!==t.viewWillAnimate&&t.viewWillAnimate(e,this)}))},t.prototype.onAnimate=function(e){this.animateMembers(e.updateTime)},t.prototype.didAnimate=function(e){this.didObserve((function(t){void 0!==t.viewDidAnimate&&t.viewDidAnimate(e,this)}))},t.prototype.willProject=function(e){this.willObserve((function(t){void 0!==t.viewWillProject&&t.viewWillProject(e,this)}))},t.prototype.onProject=function(e){},t.prototype.didProject=function(e){this.didObserve((function(t){void 0!==t.viewDidProject&&t.viewDidProject(e,this)}))},t.prototype.doProcessChildViews=function(e,t){0==(e&r.View.ProcessMask)||this._childViews.isEmpty()||this.isHidden()||this.isCulled()||(this.willProcessChildViews(t),this.doProcessTile(this._childViews,e,t),this.didProcessChildViews(t))},t.prototype.doProcessTile=function(e,t,i){null!==e._southWest&&e._southWest._geoFrame.intersects(i.geoFrame)&&this.doProcessTile(e._southWest,t,i),null!==e._northWest&&e._northWest._geoFrame.intersects(i.geoFrame)&&this.doProcessTile(e._northWest,t,i),null!==e._southEast&&e._southEast._geoFrame.intersects(i.geoFrame)&&this.doProcessTile(e._southEast,t,i),null!==e._northEast&&e._northEast._geoFrame.intersects(i.geoFrame)&&this.doProcessTile(e._northEast,t,i);for(var o=e._views,n=0;n<o.length;n+=1){var s=o[n],a=this.childViewContext(s,i);this.doProcessChildView(s,t,a),0!=(s.viewFlags&r.View.RemovingFlag)&&(s.setViewFlags(s.viewFlags&~r.View.RemovingFlag),this.removeChildView(s))}},t.prototype.cascadeDisplay=function(e,t){e=this._viewFlags|e,e=this.needsDisplay(e,t),this.doDisplay(e,t)},t.prototype.doDisplay=function(e,t){var i=e;this._viewFlags&=~(r.View.NeedsDisplay|r.View.NeedsComposite),this.willDisplay(t),this._viewFlags|=r.View.DisplayingFlag;try{0!=((this._viewFlags|e)&r.View.NeedsLayout)&&(i|=r.View.NeedsLayout,this._viewFlags&=~r.View.NeedsLayout,this.willLayout(t)),0!=((this._viewFlags|e)&r.View.NeedsRender)&&(i|=r.View.NeedsRender,this._viewFlags&=~r.View.NeedsRender,this.willRender(t)),this.onDisplay(t),0!=(i&r.View.NeedsLayout)&&this.onLayout(t),0!=(i&r.View.NeedsRender)&&this.onRender(t),this.doDisplayChildViews(i,t),0!=(i&r.View.NeedsRender)&&this.didRender(t),0!=(i&r.View.NeedsLayout)&&this.didLayout(t)}finally{this._viewFlags&=~r.View.DisplayingFlag,this.didDisplay(t)}},t.prototype.willRender=function(e){this.willObserve((function(t){void 0!==t.viewWillRender&&t.viewWillRender(e,this)}))},t.prototype.onRender=function(e){var t=this.getMemberAnimator("tileOutlineColor");null!==t&&void 0!==t.value&&this.renderTiles(e,t.value)},t.prototype.renderTiles=function(e,t){var i=e.renderer;if(i instanceof l.CanvasRenderer&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderTile(this._childViews,o,e.geoProjection,t),o.restore()}},t.prototype.renderTile=function(e,t,i,o){null!==e._southWest&&this.renderTile(e._southWest,t,i,o),null!==e._northWest&&this.renderTile(e._northWest,t,i,o),null!==e._southEast&&this.renderTile(e._southEast,t,i,o),null!==e._northEast&&this.renderTile(e._northEast,t,i,o);if(e.depth>=2){var n=i.project(e._geoFrame.southWest),r=i.project(e._geoFrame.northWest),s=i.project(e._geoFrame.northEast),a=i.project(e._geoFrame.southEast);t.beginPath(),t.moveTo(n._x,n._y),t.lineTo(r._x,r._y),t.lineTo(s._x,s._y),t.lineTo(a._x,a._y),t.closePath();var l=(e._depth-2)/(e._maxDepth-2);t.lineWidth=4*(1-l)+.5*l,t.strokeStyle=o.toString(),t.stroke()}},t.prototype.didRender=function(e){this.didObserve((function(t){void 0!==t.viewDidRender&&t.viewDidRender(e,this)}))},t.prototype.doDisplayChildViews=function(e,t){0==(e&r.View.DisplayMask)||this._childViews.isEmpty()||this.isHidden()||this.isCulled()||(this.willDisplayChildViews(t),this.doDisplayTile(this._childViews,e,t),this.didDisplayChildViews(t))},t.prototype.doDisplayTile=function(e,t,i){null!==e._southWest&&e._southWest._geoFrame.intersects(i.geoFrame)&&this.doDisplayTile(e._southWest,t,i),null!==e._northWest&&e._northWest._geoFrame.intersects(i.geoFrame)&&this.doDisplayTile(e._northWest,t,i),null!==e._southEast&&e._southEast._geoFrame.intersects(i.geoFrame)&&this.doDisplayTile(e._southEast,t,i),null!==e._northEast&&e._northEast._geoFrame.intersects(i.geoFrame)&&this.doDisplayTile(e._northEast,t,i);for(var o=e._views,n=0;n<o.length;n+=1){var s=o[n],a=this.childViewContext(s,i);this.doDisplayChildView(s,t,a),0!=(s.viewFlags&r.View.RemovingFlag)&&(s.setViewFlags(s.viewFlags&~r.View.RemovingFlag),this.removeChildView(s))}},t.prototype.childViewContext=function(e,t){return t},t.prototype.didSetGeoBounds=function(e,t){var i=this._parentView;M.is(i)&&i.childViewDidSetGeoBounds(this,e,t)},t.prototype.childViewDidSetGeoBounds=function(e,t,i){var o=this._childViews._geoBounds;this._childViews=this._childViews.moved(e,t,i);var n=this._childViews._geoBounds;n.equals(o)||this.didSetGeoBounds(n,o)},t.prototype.hasViewScope=function(e){var t=this._viewScopes;return void 0!==t&&void 0!==t[e]},t.prototype.getViewScope=function(e){var t=this._viewScopes;return void 0!==t&&t[e]||null},t.prototype.setViewScope=function(e,t){var i=this._viewScopes;void 0===i&&(i={},this._viewScopes=i),null!==t?i[e]=t:delete i[e]},t.prototype.hasLayoutAnchor=function(e){var t=this._layoutAnchors;return void 0!==t&&void 0!==t[e]},t.prototype.getLayoutAnchor=function(e){var t=this._layoutAnchors;return void 0!==t&&t[e]||null},t.prototype.setLayoutAnchor=function(e,t){var i=this._layoutAnchors;void 0===i&&(i={},this._layoutAnchors=i),null!==t?i[e]=t:delete i[e]},t.prototype.hasMemberAnimator=function(e){var t=this._memberAnimators;return void 0!==t&&void 0!==t[e]},t.prototype.getMemberAnimator=function(e){var t=this._memberAnimators;return void 0!==t&&t[e]||null},t.prototype.setMemberAnimator=function(e,t){var i=this._memberAnimators;void 0===i&&(i={},this._memberAnimators=i),null!==t?i[e]=t:delete i[e]},t.prototype.getLazyMemberAnimator=function(e){var t=this.getMemberAnimator(e);if(null===t){var i=this.__proto__,o=r.AnimatedView.getMemberAnimatorDescriptor(e,i);null!==o&&void 0!==o.animatorType&&(t=r.AnimatedView.initMemberAnimator(o.animatorType,this,e,o),this.setMemberAnimator(e,t))}return t},t.prototype.animatorDidSetAuto=function(e,t){e instanceof r.MemberAnimator&&this.requireUpdate(r.View.NeedsDerive)},t.prototype.animateMembers=function(e){var t=this._memberAnimators;if(void 0!==t)for(var i in t){t[i].onFrame(e)}},t.prototype.animate=function(e){this.requireUpdate(r.View.NeedsAnimate)},t.prototype.cancelAnimators=function(){this.cancelMemberAnimators()},t.prototype.cancelMemberAnimators=function(){var e=this._memberAnimators;if(void 0!==e)for(var t in e){e[t].cancel()}},t.prototype.isHidden=function(){if(0!=(this._viewFlags&r.View.HiddenFlag))return!0;var e=this._parentView;return!!r.RenderedView.is(e)&&e.isHidden()},t.prototype.setHidden=function(e){0!=(this._viewFlags&r.View.HiddenFlag)!==e&&(this.willSetHidden(e),e?this._viewFlags|=r.View.HiddenFlag:this._viewFlags&=~r.View.HiddenFlag,this.onSetHidden(e),this.didSetHidden(e))},t.prototype.willSetHidden=function(e){this.willObserve((function(t){void 0!==t.viewWillSetHidden&&t.viewWillSetHidden(e,this)}))},t.prototype.onSetHidden=function(e){this.requireUpdate(r.View.NeedsProject)},t.prototype.didSetHidden=function(e){this.didObserve((function(t){void 0!==t.viewDidSetHidden&&t.viewDidSetHidden(e,this)}))},t.prototype.isCulled=function(){if(0!=(this._viewFlags&r.View.CulledFlag))return!0;var e=this._parentView;return!!r.RenderedView.is(e)&&e.isCulled()},t.prototype.setCulled=function(e){0!=(this._viewFlags&r.View.CulledFlag)!==e&&(this.willSetCulled(e),e?this._viewFlags|=r.View.CulledFlag:this._viewFlags&=~r.View.CulledFlag,this.onSetCulled(e),this.didSetCulled(e))},t.prototype.willSetCulled=function(e){this.willObserve((function(t){void 0!==t.viewWillSetCulled&&t.viewWillSetCulled(e,this)}))},t.prototype.onSetCulled=function(e){e||this.requireUpdate(r.View.NeedsProject)},t.prototype.didSetCulled=function(e){this.didObserve((function(t){void 0!==t.viewDidSetCulled&&t.viewDidSetCulled(e,this)}))},t.prototype.cullViewFrame=function(e){void 0===e&&(e=this.viewFrame),this.setCulled(!e.intersects(this.viewBounds))},Object.defineProperty(t.prototype,"viewFrame",{get:function(){var e=this._viewFrame;if(void 0===e){var t=this._parentView;e=r.RenderedView.is(t)?t.viewFrame:n.BoxR2.empty()}return e},enumerable:!1,configurable:!0}),t.prototype.setViewFrame=function(e){null!==e?this._viewFrame=e:void 0!==this._viewFrame&&(this._viewFrame=void 0)},Object.defineProperty(t.prototype,"viewBounds",{get:function(){return this.viewFrame},enumerable:!1,configurable:!0}),t.prototype.cullGeoFrame=function(e){void 0===e&&(e=this.geoFrame),this.setCulled(!e.intersects(this.geoBounds))},Object.defineProperty(t.prototype,"geoFrame",{get:function(){var e=this.parentView;return M.is(e)?e.geoFrame:_.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){return this._childViews._geoBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitBounds",{get:function(){return this.viewBounds},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,t,i){var o=i.geoProjection.unproject(e,t);return this.hitTestTile(this._childViews,e,t,o,i)},t.prototype.hitTestTile=function(e,t,i,o,n){var r=null;if(null!==e._southWest&&e._southWest._geoFrame.contains(o)&&(r=this.hitTestTile(e._southWest,t,i,o,n)),null===r&&null!==e._northWest&&e._northWest._geoFrame.contains(o)&&(r=this.hitTestTile(e._northWest,t,i,o,n)),null===r&&null!==e._southEast&&e._southEast._geoFrame.contains(o)&&(r=this.hitTestTile(e._southEast,t,i,o,n)),null===r&&null!==e._northEast&&e._northEast._geoFrame.contains(o)&&(r=this.hitTestTile(e._northEast,t,i,o,n)),null===r)for(var s=e._views,a=0;a<s.length;a+=1){var l=s[a];if(l.hitBounds.contains(t,i)&&null!==(r=l.hitTest(t,i,n)))break}return r},Object.defineProperty(t.prototype,"parentTransform",{get:function(){return a.Transform.identity()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientBounds",{get:function(){var e=this.clientTransform.inverse();return this.viewBounds.transform(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popoverFrame",{get:function(){var e=this.pageTransform.inverse();return this.viewBounds.transform(e)},enumerable:!1,configurable:!0}),t.prototype.on=function(e,t,i){var o=this._eventHandlers;void 0===o&&(o={},this._eventHandlers=o);var n,r=o[e],s="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,a=i&&"object"==typeof i&&i.passive||!1,l=i&&"object"==typeof i&&i.once||!1;if(void 0===r)r=[n={listener:t,capture:s,passive:a,once:l}],o[e]=r;else{for(var h=r.length,u=0;u<h&&((n=r[u]).listener!==t||n.capture!==s);)u+=1;u<h?(n.passive=a,n.once=l):(n={listener:t,capture:s,passive:a,once:l},r.push(n))}return this},t.prototype.off=function(e,t,i){var o=this._eventHandlers;if(void 0!==o){var n=o[e];if(void 0!==n)for(var r="boolean"==typeof i?i:"object"==typeof i&&null!==i&&i.capture||!1,s=n.length,a=0;a<s;){var l=n[a];if(l.listener===t&&l.capture===r){n.splice(a,1),0===n.length&&delete o[e];break}a+=1}}return this},t.prototype.handleEvent=function(e){var t=e.type,i=this._eventHandlers;if(void 0!==i){var o=i[t];if(void 0!==o){for(var n=0;n<o.length;){var r=o[n];if(!r.capture){var s=r.listener;if("function"==typeof s?s(e):"object"==typeof s&&null!==s&&s.handleEvent(e),r.once){o.splice(n,1);continue}}n+=1}0===o.length&&delete i[t]}}"mouseover"===t?this.onMouseOver(e):"mouseout"===t&&this.onMouseOut(e)},t.prototype.bubbleEvent=function(e){if(this.handleEvent(e),e.bubbles&&!e.cancelBubble){var t=this._parentView;return r.RenderedView.is(t)?t.bubbleEvent(e):t}return null},t.prototype.dispatchEvent=function(e){e.targetView=this;var t=this.bubbleEvent(e);return null!==t?t.dispatchEvent(e):!e.cancelBubble},t.prototype.isHovering=function(){return 0!=(this._viewFlags&r.View.HoveringFlag)},t.prototype.onMouseOver=function(e){if(0==(this._viewFlags&r.View.HoveringFlag)){this._viewFlags|=r.View.HoveringFlag;var t=this._eventHandlers;if(void 0!==t&&void 0!==t.mouseenter){var i=new MouseEvent("mouseenter",{clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,bubbles:!1});i.targetView=this,i.relatedTargetView=e.relatedTargetView,this.handleEvent(i)}}},t.prototype.onMouseOut=function(e){if(0!=(this._viewFlags&r.View.HoveringFlag)){this._viewFlags&=~r.View.HoveringFlag;var t=this._eventHandlers;if(void 0!==t&&void 0!==t.mouseleave){var i=new MouseEvent("mouseleave",{clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,bubbles:!1});i.targetView=this,i.relatedTargetView=e.relatedTargetView,this.handleEvent(i)}}},m([r.MemberAnimator(s.Color)],t.prototype,"tileOutlineColor",void 0),t}(r.View),M={is:function(e){if("object"==typeof e&&null!==e){var t=e;return t instanceof b||t instanceof V||r.RenderedView.is(t)&&"geoProjection"in t}return!1}},j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),Object.defineProperty(t.prototype,"geoProjection",{get:function(){var e=this._view;return null!==e?e.geoProjection:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapZoom",{get:function(){var e=this._view;return null!==e?e.mapZoom:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapHeading",{get:function(){var e=this._view;return null!==e?e.mapHeading:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapTilt",{get:function(){var e=this._view;return null!==e?e.mapTilt:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoFrame",{get:function(){var e=this._view;return null!==e?e.geoFrame:_.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){var e=this._view;return null!==e?e.geoBounds:_.empty()},enumerable:!1,configurable:!0}),t.prototype.viewWillProject=function(e,t){},t.prototype.viewDidProject=function(e,t){},t}(r.GraphicsViewController),x=function(e){function t(){var t=e.call(this)||this;return t._canvas=t.createCanvas(),t._renderer=void 0,t._rasterFrame=n.BoxR2.empty(),t}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compositor",{get:function(){var e=this.parentView;return r.RenderedView.is(e)?e.renderer:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){var e=this._renderer;return void 0===e&&(e=this.createRenderer(),this._renderer=e),e},enumerable:!1,configurable:!0}),t.prototype.setRenderer=function(e){"string"==typeof e&&(e=this.createRenderer(e)),this._renderer=e,this.resetRenderer()},t.prototype.createRenderer=function(e){if(void 0===e&&(e="canvas"),"canvas"===e){if(null!==(t=this._canvas.getContext("2d")))return new l.CanvasRenderer(t,this.pixelRatio);throw new Error("Failed to create canvas rendering context")}if("webgl"===e){var t;if(null!==(t=this._canvas.getContext("webgl")))return new l.WebGLRenderer(t,this.pixelRatio);throw new Error("Failed to create webgl rendering context")}throw new Error("Failed to create "+e+" renderer")},t.prototype.modifyUpdate=function(e){var t=0;return 0!=(e&r.View.UpdateMask)&&(0!=(e&r.View.ProcessMask)&&(t|=r.View.NeedsProcess),0!=(e&r.View.DisplayMask)&&(t|=r.View.NeedsDisplay),t|=r.View.NeedsRender|r.View.NeedsComposite),t},t.prototype.cascadeProcess=function(t,i){i=this.rasterViewContext(i),e.prototype.cascadeProcess.call(this,t,i)},t.prototype.cascadeDisplay=function(t,i){i=this.rasterViewContext(i),e.prototype.cascadeDisplay.call(this,t,i)},t.prototype.doDisplay=function(e,t){var i=e;this.willDisplay(t),this._viewFlags|=r.View.DisplayingFlag;try{0!=((this._viewFlags|e)&r.View.NeedsLayout)&&(i|=r.View.NeedsLayout,this._viewFlags&=~r.View.NeedsLayout,this.willLayout(t)),0!=((this._viewFlags|e)&r.View.NeedsRender)&&(i|=r.View.NeedsRender,this._viewFlags&=~r.View.NeedsRender,this.willRender(t)),0!=((this._viewFlags|e)&r.View.NeedsComposite)&&(i|=r.View.NeedsComposite,this._viewFlags&=~r.View.NeedsComposite,this.willComposite(t)),this.onDisplay(t),0!=(i&r.View.NeedsLayout)&&this.onLayout(t),0!=(i&r.View.NeedsRender)&&this.onRender(t),0!=(i&r.View.NeedsComposite)&&this.onComposite(t),this.doDisplayChildViews(i,t),0!=(i&r.View.NeedsComposite)&&this.didComposite(t),0!=(i&r.View.NeedsRender)&&this.didRender(t),0!=(i&r.View.NeedsLayout)&&this.didLayout(t)}finally{this._viewFlags&=~r.View.DisplayingFlag,this.didDisplay(t)}},t.prototype.onLayout=function(t){e.prototype.onLayout.call(this,t),this.resizeCanvas(this._canvas),this.resetRenderer()},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t),this.clearCanvas()},t.prototype.willComposite=function(e){this.willObserve((function(t){void 0!==t.viewWillRender&&t.viewWillRender(e,this)}))},t.prototype.onComposite=function(e){this.compositeImage(e)},t.prototype.didComposite=function(e){this.didObserve((function(t){void 0!==t.viewDidRender&&t.viewDidRender(e,this)}))},t.prototype.childViewContext=function(e,t){return t},t.prototype.rasterViewContext=function(e){var t=Object.create(e);return t.compositor=e.renderer,t.renderer=this.renderer,t},Object.defineProperty(t.prototype,"compositeFrame",{get:function(){var e=this._viewFrame;if(void 0===e){var t=this._parentView;e=r.RenderedView.is(t)?t.viewFrame:n.BoxR2.empty()}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewFrame",{get:function(){return this._rasterFrame},enumerable:!1,configurable:!0}),t.prototype.setViewFrame=function(e){null!==e?this._viewFrame=e:void 0!==this._viewFrame&&(this._viewFrame=void 0)},t.prototype.hitTest=function(e,t,i){var o=this.rasterViewContext(i),n=this.compositeFrame;e-=Math.floor(n.xMin),t-=Math.floor(n.yMin);for(var s=null,a=this._childViews,l=a.length-1;l>=0;l-=1){var h=a[l];if(r.RenderedView.is(h)&&!h.isHidden()&&!h.isCulled())if(h.hitBounds.contains(e,t)&&null!==(s=h.hitTest(e,t,o)))break}return s},Object.defineProperty(t.prototype,"parentTransform",{get:function(){var e=this.compositeFrame,t=Math.floor(e.xMin),i=Math.floor(e.yMin);return 0!==t||0!==i?a.Transform.translate(-t,-i):a.Transform.identity()},enumerable:!1,configurable:!0}),t.prototype.createCanvas=function(){return document.createElement("canvas")},t.prototype.resizeCanvas=function(e){var t=this.compositeFrame,i=t.xMin-Math.floor(t.xMin),o=t.yMin-Math.floor(t.yMin),r=Math.ceil(i+t.width),s=Math.ceil(o+t.height),a=new n.BoxR2(i,o,r,s);if(!this._rasterFrame.equals(a)){var l=this.pixelRatio;e.width=r*l,e.height=s*l,e.style.width=r+"px",e.style.height=s+"px",this._rasterFrame=a}},t.prototype.clearCanvas=function(){var e=this.renderer;if(e instanceof l.CanvasRenderer){var t=this._rasterFrame;e.context.clearRect(0,0,t.xMax,t.yMax)}else if(e instanceof l.WebGLRenderer){var i=e.context;i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}},t.prototype.resetRenderer=function(){var e=this.renderer;if(e instanceof l.CanvasRenderer){var t=this.pixelRatio;e.context.setTransform(t,0,0,t,0,0)}else if(e instanceof l.WebGLRenderer){var i=this._rasterFrame;e.context.viewport(0,0,i.xMax,i.yMax)}},t.prototype.compositeImage=function(e){var t=e.compositor,i=e.renderer;if(t instanceof l.CanvasRenderer&&i instanceof l.CanvasRenderer){var o=i.context.getImageData(0,0,this._canvas.width,this._canvas.height),n=this.compositeFrame,r=t.pixelRatio,s=t.context;s.save(),s.globalAlpha=this.opacity.value,s.globalCompositeOperation=this.compositeOperation.value;var a=Math.floor(n.xMin)*r,h=Math.floor(n.yMin)*r;s.putImageData(o,a,h),s.restore()}},m([r.MemberAnimator(Number,{value:1})],t.prototype,"opacity",void 0),m([r.MemberAnimator(String,{value:"source-over"})],t.prototype,"compositeOperation",void 0),t}(b),C={is:function(e){if("object"==typeof e&&null!==e){var t=e;return t instanceof x||r.CompositedView.is(t)&&M.is(t)}return!1}},F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.viewWillComposite=function(e,t){},t.prototype.viewDidComposite=function(e,t){},t}(j),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),Object.defineProperty(t.prototype,"canvasView",{get:function(){var e=this._view;return null!==e?e.canvasView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoProjection",{get:function(){var e=this._view;return null!==e?e.geoProjection:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapZoom",{get:function(){var e=this._view;return null!==e?e.mapZoom:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapHeading",{get:function(){var e=this._view;return null!==e?e.mapHeading:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapTilt",{get:function(){var e=this._view;return null!==e?e.mapTilt:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoFrame",{get:function(){var e=this._view;return null!==e?e.geoFrame:_.globe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){var e=this._view;return null!==e?e.geoBounds:_.empty()},enumerable:!1,configurable:!0}),t.prototype.viewWillAnimate=function(e,t){},t.prototype.viewDidAnimate=function(e,t){},t.prototype.viewWillProject=function(e,t){},t.prototype.viewDidProject=function(e,t){},t.prototype.viewWillRender=function(e,t){},t.prototype.viewDidRender=function(e,t){},t.prototype.isHidden=function(){var e=this._view;return null!==e&&e.isHidden()},t.prototype.viewWillSetHidden=function(e,t){},t.prototype.viewDidSetHidden=function(e,t){},t.prototype.isCulled=function(){var e=this._view;return null!==e&&e.isCulled()},t.prototype.viewWillSetCulled=function(e,t){},t.prototype.viewDidSetCulled=function(e,t){},Object.defineProperty(t.prototype,"viewFrame",{get:function(){var e=this._view;return null!==e?e.viewFrame:n.BoxR2.empty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewBounds",{get:function(){var e=this._view;return null!==e?e.viewBounds:n.BoxR2.empty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitBounds",{get:function(){var e=this._view;return null!==e?e.hitBounds:n.BoxR2.empty()},enumerable:!1,configurable:!0}),t}(r.ViewController),S=function(e){function t(){var t=e.call(this)||this;return t._geoBounds=_.globe(),t}return w(t,e),t.prototype.didInsertChildView=function(t,i){this.doUpdateGeoBounds(),e.prototype.didInsertChildView.call(this,t,i)},t.prototype.didRemoveChildVIew=function(t){this.doUpdateGeoBounds(),e.prototype.didRemoveChildView.call(this,t)},Object.defineProperty(t.prototype,"geoBounds",{get:function(){return this._geoBounds},enumerable:!1,configurable:!0}),t.prototype.doUpdateGeoBounds=function(){var e=this._geoBounds,t=this.deriveGeoBounds();e.equals(t)||(this._geoBounds=t,this.didSetGeoBounds(t,e))},t.prototype.childViewDidSetGeoBounds=function(e,t,i){this.doUpdateGeoBounds()},t}(b),O=function(e){function t(){var t=e.call(this)||this;return t._geoBounds=_.empty(),t.geoPoint.onUpdate=t.onSetGeoPoint.bind(t),t}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.hitRadius=function(e){return void 0===e?void 0!==this._hitRadius?this._hitRadius:null:(null!==e?this._hitRadius=e:void 0!==this._hitRadius&&(this._hitRadius=void 0),this)},t.prototype.label=function(e){return void 0===e?this.getChildView("label"):(null===e||e instanceof r.View||(e=p.TextRunView.fromAny(e)),this.setChildView("label",e),this)},t.prototype.labelPlacement=function(e){return void 0===e?void 0!==this._labelPlacement?this._labelPlacement:"auto":(this._labelPlacement=e,this)},t.prototype.isGradientStop=function(){return!!this.color.value||"number"==typeof this.opacity.value},t.prototype.setState=function(e,i){var o;void 0!==(o=e instanceof t||e instanceof f?e.toAny():f.isTuple(e)?{lng:e[0],lat:e[1]}:e).lng&&void 0!==o.lat?this.geoPoint(new f(o.lng,o.lat),i):void 0!==o.x&&void 0!==o.y&&this.viewPoint(new n.PointR2(o.x,o.y),i),void 0!==o.radius&&this.radius(o.radius,i),void 0!==o.hitRadius&&this.hitRadius(o.hitRadius),void 0!==o.color&&this.color(o.color,i),void 0!==o.opacity&&this.opacity(o.opacity,i),void 0!==o.labelPadding&&this.labelPadding(o.labelPadding,i),void 0!==o.labelPlacement&&this.labelPlacement(o.labelPlacement),void 0!==o.font&&this.font(o.font,i),void 0!==o.textColor&&this.textColor(o.textColor,i),void 0!==o.label&&this.label(o.label),void 0!==o.hidden&&this.setHidden(o.hidden),void 0!==o.culled&&this.setCulled(o.culled)},t.prototype.onSetGeoPoint=function(e,t){if(void 0!==e){var i=this._geoBounds,o=new _(e._lng,e._lat,e._lng,e._lat);this._geoBounds=o,this.didSetGeoBounds(o,i)}this.requireUpdate(r.View.NeedsProject)},t.prototype.modifyUpdate=function(t){var i=0;return 0!=(t&r.View.NeedsProject)&&null!==this.label()&&(i|=r.View.NeedsLayout),i|=e.prototype.modifyUpdate.call(this,t|i)},t.prototype.onProject=function(t){if(e.prototype.onProject.call(this,t),this.viewPoint.isAuto()){var i=t.geoProjection.project(this.geoPoint.value);this.viewPoint._value=i,this.viewPoint._state=i}},t.prototype.onLayout=function(t){e.prototype.onLayout.call(this,t);var i=this.label();r.RenderedView.is(i)&&this.layoutLabel(i,this.viewFrame)},t.prototype.layoutLabel=function(e,t){var i=void 0!==this._labelPlacement?this._labelPlacement:"auto",o=Math.min(t.width,t.height),s=this.labelPadding.value.pxValue(o),a=this.viewPoint.value,l=a.x,h=a.y;"top"===i?h-=s:"bottom"===i&&(h+=s),r.TypesetView.is(e)&&(e.textAlign.setAutoState("center"),e.textBaseline.setAutoState("bottom"),e.textOrigin.setAutoState(new n.PointR2(l,h)))},Object.defineProperty(t.prototype,"viewBounds",{get:function(){var e=this.viewPoint.value,t=e.x,i=e.y;return new n.BoxR2(t,i,t,i)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitBounds",{get:function(){var e=this.viewPoint.value,t=e.x,i=e.y,o=void 0!==this._hitRadius?this._hitRadius:0;return new n.BoxR2(t-o,i-o,t+o,i+o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){return this._geoBounds},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,i,o){var n=e.prototype.hitTest.call(this,t,i,o);if(null===n){var r=o.renderer;if(r instanceof l.CanvasRenderer){var s=r.context;n=this.hitTestPoint(t,i,s,this.viewFrame)}}return n},t.prototype.hitTestPoint=function(e,t,i,o){var n=this.viewPoint.value,r=n.x,s=n.y,a=this.radius.value,l=void 0!==this._hitRadius?this._hitRadius:0;if(void 0!==a){var h=Math.min(o.width,o.height);l=Math.max(l,a.pxValue(h))}var u=r-e,p=s-t;return u*u+p*p<l*l?this:null},t.prototype.toAny=function(){var e={};return void 0!==this.geoPoint.value&&(e.lng=this.geoPoint.value.lng,e.lat=this.geoPoint.value.lat),void 0===this.viewPoint.value||this.viewPoint.isAuto()||(e.x=this.viewPoint.value.x,e.y=this.viewPoint.value.y),void 0!==this.radius.value&&(e.radius=this.radius.value),null!==this._hitRadius&&(e.hitRadius=this._hitRadius),void 0!==this.color.value&&(e.color=this.color.value),void 0!==this.opacity.value&&(e.opacity=this.opacity.value),void 0!==this.labelPadding.value&&(e.labelPadding=this.labelPadding.value),void 0!==this._labelPlacement&&(e.labelPlacement=this._labelPlacement),e},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e){var i=new t;return i.setState(e),i}throw new TypeError(""+e)},m([r.MemberAnimator(f,{value:f.origin()})],t.prototype,"geoPoint",void 0),m([r.MemberAnimator(n.PointR2,{value:n.PointR2.origin()})],t.prototype,"viewPoint",void 0),m([r.MemberAnimator(h.Length)],t.prototype,"radius",void 0),m([r.MemberAnimator(s.Color)],t.prototype,"color",void 0),m([r.MemberAnimator(Number)],t.prototype,"opacity",void 0),m([r.MemberAnimator(h.Length)],t.prototype,"labelPadding",void 0),m([r.MemberAnimator(u.Font,{inherit:!0})],t.prototype,"font",void 0),m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"textColor",void 0),t}(b),A=function(e){function t(){var t=e.call(this)||this;return t._geoBounds=_.empty(),t.geoCenter.onUpdate=t.onSetGeoCenter.bind(t),t}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.hitRadius=function(e){return void 0===e?void 0!==this._hitRadius?this._hitRadius:null:(null!==e?this._hitRadius=e:void 0!==this._hitRadius&&(this._hitRadius=void 0),this)},t.prototype.onSetGeoCenter=function(e,t){if(void 0!==e){var i=this._geoBounds,o=new _(e._lng,e._lat,e._lng,e._lat);this._geoBounds=o,this.didSetGeoBounds(o,i)}this.requireUpdate(r.View.NeedsProject)},t.prototype.onProject=function(t){var i;(e.prototype.onProject.call(this,t),this.viewCenter.isAuto())?(i=t.geoProjection.project(this.geoCenter.value),this.viewCenter.setAutoState(i)):i=this.viewCenter.value;var o=this.viewFrame,r=Math.min(o.width,o.height),s=this.radius.value.pxValue(r),a=!isFinite(i.x)||!isFinite(i.y)||!isFinite(s)||!o.intersectsCircle(new n.CircleR2(i.x,i.y,s));this.setCulled(a)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t);var i=t.renderer;if(i instanceof l.CanvasRenderer&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderCircle(i.context,this.viewFrame),o.restore()}},t.prototype.renderCircle=function(e,t){var i=Math.min(t.width,t.height),o=this.viewCenter.value,n=this.radius.value.pxValue(i);e.beginPath(),e.arc(o.x,o.y,n,0,2*Math.PI);var r=this.fill.value;void 0!==r&&(e.fillStyle=r.toString(),e.fill());var s=this.stroke.value;if(void 0!==s){var a=this.strokeWidth.value;void 0!==a&&(e.lineWidth=a.pxValue(i)),e.strokeStyle=s.toString(),e.stroke()}},Object.defineProperty(t.prototype,"popoverFrame",{get:function(){var e=this.viewFrame,t=Math.min(e.width,e.height),i=this.pageTransform.inverse(),o=this.viewCenter.value,r=i.transform(o.x,o.y),s=r[0],a=r[1],l=this.radius.value.pxValue(t);return new n.BoxR2(s-l,a-l,s+l,a+l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewBounds",{get:function(){var e=this.viewFrame,t=Math.min(e.width,e.height),i=this.viewCenter.value,o=this.radius.value.pxValue(t);return new n.BoxR2(i.x-o,i.y-o,i.x+o,i.y+o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitBounds",{get:function(){var e=this.viewFrame,t=Math.min(e.width,e.height),i=this.viewCenter.value,o=this.radius.value.pxValue(t),r=void 0!==this._hitRadius?Math.max(this._hitRadius,o):o;return new n.BoxR2(i.x-r,i.y-r,i.x+r,i.y+r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){return this._geoBounds},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,i,o){var n=e.prototype.hitTest.call(this,t,i,o);if(null===n){var r=o.renderer;if(r instanceof l.CanvasRenderer){var s=r.context;n=this.hitTestCircle(t,i,s,this.viewFrame,r.pixelRatio)}}return n},t.prototype.hitTestCircle=function(e,t,i,o,n){var r=Math.min(o.width,o.height),s=this.viewCenter.value,a=this.radius.value.pxValue(r);if(void 0!==this.fill.value){var l=void 0!==this._hitRadius?Math.max(this._hitRadius,a):a,h=s.x-e,u=s.y-t;if(h*h+u*u<l*l)return this}var p=this.strokeWidth.value;if(void 0!==this.stroke.value&&void 0!==p){if(e*=n,t*=n,i.save(),i.beginPath(),i.arc(s.x,s.y,a,0,2*Math.PI),i.lineWidth=p.pxValue(r),i.isPointInStroke(e,t))return i.restore(),this;i.restore()}return null},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e){var i=new t;return void 0!==e.geoCenter&&i.geoCenter(e.geoCenter),void 0!==e.viewCenter&&i.viewCenter(e.viewCenter),void 0!==e.radius&&i.radius(e.radius),void 0!==e.hitRadius&&i.hitRadius(e.hitRadius),void 0!==e.fill&&i.fill(e.fill),void 0!==e.stroke&&i.stroke(e.stroke),void 0!==e.strokeWidth&&i.strokeWidth(e.strokeWidth),void 0!==e.hidden&&i.setHidden(e.hidden),void 0!==e.culled&&i.setCulled(e.culled),i}throw new TypeError(""+e)},m([r.MemberAnimator(f,{value:f.origin()})],t.prototype,"geoCenter",void 0),m([r.MemberAnimator(n.PointR2,{value:n.PointR2.origin()})],t.prototype,"viewCenter",void 0),m([r.MemberAnimator(h.Length,{value:0})],t.prototype,"radius",void 0),m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"fill",void 0),m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"stroke",void 0),m([r.MemberAnimator(h.Length,{inherit:!0})],t.prototype,"strokeWidth",void 0),t}(b),B=function(e){function t(){var t=e.call(this)||this;return t._geoBounds=_.empty(),t.geoCenter.onUpdate=t.onSetGeoCenter.bind(t),t}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return new c.Arc(this.viewCenter.value,this.innerRadius.value,this.outerRadius.value,this.startAngle.value,this.sweepAngle.value,this.padAngle.value,this.padRadius.value,this.cornerRadius.value)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return new c.Arc(this.viewCenter.state,this.innerRadius.state,this.outerRadius.state,this.startAngle.state,this.sweepAngle.state,this.padAngle.state,this.padRadius.state,this.cornerRadius.state)},enumerable:!1,configurable:!0}),t.prototype.onSetGeoCenter=function(e,t){if(void 0!==e){var i=this._geoBounds,o=new _(e._lng,e._lat,e._lng,e._lat);this._geoBounds=o,this.didSetGeoBounds(o,i)}this.requireUpdate(r.View.NeedsProject)},t.prototype.onProject=function(t){var i;(e.prototype.onProject.call(this,t),this.viewCenter.isAuto())?(i=t.geoProjection.project(this.geoCenter.value),this.viewCenter.setAutoState(i)):i=this.viewCenter.value;var o=this.viewFrame,r=Math.min(o.width,o.height),s=this.outerRadius.value.pxValue(r),a=!isFinite(i.x)||!isFinite(i.y)||!isFinite(s)||!o.intersectsCircle(new n.CircleR2(i.x,i.y,s));this.setCulled(a)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t);var i=t.renderer;if(i instanceof l.CanvasRenderer&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderArc(i.context,this.viewFrame),o.restore()}},t.prototype.renderArc=function(e,t){this.value.draw(e,t);var i=this.fill.value;void 0!==i&&(e.fillStyle=i.toString(),e.fill());var o=this.stroke.value;if(void 0!==o){var n=this.strokeWidth.value;if(void 0!==n){var r=Math.min(t.width,t.height);e.lineWidth=n.pxValue(r)}e.strokeStyle=o.toString(),e.stroke()}},Object.defineProperty(t.prototype,"popoverFrame",{get:function(){var e=this.viewFrame,t=Math.min(e.width,e.height),i=this.pageTransform.inverse(),o=this.viewCenter.value,r=i.transform(o.x,o.y),s=r[0],a=r[1],l=(this.innerRadius.value.pxValue(t)+this.outerRadius.value.pxValue(t))/2,h=this.startAngle.value.radValue()+this.sweepAngle.value.radValue()/2,u=s+l*Math.cos(h),p=a+l*Math.sin(h);return new n.BoxR2(u,p,u,p)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewBounds",{get:function(){var e=this.viewFrame,t=Math.min(e.width,e.height),i=this.viewCenter.value,o=this.outerRadius.value.pxValue(t);return new n.BoxR2(i.x-o,i.y-o,i.x+o,i.y+o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitBounds",{get:function(){return this.viewBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){return this._geoBounds},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,i,o){var n=e.prototype.hitTest.call(this,t,i,o);if(null===n){var r=o.renderer;if(r instanceof l.CanvasRenderer){var s=r.context;s.save(),t*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestArc(t,i,s,this.viewFrame),s.restore()}}return n},t.prototype.hitTestArc=function(e,t,i,o){if(i.beginPath(),this.value.draw(i,o),void 0!==this.fill.value&&i.isPointInPath(e,t))return this;if(void 0!==this.stroke.value){var n=this.strokeWidth.value;if(void 0!==n){var r=Math.min(o.width,o.height);if(i.lineWidth=n.pxValue(r),i.isPointInStroke(e,t))return this}}return null},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e){var i=new t;return void 0!==e.geoCenter&&i.geoCenter(e.geoCenter),void 0!==e.viewCenter&&i.viewCenter(e.viewCenter),void 0!==e.innerRadius&&i.innerRadius(e.innerRadius),void 0!==e.outerRadius&&i.outerRadius(e.outerRadius),void 0!==e.startAngle&&i.startAngle(e.startAngle),void 0!==e.sweepAngle&&i.sweepAngle(e.sweepAngle),void 0!==e.padAngle&&i.padAngle(e.padAngle),void 0!==e.padRadius&&i.padRadius(e.padRadius),void 0!==e.cornerRadius&&i.cornerRadius(e.cornerRadius),void 0!==e.fill&&i.fill(e.fill),void 0!==e.stroke&&i.stroke(e.stroke),void 0!==e.strokeWidth&&i.strokeWidth(e.strokeWidth),void 0!==e.hidden&&i.setHidden(e.hidden),void 0!==e.culled&&i.setCulled(e.culled),i}throw new TypeError(""+e)},m([r.MemberAnimator(f,{value:f.origin()})],t.prototype,"geoCenter",void 0),m([r.MemberAnimator(n.PointR2,{value:n.PointR2.origin()})],t.prototype,"viewCenter",void 0),m([r.MemberAnimator(h.Length,{value:h.Length.zero()})],t.prototype,"innerRadius",void 0),m([r.MemberAnimator(h.Length,{value:h.Length.zero()})],t.prototype,"outerRadius",void 0),m([r.MemberAnimator(d.Angle,{value:d.Angle.zero()})],t.prototype,"startAngle",void 0),m([r.MemberAnimator(d.Angle,{value:d.Angle.zero()})],t.prototype,"sweepAngle",void 0),m([r.MemberAnimator(d.Angle,{value:d.Angle.zero()})],t.prototype,"padAngle",void 0),m([r.MemberAnimator(h.Length,{value:null})],t.prototype,"padRadius",void 0),m([r.MemberAnimator(h.Length,{value:h.Length.zero()})],t.prototype,"cornerRadius",void 0),m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"fill",void 0),m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"stroke",void 0),m([r.MemberAnimator(h.Length,{inherit:!0})],t.prototype,"strokeWidth",void 0),t}(b),T=function(e){function t(){var t=e.call(this)||this;return t._geoBounds=_.empty(),t.geoStart.onUpdate=t.onSetGeoStart.bind(t),t.geoEnd.onUpdate=t.onSetGeoEnd.bind(t),t}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.hitWidth=function(e){return void 0===e?void 0!==this._hitWidth?this._hitWidth:null:(null!==e?this._hitWidth=e:void 0!==this._hitWidth&&(this._hitWidth=void 0),this)},t.prototype.onSetGeoStart=function(e,t){var i=this.geoEnd.value;if(void 0!==e&&void 0!==i){var o=this._geoBounds,n=new _(Math.min(e.lng,i.lng),Math.min(e.lat,i.lat),Math.max(e.lng,i.lng),Math.max(e.lat,i.lat));this._geoBounds=n,this.didSetGeoBounds(n,o)}this.requireUpdate(r.View.NeedsProject)},t.prototype.onSetGeoEnd=function(e,t){var i=this.geoEnd.value;if(void 0!==i&&void 0!==e){var o=this._geoBounds,n=new _(Math.min(i.lng,e.lng),Math.min(i.lat,e.lat),Math.max(i.lng,e.lng),Math.max(i.lat,e.lat));this._geoBounds=n,this.didSetGeoBounds(n,o)}this.requireUpdate(r.View.NeedsProject)},t.prototype.onProject=function(t){e.prototype.onProject.call(this,t);var i,o,r=t.geoProjection;this.viewStart.isAuto()?(i=r.project(this.geoStart.value),this.viewStart.setAutoState(i)):i=this.viewStart.value,this.viewEnd.isAuto()?(o=r.project(this.geoEnd.value),this.viewEnd.setAutoState(o)):o=this.viewEnd.value;var s=i.x,a=i.y,l=o.x,h=o.y,u=!isFinite(s)||isFinite(a)||!isFinite(l)||!isFinite(h)||!this.viewFrame.intersectsSegment(new n.SegmentR2(s,a,l,h));this.setCulled(u)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t);var i=t.renderer;if(i instanceof l.CanvasRenderer&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderLine(o,this.viewFrame),o.restore()}},t.prototype.renderLine=function(e,t){var i=this.stroke.value;if(void 0!==i){var o=this.strokeWidth.value;if(void 0!==o){var n=Math.min(t.width,t.height),r=this.viewStart.value,s=this.viewEnd.value;e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(s.x,s.y),e.lineWidth=o.pxValue(n),e.strokeStyle=i.toString(),e.stroke()}}},Object.defineProperty(t.prototype,"popoverFrame",{get:function(){var e=this.viewStart.value,t=this.viewEnd.value,i=(e.x+t.x)/2,o=(e.y+t.y)/2,r=this.pageTransform.inverse().transform(i,o),s=r[0],a=r[1];return new n.BoxR2(s,a,s,a)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewBounds",{get:function(){var e=this.viewStart.value,t=e.x,i=e.y,o=this.viewEnd.value,r=o.x,s=o.y;return new n.BoxR2(Math.min(t,r),Math.min(i,s),Math.max(t,r),Math.max(i,s))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitBounds",{get:function(){return this.viewBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){return this._geoBounds},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,i,o){var n=e.prototype.hitTest.call(this,t,i,o);if(null===n){var r=o.renderer;if(r instanceof l.CanvasRenderer){var s=r.context;s.save(),t*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestLine(t,i,s,this.viewFrame),s.restore()}}return n},t.prototype.hitTestLine=function(e,t,i,o){var n=this.viewStart.value,r=this.viewEnd.value,s=void 0!==this._hitWidth?this._hitWidth:0,a=this.strokeWidth.value;if(void 0!==a){var l=Math.min(o.width,o.height);s=Math.max(s,a.pxValue(l))}return i.beginPath(),i.moveTo(n.x,n.y),i.lineTo(r.x,r.y),i.lineWidth=s,i.isPointInStroke(e,t)?this:null},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e){var i=new t;return void 0!==e.geoStart&&i.geoStart(e.geoStart),void 0!==e.geoEnd&&i.geoEnd(e.geoEnd),void 0!==e.stroke&&i.stroke(e.stroke),void 0!==e.strokeWidth&&i.strokeWidth(e.strokeWidth),void 0!==e.hitWidth&&i.hitWidth(e.hitWidth),void 0!==e.hidden&&i.setHidden(e.hidden),void 0!==e.culled&&i.setCulled(e.culled),i}throw new TypeError(""+e)},m([r.MemberAnimator(f,{value:f.origin()})],t.prototype,"geoStart",void 0),m([r.MemberAnimator(f,{value:f.origin()})],t.prototype,"geoEnd",void 0),m([r.MemberAnimator(n.PointR2,{value:n.PointR2.origin()})],t.prototype,"viewStart",void 0),m([r.MemberAnimator(n.PointR2,{value:n.PointR2.origin()})],t.prototype,"viewEnd",void 0),m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"stroke",void 0),m([r.MemberAnimator(h.Length,{inherit:!0})],t.prototype,"strokeWidth",void 0),t}(b),W=function(e){function t(){var t=e.call(this)||this;return t._geoCenter=f.origin(),t._viewCenter=n.PointR2.origin(),t._gradientStops=0,t._viewBounds=n.BoxR2.empty(),t._geoBounds=_.empty(),t}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.points=function(e,t){var i=this._childViews;if(void 0===e){e=[];for(var o=0;o<i.length;o+=1){(y=i[o])instanceof O&&e.push(y)}return e}for(var n=this._geoBounds,r=1/0,s=1/0,a=-1/0,l=-1/0,h=0,u=0,p=!1,d=(o=0,0);o<i.length&&d<e.length;){if((y=i[o])instanceof O){var c=e[d];y.setState(c);var v=y.geoPoint.value;h+=g=v.lng,u+=w=v.lat,r=Math.min(r,g),s=Math.min(s,w),a=Math.max(g,a),l=Math.max(w,l),p=p||!isFinite(g)||!isFinite(w),d+=1}o+=1}for(;d<e.length;){c=O.fromAny(e[d]);this.appendChildView(c);var g,w,m=c.geoPoint.value;h+=g=m.lng,u+=w=m.lat,r=Math.min(r,g),s=Math.min(s,w),a=Math.max(g,a),l=Math.max(w,l),p=p||!isFinite(g)||!isFinite(w),o+=1,d+=1}for(;o<i.length;){var y;(y=i[o])instanceof O?this.removeChildView(y):o+=1}p||0===d?(this._geoCenter=f.origin(),this._geoBounds=_.empty()):(h/=d,u/=d,this._geoCenter=new f(h,u),this._geoBounds=new _(r,s,a,l));var b=this._geoBounds;return n.equals(b)||this.didSetGeoBounds(b,n),this},t.prototype.appendPoint=function(e,t){return e=O.fromAny(e),this.appendChildView(e,t),e},t.prototype.setPoint=function(e,t){return t=O.fromAny(t),this.setChildView(e,t),t},Object.defineProperty(t.prototype,"geoCenter",{get:function(){return this._geoCenter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewCenter",{get:function(){return this._viewCenter},enumerable:!1,configurable:!0}),t.prototype.hitWidth=function(e){return void 0===e?void 0!==this._hitWidth?this._hitWidth:null:(null!==e?this._hitWidth=e:void 0!==this._hitWidth&&(this._hitWidth=void 0),this)},t.prototype.onInsertChildView=function(t,i){e.prototype.onInsertChildView.call(this,t,i),t instanceof O&&this.onInsertPoint(t)},t.prototype.onInsertPoint=function(e){e.requireUpdate(r.View.NeedsAnimate|r.View.NeedsProject)},t.prototype.didProject=function(t){for(var i=this._geoBounds,o=1/0,r=1/0,s=-1/0,a=-1/0,l=0,h=0,u=1/0,p=1/0,d=-1/0,c=-1/0,v=0,g=0,w=!1,m=0,y=0,b=this._childViews,P=0;P<b.length;P+=1){var V=b[P];if(V instanceof O){var M=V.geoPoint.value,j=M.lng,x=M.lat;l+=j,h+=x,o=Math.min(o,j),r=Math.min(r,x),s=Math.max(j,s),a=Math.max(x,a),w=w||!isFinite(j)||!isFinite(x);var C=V.viewPoint.value,F=C.x,R=C.y;u=Math.min(u,F),p=Math.min(p,R),d=Math.max(F,d),c=Math.max(R,c),v+=F,g+=F,w=w||!isFinite(F)||!isFinite(R),V.isGradientStop()&&(m+=1),y+=1}}w||0===y?(this._geoCenter=f.origin(),this._geoBounds=_.empty(),this._viewCenter=n.PointR2.origin(),this._viewBounds=n.BoxR2.empty(),this.setCulled(!0)):(l/=y,h/=y,this._geoCenter=new f(l,h),this._geoBounds=new _(o,r,s,a),v/=y,g/=y,this._viewCenter=new n.PointR2(v,g),this._viewBounds=new n.BoxR2(u,p,d,c),this.cullGeoFrame(t.geoFrame)),this._gradientStops=m;var S=this._geoBounds;i.equals(S)||this.didSetGeoBounds(S,i),e.prototype.didProject.call(this,t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t);var i=t.renderer;if(i instanceof l.CanvasRenderer&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),0!==this._gradientStops?this.renderPolylineGradient(o,this.viewFrame):this.renderPolylineStroke(o,this.viewFrame),o.restore()}},t.prototype.renderPolylineStroke=function(e,t){var i=this._childViews,o=i.length,n=0;e.beginPath();for(var r=0;r<o;r+=1){var s=i[r];if(s instanceof O){var a=s.viewPoint.value,l=a.x,h=a.y;0===n?e.moveTo(l,h):e.lineTo(l,h),n+=1}}if(0!==n){var u=this.stroke.value;if(void 0!==u){var p=Math.min(t.width,t.height),d=this.strokeWidth.value.pxValue(p);e.strokeStyle=u.toString(),e.lineWidth=d,e.stroke()}}},t.prototype.renderPolylineGradient=function(e,t){for(var i,o=this.stroke.value,n=Math.min(t.width,t.height),r=this.strokeWidth.value.pxValue(n),s=this._childViews,a=s.length,l=0;l<a;l+=1){var h=s[l];if(h instanceof O){if(void 0!==i){var u=i.viewPoint.value.x,p=i.viewPoint.value.y,d=h.viewPoint.value.x,c=h.viewPoint.value.y,v=e.createLinearGradient(u,p,d,c),f=i.color.value;void 0===f&&(f=o);var g=i.opacity.value;"number"==typeof g&&(f=f.alpha(g)),v.addColorStop(0,f.toString()),void 0===(f=h.color.value)&&(f=o),"number"==typeof(g=h.opacity.value)&&(f=f.alpha(g)),v.addColorStop(1,f.toString()),e.beginPath(),e.moveTo(u,p),e.lineTo(d,c),e.strokeStyle=v,e.lineWidth=r,e.stroke()}i=h}}},Object.defineProperty(t.prototype,"popoverFrame",{get:function(){var e=this._viewCenter,t=this.pageTransform.inverse().transform(e.x,e.y),i=t[0],o=t[1];return new n.BoxR2(i,o,i,o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewBounds",{get:function(){return this._viewBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitBounds",{get:function(){return this.viewBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){return this._geoBounds},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,i,o){var n=e.prototype.hitTest.call(this,t,i,o);if(null===n){var r=o.renderer;if(r instanceof l.CanvasRenderer){var s=r.context;s.save(),t*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestPolyline(t,i,s,this.viewFrame),s.restore()}}return n},t.prototype.hitTestPolyline=function(e,t,i,o){var n=this._childViews.length,r=0;i.beginPath();for(var s=0;s<n;s+=1){var a=this._childViews[s];if(a instanceof O){var l=a.viewPoint.value,h=l.x,u=l.y;0===s?i.moveTo(h,u):i.lineTo(h,u),r+=1}}if(0!==r){var p=void 0!==this._hitWidth?this._hitWidth:0,d=this.strokeWidth.value;if(void 0!==d){var c=Math.min(o.width,o.height);p=Math.max(p,d.pxValue(c))}if(i.lineWidth=p,i.isPointInStroke(e,t))return this}return null},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e){var i=new t;void 0!==e.stroke&&i.stroke(e.stroke),void 0!==e.strokeWidth&&i.strokeWidth(e.strokeWidth),void 0!==e.hitWidth&&i.hitWidth(e.hitWidth),void 0!==e.font&&i.font(e.font),void 0!==e.textColor&&i.textColor(e.textColor);var o=e.points;return void 0!==o&&i.points(o),void 0!==e.hidden&&i.setHidden(e.hidden),void 0!==e.culled&&i.setCulled(e.culled),i}throw new TypeError(""+e)},m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"stroke",void 0),m([r.MemberAnimator(h.Length,{inherit:!0})],t.prototype,"strokeWidth",void 0),m([r.MemberAnimator(u.Font,{inherit:!0})],t.prototype,"font",void 0),m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"textColor",void 0),t}(b),E=function(e){function t(){var t=e.call(this)||this;return t._geoCenter=f.origin(),t._viewCenter=n.PointR2.origin(),t._clipViewport=!0,t._viewBounds=n.BoxR2.empty(),t._geoBounds=_.empty(),t}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.points=function(e,t){var i=this._childViews;if(void 0===e){e=[];for(var o=0;o<i.length;o+=1){(y=i[o])instanceof O&&e.push(y)}return e}for(var n=this._geoBounds,r=1/0,s=1/0,a=-1/0,l=-1/0,h=0,u=0,p=!1,d=(o=0,0);o<i.length&&d<e.length;){if((y=i[o])instanceof O){var c=e[d];y.setState(c);var v=y.geoPoint.value;h+=g=v.lng,u+=w=v.lat,r=Math.min(r,g),s=Math.min(s,w),a=Math.max(g,a),l=Math.max(w,l),p=p||!isFinite(g)||!isFinite(w),d+=1}o+=1}for(;d<e.length;){c=O.fromAny(e[d]);this.appendChildView(c);var g,w,m=c.geoPoint.value;h+=g=m.lng,u+=w=m.lat,r=Math.min(r,g),s=Math.min(s,w),a=Math.max(g,a),l=Math.max(w,l),p=p||!isFinite(g)||!isFinite(w),o+=1,d+=1}for(;o<i.length;){var y;(y=i[o])instanceof O?this.removeChildView(y):o+=1}p||0===d?(this._geoCenter=f.origin(),this._geoBounds=_.empty()):(h/=d,u/=d,this._geoCenter=new f(h,u),this._geoBounds=new _(r,s,a,l));var b=this._geoBounds;return n.equals(b)||this.didSetGeoBounds(b,n),this},t.prototype.appendPoint=function(e,t){return e=O.fromAny(e),this.appendChildView(e,t),e},t.prototype.setPoint=function(e,t){return t=O.fromAny(t),this.setChildView(e,t),t},t.prototype.clipViewport=function(e){return void 0===e?this._clipViewport:(this._clipViewport=e,this)},Object.defineProperty(t.prototype,"geoCenter",{get:function(){return this._geoCenter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewCenter",{get:function(){return this._viewCenter},enumerable:!1,configurable:!0}),t.prototype.onInsertChildView=function(t,i){e.prototype.onInsertChildView.call(this,t,i),t instanceof O&&this.onInsertPoint(t)},t.prototype.onInsertPoint=function(e){e.requireUpdate(r.View.NeedsAnimate|r.View.NeedsProject)},t.prototype.didProject=function(t){for(var i=this._geoBounds,o=1/0,r=1/0,s=-1/0,a=-1/0,l=0,h=0,u=1/0,p=1/0,d=-1/0,c=-1/0,v=0,g=0,w=!1,m=0,y=this._childViews,b=0;b<y.length;b+=1){var P=y[b];if(P instanceof O){var V=P.geoPoint.value,M=V.lng,j=V.lat;l+=M,h+=j,o=Math.min(o,M),r=Math.min(r,j),s=Math.max(M,s),a=Math.max(j,a),w=w||!isFinite(M)||!isFinite(j);var x=P.viewPoint.value,C=x.x,F=x.y;u=Math.min(u,C),p=Math.min(p,F),d=Math.max(C,d),c=Math.max(F,c),v+=C,g+=C,w=w||!isFinite(C)||!isFinite(F),m+=1}}if(w||0===m)this._geoCenter=f.origin(),this._geoBounds=_.empty(),this._viewCenter=n.PointR2.origin(),this._viewBounds=n.BoxR2.empty(),this.setCulled(!0);else if(l/=m,h/=m,this._geoCenter=new f(l,h),this._geoBounds=new _(o,r,s,a),v/=m,g/=m,this._viewCenter=new n.PointR2(v,g),this._viewBounds=new n.BoxR2(u,p,d,c),t.geoFrame.intersects(this._geoBounds)){var R=this.viewFrame,S=this._viewBounds,A=!(!this._clipViewport||R.xMin-4*R.width<=S.xMin&&S.xMax<=R.xMax+4*R.width&&R.yMin-4*R.height<=S.yMin&&S.yMax<=R.yMax+4*R.height)||!R.intersects(S);this.setCulled(A)}else this.setCulled(!0);var B=this._geoBounds;i.equals(B)||this.didSetGeoBounds(B,i),e.prototype.didProject.call(this,t)},t.prototype.onRender=function(t){e.prototype.onRender.call(this,t);var i=t.renderer;if(i instanceof l.CanvasRenderer&&!this.isHidden()&&!this.isCulled()){var o=i.context;o.save(),this.renderPolygon(o,this.viewFrame),o.restore()}},t.prototype.renderPolygon=function(e,t){var i=this._childViews,o=i.length,n=0;e.beginPath();for(var r=0;r<o;r+=1){var s=i[r];if(s instanceof O){var a=s.viewPoint.value,l=a.x,h=a.y;0===n?e.moveTo(l,h):e.lineTo(l,h),n+=1}}if(e.closePath(),0!==n){var u=this.fill.value;void 0!==u&&(e.fillStyle=u.toString(),e.fill());var p=this.stroke.value,d=this.strokeWidth.value;if(void 0!==p&&void 0!==d){var c=Math.min(t.width,t.height);e.lineWidth=d.pxValue(c),e.strokeStyle=p.toString(),e.stroke()}}},Object.defineProperty(t.prototype,"popoverFrame",{get:function(){var e=this._viewCenter,t=this.pageTransform.inverse().transform(e.x,e.y),i=t[0],o=t[1];return new n.BoxR2(i,o,i,o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewBounds",{get:function(){return this._viewBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hitBounds",{get:function(){return this.viewBounds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoBounds",{get:function(){return this._geoBounds},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,i,o){var n=e.prototype.hitTest.call(this,t,i,o);if(null===n){var r=o.renderer;if(r instanceof l.CanvasRenderer){var s=r.context;s.save(),t*=r.pixelRatio,i*=r.pixelRatio,n=this.hitTestPolygon(t,i,s,this.viewFrame),s.restore()}}return n},t.prototype.hitTestPolygon=function(e,t,i,o){var n=this._childViews.length,r=0;i.beginPath();for(var s=0;s<n;s+=1){var a=this._childViews[s];if(a instanceof O){var l=a.viewPoint.value,h=l.x,u=l.y;0===s?i.moveTo(h,u):i.lineTo(h,u),r+=1}}if(i.closePath(),0!==r){if(void 0!==this.fill.value&&i.isPointInPath(e,t))return this;if(void 0!==this.stroke.value){var p=this.strokeWidth.value;if(void 0!==p){var d=Math.min(o.width,o.height);if(i.lineWidth=p.pxValue(d),i.isPointInStroke(e,t))return this}}}return null},t.fromAny=function(e){if(e instanceof t)return e;if("object"==typeof e&&null!==e){var i=new t;void 0!==e.clipViewport&&i.clipViewport(e.clipViewport),void 0!==e.fill&&i.fill(e.fill),void 0!==e.stroke&&i.stroke(e.stroke),void 0!==e.strokeWidth&&i.strokeWidth(e.strokeWidth),void 0!==e.font&&i.font(e.font),void 0!==e.textColor&&i.textColor(e.textColor);var o=e.points;return void 0!==o&&i.points(o),void 0!==e.hidden&&i.setHidden(e.hidden),void 0!==e.culled&&i.setCulled(e.culled),i}throw new TypeError(""+e)},m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"fill",void 0),m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"stroke",void 0),m([r.MemberAnimator(h.Length,{inherit:!0})],t.prototype,"strokeWidth",void 0),m([r.MemberAnimator(u.Font,{inherit:!0})],t.prototype,"font",void 0),m([r.MemberAnimator(s.Color,{inherit:!0})],t.prototype,"textColor",void 0),t}(b),D=function(){function e(e){this._map=e}return Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var e=this._map.getBounds();return new _(e.getWest(),e.getSouth(),e.getEast(),e.getNorth())},enumerable:!1,configurable:!0}),e.prototype.project=function(e,t){var i;i="number"==typeof e?new v.LngLat(e,t):e;var o=this._map.project(i);return new n.PointR2(o.x,o.y)},e.prototype.unproject=function(e,t){var i;i="number"==typeof e?new v.Point(e,t):Array.isArray(e)?e:new v.Point(e.x,e.y);var o=this._map.unproject(i);return new f(o.lng,o.lat)},e}(),N=function(e){function t(t){var i=e.call(this)||this;return i.onMapRender=i.onMapRender.bind(i),i._map=t,i._geoProjection=new D(i._map),i._mapZoom=t.getZoom(),i._mapHeading=t.getBearing(),i._mapTilt=t.getPitch(),i.initMap(i._map),i}return w(t,e),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),t.prototype.initMap=function(e){e.on("render",this.onMapRender)},Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.project=function(e,t){return this._geoProjection.project.apply(this._geoProjection,arguments)},t.prototype.unproject=function(e,t){return this._geoProjection.unproject.apply(this._geoProjection,arguments)},Object.defineProperty(t.prototype,"geoProjection",{get:function(){return this._geoProjection},enumerable:!1,configurable:!0}),t.prototype.setGeoProjection=function(e){this.willSetGeoProjection(e),this._geoProjection=e,this.onSetGeoProjection(e),this.didSetGeoProjection(e)},t.prototype.willSetGeoProjection=function(e){this.willObserve((function(t){void 0!==t.viewWillSetGeoProjection&&t.viewWillSetGeoProjection(e,this)}))},t.prototype.onSetGeoProjection=function(e){this.isHidden()||this.isCulled()||this.requireUpdate(r.View.NeedsProject,!0)},t.prototype.didSetGeoProjection=function(e){this.didObserve((function(t){void 0!==t.viewDidSetGeoProjection&&t.viewDidSetGeoProjection(e,this)}))},Object.defineProperty(t.prototype,"mapZoom",{get:function(){return this._mapZoom},enumerable:!1,configurable:!0}),t.prototype.setMapZoom=function(e){var t=this._mapZoom;t!==e&&(this.willSetMapZoom(e,t),this._mapZoom=e,this.onSetMapZoom(e,t),this.didSetMapZoom(e,t))},t.prototype.willSetMapZoom=function(e,t){this.didObserve((function(i){void 0!==i.viewWillSetMapZoom&&i.viewWillSetMapZoom(e,t,this)}))},t.prototype.onSetMapZoom=function(e,t){},t.prototype.didSetMapZoom=function(e,t){this.didObserve((function(i){void 0!==i.viewDidSetMapZoom&&i.viewDidSetMapZoom(e,t,this)}))},Object.defineProperty(t.prototype,"mapHeading",{get:function(){return this._mapHeading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapTilt",{get:function(){return this._mapTilt},enumerable:!1,configurable:!0}),t.prototype.onPower=function(){e.prototype.onPower.call(this),this.requireUpdate(r.View.NeedsProject)},t.prototype.cascadeProcess=function(t,i){i=this.mapViewContext(i),e.prototype.cascadeProcess.call(this,t,i)},t.prototype.cascadeDisplay=function(t,i){i=this.mapViewContext(i),e.prototype.cascadeDisplay.call(this,t,i)},t.prototype.childViewContext=function(e,t){return t},t.prototype.mapViewContext=function(e){var t=Object.create(e);return t.geoProjection=this._geoProjection,t.geoFrame=this.geoFrame,t.mapZoom=this._mapZoom,t.mapHeading=this._mapHeading,t.mapTilt=this._mapTilt,t},Object.defineProperty(t.prototype,"geoFrame",{get:function(){var e=this._map.getBounds();return new _(e.getWest(),e.getSouth(),e.getEast(),e.getNorth())},enumerable:!1,configurable:!0}),t.prototype.onMapRender=function(){this._mapHeading=this._map.getBearing(),this._mapTilt=this._map.getPitch(),this.setMapZoom(this._map.getZoom()),this.setGeoProjection(this._geoProjection)},t.prototype.hitTest=function(t,i,o){return o=this.mapViewContext(o),e.prototype.hitTest.call(this,t,i,o)},t.prototype.overlayCanvas=function(){if(null!==this._parentView)return this.canvasView;var e=this._map;r.View.fromNode(e.getContainer());var t=r.View.fromNode(e.getCanvasContainer()).append("canvas");return t.append(this),t},t}(b),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.viewWillSetGeoProjection=function(e,t){},t.prototype.viewDidSetGeoProjection=function(e,t){},t.prototype.viewWillSetMapZoom=function(e,t,i){},t.prototype.viewDidSetMapZoom=function(e,t,i){},t}(j),k=function(){function e(e){this._mapView=e}return Object.defineProperty(e.prototype,"map",{get:function(){return this._mapView._map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var e=this._mapView._map.getBounds(),t=e.getSouthWest(),i=e.getNorthEast();return new _(t.lng(),t.lat(),i.lng(),i.lat())},enumerable:!1,configurable:!0}),e.prototype.project=function(e,t){var i;i="number"==typeof e?new google.maps.LatLng(t,e):Array.isArray(e)?new google.maps.LatLng(e[1],e[0]):new google.maps.LatLng(e.lat,e.lng);var o=this._mapView._mapOverlay.getProjection().fromLatLngToContainerPixel(i);return new n.PointR2(o.x,o.y)},e.prototype.unproject=function(e,t){var i;i="number"==typeof e?new google.maps.Point(e,t):Array.isArray(e)?new google.maps.Point(e[0],e[1]):new google.maps.Point(e.x,e.y);var o=this._mapView._mapOverlay.getProjection().fromContainerPixelToLatLng(i);return new f(o.lng(),o.lat())},e}(),H=function(e){function t(t){var i=e.call(this)||this;return i.onMapRender=i.onMapRender.bind(i),i._map=t,i._geoProjection=new k(i),i._mapOverlay=null,i._mapZoom=t.getZoom(),i._mapHeading=t.getHeading(),i._mapTilt=t.getTilt(),i.initMap(t),i}return w(t,e),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),t.prototype.initMap=function(e){},Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.project=function(e,t){return this._geoProjection.project.apply(this._geoProjection,arguments)},t.prototype.unproject=function(e,t){return this._geoProjection.unproject.apply(this._geoProjection,arguments)},Object.defineProperty(t.prototype,"geoProjection",{get:function(){return this._geoProjection},enumerable:!1,configurable:!0}),t.prototype.setGeoProjection=function(e){this.willSetGeoProjection(e),this._geoProjection=e,this.onSetGeoProjection(e),this.didSetGeoProjection(e)},t.prototype.willSetGeoProjection=function(e){this.willObserve((function(t){void 0!==t.viewWillSetGeoProjection&&t.viewWillSetGeoProjection(e,this)}))},t.prototype.onSetGeoProjection=function(e){this.isHidden()||this.isCulled()||this.requireUpdate(r.View.NeedsProject,!0)},t.prototype.didSetGeoProjection=function(e){this.didObserve((function(t){void 0!==t.viewDidSetGeoProjection&&t.viewDidSetGeoProjection(e,this)}))},Object.defineProperty(t.prototype,"mapOverlay",{get:function(){return this._mapOverlay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapZoom",{get:function(){return this._mapZoom},enumerable:!1,configurable:!0}),t.prototype.setMapZoom=function(e){var t=this._mapZoom;t!==e&&(this.willSetMapZoom(e,t),this._mapZoom=e,this.onSetMapZoom(e,t),this.didSetMapZoom(e,t))},t.prototype.willSetMapZoom=function(e,t){this.didObserve((function(i){void 0!==i.viewWillSetMapZoom&&i.viewWillSetMapZoom(e,t,this)}))},t.prototype.onSetMapZoom=function(e,t){},t.prototype.didSetMapZoom=function(e,t){this.didObserve((function(i){void 0!==i.viewDidSetMapZoom&&i.viewDidSetMapZoom(e,t,this)}))},Object.defineProperty(t.prototype,"mapHeading",{get:function(){return this._mapHeading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapTilt",{get:function(){return this._mapTilt},enumerable:!1,configurable:!0}),t.prototype.cascadeProcess=function(t,i){i=this.mapViewContext(i),e.prototype.cascadeProcess.call(this,t,i)},t.prototype.cascadeDisplay=function(t,i){i=this.mapViewContext(i),e.prototype.cascadeDisplay.call(this,t,i)},t.prototype.childViewContext=function(e,t){return t},t.prototype.mapViewContext=function(e){var t=Object.create(e);return t.geoProjection=this._geoProjection,t.geoFrame=this.geoFrame,t.mapZoom=this._mapZoom,t.mapHeading=this._mapHeading,t.mapTilt=this._mapTilt,t},Object.defineProperty(t.prototype,"geoFrame",{get:function(){var e=this._map.getBounds(),t=e.getSouthWest(),i=e.getNorthEast();return new _(t.lng(),t.lat(),i.lng(),i.lat())},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(t,i,o){return o=this.mapViewContext(o),e.prototype.hitTest.call(this,t,i,o)},t.prototype.onMapRender=function(){this._mapHeading=this._map.getHeading(),this._mapTilt=this._map.getTilt(),this.setMapZoom(this._map.getZoom()),this.setGeoProjection(this._geoProjection)},t.prototype.overlayCanvas=function(){if(null!==this._parentView)return this.canvasView;var e=new(function(e){function i(t){var i=e.call(this)||this;return i._mapView=t,i._canvasView=null,i}return w(i,e),i.prototype.onAdd=function(){var e=this.getPanes(),i=t.materializeAncestors(e.overlayMouseTarget).parentView.parentView;this._canvasView=i.append("canvas"),this._canvasView.append(this._mapView)},i.prototype.onRemove=function(){null!==this._canvasView&&(this._canvasView.remove(),this._canvasView=null)},i.prototype.draw=function(){this._mapView.onMapRender()},i}(google.maps.OverlayView))(this);return e.setMap(this._map),this._mapOverlay=e,e._canvasView},t.materializeAncestors=function(e){var i=e.parentNode;return i instanceof HTMLElement&&!i.view&&t.materializeAncestors(i),r.View.fromNode(e)},t}(b),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.viewWillSetGeoProjection=function(e,t){},t.prototype.viewDidSetGeoProjection=function(e,t){},t.prototype.viewWillSetMapZoom=function(e,t,i){},t.prototype.viewDidSetMapZoom=function(e,t,i){},t}(j),L={webMercatorUtils:void 0,init:function(){void 0===L.webMercatorUtils&&window.require(["esri/geometry/support/webMercatorUtils"],(function(e){L.webMercatorUtils=e}))}},I=function(e){function t(){var t=e.call(this)||this;return L.init(),t}return w(t,e),Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.willSetGeoProjection=function(e){this.willObserve((function(t){void 0!==t.viewWillSetGeoProjection&&t.viewWillSetGeoProjection(e,this)}))},t.prototype.onSetGeoProjection=function(e){this.isHidden()||this.isCulled()||this.requireUpdate(r.View.NeedsProject,!1)},t.prototype.didSetGeoProjection=function(e){this.didObserve((function(t){void 0!==t.viewDidSetGeoProjection&&t.viewDidSetGeoProjection(e,this)}))},t.prototype.willSetMapZoom=function(e,t){this.didObserve((function(i){void 0!==i.viewWillSetMapZoom&&i.viewWillSetMapZoom(e,t,this)}))},t.prototype.onSetMapZoom=function(e,t){},t.prototype.didSetMapZoom=function(e,t){this.didObserve((function(i){void 0!==i.viewDidSetMapZoom&&i.viewDidSetMapZoom(e,t,this)}))},t.prototype.cascadeProcess=function(t,i){i=this.mapViewContext(i),e.prototype.cascadeProcess.call(this,t,i)},t.prototype.cascadeDisplay=function(t,i){i=this.mapViewContext(i),e.prototype.cascadeDisplay.call(this,t,i)},t.prototype.childViewContext=function(e,t){return t},t.prototype.mapViewContext=function(e){var t=Object.create(e);return t.geoProjection=this.geoProjection,t.geoFrame=this.geoFrame,t.mapZoom=this.mapZoom,t.mapHeading=this.mapHeading,t.mapTilt=this.mapTilt,t},t.prototype.hitTest=function(t,i,o){return o=this.mapViewContext(o),e.prototype.hitTest.call(this,t,i,o)},t}(b),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.viewWillSetGeoProjection=function(e,t){},t.prototype.viewDidSetGeoProjection=function(e,t){},t.prototype.viewWillSetMapZoom=function(e,t,i){},t.prototype.viewDidSetMapZoom=function(e,t,i){},t}(j),q=function(){function e(e){L.init(),this._map=e}return Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var e=this._map.extent;return null!==e&&(e=L.webMercatorUtils.webMercatorToGeographic(e)),null!==e?new _(e.xmin,e.ymin,e.xmax,e.ymax):_.globe()},enumerable:!1,configurable:!0}),e.prototype.project=function(e,t){var i;i="number"==typeof e?{x:e,y:t,spatialReference:{wkid:4326}}:Array.isArray(e)?{x:e[0],y:e[1],spatialReference:{wkid:4326}}:{x:e.lng,y:e.lat,spatialReference:{wkid:4326}};var o=this._map.toScreen(i);return null!==o?new n.PointR2(o.x,o.y):n.PointR2.origin()},e.prototype.unproject=function(e,t){var i;i="number"==typeof e?{x:e,y:t}:Array.isArray(e)?{x:e[0],y:e[1]}:e;var o=this._map.toMap(i);return null!==o?new f(o.longitude,o.latitude):f.origin()},e}(),z=function(e){function t(t){var i=e.call(this)||this;return i.onMapRender=i.onMapRender.bind(i),i._map=t,i._geoProjection=new q(i._map),i._mapZoom=t.zoom,i._mapHeading=t.rotation,i.initMap(i._map),i}return w(t,e),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),t.prototype.initMap=function(e){e.watch("extent",this.onMapRender)},Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.project=function(e,t){return this._geoProjection.project.apply(this._geoProjection,arguments)},t.prototype.unproject=function(e,t){return this._geoProjection.unproject.apply(this._geoProjection,arguments)},Object.defineProperty(t.prototype,"geoProjection",{get:function(){return this._geoProjection},enumerable:!1,configurable:!0}),t.prototype.setGeoProjection=function(e){this.willSetGeoProjection(e),this._geoProjection=e,this.onSetGeoProjection(e),this.didSetGeoProjection(e)},Object.defineProperty(t.prototype,"mapZoom",{get:function(){return this._mapZoom},enumerable:!1,configurable:!0}),t.prototype.setMapZoom=function(e){var t=this._mapZoom;t!==e&&(this.willSetMapZoom(e,t),this._mapZoom=e,this.onSetMapZoom(e,t),this.didSetMapZoom(e,t))},Object.defineProperty(t.prototype,"mapHeading",{get:function(){return this._mapHeading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapTilt",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoFrame",{get:function(){var e=this._map.extent;return null!==e&&(e=L.webMercatorUtils.webMercatorToGeographic(e)),null!==e?new _(e.xmin,e.ymin,e.xmax,e.ymax):_.globe()},enumerable:!1,configurable:!0}),t.prototype.onMapRender=function(){this._mapHeading=this._map.rotation,this.setMapZoom(this._map.zoom),this.setGeoProjection(this._geoProjection)},t.prototype.overlayCanvas=function(){if(null!==this._parentView)return this.canvasView;var e=this._map,t=r.View.fromNode(e.container),i=r.View.fromNode(t.node.querySelector(".esri-view-root")),o=r.View.fromNode(i.node.querySelector(".esri-overlay-surface")).append("canvas");return o.setEventSurface(i.node),o.append(this),o},t}(I),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.viewWillSetGeoProjection=function(e,t){},t.prototype.viewDidSetGeoProjection=function(e,t){},t}(U),Y=function(){function e(e){L.init(),this._map=e}return Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var e=this._map.extent;return null!==e&&(e=L.webMercatorUtils.webMercatorToGeographic(e)),null!==e?new _(e.xmin,e.ymin,e.xmax,e.ymax):_.globe()},enumerable:!1,configurable:!0}),e.prototype.project=function(e,t){var i;i="number"==typeof e?{x:e,y:t,spatialReference:{wkid:4326}}:Array.isArray(e)?{x:e[0],y:e[1],spatialReference:{wkid:4326}}:{x:e.lng,y:e.lat,spatialReference:{wkid:4326}};var o=this._map.toScreen(i);return null!==o?new n.PointR2(o.x,o.y):n.PointR2.origin()},e.prototype.unproject=function(e,t){var i;i="number"==typeof e?{x:e,y:t}:Array.isArray(e)?{x:e[0],y:e[1]}:e;var o=this._map.toMap(i);return null!==o?new f(o.longitude,o.latitude):f.origin()},e}(),K=function(e){function t(t){var i=e.call(this)||this;return i.onMapRender=i.onMapRender.bind(i),i._map=t,i._geoProjection=new Y(i._map),i._mapZoom=t.zoom,i._mapHeading=t.camera.heading,i._mapTilt=t.camera.tilt,i.initMap(i._map),i}return w(t,e),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),t.prototype.initMap=function(e){e.watch("extent",this.onMapRender)},Object.defineProperty(t.prototype,"viewController",{get:function(){return this._viewController},enumerable:!1,configurable:!0}),t.prototype.project=function(e,t){return this._geoProjection.project.apply(this._geoProjection,arguments)},t.prototype.unproject=function(e,t){return this._geoProjection.unproject.apply(this._geoProjection,arguments)},Object.defineProperty(t.prototype,"geoProjection",{get:function(){return this._geoProjection},enumerable:!1,configurable:!0}),t.prototype.setGeoProjection=function(e){this.willSetGeoProjection(e),this._geoProjection=e,this.onSetGeoProjection(e),this.didSetGeoProjection(e)},Object.defineProperty(t.prototype,"mapZoom",{get:function(){return this._mapZoom},enumerable:!1,configurable:!0}),t.prototype.setMapZoom=function(e){var t=this._mapZoom;t!==e&&(this.willSetMapZoom(e,t),this._mapZoom=e,this.onSetMapZoom(e,t),this.didSetMapZoom(e,t))},Object.defineProperty(t.prototype,"mapHeading",{get:function(){return this._mapHeading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mapTilt",{get:function(){return this._mapTilt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geoFrame",{get:function(){var e=this._map.extent;return null!==e&&(e=L.webMercatorUtils.webMercatorToGeographic(e)),null!==e?new _(e.xmin,e.ymin,e.xmax,e.ymax):_.globe()},enumerable:!1,configurable:!0}),t.prototype.onMapRender=function(){this._mapHeading=this._map.camera.heading,this._mapTilt=this._map.camera.tilt,this.setMapZoom(this._map.zoom),this.setGeoProjection(this._geoProjection)},t.prototype.overlayCanvas=function(){if(null!==this._parentView)return this.canvasView;var e=this._map,t=r.View.fromNode(e.container),i=r.View.fromNode(t.node.querySelector(".esri-view-root")),o=r.View.fromNode(i.node.querySelector(".esri-view-surface")).append("canvas");return o.append(this),o},t}(I),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.viewWillSetGeoProjection=function(e,t){},t.prototype.viewDidSetGeoProjection=function(e,t){},t}(U);e.CompositedMapView=C,e.EsriMapView=z,e.EsriMapViewController=X,e.EsriMapViewProjection=q,e.EsriProjection=L,e.EsriSceneView=K,e.EsriSceneViewController=J,e.EsriSceneViewProjection=Y,e.EsriView=I,e.EsriViewController=U,e.GeoBox=_,e.GeoPoint=f,e.GeoPointInterpolator=y,e.GeoProjection={is:function(e){if("object"==typeof e&&null!==e){var t=e;return"function"==typeof t.project&&"function"==typeof t.unproject}return!1}},e.GoogleMapProjection=k,e.GoogleMapView=H,e.GoogleMapViewController=Z,e.MapArcView=B,e.MapCircleView=A,e.MapGraphicsView=b,e.MapGraphicsViewController=j,e.MapGroupView=S,e.MapLayerView=V,e.MapLayerViewController=R,e.MapLineView=T,e.MapPointView=O,e.MapPolygonView=E,e.MapPolylineView=W,e.MapRasterView=x,e.MapRasterViewController=F,e.MapTile=P,e.MapView=M,e.MapboxProjection=D,e.MapboxView=N,e.MapboxViewController=G,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=swim-maps.min.js.map